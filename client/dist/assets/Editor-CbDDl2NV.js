var e=Object.defineProperty,t=(t,a,i)=>((t,a,i)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[a]=i)(t,"symbol"!=typeof a?a+"":a,i);import{j as a}from"./index-DFhdulld.js";import{b as i,R as o}from"./vendor-CnnDPxwB.js";import{Q as s,a as r,P as l,R as n}from"./quill.snow-9m3YVrDv.js";s.register("modules/resize",r);const d=s.import("blots/block/embed");class c extends d{static create(e){const t=super.create();return t.setAttribute("controls",""),t.setAttribute("src",e),t}static value(e){return e.getAttribute("src")}}c.blotName="audio",c.tagName="audio",c.className="ql-audio",s.register(c);class u extends i.Component{constructor(e){super(e),t(this,"handleChange",(e=>{this.setState({editorHtml:e}),this.props.onChange(e)})),t(this,"handleImageUpload",(()=>{const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","image/*"),e.click(),e.onchange=async()=>{var t;const a=e.files[0];if(a){const e=new FormData;e.append("file",a);try{const a=await fetch("/api/bank/upload/image",{method:"POST",body:e}),i=await a.json(),o=null==(t=this.reactQuillRef.current)?void 0:t.getEditor();if(o){const e=o.getSelection(!0);o.insertEmbed(e.index,"image",i.url),console.log(i)}}catch(i){console.error("Error uploading image:",i),alert("Gagal mengunggah gambar. Coba lagi.")}}}})),t(this,"handleAudioUpload",(()=>{const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","audio/*"),e.click(),e.onchange=async()=>{var t;const a=e.files[0];if(a){const e=new FormData;e.append("file",a);try{const a=await fetch("/api/bank/upload/audio",{method:"POST",body:e}),i=await a.json(),o=null==(t=this.reactQuillRef.current)?void 0:t.getEditor();if(o){const e=o.getSelection(!0);o.insertEmbed(e.index,"audio",i.url)}}catch(i){console.error("Error uploading audio:",i),alert("Gagal mengunggah audio. Coba lagi.")}}}})),this.state={editorHtml:e.value||""},this.reactQuillRef=o.createRef()}componentDidUpdate(e){e.value!==this.props.value&&this.setState({editorHtml:this.props.value})}render(){const{placeholder:e,height:t,classname:i}=this.props;return a.jsx("div",{className:"d-flex mb-2",style:{height:t},children:a.jsx(n,{ref:this.reactQuillRef,theme:"snow",value:this.state.editorHtml,onChange:this.handleChange,modules:u.modules(this.handleImageUpload,this.handleAudioUpload),formats:u.formats,placeholder:e,style:{width:"100%"},className:`react-quill border border-2 bg-white rounded ${i}`})})}}u.modules=(e,t)=>({toolbar:{container:[[{header:"1"},{header:"2"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","audio","video"],["clean"]],handlers:{image:e,audio:t}},clipboard:{matchVisual:!1},resize:{modules:["Resize"]}}),u.formats=["header","font","size","bold","italic","underline","strike","blockquote","list","indent","link","image","audio","video"],u.propTypes={placeholder:l.string,value:l.string,onChange:l.func.isRequired};export{u as E};
//# sourceMappingURL=Editor-CbDDl2NV.js.map
