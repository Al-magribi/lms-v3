import{h as e,k as a,j as s,V as t,l as n,m as l,d as i}from"./index-Co1WScRM.js";import{b as r}from"./vendor-CpHG0K6b.js";import{L as d}from"./Layout-PxPEb2Rf.js";import{T as c}from"./Table-BwrxRiOQ.js";const o=()=>{const{data:n}=e({page:"",limit:"",search:""}),[l,{isSuccess:i,isLoading:d,error:c,reset:o}]=a(),[m,h]=r.useState({id:"",home:"",name:"",email:"",password:"",level:"",phone:""}),x=e=>{const{name:a,value:s}=e.target;h((e=>{return{...e,[a]:"phone"===a?(t=s,(null==t?void 0:t.startsWith("0"))?`62${t.slice(1)}`:t):s};var t}))};return r.useEffect((()=>{i&&(h({id:"",home:"",name:"",email:"",password:"",level:"",phone:""}),o()),c&&o()}),[i,c]),s.jsxs("form",{onSubmit:e=>{e.preventDefault();const a={...m,home:parseInt(m.home,10)};t.promise(l(a).unwrap().then((e=>e.message)),{loading:"Menyimpan Data...",success:e=>e,error:e=>e.data.message})},className:"d-flex flex-column gap-2 rounded p-2 shadow bg-white border ",children:[s.jsx("p",{className:"m-0 h6",children:"Administrator"}),s.jsxs("select",{name:"level",id:"level",className:"form-select",value:m.level,onChange:x,children:[s.jsx("option",{value:"",hidden:!0,children:"Pilih Level"}),s.jsx("option",{value:"center",children:"Pusat"}),s.jsx("option",{value:"admin",children:"Satuan"}),s.jsx("option",{value:"tahfiz",children:"Tahfiz"})]}),"center"!==m.level&&s.jsxs("select",{name:"home",id:"home",className:"form-select",value:m.home,onChange:x,children:[s.jsx("option",{value:"",hidden:!0,children:"Pilih Satuan"}),null==n?void 0:n.map((e=>s.jsx("option",{value:e.id,children:e.name},e.id)))]}),s.jsx("input",{type:"text",name:"name",id:"name",placeholder:"Username",className:"form-control",value:m.name||"",onChange:x,required:!0}),s.jsx("input",{type:"email",name:"email",id:"email",className:"form-control",placeholder:"Email",value:m.email||"",onChange:x,required:!0}),s.jsx("input",{type:"text",name:"phone",id:"phone",className:"form-control",placeholder:"Whatsapp",value:m.phone||"",onChange:x}),s.jsx("input",{type:"password",name:"password",id:"password",className:"form-control",placeholder:"Password",value:m.password||"",onChange:x,required:!0}),s.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[s.jsx("button",{type:"button",className:"btn btn-warning",onClick:()=>setDetail(""),children:"Batal"}),s.jsx("button",{type:"submit",className:"btn btn-success",disabled:d,children:"Simpan"})]})]})},m=()=>{const[e,a]=r.useState(1),[t,d]=r.useState(10),[o,m]=r.useState(""),{data:h={}}=n({page:e,limit:t,search:o}),{admin:x=[],totalData:p,totalPages:u}=h,[j,{isLoading:g,isSuccess:b,error:v,reset:N}]=l();return r.useEffect((()=>{b&&N(),v&&N()}),[b,v]),s.jsx(c,{page:e,setPage:a,setLimit:d,setSearch:m,totalData:p,totalPages:u,children:s.jsxs("table",{className:"table table-bordered table-striped table-hover",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("td",{className:"text-center",children:"No"}),s.jsx("td",{className:"text-center",children:"Satuan"}),s.jsx("td",{className:"text-center",children:"Nama"}),s.jsx("td",{className:"text-center",children:"Email"}),s.jsx("td",{className:"text-center",children:"Whatsapp"}),s.jsx("td",{className:"text-center",children:"Status"}),s.jsx("td",{className:"text-center",children:"Aksi"})]})}),s.jsx("tbody",{children:null==x?void 0:x.map(((a,n)=>s.jsxs("tr",{children:[s.jsx("td",{className:"align-middle text-center",children:(e-1)*t+n+1}),s.jsx("td",{className:"align-middle text-center",children:a.homebase?a.homebase:"Pusat"}),s.jsx("td",{className:"align-middle",children:a.username}),s.jsx("td",{className:"align-middle text-center",children:a.email}),s.jsx("td",{className:"align-middle text-center",children:a.phone}),s.jsx("td",{className:"align-middle text-center",children:a.isactive?s.jsx("span",{className:"badge text-bg-success",children:"aktif"}):s.jsx("span",{className:"badge text-bg-danger",children:"non-aktif"})}),s.jsx("td",{className:"align-middle text-center",children:s.jsx("div",{className:"d-flex justify-content-center gap-2",children:s.jsxs("div",{className:"d-flex gap-2 justify-content-center",children:[s.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>(e=>{const a=`${window.location.origin}/aktivasi-akun/${e}`;navigator.clipboard.writeText(a).then((()=>i.success("Berhasil di copy")))})(a.activation),children:s.jsx("i",{className:"bi bi-link-45deg"})}),s.jsx("button",{className:"btn btn-sm btn-danger",disabled:g,onClick:()=>{return e=a.id,void i.promise(j(e).unwrap().then((e=>e.message)),{loading:"Memproses...",success:e=>e,error:e=>e.data.message});var e},children:s.jsx("i",{className:"bi bi-folder-minus"})})]})})})]},n)))})]})})},h=()=>s.jsx(d,{title:"Administrator",levels:["center"],children:s.jsxs("div",{className:"row g-2",children:[s.jsx("div",{className:"col-lg-3 col-12",children:s.jsx(o,{})}),s.jsx("div",{className:"col-lg-9 col-12",children:s.jsx(m,{})})]})});export{h as default};
//# sourceMappingURL=CenterAdmin-CuoyNS9S.js.map
