import{bf as e,j as a,d as s,bg as t,bh as l,V as r,bi as n,ba as i}from"./index-CNbAajcm.js";import{b as d}from"./vendor-BYWiIb5-.js";import{L as c}from"./Layout-_SAc74nU.js";import{S as o}from"./react-select.esm-4h58l94a.js";import"./index-C-OX0RB-.js";import"./index-DLmIb9aI.js";const m=({grades:t,juz:l})=>{const[r,{isLoading:n,isSuccess:i,isError:c,reset:m}]=e(),[h,x]=d.useState({grade_id:"",juz_ids:[]});d.useEffect((()=>{(c||i)&&(m(),x({id:"",grade_id:"",juz_ids:[]}))}),[i,c]);const j=(null==l?void 0:l.map((e=>({value:e.id,label:e.name}))))||[];return a.jsxs("form",{onSubmit:e=>{e.preventDefault();const a=h.juz_ids.map((e=>({id:h.id,gradeId:h.grade_id,juzId:e.value}))).map((e=>r(e).unwrap().then((e=>e.message))));s.promise(Promise.all(a),{loading:"Memuat data...",success:e=>e[0],error:e=>e.data.message})},className:"rounded border bg-white p-2 d-flex flex-column gap-2",children:[a.jsx("p",{className:"m-0 h6",children:"Target Hafalan Bedasarkan Juz"}),a.jsxs("select",{className:"form-select",value:h.grade_id,onChange:e=>x({...h,grade_id:e.target.value}),children:[a.jsx("option",{value:"",hidden:!0,children:"Pilih Tingkat"}),null==t?void 0:t.map((e=>a.jsx("option",{value:e.id,children:e.name},e.id)))]}),a.jsx(o,{isMulti:!0,options:j,value:h.juz_ids,onChange:e=>{x((a=>({...a,juz_ids:e||[]})))},className:"mb-2",placeholder:"Pilih Juz"}),a.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[a.jsx("button",{type:"button",className:"btn btn-sm  btn-warning",onClick:()=>{x({id:"",grade_id:"",juz_ids:[]})},children:"Batal"}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-success",disabled:n,children:"Simpan"})]})]})},h=()=>{const{data:e}=t(),[s,{isLoading:n,isError:i,isSuccess:c}]=l();return a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"mb-0 table table-bordered table-hover",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-center",children:"Tingkat"}),a.jsx("th",{className:"text-center",children:"Juz"}),a.jsx("th",{className:"text-center",children:"Ayat"}),a.jsx("th",{className:"text-center",children:"Baris"}),a.jsx("th",{className:"text-center",children:"Aksi"}),a.jsx("th",{className:"text-center",children:"Total Ayat"}),a.jsx("th",{className:"text-center",children:"Total Baris"})]})}),a.jsx("tbody",{children:(null==e?void 0:e.length)>0?null==e?void 0:e.map(((e,t)=>a.jsx(d.Fragment,{children:e.target.map(((t,l)=>a.jsxs("tr",{children:[0===l&&a.jsx("th",{rowSpan:e.target.length,className:"text-center align-middle",children:e.grade}),a.jsx("td",{className:"text-center",children:t.juz}),a.jsx("td",{className:"text-center",children:t.total_ayat}),a.jsx("td",{className:"text-center",children:t.total_line}),a.jsx("td",{className:"text-center",children:a.jsx("div",{className:"d-flex justify-content-center gap-2",children:a.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>{return e=t.target_id,void r.promise(s(e).unwrap().then((e=>e.message)),{loading:"Menghapus target...",success:e=>e,error:e=>e.data.message});var e},children:a.jsx("i",{className:"bi bi-trash"})})})}),0===l&&a.jsx("td",{rowSpan:e.target.length,className:"text-center align-middle",children:e.total_ayat}),0===l&&a.jsx("td",{rowSpan:e.target.length,className:"text-center align-middle",children:e.total_line})]},l)))},t))):a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"text-center",children:"Tidak ada data tersedia"})})})]})})},x=()=>{const{data:e}=n(),{data:s}=i({page:"",limit:"",search:""});return a.jsx(c,{title:"Target Hafalan",levels:["tahfiz"],children:a.jsxs("div",{className:"row g-2",children:[a.jsx("div",{className:"col-lg-3 col-12",children:a.jsx(m,{grades:e,juz:s})}),a.jsx("div",{className:"col-lg-9 col-12",children:a.jsx(h,{})})]})})};export{x as default};
//# sourceMappingURL=TahfizTarget-Csszs-93.js.map
