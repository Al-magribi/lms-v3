var na=Object.defineProperty;var ra=(r,t,e)=>t in r?na(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var I=(r,t,e)=>ra(r,typeof t!="symbol"?t+"":t,e);import{aq as Br,aG as me,ax as Pt,r as Go,j as ji}from"./index-Bk0R0AbM.js";import{r as sa}from"./index-Chjiymov.js";var ia=sa();const Rs=Br(ia);var Vo=typeof global=="object"&&global&&global.Object===Object&&global,oa=typeof self=="object"&&self&&self.Object===Object&&self,ee=Vo||oa||Function("return this")(),Ee=ee.Symbol,Wo=Object.prototype,la=Wo.hasOwnProperty,aa=Wo.toString,Cn=Ee?Ee.toStringTag:void 0;function ca(r){var t=la.call(r,Cn),e=r[Cn];try{r[Cn]=void 0;var n=!0}catch{}var s=aa.call(r);return n&&(t?r[Cn]=e:delete r[Cn]),s}var ua=Object.prototype,ha=ua.toString;function fa(r){return ha.call(r)}var da="[object Null]",pa="[object Undefined]",$i=Ee?Ee.toStringTag:void 0;function fn(r){return r==null?r===void 0?pa:da:$i&&$i in Object(r)?ca(r):fa(r)}function le(r){return r!=null&&typeof r=="object"}var Oe=Array.isArray;function we(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}function Zo(r){return r}var ga="[object AsyncFunction]",ma="[object Function]",ba="[object GeneratorFunction]",ya="[object Proxy]";function bi(r){if(!we(r))return!1;var t=fn(r);return t==ma||t==ba||t==ga||t==ya}var ks=ee["__core-js_shared__"],Ui=function(){var r=/[^.]+$/.exec(ks&&ks.keys&&ks.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function va(r){return!!Ui&&Ui in r}var Ea=Function.prototype,wa=Ea.toString;function Re(r){if(r!=null){try{return wa.call(r)}catch{}try{return r+""}catch{}}return""}var Aa=/[\\^$.*+?()[\]{}|]/g,Ta=/^\[object .+?Constructor\]$/,Na=Function.prototype,xa=Object.prototype,La=Na.toString,Sa=xa.hasOwnProperty,_a=RegExp("^"+La.call(Sa).replace(Aa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ca(r){if(!we(r)||va(r))return!1;var t=bi(r)?_a:Ta;return t.test(Re(r))}function Oa(r,t){return r==null?void 0:r[t]}function ke(r,t){var e=Oa(r,t);return Ca(e)?e:void 0}var Ws=ke(ee,"WeakMap"),zi=Object.create,qa=function(){function r(){}return function(t){if(!we(t))return{};if(zi)return zi(t);r.prototype=t;var e=new r;return r.prototype=void 0,e}}();function Ia(r,t,e){switch(e.length){case 0:return r.call(t);case 1:return r.call(t,e[0]);case 2:return r.call(t,e[0],e[1]);case 3:return r.call(t,e[0],e[1],e[2])}return r.apply(t,e)}function Xo(r,t){var e=-1,n=r.length;for(t||(t=Array(n));++e<n;)t[e]=r[e];return t}var Ra=800,ka=16,Ba=Date.now;function Ma(r){var t=0,e=0;return function(){var n=Ba(),s=ka-(n-e);if(e=n,s>0){if(++t>=Ra)return arguments[0]}else t=0;return r.apply(void 0,arguments)}}function Pa(r){return function(){return r}}var qr=function(){try{var r=ke(Object,"defineProperty");return r({},"",{}),r}catch{}}(),Da=qr?function(r,t){return qr(r,"toString",{configurable:!0,enumerable:!1,value:Pa(t),writable:!0})}:Zo,ja=Ma(Da);function $a(r,t){for(var e=-1,n=r==null?0:r.length;++e<n&&t(r[e],e,r)!==!1;);return r}var Ua=9007199254740991,za=/^(?:0|[1-9]\d*)$/;function Yo(r,t){var e=typeof r;return t=t??Ua,!!t&&(e=="number"||e!="symbol"&&za.test(r))&&r>-1&&r%1==0&&r<t}function yi(r,t,e){t=="__proto__"&&qr?qr(r,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):r[t]=e}function Kn(r,t){return r===t||r!==r&&t!==t}var Fa=Object.prototype,Ha=Fa.hasOwnProperty;function Qo(r,t,e){var n=r[t];(!(Ha.call(r,t)&&Kn(n,e))||e===void 0&&!(t in r))&&yi(r,t,e)}function Gn(r,t,e,n){var s=!e;e||(e={});for(var i=-1,l=t.length;++i<l;){var a=t[i],u=void 0;u===void 0&&(u=r[a]),s?yi(e,a,u):Qo(e,a,u)}return e}var Fi=Math.max;function Ka(r,t,e){return t=Fi(t===void 0?r.length-1:t,0),function(){for(var n=arguments,s=-1,i=Fi(n.length-t,0),l=Array(i);++s<i;)l[s]=n[t+s];s=-1;for(var a=Array(t+1);++s<t;)a[s]=n[s];return a[t]=e(l),Ia(r,this,a)}}function Ga(r,t){return ja(Ka(r,t,Zo),r+"")}var Va=9007199254740991;function Jo(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Va}function Mr(r){return r!=null&&Jo(r.length)&&!bi(r)}function Wa(r,t,e){if(!we(e))return!1;var n=typeof t;return(n=="number"?Mr(e)&&Yo(t,e.length):n=="string"&&t in e)?Kn(e[t],r):!1}function Za(r){return Ga(function(t,e){var n=-1,s=e.length,i=s>1?e[s-1]:void 0,l=s>2?e[2]:void 0;for(i=r.length>3&&typeof i=="function"?(s--,i):void 0,l&&Wa(e[0],e[1],l)&&(i=s<3?void 0:i,s=1),t=Object(t);++n<s;){var a=e[n];a&&r(t,a,n,i)}return t})}var Xa=Object.prototype;function vi(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||Xa;return r===e}function Ya(r,t){for(var e=-1,n=Array(r);++e<r;)n[e]=t(e);return n}var Qa="[object Arguments]";function Hi(r){return le(r)&&fn(r)==Qa}var tl=Object.prototype,Ja=tl.hasOwnProperty,tc=tl.propertyIsEnumerable,Zs=Hi(function(){return arguments}())?Hi:function(r){return le(r)&&Ja.call(r,"callee")&&!tc.call(r,"callee")};function ec(){return!1}var el=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ki=el&&typeof module=="object"&&module&&!module.nodeType&&module,nc=Ki&&Ki.exports===el,Gi=nc?ee.Buffer:void 0,rc=Gi?Gi.isBuffer:void 0,Dn=rc||ec,sc="[object Arguments]",ic="[object Array]",oc="[object Boolean]",lc="[object Date]",ac="[object Error]",cc="[object Function]",uc="[object Map]",hc="[object Number]",fc="[object Object]",dc="[object RegExp]",pc="[object Set]",gc="[object String]",mc="[object WeakMap]",bc="[object ArrayBuffer]",yc="[object DataView]",vc="[object Float32Array]",Ec="[object Float64Array]",wc="[object Int8Array]",Ac="[object Int16Array]",Tc="[object Int32Array]",Nc="[object Uint8Array]",xc="[object Uint8ClampedArray]",Lc="[object Uint16Array]",Sc="[object Uint32Array]",ot={};ot[vc]=ot[Ec]=ot[wc]=ot[Ac]=ot[Tc]=ot[Nc]=ot[xc]=ot[Lc]=ot[Sc]=!0;ot[sc]=ot[ic]=ot[bc]=ot[oc]=ot[yc]=ot[lc]=ot[ac]=ot[cc]=ot[uc]=ot[hc]=ot[fc]=ot[dc]=ot[pc]=ot[gc]=ot[mc]=!1;function _c(r){return le(r)&&Jo(r.length)&&!!ot[fn(r)]}function Ei(r){return function(t){return r(t)}}var nl=typeof exports=="object"&&exports&&!exports.nodeType&&exports,kn=nl&&typeof module=="object"&&module&&!module.nodeType&&module,Cc=kn&&kn.exports===nl,Bs=Cc&&Vo.process,on=function(){try{var r=kn&&kn.require&&kn.require("util").types;return r||Bs&&Bs.binding&&Bs.binding("util")}catch{}}(),Vi=on&&on.isTypedArray,wi=Vi?Ei(Vi):_c,Oc=Object.prototype,qc=Oc.hasOwnProperty;function rl(r,t){var e=Oe(r),n=!e&&Zs(r),s=!e&&!n&&Dn(r),i=!e&&!n&&!s&&wi(r),l=e||n||s||i,a=l?Ya(r.length,String):[],u=a.length;for(var h in r)(t||qc.call(r,h))&&!(l&&(h=="length"||s&&(h=="offset"||h=="parent")||i&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||Yo(h,u)))&&a.push(h);return a}function sl(r,t){return function(e){return r(t(e))}}var Ic=sl(Object.keys,Object),Rc=Object.prototype,kc=Rc.hasOwnProperty;function Bc(r){if(!vi(r))return Ic(r);var t=[];for(var e in Object(r))kc.call(r,e)&&e!="constructor"&&t.push(e);return t}function Ai(r){return Mr(r)?rl(r):Bc(r)}function Mc(r){var t=[];if(r!=null)for(var e in Object(r))t.push(e);return t}var Pc=Object.prototype,Dc=Pc.hasOwnProperty;function jc(r){if(!we(r))return Mc(r);var t=vi(r),e=[];for(var n in r)n=="constructor"&&(t||!Dc.call(r,n))||e.push(n);return e}function Vn(r){return Mr(r)?rl(r,!0):jc(r)}var jn=ke(Object,"create");function $c(){this.__data__=jn?jn(null):{},this.size=0}function Uc(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t}var zc="__lodash_hash_undefined__",Fc=Object.prototype,Hc=Fc.hasOwnProperty;function Kc(r){var t=this.__data__;if(jn){var e=t[r];return e===zc?void 0:e}return Hc.call(t,r)?t[r]:void 0}var Gc=Object.prototype,Vc=Gc.hasOwnProperty;function Wc(r){var t=this.__data__;return jn?t[r]!==void 0:Vc.call(t,r)}var Zc="__lodash_hash_undefined__";function Xc(r,t){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=jn&&t===void 0?Zc:t,this}function qe(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}qe.prototype.clear=$c;qe.prototype.delete=Uc;qe.prototype.get=Kc;qe.prototype.has=Wc;qe.prototype.set=Xc;function Yc(){this.__data__=[],this.size=0}function Pr(r,t){for(var e=r.length;e--;)if(Kn(r[e][0],t))return e;return-1}var Qc=Array.prototype,Jc=Qc.splice;function tu(r){var t=this.__data__,e=Pr(t,r);if(e<0)return!1;var n=t.length-1;return e==n?t.pop():Jc.call(t,e,1),--this.size,!0}function eu(r){var t=this.__data__,e=Pr(t,r);return e<0?void 0:t[e][1]}function nu(r){return Pr(this.__data__,r)>-1}function ru(r,t){var e=this.__data__,n=Pr(e,r);return n<0?(++this.size,e.push([r,t])):e[n][1]=t,this}function ue(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}ue.prototype.clear=Yc;ue.prototype.delete=tu;ue.prototype.get=eu;ue.prototype.has=nu;ue.prototype.set=ru;var $n=ke(ee,"Map");function su(){this.size=0,this.__data__={hash:new qe,map:new($n||ue),string:new qe}}function iu(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}function Dr(r,t){var e=r.__data__;return iu(t)?e[typeof t=="string"?"string":"hash"]:e.map}function ou(r){var t=Dr(this,r).delete(r);return this.size-=t?1:0,t}function lu(r){return Dr(this,r).get(r)}function au(r){return Dr(this,r).has(r)}function cu(r,t){var e=Dr(this,r),n=e.size;return e.set(r,t),this.size+=e.size==n?0:1,this}function Be(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}Be.prototype.clear=su;Be.prototype.delete=ou;Be.prototype.get=lu;Be.prototype.has=au;Be.prototype.set=cu;function il(r,t){for(var e=-1,n=t.length,s=r.length;++e<n;)r[s+e]=t[e];return r}var Ti=sl(Object.getPrototypeOf,Object),uu="[object Object]",hu=Function.prototype,fu=Object.prototype,ol=hu.toString,du=fu.hasOwnProperty,pu=ol.call(Object);function gu(r){if(!le(r)||fn(r)!=uu)return!1;var t=Ti(r);if(t===null)return!0;var e=du.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&ol.call(e)==pu}function mu(){this.__data__=new ue,this.size=0}function bu(r){var t=this.__data__,e=t.delete(r);return this.size=t.size,e}function yu(r){return this.__data__.get(r)}function vu(r){return this.__data__.has(r)}var Eu=200;function wu(r,t){var e=this.__data__;if(e instanceof ue){var n=e.__data__;if(!$n||n.length<Eu-1)return n.push([r,t]),this.size=++e.size,this;e=this.__data__=new Be(n)}return e.set(r,t),this.size=e.size,this}function Yt(r){var t=this.__data__=new ue(r);this.size=t.size}Yt.prototype.clear=mu;Yt.prototype.delete=bu;Yt.prototype.get=yu;Yt.prototype.has=vu;Yt.prototype.set=wu;function Au(r,t){return r&&Gn(t,Ai(t),r)}function Tu(r,t){return r&&Gn(t,Vn(t),r)}var ll=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Wi=ll&&typeof module=="object"&&module&&!module.nodeType&&module,Nu=Wi&&Wi.exports===ll,Zi=Nu?ee.Buffer:void 0,Xi=Zi?Zi.allocUnsafe:void 0;function al(r,t){if(t)return r.slice();var e=r.length,n=Xi?Xi(e):new r.constructor(e);return r.copy(n),n}function xu(r,t){for(var e=-1,n=r==null?0:r.length,s=0,i=[];++e<n;){var l=r[e];t(l,e,r)&&(i[s++]=l)}return i}function cl(){return[]}var Lu=Object.prototype,Su=Lu.propertyIsEnumerable,Yi=Object.getOwnPropertySymbols,Ni=Yi?function(r){return r==null?[]:(r=Object(r),xu(Yi(r),function(t){return Su.call(r,t)}))}:cl;function _u(r,t){return Gn(r,Ni(r),t)}var Cu=Object.getOwnPropertySymbols,ul=Cu?function(r){for(var t=[];r;)il(t,Ni(r)),r=Ti(r);return t}:cl;function Ou(r,t){return Gn(r,ul(r),t)}function hl(r,t,e){var n=t(r);return Oe(r)?n:il(n,e(r))}function Xs(r){return hl(r,Ai,Ni)}function qu(r){return hl(r,Vn,ul)}var Ys=ke(ee,"DataView"),Qs=ke(ee,"Promise"),Js=ke(ee,"Set"),Qi="[object Map]",Iu="[object Object]",Ji="[object Promise]",to="[object Set]",eo="[object WeakMap]",no="[object DataView]",Ru=Re(Ys),ku=Re($n),Bu=Re(Qs),Mu=Re(Js),Pu=Re(Ws),jt=fn;(Ys&&jt(new Ys(new ArrayBuffer(1)))!=no||$n&&jt(new $n)!=Qi||Qs&&jt(Qs.resolve())!=Ji||Js&&jt(new Js)!=to||Ws&&jt(new Ws)!=eo)&&(jt=function(r){var t=fn(r),e=t==Iu?r.constructor:void 0,n=e?Re(e):"";if(n)switch(n){case Ru:return no;case ku:return Qi;case Bu:return Ji;case Mu:return to;case Pu:return eo}return t});var Du=Object.prototype,ju=Du.hasOwnProperty;function $u(r){var t=r.length,e=new r.constructor(t);return t&&typeof r[0]=="string"&&ju.call(r,"index")&&(e.index=r.index,e.input=r.input),e}var Ir=ee.Uint8Array;function xi(r){var t=new r.constructor(r.byteLength);return new Ir(t).set(new Ir(r)),t}function Uu(r,t){var e=t?xi(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.byteLength)}var zu=/\w*$/;function Fu(r){var t=new r.constructor(r.source,zu.exec(r));return t.lastIndex=r.lastIndex,t}var ro=Ee?Ee.prototype:void 0,so=ro?ro.valueOf:void 0;function Hu(r){return so?Object(so.call(r)):{}}function fl(r,t){var e=t?xi(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.length)}var Ku="[object Boolean]",Gu="[object Date]",Vu="[object Map]",Wu="[object Number]",Zu="[object RegExp]",Xu="[object Set]",Yu="[object String]",Qu="[object Symbol]",Ju="[object ArrayBuffer]",th="[object DataView]",eh="[object Float32Array]",nh="[object Float64Array]",rh="[object Int8Array]",sh="[object Int16Array]",ih="[object Int32Array]",oh="[object Uint8Array]",lh="[object Uint8ClampedArray]",ah="[object Uint16Array]",ch="[object Uint32Array]";function uh(r,t,e){var n=r.constructor;switch(t){case Ju:return xi(r);case Ku:case Gu:return new n(+r);case th:return Uu(r,e);case eh:case nh:case rh:case sh:case ih:case oh:case lh:case ah:case ch:return fl(r,e);case Vu:return new n;case Wu:case Yu:return new n(r);case Zu:return Fu(r);case Xu:return new n;case Qu:return Hu(r)}}function dl(r){return typeof r.constructor=="function"&&!vi(r)?qa(Ti(r)):{}}var hh="[object Map]";function fh(r){return le(r)&&jt(r)==hh}var io=on&&on.isMap,dh=io?Ei(io):fh,ph="[object Set]";function gh(r){return le(r)&&jt(r)==ph}var oo=on&&on.isSet,mh=oo?Ei(oo):gh,bh=1,yh=2,vh=4,pl="[object Arguments]",Eh="[object Array]",wh="[object Boolean]",Ah="[object Date]",Th="[object Error]",gl="[object Function]",Nh="[object GeneratorFunction]",xh="[object Map]",Lh="[object Number]",ml="[object Object]",Sh="[object RegExp]",_h="[object Set]",Ch="[object String]",Oh="[object Symbol]",qh="[object WeakMap]",Ih="[object ArrayBuffer]",Rh="[object DataView]",kh="[object Float32Array]",Bh="[object Float64Array]",Mh="[object Int8Array]",Ph="[object Int16Array]",Dh="[object Int32Array]",jh="[object Uint8Array]",$h="[object Uint8ClampedArray]",Uh="[object Uint16Array]",zh="[object Uint32Array]",st={};st[pl]=st[Eh]=st[Ih]=st[Rh]=st[wh]=st[Ah]=st[kh]=st[Bh]=st[Mh]=st[Ph]=st[Dh]=st[xh]=st[Lh]=st[ml]=st[Sh]=st[_h]=st[Ch]=st[Oh]=st[jh]=st[$h]=st[Uh]=st[zh]=!0;st[Th]=st[gl]=st[qh]=!1;function Sr(r,t,e,n,s,i){var l,a=t&bh,u=t&yh,h=t&vh;if(l!==void 0)return l;if(!we(r))return r;var m=Oe(r);if(m){if(l=$u(r),!a)return Xo(r,l)}else{var E=jt(r),f=E==gl||E==Nh;if(Dn(r))return al(r,a);if(E==ml||E==pl||f&&!s){if(l=u||f?{}:dl(r),!a)return u?Ou(r,Tu(l,r)):_u(r,Au(l,r))}else{if(!st[E])return s?r:{};l=uh(r,E,a)}}i||(i=new Yt);var y=i.get(r);if(y)return y;i.set(r,l),mh(r)?r.forEach(function(v){l.add(Sr(v,t,e,v,r,i))}):dh(r)&&r.forEach(function(v,A){l.set(A,Sr(v,t,e,A,r,i))});var g=h?u?qu:Xs:u?Vn:Ai,b=m?void 0:g(r);return $a(b||r,function(v,A){b&&(A=v,v=r[A]),Qo(l,A,Sr(v,t,e,A,r,i))}),l}var Fh=1,Hh=4;function nn(r){return Sr(r,Fh|Hh)}var Kh="__lodash_hash_undefined__";function Gh(r){return this.__data__.set(r,Kh),this}function Vh(r){return this.__data__.has(r)}function Rr(r){var t=-1,e=r==null?0:r.length;for(this.__data__=new Be;++t<e;)this.add(r[t])}Rr.prototype.add=Rr.prototype.push=Gh;Rr.prototype.has=Vh;function Wh(r,t){for(var e=-1,n=r==null?0:r.length;++e<n;)if(t(r[e],e,r))return!0;return!1}function Zh(r,t){return r.has(t)}var Xh=1,Yh=2;function bl(r,t,e,n,s,i){var l=e&Xh,a=r.length,u=t.length;if(a!=u&&!(l&&u>a))return!1;var h=i.get(r),m=i.get(t);if(h&&m)return h==t&&m==r;var E=-1,f=!0,y=e&Yh?new Rr:void 0;for(i.set(r,t),i.set(t,r);++E<a;){var g=r[E],b=t[E];if(n)var v=l?n(b,g,E,t,r,i):n(g,b,E,r,t,i);if(v!==void 0){if(v)continue;f=!1;break}if(y){if(!Wh(t,function(A,x){if(!Zh(y,x)&&(g===A||s(g,A,e,n,i)))return y.push(x)})){f=!1;break}}else if(!(g===b||s(g,b,e,n,i))){f=!1;break}}return i.delete(r),i.delete(t),f}function Qh(r){var t=-1,e=Array(r.size);return r.forEach(function(n,s){e[++t]=[s,n]}),e}function Jh(r){var t=-1,e=Array(r.size);return r.forEach(function(n){e[++t]=n}),e}var tf=1,ef=2,nf="[object Boolean]",rf="[object Date]",sf="[object Error]",of="[object Map]",lf="[object Number]",af="[object RegExp]",cf="[object Set]",uf="[object String]",hf="[object Symbol]",ff="[object ArrayBuffer]",df="[object DataView]",lo=Ee?Ee.prototype:void 0,Ms=lo?lo.valueOf:void 0;function pf(r,t,e,n,s,i,l){switch(e){case df:if(r.byteLength!=t.byteLength||r.byteOffset!=t.byteOffset)return!1;r=r.buffer,t=t.buffer;case ff:return!(r.byteLength!=t.byteLength||!i(new Ir(r),new Ir(t)));case nf:case rf:case lf:return Kn(+r,+t);case sf:return r.name==t.name&&r.message==t.message;case af:case uf:return r==t+"";case of:var a=Qh;case cf:var u=n&tf;if(a||(a=Jh),r.size!=t.size&&!u)return!1;var h=l.get(r);if(h)return h==t;n|=ef,l.set(r,t);var m=bl(a(r),a(t),n,s,i,l);return l.delete(r),m;case hf:if(Ms)return Ms.call(r)==Ms.call(t)}return!1}var gf=1,mf=Object.prototype,bf=mf.hasOwnProperty;function yf(r,t,e,n,s,i){var l=e&gf,a=Xs(r),u=a.length,h=Xs(t),m=h.length;if(u!=m&&!l)return!1;for(var E=u;E--;){var f=a[E];if(!(l?f in t:bf.call(t,f)))return!1}var y=i.get(r),g=i.get(t);if(y&&g)return y==t&&g==r;var b=!0;i.set(r,t),i.set(t,r);for(var v=l;++E<u;){f=a[E];var A=r[f],x=t[f];if(n)var C=l?n(x,A,f,t,r,i):n(A,x,f,r,t,i);if(!(C===void 0?A===x||s(A,x,e,n,i):C)){b=!1;break}v||(v=f=="constructor")}if(b&&!v){var U=r.constructor,B=t.constructor;U!=B&&"constructor"in r&&"constructor"in t&&!(typeof U=="function"&&U instanceof U&&typeof B=="function"&&B instanceof B)&&(b=!1)}return i.delete(r),i.delete(t),b}var vf=1,ao="[object Arguments]",co="[object Array]",br="[object Object]",Ef=Object.prototype,uo=Ef.hasOwnProperty;function wf(r,t,e,n,s,i){var l=Oe(r),a=Oe(t),u=l?co:jt(r),h=a?co:jt(t);u=u==ao?br:u,h=h==ao?br:h;var m=u==br,E=h==br,f=u==h;if(f&&Dn(r)){if(!Dn(t))return!1;l=!0,m=!1}if(f&&!m)return i||(i=new Yt),l||wi(r)?bl(r,t,e,n,s,i):pf(r,t,u,e,n,s,i);if(!(e&vf)){var y=m&&uo.call(r,"__wrapped__"),g=E&&uo.call(t,"__wrapped__");if(y||g){var b=y?r.value():r,v=g?t.value():t;return i||(i=new Yt),s(b,v,e,n,i)}}return f?(i||(i=new Yt),yf(r,t,e,n,s,i)):!1}function yl(r,t,e,n,s){return r===t?!0:r==null||t==null||!le(r)&&!le(t)?r!==r&&t!==t:wf(r,t,e,n,yl,s)}function Af(r){return function(t,e,n){for(var s=-1,i=Object(t),l=n(t),a=l.length;a--;){var u=l[++s];if(e(i[u],u,i)===!1)break}return t}}var Tf=Af();function ti(r,t,e){(e!==void 0&&!Kn(r[t],e)||e===void 0&&!(t in r))&&yi(r,t,e)}function Nf(r){return le(r)&&Mr(r)}function ei(r,t){if(!(t==="constructor"&&typeof r[t]=="function")&&t!="__proto__")return r[t]}function xf(r){return Gn(r,Vn(r))}function Lf(r,t,e,n,s,i,l){var a=ei(r,e),u=ei(t,e),h=l.get(u);if(h){ti(r,e,h);return}var m=i?i(a,u,e+"",r,t,l):void 0,E=m===void 0;if(E){var f=Oe(u),y=!f&&Dn(u),g=!f&&!y&&wi(u);m=u,f||y||g?Oe(a)?m=a:Nf(a)?m=Xo(a):y?(E=!1,m=al(u,!0)):g?(E=!1,m=fl(u,!0)):m=[]:gu(u)||Zs(u)?(m=a,Zs(a)?m=xf(a):(!we(a)||bi(a))&&(m=dl(u))):E=!1}E&&(l.set(u,m),s(m,u,n,i,l),l.delete(u)),ti(r,e,m)}function vl(r,t,e,n,s){r!==t&&Tf(t,function(i,l){if(s||(s=new Yt),we(i))Lf(r,t,l,e,vl,n,s);else{var a=n?n(ei(r,l),i,l+"",r,t,s):void 0;a===void 0&&(a=i),ti(r,l,a)}},Vn)}function ge(r,t){return yl(r,t)}var ve=Za(function(r,t,e){vl(r,t,e)}),D=(r=>(r[r.TYPE=3]="TYPE",r[r.LEVEL=12]="LEVEL",r[r.ATTRIBUTE=13]="ATTRIBUTE",r[r.BLOT=14]="BLOT",r[r.INLINE=7]="INLINE",r[r.BLOCK=11]="BLOCK",r[r.BLOCK_BLOT=10]="BLOCK_BLOT",r[r.INLINE_BLOT=6]="INLINE_BLOT",r[r.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",r[r.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",r[r.ANY=15]="ANY",r))(D||{});class Jt{constructor(t,e,n={}){this.attrName=t,this.keyName=e;const s=D.TYPE&D.ATTRIBUTE;this.scope=n.scope!=null?n.scope&D.LEVEL|s:D.ATTRIBUTE,n.whitelist!=null&&(this.whitelist=n.whitelist)}static keys(t){return Array.from(t.attributes).map(e=>e.name)}add(t,e){return this.canAdd(t,e)?(t.setAttribute(this.keyName,e),!0):!1}canAdd(t,e){return this.whitelist==null?!0:typeof e=="string"?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1}remove(t){t.removeAttribute(this.keyName)}value(t){const e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""}}class rn extends Error{constructor(t){t="[Parchment] "+t,super(t),this.message=t,this.name=this.constructor.name}}const El=class ni{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,e=!1){if(t==null)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(e){let n=null;try{n=t.parentNode}catch{return null}return this.find(n,e)}return null}create(t,e,n){const s=this.query(e);if(s==null)throw new rn(`Unable to create ${e} blot`);const i=s,l=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:i.create(n),a=new i(t,l,n);return ni.blots.set(a.domNode,a),a}find(t,e=!1){return ni.find(t,e)}query(t,e=D.ANY){let n;return typeof t=="string"?n=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?n=this.types.text:typeof t=="number"?t&D.LEVEL&D.BLOCK?n=this.types.block:t&D.LEVEL&D.INLINE&&(n=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some(s=>(n=this.classes[s],!!n)),n=n||this.tags[t.tagName]),n==null?null:"scope"in n&&e&D.LEVEL&n.scope&&e&D.TYPE&n.scope?n:null}register(...t){return t.map(e=>{const n="blotName"in e,s="attrName"in e;if(!n&&!s)throw new rn("Invalid definition");if(n&&e.blotName==="abstract")throw new rn("Cannot register abstract class");const i=n?e.blotName:s?e.attrName:void 0;return this.types[i]=e,s?typeof e.keyName=="string"&&(this.attributes[e.keyName]=e):n&&(e.className&&(this.classes[e.className]=e),e.tagName&&(Array.isArray(e.tagName)?e.tagName=e.tagName.map(l=>l.toUpperCase()):e.tagName=e.tagName.toUpperCase(),(Array.isArray(e.tagName)?e.tagName:[e.tagName]).forEach(l=>{(this.tags[l]==null||e.className==null)&&(this.tags[l]=e)}))),e})}};El.blots=new WeakMap;let ln=El;function ho(r,t){return(r.getAttribute("class")||"").split(/\s+/).filter(e=>e.indexOf(`${t}-`)===0)}class Sf extends Jt{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map(e=>e.split("-").slice(0,-1).join("-"))}add(t,e){return this.canAdd(t,e)?(this.remove(t),t.classList.add(`${this.keyName}-${e}`),!0):!1}remove(t){ho(t,this.keyName).forEach(e=>{t.classList.remove(e)}),t.classList.length===0&&t.removeAttribute("class")}value(t){const e=(ho(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""}}const Ft=Sf;function Ps(r){const t=r.split("-"),e=t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("");return t[0]+e}class _f extends Jt{static keys(t){return(t.getAttribute("style")||"").split(";").map(e=>e.split(":")[0].trim())}add(t,e){return this.canAdd(t,e)?(t.style[Ps(this.keyName)]=e,!0):!1}remove(t){t.style[Ps(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const e=t.style[Ps(this.keyName)];return this.canAdd(t,e)?e:""}}const Ae=_f;class Cf{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,e){e?t.add(this.domNode,e)&&(t.value(this.domNode)!=null?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=ln.find(this.domNode);if(t==null)return;const e=Jt.keys(this.domNode),n=Ft.keys(this.domNode),s=Ae.keys(this.domNode);e.concat(n).concat(s).forEach(i=>{const l=t.scroll.query(i,D.ATTRIBUTE);l instanceof Jt&&(this.attributes[l.attrName]=l)})}copy(t){Object.keys(this.attributes).forEach(e=>{const n=this.attributes[e].value(this.domNode);t.format(e,n)})}move(t){this.copy(t),Object.keys(this.attributes).forEach(e=>{this.attributes[e].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((t,e)=>(t[e]=this.attributes[e].value(this.domNode),t),{})}}const jr=Cf,wl=class{constructor(t,e){this.scroll=t,this.domNode=e,ln.blots.set(e,this),this.prev=null,this.next=null}static create(t){if(this.tagName==null)throw new rn("Blot definition missing tagName");let e,n;return Array.isArray(this.tagName)?(typeof t=="string"?(n=t.toUpperCase(),parseInt(n,10).toString()===n&&(n=parseInt(n,10))):typeof t=="number"&&(n=t),typeof n=="number"?e=document.createElement(this.tagName[n-1]):n&&this.tagName.indexOf(n)>-1?e=document.createElement(n):e=document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){const t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){this.parent!=null&&this.parent.removeChild(this),ln.blots.delete(this.domNode)}deleteAt(t,e){this.isolate(t,e).remove()}formatAt(t,e,n,s){const i=this.isolate(t,e);if(this.scroll.query(n,D.BLOT)!=null&&s)i.wrap(n,s);else if(this.scroll.query(n,D.ATTRIBUTE)!=null){const l=this.scroll.create(this.statics.scope);i.wrap(l),l.format(n,s)}}insertAt(t,e,n){const s=n==null?this.scroll.create("text",e):this.scroll.create(e,n),i=this.split(t);this.parent.insertBefore(s,i||void 0)}isolate(t,e){const n=this.split(t);if(n==null)throw new Error("Attempt to isolate at end");return n.split(e),n}length(){return 1}offset(t=this.parent){return this.parent==null||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,e){const n=typeof t=="string"?this.scroll.create(t,e):t;return this.parent!=null&&(this.parent.insertBefore(n,this.next||void 0),this.remove()),n}split(t,e){return t===0?this:this.next}update(t,e){}wrap(t,e){const n=typeof t=="string"?this.scroll.create(t,e):t;if(this.parent!=null&&this.parent.insertBefore(n,this.next||void 0),typeof n.appendChild!="function")throw new rn(`Cannot wrap ${t}`);return n.appendChild(this),n}};wl.blotName="abstract";let Al=wl;const Tl=class extends Al{static value(t){return!0}index(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(t,e){let n=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(n+=1),[this.parent.domNode,n]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};Tl.scope=D.INLINE_BLOT;let Of=Tl;const Et=Of;class qf{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const e=t.slice(1);this.append(...e)}}at(t){const e=this.iterator();let n=e();for(;n&&t>0;)t-=1,n=e();return n}contains(t){const e=this.iterator();let n=e();for(;n;){if(n===t)return!0;n=e()}return!1}indexOf(t){const e=this.iterator();let n=e(),s=0;for(;n;){if(n===t)return s;s+=1,n=e()}return-1}insertBefore(t,e){t!=null&&(this.remove(t),t.next=e,e!=null?(t.prev=e.prev,e.prev!=null&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):this.tail!=null?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let e=0,n=this.head;for(;n!=null;){if(n===t)return e;e+=n.length(),n=n.next}return-1}remove(t){this.contains(t)&&(t.prev!=null&&(t.prev.next=t.next),t.next!=null&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const e=t;return t!=null&&(t=t.next),e}}find(t,e=!1){const n=this.iterator();let s=n();for(;s;){const i=s.length();if(t<i||e&&t===i&&(s.next==null||s.next.length()!==0))return[s,t];t-=i,s=n()}return[null,0]}forEach(t){const e=this.iterator();let n=e();for(;n;)t(n),n=e()}forEachAt(t,e,n){if(e<=0)return;const[s,i]=this.find(t);let l=t-i;const a=this.iterator(s);let u=a();for(;u&&l<t+e;){const h=u.length();t>l?n(u,t-l,Math.min(e,l+h-t)):n(u,0,Math.min(h,t+e-l)),l+=h,u=a()}}map(t){return this.reduce((e,n)=>(e.push(t(n)),e),[])}reduce(t,e){const n=this.iterator();let s=n();for(;s;)e=t(e,s),s=n();return e}}function fo(r,t){const e=t.find(r);if(e)return e;try{return t.create(r)}catch{const n=t.create(D.INLINE);return Array.from(r.childNodes).forEach(s=>{n.domNode.appendChild(s)}),r.parentNode&&r.parentNode.replaceChild(n.domNode,r),n.attach(),n}}const Nl=class pe extends Al{constructor(t,e){super(t,e),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach(t=>{t.attach()})}attachUI(t){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=t,pe.uiClass&&this.uiNode.classList.add(pe.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new qf,Array.from(this.domNode.childNodes).filter(t=>t!==this.uiNode).reverse().forEach(t=>{try{const e=fo(t,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(e){if(e instanceof rn)return;throw e}})}deleteAt(t,e){if(t===0&&e===this.length())return this.remove();this.children.forEachAt(t,e,(n,s,i)=>{n.deleteAt(s,i)})}descendant(t,e=0){const[n,s]=this.children.find(e);return t.blotName==null&&t(n)||t.blotName!=null&&n instanceof t?[n,s]:n instanceof pe?n.descendant(t,s):[null,-1]}descendants(t,e=0,n=Number.MAX_VALUE){let s=[],i=n;return this.children.forEachAt(e,n,(l,a,u)=>{(t.blotName==null&&t(l)||t.blotName!=null&&l instanceof t)&&s.push(l),l instanceof pe&&(s=s.concat(l.descendants(t,a,i))),i-=u}),s}detach(){this.children.forEach(t=>{t.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(e=>{t||this.statics.allowedChildren.some(n=>e instanceof n)||(e.statics.scope===D.BLOCK_BLOT?(e.next!=null&&this.splitAfter(e),e.prev!=null&&this.splitAfter(e.prev),e.parent.unwrap(),t=!0):e instanceof pe?e.unwrap():e.remove())})}formatAt(t,e,n,s){this.children.forEachAt(t,e,(i,l,a)=>{i.formatAt(l,a,n,s)})}insertAt(t,e,n){const[s,i]=this.children.find(t);if(s)s.insertAt(i,e,n);else{const l=n==null?this.scroll.create("text",e):this.scroll.create(e,n);this.appendChild(l)}}insertBefore(t,e){t.parent!=null&&t.parent.children.remove(t);let n=null;this.children.insertBefore(t,e||null),t.parent=this,e!=null&&(n=e.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==n)&&this.domNode.insertBefore(t.domNode,n),t.attach()}length(){return this.children.reduce((t,e)=>t+e.length(),0)}moveChildren(t,e){this.children.forEach(n=>{t.insertBefore(n,e)})}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const e=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(e)}else this.remove()}path(t,e=!1){const[n,s]=this.children.find(t,e),i=[[this,t]];return n instanceof pe?i.concat(n.path(s,e)):(n!=null&&i.push([n,s]),i)}removeChild(t){this.children.remove(t)}replaceWith(t,e){const n=typeof t=="string"?this.scroll.create(t,e):t;return n instanceof pe&&this.moveChildren(n),super.replaceWith(n)}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}const n=this.clone();return this.parent&&this.parent.insertBefore(n,this.next||void 0),this.children.forEachAt(t,this.length(),(s,i,l)=>{const a=s.split(i,e);a!=null&&n.appendChild(a)}),n}splitAfter(t){const e=this.clone();for(;t.next!=null;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,e){const n=[],s=[];t.forEach(i=>{i.target===this.domNode&&i.type==="childList"&&(n.push(...i.addedNodes),s.push(...i.removedNodes))}),s.forEach(i=>{if(i.parentNode!=null&&i.tagName!=="IFRAME"&&document.body.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const l=this.scroll.find(i);l!=null&&(l.domNode.parentNode==null||l.domNode.parentNode===this.domNode)&&l.detach()}),n.filter(i=>i.parentNode===this.domNode&&i!==this.uiNode).sort((i,l)=>i===l?0:i.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(i=>{let l=null;i.nextSibling!=null&&(l=this.scroll.find(i.nextSibling));const a=fo(i,this.scroll);(a.next!==l||a.next==null)&&(a.parent!=null&&a.parent.removeChild(this),this.insertBefore(a,l||void 0))}),this.enforceAllowedChildren()}};Nl.uiClass="";let If=Nl;const Ut=If;function Rf(r,t){if(Object.keys(r).length!==Object.keys(t).length)return!1;for(const e in r)if(r[e]!==t[e])return!1;return!0}const Xe=class Ye extends Ut{static create(t){return super.create(t)}static formats(t,e){const n=e.query(Ye.blotName);if(!(n!=null&&t.tagName===n.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new jr(this.domNode)}format(t,e){if(t===this.statics.blotName&&!e)this.children.forEach(n=>{n instanceof Ye||(n=n.wrap(Ye.blotName,!0)),this.attributes.copy(n)}),this.unwrap();else{const n=this.scroll.query(t,D.INLINE);if(n==null)return;n instanceof Jt?this.attributes.attribute(n,e):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e)}}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,n,s){this.formats()[n]!=null||this.scroll.query(n,D.ATTRIBUTE)?this.isolate(t,e).format(n,s):super.formatAt(t,e,n,s)}optimize(t){super.optimize(t);const e=this.formats();if(Object.keys(e).length===0)return this.unwrap();const n=this.next;n instanceof Ye&&n.prev===this&&Rf(e,n.formats())&&(n.moveChildren(this),n.remove())}replaceWith(t,e){const n=super.replaceWith(t,e);return this.attributes.copy(n),n}update(t,e){super.update(t,e),t.some(n=>n.target===this.domNode&&n.type==="attributes")&&this.attributes.build()}wrap(t,e){const n=super.wrap(t,e);return n instanceof Ye&&this.attributes.move(n),n}};Xe.allowedChildren=[Xe,Et],Xe.blotName="inline",Xe.scope=D.INLINE_BLOT,Xe.tagName="SPAN";let kf=Xe;const Li=kf,Qe=class ri extends Ut{static create(t){return super.create(t)}static formats(t,e){const n=e.query(ri.blotName);if(!(n!=null&&t.tagName===n.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new jr(this.domNode)}format(t,e){const n=this.scroll.query(t,D.BLOCK);n!=null&&(n instanceof Jt?this.attributes.attribute(n,e):t===this.statics.blotName&&!e?this.replaceWith(ri.blotName):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e))}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,n,s){this.scroll.query(n,D.BLOCK)!=null?this.format(n,s):super.formatAt(t,e,n,s)}insertAt(t,e,n){if(n==null||this.scroll.query(e,D.INLINE)!=null)super.insertAt(t,e,n);else{const s=this.split(t);if(s!=null){const i=this.scroll.create(e,n);s.parent.insertBefore(i,s)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(t,e){const n=super.replaceWith(t,e);return this.attributes.copy(n),n}update(t,e){super.update(t,e),t.some(n=>n.target===this.domNode&&n.type==="attributes")&&this.attributes.build()}};Qe.blotName="block",Qe.scope=D.BLOCK_BLOT,Qe.tagName="P",Qe.allowedChildren=[Li,Qe,Et];let Bf=Qe;const Un=Bf,si=class extends Ut{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,e){super.deleteAt(t,e),this.enforceAllowedChildren()}formatAt(t,e,n,s){super.formatAt(t,e,n,s),this.enforceAllowedChildren()}insertAt(t,e,n){super.insertAt(t,e,n),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};si.blotName="container",si.scope=D.BLOCK_BLOT;let Mf=si;const $r=Mf;class Pf extends Et{static formats(t,e){}format(t,e){super.formatAt(0,this.length(),t,e)}formatAt(t,e,n,s){t===0&&e===this.length()?this.format(n,s):super.formatAt(t,e,n,s)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const Lt=Pf,Df={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},jf=100,Je=class extends Ut{constructor(t,e){super(null,e),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver(n=>{this.update(n)}),this.observer.observe(this.domNode,Df),this.attach()}create(t,e){return this.registry.create(this,t,e)}find(t,e=!1){const n=this.registry.find(t,e);return n?n.scroll===this?n:e?this.find(n.scroll.domNode.parentNode,!0):null:null}query(t,e=D.ANY){return this.registry.query(t,e)}register(...t){return this.registry.register(...t)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,e){this.update(),t===0&&e===this.length()?this.children.forEach(n=>{n.remove()}):super.deleteAt(t,e)}formatAt(t,e,n,s){this.update(),super.formatAt(t,e,n,s)}insertAt(t,e,n){this.update(),super.insertAt(t,e,n)}optimize(t=[],e={}){super.optimize(e);const n=e.mutationsMap||new WeakMap;let s=Array.from(this.observer.takeRecords());for(;s.length>0;)t.push(s.pop());const i=(u,h=!0)=>{u==null||u===this||u.domNode.parentNode!=null&&(n.has(u.domNode)||n.set(u.domNode,[]),h&&i(u.parent))},l=u=>{n.has(u.domNode)&&(u instanceof Ut&&u.children.forEach(l),n.delete(u.domNode),u.optimize(e))};let a=t;for(let u=0;a.length>0;u+=1){if(u>=jf)throw new Error("[Parchment] Maximum optimize iterations reached");for(a.forEach(h=>{const m=this.find(h.target,!0);m!=null&&(m.domNode===h.target&&(h.type==="childList"?(i(this.find(h.previousSibling,!1)),Array.from(h.addedNodes).forEach(E=>{const f=this.find(E,!1);i(f,!1),f instanceof Ut&&f.children.forEach(y=>{i(y,!1)})})):h.type==="attributes"&&i(m.prev)),i(m))}),this.children.forEach(l),a=Array.from(this.observer.takeRecords()),s=a.slice();s.length>0;)t.push(s.pop())}}update(t,e={}){t=t||this.observer.takeRecords();const n=new WeakMap;t.map(s=>{const i=this.find(s.target,!0);return i==null?null:n.has(i.domNode)?(n.get(i.domNode).push(s),null):(n.set(i.domNode,[s]),i)}).forEach(s=>{s!=null&&s!==this&&n.has(s.domNode)&&s.update(n.get(s.domNode)||[],e)}),e.mutationsMap=n,n.has(this.domNode)&&super.update(n.get(this.domNode),e),this.optimize(t,e)}};Je.blotName="scroll",Je.defaultChild=Un,Je.allowedChildren=[Un,$r],Je.scope=D.BLOCK_BLOT,Je.tagName="DIV";let $f=Je;const Si=$f,ii=class xl extends Et{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,e){super(t,e),this.text=this.statics.value(this.domNode)}deleteAt(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}index(t,e){return this.domNode===t?e:-1}insertAt(t,e,n){n==null?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,e,n)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof xl&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,e=!1){return[this.domNode,t]}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}const n=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(n,this.next||void 0),this.text=this.statics.value(this.domNode),n}update(t,e){t.some(n=>n.type==="characterData"&&n.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};ii.blotName="text",ii.scope=D.INLINE_BLOT;let Uf=ii;const kr=Uf,zf=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Jt,AttributorStore:jr,BlockBlot:Un,ClassAttributor:Ft,ContainerBlot:$r,EmbedBlot:Lt,InlineBlot:Li,LeafBlot:Et,ParentBlot:Ut,Registry:ln,Scope:D,ScrollBlot:Si,StyleAttributor:Ae,TextBlot:kr},Symbol.toStringTag,{value:"Module"}));var yr={exports:{}},Ds,po;function Ff(){if(po)return Ds;po=1;var r=-1,t=1,e=0;function n(p,S,w,q,_){if(p===S)return p?[[e,p]]:[];if(w!=null){var L=Rt(p,S,w);if(L)return L}var O=a(p,S),M=p.substring(0,O);p=p.substring(O),S=S.substring(O),O=h(p,S);var j=p.substring(p.length-O);p=p.substring(0,p.length-O),S=S.substring(0,S.length-O);var R=s(p,S);return M&&R.unshift([e,M]),j&&R.push([e,j]),x(R,_),q&&E(R),R}function s(p,S){var w;if(!p)return[[t,S]];if(!S)return[[r,p]];var q=p.length>S.length?p:S,_=p.length>S.length?S:p,L=q.indexOf(_);if(L!==-1)return w=[[t,q.substring(0,L)],[e,_],[t,q.substring(L+_.length)]],p.length>S.length&&(w[0][0]=w[2][0]=r),w;if(_.length===1)return[[r,p],[t,S]];var O=m(p,S);if(O){var M=O[0],j=O[1],R=O[2],K=O[3],F=O[4],V=n(M,R),W=n(j,K);return V.concat([[e,F]],W)}return i(p,S)}function i(p,S){for(var w=p.length,q=S.length,_=Math.ceil((w+q)/2),L=_,O=2*_,M=new Array(O),j=new Array(O),R=0;R<O;R++)M[R]=-1,j[R]=-1;M[L+1]=0,j[L+1]=0;for(var K=w-q,F=K%2!==0,V=0,W=0,z=0,it=0,at=0;at<_;at++){for(var G=-at+V;G<=at-W;G+=2){var J=L+G,Q;G===-at||G!==at&&M[J-1]<M[J+1]?Q=M[J+1]:Q=M[J-1]+1;for(var tt=Q-G;Q<w&&tt<q&&p.charAt(Q)===S.charAt(tt);)Q++,tt++;if(M[J]=Q,Q>w)W+=2;else if(tt>q)V+=2;else if(F){var nt=L+K-G;if(nt>=0&&nt<O&&j[nt]!==-1){var rt=w-j[nt];if(Q>=rt)return l(p,S,Q,tt)}}}for(var ut=-at+z;ut<=at-it;ut+=2){var nt=L+ut,rt;ut===-at||ut!==at&&j[nt-1]<j[nt+1]?rt=j[nt+1]:rt=j[nt-1]+1;for(var mt=rt-ut;rt<w&&mt<q&&p.charAt(w-rt-1)===S.charAt(q-mt-1);)rt++,mt++;if(j[nt]=rt,rt>w)it+=2;else if(mt>q)z+=2;else if(!F){var J=L+K-ut;if(J>=0&&J<O&&M[J]!==-1){var Q=M[J],tt=L+Q-J;if(rt=w-rt,Q>=rt)return l(p,S,Q,tt)}}}}return[[r,p],[t,S]]}function l(p,S,w,q){var _=p.substring(0,w),L=S.substring(0,q),O=p.substring(w),M=S.substring(q),j=n(_,L),R=n(O,M);return j.concat(R)}function a(p,S){if(!p||!S||p.charAt(0)!==S.charAt(0))return 0;for(var w=0,q=Math.min(p.length,S.length),_=q,L=0;w<_;)p.substring(L,_)==S.substring(L,_)?(w=_,L=w):q=_,_=Math.floor((q-w)/2+w);return C(p.charCodeAt(_-1))&&_--,_}function u(p,S){var w=p.length,q=S.length;if(w==0||q==0)return 0;w>q?p=p.substring(w-q):w<q&&(S=S.substring(0,w));var _=Math.min(w,q);if(p==S)return _;for(var L=0,O=1;;){var M=p.substring(_-O),j=S.indexOf(M);if(j==-1)return L;O+=j,(j==0||p.substring(_-O)==S.substring(0,O))&&(L=O,O++)}}function h(p,S){if(!p||!S||p.slice(-1)!==S.slice(-1))return 0;for(var w=0,q=Math.min(p.length,S.length),_=q,L=0;w<_;)p.substring(p.length-_,p.length-L)==S.substring(S.length-_,S.length-L)?(w=_,L=w):q=_,_=Math.floor((q-w)/2+w);return U(p.charCodeAt(p.length-_))&&_--,_}function m(p,S){var w=p.length>S.length?p:S,q=p.length>S.length?S:p;if(w.length<4||q.length*2<w.length)return null;function _(W,z,it){for(var at=W.substring(it,it+Math.floor(W.length/4)),G=-1,J="",Q,tt,nt,rt;(G=z.indexOf(at,G+1))!==-1;){var ut=a(W.substring(it),z.substring(G)),mt=h(W.substring(0,it),z.substring(0,G));J.length<mt+ut&&(J=z.substring(G-mt,G)+z.substring(G,G+ut),Q=W.substring(0,it-mt),tt=W.substring(it+ut),nt=z.substring(0,G-mt),rt=z.substring(G+ut))}return J.length*2>=W.length?[Q,tt,nt,rt,J]:null}var L=_(w,q,Math.ceil(w.length/4)),O=_(w,q,Math.ceil(w.length/2)),M;if(!L&&!O)return null;O?L?M=L[4].length>O[4].length?L:O:M=O:M=L;var j,R,K,F;p.length>S.length?(j=M[0],R=M[1],K=M[2],F=M[3]):(K=M[0],F=M[1],j=M[2],R=M[3]);var V=M[4];return[j,R,K,F,V]}function E(p){for(var S=!1,w=[],q=0,_=null,L=0,O=0,M=0,j=0,R=0;L<p.length;)p[L][0]==e?(w[q++]=L,O=j,M=R,j=0,R=0,_=p[L][1]):(p[L][0]==t?j+=p[L][1].length:R+=p[L][1].length,_&&_.length<=Math.max(O,M)&&_.length<=Math.max(j,R)&&(p.splice(w[q-1],0,[r,_]),p[w[q-1]+1][0]=t,q--,q--,L=q>0?w[q-1]:-1,O=0,M=0,j=0,R=0,_=null,S=!0)),L++;for(S&&x(p),A(p),L=1;L<p.length;){if(p[L-1][0]==r&&p[L][0]==t){var K=p[L-1][1],F=p[L][1],V=u(K,F),W=u(F,K);V>=W?(V>=K.length/2||V>=F.length/2)&&(p.splice(L,0,[e,F.substring(0,V)]),p[L-1][1]=K.substring(0,K.length-V),p[L+1][1]=F.substring(V),L++):(W>=K.length/2||W>=F.length/2)&&(p.splice(L,0,[e,K.substring(0,W)]),p[L-1][0]=t,p[L-1][1]=F.substring(0,F.length-W),p[L+1][0]=r,p[L+1][1]=K.substring(W),L++),L++}L++}}var f=/[^a-zA-Z0-9]/,y=/\s/,g=/[\r\n]/,b=/\n\r?\n$/,v=/^\r?\n\r?\n/;function A(p){function S(W,z){if(!W||!z)return 6;var it=W.charAt(W.length-1),at=z.charAt(0),G=it.match(f),J=at.match(f),Q=G&&it.match(y),tt=J&&at.match(y),nt=Q&&it.match(g),rt=tt&&at.match(g),ut=nt&&W.match(b),mt=rt&&z.match(v);return ut||mt?5:nt||rt?4:G&&!Q&&tt?3:Q||tt?2:G||J?1:0}for(var w=1;w<p.length-1;){if(p[w-1][0]==e&&p[w+1][0]==e){var q=p[w-1][1],_=p[w][1],L=p[w+1][1],O=h(q,_);if(O){var M=_.substring(_.length-O);q=q.substring(0,q.length-O),_=M+_.substring(0,_.length-O),L=M+L}for(var j=q,R=_,K=L,F=S(q,_)+S(_,L);_.charAt(0)===L.charAt(0);){q+=_.charAt(0),_=_.substring(1)+L.charAt(0),L=L.substring(1);var V=S(q,_)+S(_,L);V>=F&&(F=V,j=q,R=_,K=L)}p[w-1][1]!=j&&(j?p[w-1][1]=j:(p.splice(w-1,1),w--),p[w][1]=R,K?p[w+1][1]=K:(p.splice(w+1,1),w--))}w++}}function x(p,S){p.push([e,""]);for(var w=0,q=0,_=0,L="",O="",M;w<p.length;){if(w<p.length-1&&!p[w][1]){p.splice(w,1);continue}switch(p[w][0]){case t:_++,O+=p[w][1],w++;break;case r:q++,L+=p[w][1],w++;break;case e:var j=w-_-q-1;if(S){if(j>=0&&Z(p[j][1])){var R=p[j][1].slice(-1);if(p[j][1]=p[j][1].slice(0,-1),L=R+L,O=R+O,!p[j][1]){p.splice(j,1),w--;var K=j-1;p[K]&&p[K][0]===t&&(_++,O=p[K][1]+O,K--),p[K]&&p[K][0]===r&&(q++,L=p[K][1]+L,K--),j=K}}if(B(p[w][1])){var R=p[w][1].charAt(0);p[w][1]=p[w][1].slice(1),L+=R,O+=R}}if(w<p.length-1&&!p[w][1]){p.splice(w,1);break}if(L.length>0||O.length>0){L.length>0&&O.length>0&&(M=a(O,L),M!==0&&(j>=0?p[j][1]+=O.substring(0,M):(p.splice(0,0,[e,O.substring(0,M)]),w++),O=O.substring(M),L=L.substring(M)),M=h(O,L),M!==0&&(p[w][1]=O.substring(O.length-M)+p[w][1],O=O.substring(0,O.length-M),L=L.substring(0,L.length-M)));var F=_+q;L.length===0&&O.length===0?(p.splice(w-F,F),w=w-F):L.length===0?(p.splice(w-F,F,[t,O]),w=w-F+1):O.length===0?(p.splice(w-F,F,[r,L]),w=w-F+1):(p.splice(w-F,F,[r,L],[t,O]),w=w-F+2)}w!==0&&p[w-1][0]===e?(p[w-1][1]+=p[w][1],p.splice(w,1)):w++,_=0,q=0,L="",O="";break}}p[p.length-1][1]===""&&p.pop();var V=!1;for(w=1;w<p.length-1;)p[w-1][0]===e&&p[w+1][0]===e&&(p[w][1].substring(p[w][1].length-p[w-1][1].length)===p[w-1][1]?(p[w][1]=p[w-1][1]+p[w][1].substring(0,p[w][1].length-p[w-1][1].length),p[w+1][1]=p[w-1][1]+p[w+1][1],p.splice(w-1,1),V=!0):p[w][1].substring(0,p[w+1][1].length)==p[w+1][1]&&(p[w-1][1]+=p[w+1][1],p[w][1]=p[w][1].substring(p[w+1][1].length)+p[w+1][1],p.splice(w+1,1),V=!0)),w++;V&&x(p,S)}function C(p){return p>=55296&&p<=56319}function U(p){return p>=56320&&p<=57343}function B(p){return U(p.charCodeAt(0))}function Z(p){return C(p.charCodeAt(p.length-1))}function lt(p){for(var S=[],w=0;w<p.length;w++)p[w][1].length>0&&S.push(p[w]);return S}function ct(p,S,w,q){return Z(p)||B(q)?null:lt([[e,p],[r,S],[t,w],[e,q]])}function Rt(p,S,w){var q=typeof w=="number"?{index:w,length:0}:w.oldRange,_=typeof w=="number"?null:w.newRange,L=p.length,O=S.length;if(q.length===0&&(_===null||_.length===0)){var M=q.index,j=p.slice(0,M),R=p.slice(M),K=_?_.index:null;t:{var F=M+O-L;if(K!==null&&K!==F||F<0||F>O)break t;var V=S.slice(0,F),W=S.slice(F);if(W!==R)break t;var z=Math.min(M,F),it=j.slice(0,z),at=V.slice(0,z);if(it!==at)break t;var G=j.slice(z),J=V.slice(z);return ct(it,G,J,R)}t:{if(K!==null&&K!==M)break t;var Q=M,V=S.slice(0,Q),W=S.slice(Q);if(V!==j)break t;var tt=Math.min(L-Q,O-Q),nt=R.slice(R.length-tt),rt=W.slice(W.length-tt);if(nt!==rt)break t;var G=R.slice(0,R.length-tt),J=W.slice(0,W.length-tt);return ct(j,G,J,nt)}}if(q.length>0&&_&&_.length===0)t:{var it=p.slice(0,q.index),nt=p.slice(q.index+q.length),z=it.length,tt=nt.length;if(O<z+tt)break t;var at=S.slice(0,z),rt=S.slice(O-tt);if(it!==at||nt!==rt)break t;var G=p.slice(z,L-tt),J=S.slice(z,O-tt);return ct(it,G,J,nt)}return null}function xt(p,S,w,q){return n(p,S,w,q,!0)}return xt.INSERT=t,xt.DELETE=r,xt.EQUAL=e,Ds=xt,Ds}var qn={exports:{}};qn.exports;var go;function Ll(){return go||(go=1,function(r,t){var e=200,n="__lodash_hash_undefined__",s=9007199254740991,i="[object Arguments]",l="[object Array]",a="[object Boolean]",u="[object Date]",h="[object Error]",m="[object Function]",E="[object GeneratorFunction]",f="[object Map]",y="[object Number]",g="[object Object]",b="[object Promise]",v="[object RegExp]",A="[object Set]",x="[object String]",C="[object Symbol]",U="[object WeakMap]",B="[object ArrayBuffer]",Z="[object DataView]",lt="[object Float32Array]",ct="[object Float64Array]",Rt="[object Int8Array]",xt="[object Int16Array]",p="[object Int32Array]",S="[object Uint8Array]",w="[object Uint8ClampedArray]",q="[object Uint16Array]",_="[object Uint32Array]",L=/[\\^$.*+?()[\]{}|]/g,O=/\w*$/,M=/^\[object .+?Constructor\]$/,j=/^(?:0|[1-9]\d*)$/,R={};R[i]=R[l]=R[B]=R[Z]=R[a]=R[u]=R[lt]=R[ct]=R[Rt]=R[xt]=R[p]=R[f]=R[y]=R[g]=R[v]=R[A]=R[x]=R[C]=R[S]=R[w]=R[q]=R[_]=!0,R[h]=R[m]=R[U]=!1;var K=typeof me=="object"&&me&&me.Object===Object&&me,F=typeof self=="object"&&self&&self.Object===Object&&self,V=K||F||Function("return this")(),W=t&&!t.nodeType&&t,z=W&&!0&&r&&!r.nodeType&&r,it=z&&z.exports===W;function at(o,c){return o.set(c[0],c[1]),o}function G(o,c){return o.add(c),o}function J(o,c){for(var d=-1,T=o?o.length:0;++d<T&&c(o[d],d,o)!==!1;);return o}function Q(o,c){for(var d=-1,T=c.length,H=o.length;++d<T;)o[H+d]=c[d];return o}function tt(o,c,d,T){for(var H=-1,$=o?o.length:0;++H<$;)d=c(d,o[H],H,o);return d}function nt(o,c){for(var d=-1,T=Array(o);++d<o;)T[d]=c(d);return T}function rt(o,c){return o==null?void 0:o[c]}function ut(o){var c=!1;if(o!=null&&typeof o.toString!="function")try{c=!!(o+"")}catch{}return c}function mt(o){var c=-1,d=Array(o.size);return o.forEach(function(T,H){d[++c]=[H,T]}),d}function dn(o,c){return function(d){return o(c(d))}}function Qn(o){var c=-1,d=Array(o.size);return o.forEach(function(T){d[++c]=T}),d}var Gr=Array.prototype,Vr=Function.prototype,je=Object.prototype,pn=V["__core-js_shared__"],Jn=function(){var o=/[^.]+$/.exec(pn&&pn.keys&&pn.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),tr=Vr.toString,Gt=je.hasOwnProperty,$e=je.toString,Wr=RegExp("^"+tr.call(Gt).replace(L,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Te=it?V.Buffer:void 0,Ue=V.Symbol,gn=V.Uint8Array,St=dn(Object.getPrototypeOf,Object),er=Object.create,nr=je.propertyIsEnumerable,Zr=Gr.splice,mn=Object.getOwnPropertySymbols,ze=Te?Te.isBuffer:void 0,rr=dn(Object.keys,Object),Fe=Bt(V,"DataView"),Ne=Bt(V,"Map"),kt=Bt(V,"Promise"),He=Bt(V,"Set"),bn=Bt(V,"WeakMap"),xe=Bt(Object,"create"),yn=At(Fe),Le=At(Ne),vn=At(kt),En=At(He),wn=At(bn),fe=Ue?Ue.prototype:void 0,sr=fe?fe.valueOf:void 0;function ne(o){var c=-1,d=o?o.length:0;for(this.clear();++c<d;){var T=o[c];this.set(T[0],T[1])}}function Xr(){this.__data__=xe?xe(null):{}}function Yr(o){return this.has(o)&&delete this.__data__[o]}function Qr(o){var c=this.__data__;if(xe){var d=c[o];return d===n?void 0:d}return Gt.call(c,o)?c[o]:void 0}function ir(o){var c=this.__data__;return xe?c[o]!==void 0:Gt.call(c,o)}function An(o,c){var d=this.__data__;return d[o]=xe&&c===void 0?n:c,this}ne.prototype.clear=Xr,ne.prototype.delete=Yr,ne.prototype.get=Qr,ne.prototype.has=ir,ne.prototype.set=An;function dt(o){var c=-1,d=o?o.length:0;for(this.clear();++c<d;){var T=o[c];this.set(T[0],T[1])}}function Jr(){this.__data__=[]}function ts(o){var c=this.__data__,d=Ge(c,o);if(d<0)return!1;var T=c.length-1;return d==T?c.pop():Zr.call(c,d,1),!0}function es(o){var c=this.__data__,d=Ge(c,o);return d<0?void 0:c[d][1]}function ns(o){return Ge(this.__data__,o)>-1}function rs(o,c){var d=this.__data__,T=Ge(d,o);return T<0?d.push([o,c]):d[T][1]=c,this}dt.prototype.clear=Jr,dt.prototype.delete=ts,dt.prototype.get=es,dt.prototype.has=ns,dt.prototype.set=rs;function bt(o){var c=-1,d=o?o.length:0;for(this.clear();++c<d;){var T=o[c];this.set(T[0],T[1])}}function ss(){this.__data__={hash:new ne,map:new(Ne||dt),string:new ne}}function is(o){return _e(this,o).delete(o)}function os(o){return _e(this,o).get(o)}function ls(o){return _e(this,o).has(o)}function as(o,c){return _e(this,o).set(o,c),this}bt.prototype.clear=ss,bt.prototype.delete=is,bt.prototype.get=os,bt.prototype.has=ls,bt.prototype.set=as;function Tt(o){this.__data__=new dt(o)}function cs(){this.__data__=new dt}function us(o){return this.__data__.delete(o)}function hs(o){return this.__data__.get(o)}function fs(o){return this.__data__.has(o)}function ds(o,c){var d=this.__data__;if(d instanceof dt){var T=d.__data__;if(!Ne||T.length<e-1)return T.push([o,c]),this;d=this.__data__=new bt(T)}return d.set(o,c),this}Tt.prototype.clear=cs,Tt.prototype.delete=us,Tt.prototype.get=hs,Tt.prototype.has=fs,Tt.prototype.set=ds;function Ke(o,c){var d=Ln(o)||We(o)?nt(o.length,String):[],T=d.length,H=!!T;for(var $ in o)Gt.call(o,$)&&!(H&&($=="length"||Ss($,T)))&&d.push($);return d}function or(o,c,d){var T=o[c];(!(Gt.call(o,c)&&hr(T,d))||d===void 0&&!(c in o))&&(o[c]=d)}function Ge(o,c){for(var d=o.length;d--;)if(hr(o[d][0],c))return d;return-1}function Vt(o,c){return o&&xn(c,_n(c),o)}function Tn(o,c,d,T,H,$,Y){var X;if(T&&(X=$?T(o,H,$,Y):T(o)),X!==void 0)return X;if(!Zt(o))return o;var ht=Ln(o);if(ht){if(X=xs(o),!c)return As(o,X)}else{var et=se(o),yt=et==m||et==E;if(fr(o))return Ve(o,c);if(et==g||et==i||yt&&!$){if(ut(o))return $?o:{};if(X=Wt(yt?{}:o),!c)return Ts(o,Vt(X,o))}else{if(!R[et])return $?o:{};X=Ls(o,et,Tn,c)}}Y||(Y=new Tt);var Nt=Y.get(o);if(Nt)return Nt;if(Y.set(o,X),!ht)var ft=d?Ns(o):_n(o);return J(ft||o,function(vt,pt){ft&&(pt=vt,vt=o[pt]),or(X,pt,Tn(vt,c,d,T,pt,o,Y))}),X}function ps(o){return Zt(o)?er(o):{}}function gs(o,c,d){var T=c(o);return Ln(o)?T:Q(T,d(o))}function ms(o){return $e.call(o)}function bs(o){if(!Zt(o)||Cs(o))return!1;var c=Sn(o)||ut(o)?Wr:M;return c.test(At(o))}function ys(o){if(!cr(o))return rr(o);var c=[];for(var d in Object(o))Gt.call(o,d)&&d!="constructor"&&c.push(d);return c}function Ve(o,c){if(c)return o.slice();var d=new o.constructor(o.length);return o.copy(d),d}function Nn(o){var c=new o.constructor(o.byteLength);return new gn(c).set(new gn(o)),c}function Se(o,c){var d=c?Nn(o.buffer):o.buffer;return new o.constructor(d,o.byteOffset,o.byteLength)}function lr(o,c,d){var T=c?d(mt(o),!0):mt(o);return tt(T,at,new o.constructor)}function ar(o){var c=new o.constructor(o.source,O.exec(o));return c.lastIndex=o.lastIndex,c}function vs(o,c,d){var T=c?d(Qn(o),!0):Qn(o);return tt(T,G,new o.constructor)}function Es(o){return sr?Object(sr.call(o)):{}}function ws(o,c){var d=c?Nn(o.buffer):o.buffer;return new o.constructor(d,o.byteOffset,o.length)}function As(o,c){var d=-1,T=o.length;for(c||(c=Array(T));++d<T;)c[d]=o[d];return c}function xn(o,c,d,T){d||(d={});for(var H=-1,$=c.length;++H<$;){var Y=c[H],X=void 0;or(d,Y,X===void 0?o[Y]:X)}return d}function Ts(o,c){return xn(o,re(o),c)}function Ns(o){return gs(o,_n,re)}function _e(o,c){var d=o.__data__;return _s(c)?d[typeof c=="string"?"string":"hash"]:d.map}function Bt(o,c){var d=rt(o,c);return bs(d)?d:void 0}var re=mn?dn(mn,Object):qs,se=ms;(Fe&&se(new Fe(new ArrayBuffer(1)))!=Z||Ne&&se(new Ne)!=f||kt&&se(kt.resolve())!=b||He&&se(new He)!=A||bn&&se(new bn)!=U)&&(se=function(o){var c=$e.call(o),d=c==g?o.constructor:void 0,T=d?At(d):void 0;if(T)switch(T){case yn:return Z;case Le:return f;case vn:return b;case En:return A;case wn:return U}return c});function xs(o){var c=o.length,d=o.constructor(c);return c&&typeof o[0]=="string"&&Gt.call(o,"index")&&(d.index=o.index,d.input=o.input),d}function Wt(o){return typeof o.constructor=="function"&&!cr(o)?ps(St(o)):{}}function Ls(o,c,d,T){var H=o.constructor;switch(c){case B:return Nn(o);case a:case u:return new H(+o);case Z:return Se(o,T);case lt:case ct:case Rt:case xt:case p:case S:case w:case q:case _:return ws(o,T);case f:return lr(o,T,d);case y:case x:return new H(o);case v:return ar(o);case A:return vs(o,T,d);case C:return Es(o)}}function Ss(o,c){return c=c??s,!!c&&(typeof o=="number"||j.test(o))&&o>-1&&o%1==0&&o<c}function _s(o){var c=typeof o;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?o!=="__proto__":o===null}function Cs(o){return!!Jn&&Jn in o}function cr(o){var c=o&&o.constructor,d=typeof c=="function"&&c.prototype||je;return o===d}function At(o){if(o!=null){try{return tr.call(o)}catch{}try{return o+""}catch{}}return""}function ur(o){return Tn(o,!0,!0)}function hr(o,c){return o===c||o!==o&&c!==c}function We(o){return Os(o)&&Gt.call(o,"callee")&&(!nr.call(o,"callee")||$e.call(o)==i)}var Ln=Array.isArray;function Ze(o){return o!=null&&dr(o.length)&&!Sn(o)}function Os(o){return pr(o)&&Ze(o)}var fr=ze||Is;function Sn(o){var c=Zt(o)?$e.call(o):"";return c==m||c==E}function dr(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=s}function Zt(o){var c=typeof o;return!!o&&(c=="object"||c=="function")}function pr(o){return!!o&&typeof o=="object"}function _n(o){return Ze(o)?Ke(o):ys(o)}function qs(){return[]}function Is(){return!1}r.exports=ur}(qn,qn.exports)),qn.exports}var In={exports:{}};In.exports;var mo;function Sl(){return mo||(mo=1,function(r,t){var e=200,n="__lodash_hash_undefined__",s=1,i=2,l=9007199254740991,a="[object Arguments]",u="[object Array]",h="[object AsyncFunction]",m="[object Boolean]",E="[object Date]",f="[object Error]",y="[object Function]",g="[object GeneratorFunction]",b="[object Map]",v="[object Number]",A="[object Null]",x="[object Object]",C="[object Promise]",U="[object Proxy]",B="[object RegExp]",Z="[object Set]",lt="[object String]",ct="[object Symbol]",Rt="[object Undefined]",xt="[object WeakMap]",p="[object ArrayBuffer]",S="[object DataView]",w="[object Float32Array]",q="[object Float64Array]",_="[object Int8Array]",L="[object Int16Array]",O="[object Int32Array]",M="[object Uint8Array]",j="[object Uint8ClampedArray]",R="[object Uint16Array]",K="[object Uint32Array]",F=/[\\^$.*+?()[\]{}|]/g,V=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,z={};z[w]=z[q]=z[_]=z[L]=z[O]=z[M]=z[j]=z[R]=z[K]=!0,z[a]=z[u]=z[p]=z[m]=z[S]=z[E]=z[f]=z[y]=z[b]=z[v]=z[x]=z[B]=z[Z]=z[lt]=z[xt]=!1;var it=typeof me=="object"&&me&&me.Object===Object&&me,at=typeof self=="object"&&self&&self.Object===Object&&self,G=it||at||Function("return this")(),J=t&&!t.nodeType&&t,Q=J&&!0&&r&&!r.nodeType&&r,tt=Q&&Q.exports===J,nt=tt&&it.process,rt=function(){try{return nt&&nt.binding&&nt.binding("util")}catch{}}(),ut=rt&&rt.isTypedArray;function mt(o,c){for(var d=-1,T=o==null?0:o.length,H=0,$=[];++d<T;){var Y=o[d];c(Y,d,o)&&($[H++]=Y)}return $}function dn(o,c){for(var d=-1,T=c.length,H=o.length;++d<T;)o[H+d]=c[d];return o}function Qn(o,c){for(var d=-1,T=o==null?0:o.length;++d<T;)if(c(o[d],d,o))return!0;return!1}function Gr(o,c){for(var d=-1,T=Array(o);++d<o;)T[d]=c(d);return T}function Vr(o){return function(c){return o(c)}}function je(o,c){return o.has(c)}function pn(o,c){return o==null?void 0:o[c]}function Jn(o){var c=-1,d=Array(o.size);return o.forEach(function(T,H){d[++c]=[H,T]}),d}function tr(o,c){return function(d){return o(c(d))}}function Gt(o){var c=-1,d=Array(o.size);return o.forEach(function(T){d[++c]=T}),d}var $e=Array.prototype,Wr=Function.prototype,Te=Object.prototype,Ue=G["__core-js_shared__"],gn=Wr.toString,St=Te.hasOwnProperty,er=function(){var o=/[^.]+$/.exec(Ue&&Ue.keys&&Ue.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),nr=Te.toString,Zr=RegExp("^"+gn.call(St).replace(F,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mn=tt?G.Buffer:void 0,ze=G.Symbol,rr=G.Uint8Array,Fe=Te.propertyIsEnumerable,Ne=$e.splice,kt=ze?ze.toStringTag:void 0,He=Object.getOwnPropertySymbols,bn=mn?mn.isBuffer:void 0,xe=tr(Object.keys,Object),yn=re(G,"DataView"),Le=re(G,"Map"),vn=re(G,"Promise"),En=re(G,"Set"),wn=re(G,"WeakMap"),fe=re(Object,"create"),sr=At(yn),ne=At(Le),Xr=At(vn),Yr=At(En),Qr=At(wn),ir=ze?ze.prototype:void 0,An=ir?ir.valueOf:void 0;function dt(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var T=o[c];this.set(T[0],T[1])}}function Jr(){this.__data__=fe?fe(null):{},this.size=0}function ts(o){var c=this.has(o)&&delete this.__data__[o];return this.size-=c?1:0,c}function es(o){var c=this.__data__;if(fe){var d=c[o];return d===n?void 0:d}return St.call(c,o)?c[o]:void 0}function ns(o){var c=this.__data__;return fe?c[o]!==void 0:St.call(c,o)}function rs(o,c){var d=this.__data__;return this.size+=this.has(o)?0:1,d[o]=fe&&c===void 0?n:c,this}dt.prototype.clear=Jr,dt.prototype.delete=ts,dt.prototype.get=es,dt.prototype.has=ns,dt.prototype.set=rs;function bt(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var T=o[c];this.set(T[0],T[1])}}function ss(){this.__data__=[],this.size=0}function is(o){var c=this.__data__,d=Ve(c,o);if(d<0)return!1;var T=c.length-1;return d==T?c.pop():Ne.call(c,d,1),--this.size,!0}function os(o){var c=this.__data__,d=Ve(c,o);return d<0?void 0:c[d][1]}function ls(o){return Ve(this.__data__,o)>-1}function as(o,c){var d=this.__data__,T=Ve(d,o);return T<0?(++this.size,d.push([o,c])):d[T][1]=c,this}bt.prototype.clear=ss,bt.prototype.delete=is,bt.prototype.get=os,bt.prototype.has=ls,bt.prototype.set=as;function Tt(o){var c=-1,d=o==null?0:o.length;for(this.clear();++c<d;){var T=o[c];this.set(T[0],T[1])}}function cs(){this.size=0,this.__data__={hash:new dt,map:new(Le||bt),string:new dt}}function us(o){var c=Bt(this,o).delete(o);return this.size-=c?1:0,c}function hs(o){return Bt(this,o).get(o)}function fs(o){return Bt(this,o).has(o)}function ds(o,c){var d=Bt(this,o),T=d.size;return d.set(o,c),this.size+=d.size==T?0:1,this}Tt.prototype.clear=cs,Tt.prototype.delete=us,Tt.prototype.get=hs,Tt.prototype.has=fs,Tt.prototype.set=ds;function Ke(o){var c=-1,d=o==null?0:o.length;for(this.__data__=new Tt;++c<d;)this.add(o[c])}function or(o){return this.__data__.set(o,n),this}function Ge(o){return this.__data__.has(o)}Ke.prototype.add=Ke.prototype.push=or,Ke.prototype.has=Ge;function Vt(o){var c=this.__data__=new bt(o);this.size=c.size}function Tn(){this.__data__=new bt,this.size=0}function ps(o){var c=this.__data__,d=c.delete(o);return this.size=c.size,d}function gs(o){return this.__data__.get(o)}function ms(o){return this.__data__.has(o)}function bs(o,c){var d=this.__data__;if(d instanceof bt){var T=d.__data__;if(!Le||T.length<e-1)return T.push([o,c]),this.size=++d.size,this;d=this.__data__=new Tt(T)}return d.set(o,c),this.size=d.size,this}Vt.prototype.clear=Tn,Vt.prototype.delete=ps,Vt.prototype.get=gs,Vt.prototype.has=ms,Vt.prototype.set=bs;function ys(o,c){var d=We(o),T=!d&&hr(o),H=!d&&!T&&Ze(o),$=!d&&!T&&!H&&pr(o),Y=d||T||H||$,X=Y?Gr(o.length,String):[],ht=X.length;for(var et in o)St.call(o,et)&&!(Y&&(et=="length"||H&&(et=="offset"||et=="parent")||$&&(et=="buffer"||et=="byteLength"||et=="byteOffset")||Ls(et,ht)))&&X.push(et);return X}function Ve(o,c){for(var d=o.length;d--;)if(ur(o[d][0],c))return d;return-1}function Nn(o,c,d){var T=c(o);return We(o)?T:dn(T,d(o))}function Se(o){return o==null?o===void 0?Rt:A:kt&&kt in Object(o)?se(o):cr(o)}function lr(o){return Zt(o)&&Se(o)==a}function ar(o,c,d,T,H){return o===c?!0:o==null||c==null||!Zt(o)&&!Zt(c)?o!==o&&c!==c:vs(o,c,d,T,ar,H)}function vs(o,c,d,T,H,$){var Y=We(o),X=We(c),ht=Y?u:Wt(o),et=X?u:Wt(c);ht=ht==a?x:ht,et=et==a?x:et;var yt=ht==x,Nt=et==x,ft=ht==et;if(ft&&Ze(o)){if(!Ze(c))return!1;Y=!0,yt=!1}if(ft&&!yt)return $||($=new Vt),Y||pr(o)?xn(o,c,d,T,H,$):Ts(o,c,ht,d,T,H,$);if(!(d&s)){var vt=yt&&St.call(o,"__wrapped__"),pt=Nt&&St.call(c,"__wrapped__");if(vt||pt){var de=vt?o.value():o,ie=pt?c.value():c;return $||($=new Vt),H(de,ie,d,T,$)}}return ft?($||($=new Vt),Ns(o,c,d,T,H,$)):!1}function Es(o){if(!dr(o)||_s(o))return!1;var c=fr(o)?Zr:V;return c.test(At(o))}function ws(o){return Zt(o)&&Sn(o.length)&&!!z[Se(o)]}function As(o){if(!Cs(o))return xe(o);var c=[];for(var d in Object(o))St.call(o,d)&&d!="constructor"&&c.push(d);return c}function xn(o,c,d,T,H,$){var Y=d&s,X=o.length,ht=c.length;if(X!=ht&&!(Y&&ht>X))return!1;var et=$.get(o);if(et&&$.get(c))return et==c;var yt=-1,Nt=!0,ft=d&i?new Ke:void 0;for($.set(o,c),$.set(c,o);++yt<X;){var vt=o[yt],pt=c[yt];if(T)var de=Y?T(pt,vt,yt,c,o,$):T(vt,pt,yt,o,c,$);if(de!==void 0){if(de)continue;Nt=!1;break}if(ft){if(!Qn(c,function(ie,Ce){if(!je(ft,Ce)&&(vt===ie||H(vt,ie,d,T,$)))return ft.push(Ce)})){Nt=!1;break}}else if(!(vt===pt||H(vt,pt,d,T,$))){Nt=!1;break}}return $.delete(o),$.delete(c),Nt}function Ts(o,c,d,T,H,$,Y){switch(d){case S:if(o.byteLength!=c.byteLength||o.byteOffset!=c.byteOffset)return!1;o=o.buffer,c=c.buffer;case p:return!(o.byteLength!=c.byteLength||!$(new rr(o),new rr(c)));case m:case E:case v:return ur(+o,+c);case f:return o.name==c.name&&o.message==c.message;case B:case lt:return o==c+"";case b:var X=Jn;case Z:var ht=T&s;if(X||(X=Gt),o.size!=c.size&&!ht)return!1;var et=Y.get(o);if(et)return et==c;T|=i,Y.set(o,c);var yt=xn(X(o),X(c),T,H,$,Y);return Y.delete(o),yt;case ct:if(An)return An.call(o)==An.call(c)}return!1}function Ns(o,c,d,T,H,$){var Y=d&s,X=_e(o),ht=X.length,et=_e(c),yt=et.length;if(ht!=yt&&!Y)return!1;for(var Nt=ht;Nt--;){var ft=X[Nt];if(!(Y?ft in c:St.call(c,ft)))return!1}var vt=$.get(o);if(vt&&$.get(c))return vt==c;var pt=!0;$.set(o,c),$.set(c,o);for(var de=Y;++Nt<ht;){ft=X[Nt];var ie=o[ft],Ce=c[ft];if(T)var Di=Y?T(Ce,ie,ft,c,o,$):T(ie,Ce,ft,o,c,$);if(!(Di===void 0?ie===Ce||H(ie,Ce,d,T,$):Di)){pt=!1;break}de||(de=ft=="constructor")}if(pt&&!de){var gr=o.constructor,mr=c.constructor;gr!=mr&&"constructor"in o&&"constructor"in c&&!(typeof gr=="function"&&gr instanceof gr&&typeof mr=="function"&&mr instanceof mr)&&(pt=!1)}return $.delete(o),$.delete(c),pt}function _e(o){return Nn(o,_n,xs)}function Bt(o,c){var d=o.__data__;return Ss(c)?d[typeof c=="string"?"string":"hash"]:d.map}function re(o,c){var d=pn(o,c);return Es(d)?d:void 0}function se(o){var c=St.call(o,kt),d=o[kt];try{o[kt]=void 0;var T=!0}catch{}var H=nr.call(o);return T&&(c?o[kt]=d:delete o[kt]),H}var xs=He?function(o){return o==null?[]:(o=Object(o),mt(He(o),function(c){return Fe.call(o,c)}))}:qs,Wt=Se;(yn&&Wt(new yn(new ArrayBuffer(1)))!=S||Le&&Wt(new Le)!=b||vn&&Wt(vn.resolve())!=C||En&&Wt(new En)!=Z||wn&&Wt(new wn)!=xt)&&(Wt=function(o){var c=Se(o),d=c==x?o.constructor:void 0,T=d?At(d):"";if(T)switch(T){case sr:return S;case ne:return b;case Xr:return C;case Yr:return Z;case Qr:return xt}return c});function Ls(o,c){return c=c??l,!!c&&(typeof o=="number"||W.test(o))&&o>-1&&o%1==0&&o<c}function Ss(o){var c=typeof o;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?o!=="__proto__":o===null}function _s(o){return!!er&&er in o}function Cs(o){var c=o&&o.constructor,d=typeof c=="function"&&c.prototype||Te;return o===d}function cr(o){return nr.call(o)}function At(o){if(o!=null){try{return gn.call(o)}catch{}try{return o+""}catch{}}return""}function ur(o,c){return o===c||o!==o&&c!==c}var hr=lr(function(){return arguments}())?lr:function(o){return Zt(o)&&St.call(o,"callee")&&!Fe.call(o,"callee")},We=Array.isArray;function Ln(o){return o!=null&&Sn(o.length)&&!fr(o)}var Ze=bn||Is;function Os(o,c){return ar(o,c)}function fr(o){if(!dr(o))return!1;var c=Se(o);return c==y||c==g||c==h||c==U}function Sn(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=l}function dr(o){var c=typeof o;return o!=null&&(c=="object"||c=="function")}function Zt(o){return o!=null&&typeof o=="object"}var pr=ut?Vr(ut):ws;function _n(o){return Ln(o)?ys(o):As(o)}function qs(){return[]}function Is(){return!1}r.exports=Os}(In,In.exports)),In.exports}var vr={},bo;function Hf(){if(bo)return vr;bo=1,Object.defineProperty(vr,"__esModule",{value:!0});const r=Ll(),t=Sl();var e;return function(n){function s(u={},h={},m=!1){typeof u!="object"&&(u={}),typeof h!="object"&&(h={});let E=r(h);m||(E=Object.keys(E).reduce((f,y)=>(E[y]!=null&&(f[y]=E[y]),f),{}));for(const f in u)u[f]!==void 0&&h[f]===void 0&&(E[f]=u[f]);return Object.keys(E).length>0?E:void 0}n.compose=s;function i(u={},h={}){typeof u!="object"&&(u={}),typeof h!="object"&&(h={});const m=Object.keys(u).concat(Object.keys(h)).reduce((E,f)=>(t(u[f],h[f])||(E[f]=h[f]===void 0?null:h[f]),E),{});return Object.keys(m).length>0?m:void 0}n.diff=i;function l(u={},h={}){u=u||{};const m=Object.keys(h).reduce((E,f)=>(h[f]!==u[f]&&u[f]!==void 0&&(E[f]=h[f]),E),{});return Object.keys(u).reduce((E,f)=>(u[f]!==h[f]&&h[f]===void 0&&(E[f]=null),E),m)}n.invert=l;function a(u,h,m=!1){if(typeof u!="object")return h;if(typeof h!="object")return;if(!m)return h;const E=Object.keys(h).reduce((f,y)=>(u[y]===void 0&&(f[y]=h[y]),f),{});return Object.keys(E).length>0?E:void 0}n.transform=a}(e||(e={})),vr.default=e,vr}var Er={},yo;function _l(){if(yo)return Er;yo=1,Object.defineProperty(Er,"__esModule",{value:!0});var r;return function(t){function e(n){return typeof n.delete=="number"?n.delete:typeof n.retain=="number"?n.retain:typeof n.retain=="object"&&n.retain!==null?1:typeof n.insert=="string"?n.insert.length:1}t.length=e}(r||(r={})),Er.default=r,Er}var wr={},vo;function Kf(){if(vo)return wr;vo=1,Object.defineProperty(wr,"__esModule",{value:!0});const r=_l();class t{constructor(n){this.ops=n,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(n){n||(n=1/0);const s=this.ops[this.index];if(s){const i=this.offset,l=r.default.length(s);if(n>=l-i?(n=l-i,this.index+=1,this.offset=0):this.offset+=n,typeof s.delete=="number")return{delete:n};{const a={};return s.attributes&&(a.attributes=s.attributes),typeof s.retain=="number"?a.retain=n:typeof s.retain=="object"&&s.retain!==null?a.retain=s.retain:typeof s.insert=="string"?a.insert=s.insert.substr(i,n):a.insert=s.insert,a}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?r.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const n=this.ops[this.index];return n?typeof n.delete=="number"?"delete":typeof n.retain=="number"||typeof n.retain=="object"&&n.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const n=this.offset,s=this.index,i=this.next(),l=this.ops.slice(this.index);return this.offset=n,this.index=s,[i].concat(l)}}else return[]}}return wr.default=t,wr}var Eo;function Gf(){return Eo||(Eo=1,function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeMap=t.OpIterator=t.Op=void 0;const e=Ff(),n=Ll(),s=Sl(),i=Hf();t.AttributeMap=i.default;const l=_l();t.Op=l.default;const a=Kf();t.OpIterator=a.default;const u="\0",h=(E,f)=>{if(typeof E!="object"||E===null)throw new Error(`cannot retain a ${typeof E}`);if(typeof f!="object"||f===null)throw new Error(`cannot retain a ${typeof f}`);const y=Object.keys(E)[0];if(!y||y!==Object.keys(f)[0])throw new Error(`embed types not matched: ${y} != ${Object.keys(f)[0]}`);return[y,E[y],f[y]]};class m{constructor(f){Array.isArray(f)?this.ops=f:f!=null&&Array.isArray(f.ops)?this.ops=f.ops:this.ops=[]}static registerEmbed(f,y){this.handlers[f]=y}static unregisterEmbed(f){delete this.handlers[f]}static getHandler(f){const y=this.handlers[f];if(!y)throw new Error(`no handlers for embed type "${f}"`);return y}insert(f,y){const g={};return typeof f=="string"&&f.length===0?this:(g.insert=f,y!=null&&typeof y=="object"&&Object.keys(y).length>0&&(g.attributes=y),this.push(g))}delete(f){return f<=0?this:this.push({delete:f})}retain(f,y){if(typeof f=="number"&&f<=0)return this;const g={retain:f};return y!=null&&typeof y=="object"&&Object.keys(y).length>0&&(g.attributes=y),this.push(g)}push(f){let y=this.ops.length,g=this.ops[y-1];if(f=n(f),typeof g=="object"){if(typeof f.delete=="number"&&typeof g.delete=="number")return this.ops[y-1]={delete:g.delete+f.delete},this;if(typeof g.delete=="number"&&f.insert!=null&&(y-=1,g=this.ops[y-1],typeof g!="object"))return this.ops.unshift(f),this;if(s(f.attributes,g.attributes)){if(typeof f.insert=="string"&&typeof g.insert=="string")return this.ops[y-1]={insert:g.insert+f.insert},typeof f.attributes=="object"&&(this.ops[y-1].attributes=f.attributes),this;if(typeof f.retain=="number"&&typeof g.retain=="number")return this.ops[y-1]={retain:g.retain+f.retain},typeof f.attributes=="object"&&(this.ops[y-1].attributes=f.attributes),this}}return y===this.ops.length?this.ops.push(f):this.ops.splice(y,0,f),this}chop(){const f=this.ops[this.ops.length-1];return f&&typeof f.retain=="number"&&!f.attributes&&this.ops.pop(),this}filter(f){return this.ops.filter(f)}forEach(f){this.ops.forEach(f)}map(f){return this.ops.map(f)}partition(f){const y=[],g=[];return this.forEach(b=>{(f(b)?y:g).push(b)}),[y,g]}reduce(f,y){return this.ops.reduce(f,y)}changeLength(){return this.reduce((f,y)=>y.insert?f+l.default.length(y):y.delete?f-y.delete:f,0)}length(){return this.reduce((f,y)=>f+l.default.length(y),0)}slice(f=0,y=1/0){const g=[],b=new a.default(this.ops);let v=0;for(;v<y&&b.hasNext();){let A;v<f?A=b.next(f-v):(A=b.next(y-v),g.push(A)),v+=l.default.length(A)}return new m(g)}compose(f){const y=new a.default(this.ops),g=new a.default(f.ops),b=[],v=g.peek();if(v!=null&&typeof v.retain=="number"&&v.attributes==null){let x=v.retain;for(;y.peekType()==="insert"&&y.peekLength()<=x;)x-=y.peekLength(),b.push(y.next());v.retain-x>0&&g.next(v.retain-x)}const A=new m(b);for(;y.hasNext()||g.hasNext();)if(g.peekType()==="insert")A.push(g.next());else if(y.peekType()==="delete")A.push(y.next());else{const x=Math.min(y.peekLength(),g.peekLength()),C=y.next(x),U=g.next(x);if(U.retain){const B={};if(typeof C.retain=="number")B.retain=typeof U.retain=="number"?x:U.retain;else if(typeof U.retain=="number")C.retain==null?B.insert=C.insert:B.retain=C.retain;else{const lt=C.retain==null?"insert":"retain",[ct,Rt,xt]=h(C[lt],U.retain),p=m.getHandler(ct);B[lt]={[ct]:p.compose(Rt,xt,lt==="retain")}}const Z=i.default.compose(C.attributes,U.attributes,typeof C.retain=="number");if(Z&&(B.attributes=Z),A.push(B),!g.hasNext()&&s(A.ops[A.ops.length-1],B)){const lt=new m(y.rest());return A.concat(lt).chop()}}else typeof U.delete=="number"&&(typeof C.retain=="number"||typeof C.retain=="object"&&C.retain!==null)&&A.push(U)}return A.chop()}concat(f){const y=new m(this.ops.slice());return f.ops.length>0&&(y.push(f.ops[0]),y.ops=y.ops.concat(f.ops.slice(1))),y}diff(f,y){if(this.ops===f.ops)return new m;const g=[this,f].map(C=>C.map(U=>{if(U.insert!=null)return typeof U.insert=="string"?U.insert:u;const B=C===f?"on":"with";throw new Error("diff() called "+B+" non-document")}).join("")),b=new m,v=e(g[0],g[1],y,!0),A=new a.default(this.ops),x=new a.default(f.ops);return v.forEach(C=>{let U=C[1].length;for(;U>0;){let B=0;switch(C[0]){case e.INSERT:B=Math.min(x.peekLength(),U),b.push(x.next(B));break;case e.DELETE:B=Math.min(U,A.peekLength()),A.next(B),b.delete(B);break;case e.EQUAL:B=Math.min(A.peekLength(),x.peekLength(),U);const Z=A.next(B),lt=x.next(B);s(Z.insert,lt.insert)?b.retain(B,i.default.diff(Z.attributes,lt.attributes)):b.push(lt).delete(B);break}U-=B}}),b.chop()}eachLine(f,y=`
`){const g=new a.default(this.ops);let b=new m,v=0;for(;g.hasNext();){if(g.peekType()!=="insert")return;const A=g.peek(),x=l.default.length(A)-g.peekLength(),C=typeof A.insert=="string"?A.insert.indexOf(y,x)-x:-1;if(C<0)b.push(g.next());else if(C>0)b.push(g.next(C));else{if(f(b,g.next(1).attributes||{},v)===!1)return;v+=1,b=new m}}b.length()>0&&f(b,{},v)}invert(f){const y=new m;return this.reduce((g,b)=>{if(b.insert)y.delete(l.default.length(b));else{if(typeof b.retain=="number"&&b.attributes==null)return y.retain(b.retain),g+b.retain;if(b.delete||typeof b.retain=="number"){const v=b.delete||b.retain;return f.slice(g,g+v).forEach(x=>{b.delete?y.push(x):b.retain&&b.attributes&&y.retain(l.default.length(x),i.default.invert(b.attributes,x.attributes))}),g+v}else if(typeof b.retain=="object"&&b.retain!==null){const v=f.slice(g,g+1),A=new a.default(v.ops).next(),[x,C,U]=h(b.retain,A.insert),B=m.getHandler(x);return y.retain({[x]:B.invert(C,U)},i.default.invert(b.attributes,A.attributes)),g+1}}return g},0),y.chop()}transform(f,y=!1){if(y=!!y,typeof f=="number")return this.transformPosition(f,y);const g=f,b=new a.default(this.ops),v=new a.default(g.ops),A=new m;for(;b.hasNext()||v.hasNext();)if(b.peekType()==="insert"&&(y||v.peekType()!=="insert"))A.retain(l.default.length(b.next()));else if(v.peekType()==="insert")A.push(v.next());else{const x=Math.min(b.peekLength(),v.peekLength()),C=b.next(x),U=v.next(x);if(C.delete)continue;if(U.delete)A.push(U);else{const B=C.retain,Z=U.retain;let lt=typeof Z=="object"&&Z!==null?Z:x;if(typeof B=="object"&&B!==null&&typeof Z=="object"&&Z!==null){const ct=Object.keys(B)[0];if(ct===Object.keys(Z)[0]){const Rt=m.getHandler(ct);Rt&&(lt={[ct]:Rt.transform(B[ct],Z[ct],y)})}}A.retain(lt,i.default.transform(C.attributes,U.attributes,y))}}return A.chop()}transformPosition(f,y=!1){y=!!y;const g=new a.default(this.ops);let b=0;for(;g.hasNext()&&b<=f;){const v=g.peekLength(),A=g.peekType();if(g.next(),A==="delete"){f-=Math.min(v,f-b);continue}else A==="insert"&&(b<f||!y)&&(f+=v);b+=v}return f}}m.Op=l.default,m.OpIterator=a.default,m.AttributeMap=i.default,m.handlers={},t.default=m,r.exports=m,r.exports.default=m}(yr,yr.exports)),yr.exports}var It=Gf();const P=Br(It);class Ht extends Lt{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Ht.blotName="break";Ht.tagName="BR";let zt=class extends kr{};const Vf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Ur(r){return r.replace(/[&<>"']/g,t=>Vf[t])}const Xt=class Xt extends Li{static compare(t,e){const n=Xt.order.indexOf(t),s=Xt.order.indexOf(e);return n>=0||s>=0?n-s:t===e?0:t<e?-1:1}formatAt(t,e,n,s){if(Xt.compare(this.statics.blotName,n)<0&&this.scroll.query(n,D.BLOT)){const i=this.isolate(t,e);s&&i.wrap(n,s)}else super.formatAt(t,e,n,s)}optimize(t){if(super.optimize(t),this.parent instanceof Xt&&Xt.compare(this.statics.blotName,this.parent.statics.blotName)>0){const e=this.parent.isolate(this.offset(),this.length());this.moveChildren(e),e.wrap(this)}}};I(Xt,"allowedChildren",[Xt,Ht,Lt,zt]),I(Xt,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let te=Xt;const wo=1;class gt extends Un{constructor(){super(...arguments);I(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=Cl(this)),this.cache.delta}deleteAt(e,n){super.deleteAt(e,n),this.cache={}}formatAt(e,n,s,i){n<=0||(this.scroll.query(s,D.BLOCK)?e+n===this.length()&&this.format(s,i):super.formatAt(e,Math.min(n,this.length()-e-1),s,i),this.cache={})}insertAt(e,n,s){if(s!=null){super.insertAt(e,n,s),this.cache={};return}if(n.length===0)return;const i=n.split(`
`),l=i.shift();l.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),l):this.children.tail.insertAt(this.children.tail.length(),l),this.cache={});let a=this;i.reduce((u,h)=>(a=a.split(u,!0),a.insertAt(0,h),h.length),e+l.length)}insertBefore(e,n){const{head:s}=this.children;super.insertBefore(e,n),s instanceof Ht&&s.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+wo),this.cache.length}moveChildren(e,n){super.moveChildren(e,n),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n&&(e===0||e>=this.length()-wo)){const i=this.clone();return e===0?(this.parent.insertBefore(i,this),this):(this.parent.insertBefore(i,this.next),i)}const s=super.split(e,n);return this.cache={},s}}gt.blotName="block";gt.tagName="P";gt.defaultChild=Ht;gt.allowedChildren=[Ht,te,Lt,zt];class qt extends Lt{attach(){super.attach(),this.attributes=new jr(this.domNode)}delta(){return new P().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,e){const n=this.scroll.query(t,D.BLOCK_ATTRIBUTE);n!=null&&this.attributes.attribute(n,e)}formatAt(t,e,n,s){this.format(n,s)}insertAt(t,e,n){if(n!=null){super.insertAt(t,e,n);return}const s=e.split(`
`),i=s.pop(),l=s.map(u=>{const h=this.scroll.create(gt.blotName);return h.insertAt(0,u),h}),a=this.split(t);l.forEach(u=>{this.parent.insertBefore(u,a)}),i&&this.parent.insertBefore(this.scroll.create("text",i),a)}}qt.scope=D.BLOCK_BLOT;function Cl(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return r.descendants(Et).reduce((e,n)=>n.length()===0?e:e.insert(n.value(),Ct(n,{},t)),new P).insert(`
`,Ct(r))}function Ct(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return r==null||("formats"in r&&typeof r.formats=="function"&&(t={...t,...r.formats()},e&&delete t["code-token"]),r.parent==null||r.parent.statics.blotName==="scroll"||r.parent.statics.scope!==r.statics.scope)?t:Ct(r.parent,t,e)}const _t=class _t extends Lt{static value(){}constructor(t,e,n){super(t,e),this.selection=n,this.textNode=document.createTextNode(_t.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(t,e){if(this.savedLength!==0){super.format(t,e);return}let n=this,s=0;for(;n!=null&&n.statics.scope!==D.BLOCK_BLOT;)s+=n.offset(n.parent),n=n.parent;n!=null&&(this.savedLength=_t.CONTENTS.length,n.optimize(),n.formatAt(s,_t.CONTENTS.length,t,e),this.savedLength=0)}index(t,e){return t===this.textNode?0:super.index(t,e)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const t=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const e=this.prev instanceof zt?this.prev:null,n=e?e.length():0,s=this.next instanceof zt?this.next:null,i=s?s.text:"",{textNode:l}=this,a=l.data.split(_t.CONTENTS).join("");l.data=_t.CONTENTS;let u;if(e)u=e,(a||s)&&(e.insertAt(e.length(),a+i),s&&s.remove());else if(s)u=s,s.insertAt(0,a);else{const h=document.createTextNode(a);u=this.scroll.create(h),this.parent.insertBefore(u,this)}if(this.remove(),t){const h=(f,y)=>e&&f===e.domNode?y:f===l?n+y-1:s&&f===s.domNode?n+a.length+y:null,m=h(t.start.node,t.start.offset),E=h(t.end.node,t.end.offset);if(m!==null&&E!==null)return{startNode:u.domNode,startOffset:m,endNode:u.domNode,endOffset:E}}return null}update(t,e){if(t.some(n=>n.type==="characterData"&&n.target===this.textNode)){const n=this.restore();n&&(e.range=n)}}optimize(t){super.optimize(t);let{parent:e}=this;for(;e;){if(e.domNode.tagName==="A"){this.savedLength=_t.CONTENTS.length,e.isolate(this.offset(e),this.length()).unwrap(),this.savedLength=0;break}e=e.parent}}value(){return""}};I(_t,"blotName","cursor"),I(_t,"className","ql-cursor"),I(_t,"tagName","span"),I(_t,"CONTENTS","\uFEFF");let an=_t;var js={exports:{}},Ao;function Wf(){return Ao||(Ao=1,function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function s(u,h,m){this.fn=u,this.context=h,this.once=m||!1}function i(u,h,m,E,f){if(typeof m!="function")throw new TypeError("The listener must be a function");var y=new s(m,E||u,f),g=e?e+h:h;return u._events[g]?u._events[g].fn?u._events[g]=[u._events[g],y]:u._events[g].push(y):(u._events[g]=y,u._eventsCount++),u}function l(u,h){--u._eventsCount===0?u._events=new n:delete u._events[h]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var h=[],m,E;if(this._eventsCount===0)return h;for(E in m=this._events)t.call(m,E)&&h.push(e?E.slice(1):E);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(m)):h},a.prototype.listeners=function(h){var m=e?e+h:h,E=this._events[m];if(!E)return[];if(E.fn)return[E.fn];for(var f=0,y=E.length,g=new Array(y);f<y;f++)g[f]=E[f].fn;return g},a.prototype.listenerCount=function(h){var m=e?e+h:h,E=this._events[m];return E?E.fn?1:E.length:0},a.prototype.emit=function(h,m,E,f,y,g){var b=e?e+h:h;if(!this._events[b])return!1;var v=this._events[b],A=arguments.length,x,C;if(v.fn){switch(v.once&&this.removeListener(h,v.fn,void 0,!0),A){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,m),!0;case 3:return v.fn.call(v.context,m,E),!0;case 4:return v.fn.call(v.context,m,E,f),!0;case 5:return v.fn.call(v.context,m,E,f,y),!0;case 6:return v.fn.call(v.context,m,E,f,y,g),!0}for(C=1,x=new Array(A-1);C<A;C++)x[C-1]=arguments[C];v.fn.apply(v.context,x)}else{var U=v.length,B;for(C=0;C<U;C++)switch(v[C].once&&this.removeListener(h,v[C].fn,void 0,!0),A){case 1:v[C].fn.call(v[C].context);break;case 2:v[C].fn.call(v[C].context,m);break;case 3:v[C].fn.call(v[C].context,m,E);break;case 4:v[C].fn.call(v[C].context,m,E,f);break;default:if(!x)for(B=1,x=new Array(A-1);B<A;B++)x[B-1]=arguments[B];v[C].fn.apply(v[C].context,x)}}return!0},a.prototype.on=function(h,m,E){return i(this,h,m,E,!1)},a.prototype.once=function(h,m,E){return i(this,h,m,E,!0)},a.prototype.removeListener=function(h,m,E,f){var y=e?e+h:h;if(!this._events[y])return this;if(!m)return l(this,y),this;var g=this._events[y];if(g.fn)g.fn===m&&(!f||g.once)&&(!E||g.context===E)&&l(this,y);else{for(var b=0,v=[],A=g.length;b<A;b++)(g[b].fn!==m||f&&!g[b].once||E&&g[b].context!==E)&&v.push(g[b]);v.length?this._events[y]=v.length===1?v[0]:v:l(this,y)}return this},a.prototype.removeAllListeners=function(h){var m;return h?(m=e?e+h:h,this._events[m]&&l(this,m)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,r.exports=a}(js)),js.exports}var Zf=Wf();const Xf=Br(Zf),oi=new WeakMap,li=["error","warn","log","info"];let ai="warn";function Ol(r){if(ai&&li.indexOf(r)<=li.indexOf(ai)){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];console[r](...e)}}function he(r){return li.reduce((t,e)=>(t[e]=Ol.bind(console,e,r),t),{})}he.level=r=>{ai=r};Ol.level=he.level;const $s=he("quill:events"),Yf=["selectionchange","mousedown","mouseup","click"];Yf.forEach(r=>{document.addEventListener(r,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Array.from(document.querySelectorAll(".ql-container")).forEach(s=>{const i=oi.get(s);i&&i.emitter&&i.emitter.handleDOM(...e)})})});class k extends Xf{constructor(){super(),this.domListeners={},this.on("error",$s.error)}emit(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return $s.log.call($s,...e),super.emit(...e)}handleDOM(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];(this.domListeners[t.type]||[]).forEach(i=>{let{node:l,handler:a}=i;(t.target===l||l.contains(t.target))&&a(t,...n)})}listenDOM(t,e,n){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:e,handler:n})}}I(k,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),I(k,"sources",{API:"api",SILENT:"silent",USER:"user"});const Us=he("quill:selection");class Ie{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=t,this.length=e}}class Qf{constructor(t,e){this.emitter=e,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Ie(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,k.sources.USER),1)}),this.emitter.on(k.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const n=this.getNativeRange();n!=null&&n.start.node!==this.cursor.textNode&&this.emitter.once(k.events.SCROLL_UPDATE,(s,i)=>{try{this.root.contains(n.start.node)&&this.root.contains(n.end.node)&&this.setNativeRange(n.start.node,n.start.offset,n.end.node,n.end.offset);const l=i.some(a=>a.type==="characterData"||a.type==="childList"||a.type==="attributes"&&a.target===this.root);this.update(l?k.sources.SILENT:s)}catch{}})}),this.emitter.on(k.events.SCROLL_OPTIMIZE,(n,s)=>{if(s.range){const{startNode:i,startOffset:l,endNode:a,endOffset:u}=s.range;this.setNativeRange(i,l,a,u),this.update(k.sources.SILENT)}}),this.update(k.sources.SILENT)}handleComposition(){this.emitter.on(k.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(k.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const t=this.cursor.restore();if(!t)return;setTimeout(()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(k.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,e){this.scroll.update();const n=this.getNativeRange();if(!(n==null||!n.native.collapsed||this.scroll.query(t,D.BLOCK))){if(n.start.node!==this.cursor.textNode){const s=this.scroll.find(n.start.node,!1);if(s==null)return;if(s instanceof Et){const i=s.split(n.start.offset);s.parent.insertBefore(this.cursor,i)}else s.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const n=this.scroll.length();t=Math.min(t,n-1),e=Math.min(t+e,n-1)-t;let s,[i,l]=this.scroll.leaf(t);if(i==null)return null;if(e>0&&l===i.length()){const[m]=this.scroll.leaf(t+1);if(m){const[E]=this.scroll.line(t),[f]=this.scroll.line(t+1);E===f&&(i=m,l=0)}}[s,l]=i.position(l,!0);const a=document.createRange();if(e>0)return a.setStart(s,l),[i,l]=this.scroll.leaf(t+e),i==null?null:([s,l]=i.position(l,!0),a.setEnd(s,l),a.getBoundingClientRect());let u="left",h;if(s instanceof Text){if(!s.data.length)return null;l<s.data.length?(a.setStart(s,l),a.setEnd(s,l+1)):(a.setStart(s,l-1),a.setEnd(s,l),u="right"),h=a.getBoundingClientRect()}else{if(!(i.domNode instanceof Element))return null;h=i.domNode.getBoundingClientRect(),l>0&&(u="right")}return{bottom:h.top+h.height,height:h.height,left:h[u],right:h[u],top:h.top,width:0}}getNativeRange(){const t=document.getSelection();if(t==null||t.rangeCount<=0)return null;const e=t.getRangeAt(0);if(e==null)return null;const n=this.normalizeNative(e);return Us.info("getNativeRange",n),n}getRange(){const t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];const e=this.getNativeRange();return e==null?[null,null]:[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&zs(this.root,document.activeElement)}normalizedToRange(t){const e=[[t.start.node,t.start.offset]];t.native.collapsed||e.push([t.end.node,t.end.offset]);const n=e.map(l=>{const[a,u]=l,h=this.scroll.find(a,!0),m=h.offset(this.scroll);return u===0?m:h instanceof Et?m+h.index(a,u):m+h.length()}),s=Math.min(Math.max(...n),this.scroll.length()-1),i=Math.min(s,...n);return new Ie(i,s-i)}normalizeNative(t){if(!zs(this.root,t.startContainer)||!t.collapsed&&!zs(this.root,t.endContainer))return null;const e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach(n=>{let{node:s,offset:i}=n;for(;!(s instanceof Text)&&s.childNodes.length>0;)if(s.childNodes.length>i)s=s.childNodes[i],i=0;else if(s.childNodes.length===i)s=s.lastChild,s instanceof Text?i=s.data.length:s.childNodes.length>0?i=s.childNodes.length:i=s.childNodes.length+1;else break;n.node=s,n.offset=i}),e}rangeToNative(t){const e=this.scroll.length(),n=(s,i)=>{s=Math.min(e-1,s);const[l,a]=this.scroll.leaf(s);return l?l.position(a,i):[null,-1]};return[...n(t.index,!1),...n(t.index+t.length,!0)]}setNativeRange(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Us.info("setNativeRange",t,e,n,s),t!=null&&(this.root.parentNode==null||t.parentNode==null||n.parentNode==null))return;const l=document.getSelection();if(l!=null)if(t!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:a}=this.getNativeRange()||{};if(a==null||i||t!==a.startContainer||e!==a.startOffset||n!==a.endContainer||s!==a.endOffset){t instanceof Element&&t.tagName==="BR"&&(e=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),n instanceof Element&&n.tagName==="BR"&&(s=Array.from(n.parentNode.childNodes).indexOf(n),n=n.parentNode);const u=document.createRange();u.setStart(t,e),u.setEnd(n,s),l.removeAllRanges(),l.addRange(u)}}else l.removeAllRanges(),this.root.blur()}setRange(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k.sources.API;if(typeof e=="string"&&(n=e,e=!1),Us.info("setRange",t),t!=null){const s=this.rangeToNative(t);this.setNativeRange(...s,e)}else this.setNativeRange(null);this.update(n)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:k.sources.USER;const e=this.lastRange,[n,s]=this.getRange();if(this.lastRange=n,this.lastNative=s,this.lastRange!=null&&(this.savedRange=this.lastRange),!ge(e,this.lastRange)){if(!this.composing&&s!=null&&s.native.collapsed&&s.start.node!==this.cursor.textNode){const l=this.cursor.restore();l&&this.setNativeRange(l.startNode,l.startOffset,l.endNode,l.endOffset)}const i=[k.events.SELECTION_CHANGE,nn(this.lastRange),nn(e),t];this.emitter.emit(k.events.EDITOR_CHANGE,...i),t!==k.sources.SILENT&&this.emitter.emit(...i)}}}function zs(r,t){try{t.parentNode}catch{return!1}return r.contains(t)}const Jf=/^[ -~]*$/;let td=class{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();const n=To(t),s=new P;return nd(n.ops.slice()).reduce((l,a)=>{const u=It.Op.length(a);let h=a.attributes||{},m=!1,E=!1;if(a.insert!=null){if(s.retain(u),typeof a.insert=="string"){const g=a.insert;E=!g.endsWith(`
`)&&(e<=l||!!this.scroll.descendant(qt,l)[0]),this.scroll.insertAt(l,g);const[b,v]=this.scroll.line(l);let A=ve({},Ct(b));if(b instanceof gt){const[x]=b.descendant(Et,v);x&&(A=ve(A,Ct(x)))}h=It.AttributeMap.diff(A,h)||{}}else if(typeof a.insert=="object"){const g=Object.keys(a.insert)[0];if(g==null)return l;const b=this.scroll.query(g,D.INLINE)!=null;if(b)(e<=l||this.scroll.descendant(qt,l)[0])&&(E=!0);else if(l>0){const[v,A]=this.scroll.descendant(Et,l-1);v instanceof zt?v.value()[A]!==`
`&&(m=!0):v instanceof Lt&&v.statics.scope===D.INLINE_BLOT&&(m=!0)}if(this.scroll.insertAt(l,g,a.insert[g]),b){const[v]=this.scroll.descendant(Et,l);if(v){const A=ve({},Ct(v));h=It.AttributeMap.diff(A,h)||{}}}}e+=u}else if(s.push(a),a.retain!==null&&typeof a.retain=="object"){const g=Object.keys(a.retain)[0];if(g==null)return l;this.scroll.updateEmbedAt(l,g,a.retain[g])}Object.keys(h).forEach(g=>{this.scroll.formatAt(l,u,g,h[g])});const f=m?1:0,y=E?1:0;return e+=f+y,s.retain(f),s.delete(y),l+u+f+y},0),s.reduce((l,a)=>typeof a.delete=="number"?(this.scroll.deleteAt(l,a.delete),l):l+It.Op.length(a),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(n)}deleteText(t,e){return this.scroll.deleteAt(t,e),this.update(new P().retain(t).delete(e))}formatLine(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(n).forEach(i=>{this.scroll.lines(t,Math.max(e,1)).forEach(l=>{l.format(i,n[i])})}),this.scroll.optimize();const s=new P().retain(t).retain(e,nn(n));return this.update(s)}formatText(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(n).forEach(i=>{this.scroll.formatAt(t,e,i,n[i])});const s=new P().retain(t).retain(e,nn(n));return this.update(s)}getContents(t,e){return this.delta.slice(t,t+e)}getDelta(){return this.scroll.lines().reduce((t,e)=>t.concat(e.delta()),new P)}getFormat(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=[],s=[];e===0?this.scroll.path(t).forEach(a=>{const[u]=a;u instanceof gt?n.push(u):u instanceof Et&&s.push(u)}):(n=this.scroll.lines(t,e),s=this.scroll.descendants(Et,t,e));const[i,l]=[n,s].map(a=>{const u=a.shift();if(u==null)return{};let h=Ct(u);for(;Object.keys(h).length>0;){const m=a.shift();if(m==null)return h;h=ed(Ct(m),h)}return h});return{...i,...l}}getHTML(t,e){const[n,s]=this.scroll.line(t);if(n){const i=n.length();return n.length()>=s+e&&!(s===0&&e===i)?zn(n,s,e,!0):zn(this.scroll,t,e,!0)}return""}getText(t,e){return this.getContents(t,e).filter(n=>typeof n.insert=="string").map(n=>n.insert).join("")}insertContents(t,e){const n=To(e),s=new P().retain(t).concat(n);return this.scroll.insertContents(t,n),this.update(s)}insertEmbed(t,e,n){return this.scroll.insertAt(t,e,n),this.update(new P().retain(t).insert({[e]:n}))}insertText(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(t,e),Object.keys(n).forEach(s=>{this.scroll.formatAt(t,e.length,s,n[s])}),this.update(new P().retain(t).insert(e,nn(n)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const t=this.scroll.children.head;if((t==null?void 0:t.statics.blotName)!==gt.blotName)return!1;const e=t;return e.children.length>1?!1:e.children.head instanceof Ht}removeFormat(t,e){const n=this.getText(t,e),[s,i]=this.scroll.line(t+e);let l=0,a=new P;s!=null&&(l=s.length()-i,a=s.delta().slice(i,i+l-1).insert(`
`));const h=this.getContents(t,e+l).diff(new P().insert(n).concat(a)),m=new P().retain(t).concat(h);return this.applyDelta(m)}update(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const s=this.delta;if(e.length===1&&e[0].type==="characterData"&&e[0].target.data.match(Jf)&&this.scroll.find(e[0].target)){const i=this.scroll.find(e[0].target),l=Ct(i),a=i.offset(this.scroll),u=e[0].oldValue.replace(an.CONTENTS,""),h=new P().insert(u),m=new P().insert(i.value()),E=n&&{oldRange:No(n.oldRange,-a),newRange:No(n.newRange,-a)};t=new P().retain(a).concat(h.diff(m,E)).reduce((y,g)=>g.insert?y.insert(g.insert,l):y.push(g),new P),this.delta=s.compose(t)}else this.delta=this.getDelta(),(!t||!ge(s.compose(t),this.delta))&&(t=s.diff(this.delta,n));return t}};function tn(r,t,e){if(r.length===0){const[y]=Fs(e.pop());return t<=0?`</li></${y}>`:`</li></${y}>${tn([],t-1,e)}`}const[{child:n,offset:s,length:i,indent:l,type:a},...u]=r,[h,m]=Fs(a);if(l>t)return e.push(a),l===t+1?`<${h}><li${m}>${zn(n,s,i)}${tn(u,l,e)}`:`<${h}><li>${tn(r,t+1,e)}`;const E=e[e.length-1];if(l===t&&a===E)return`</li><li${m}>${zn(n,s,i)}${tn(u,l,e)}`;const[f]=Fs(e.pop());return`</li></${f}>${tn(r,t-1,e)}`}function zn(r,t,e){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in r&&typeof r.html=="function")return r.html(t,e);if(r instanceof zt)return Ur(r.value().slice(t,t+e)).replaceAll(" ","&nbsp;");if(r instanceof Ut){if(r.statics.blotName==="list-container"){const h=[];return r.children.forEachAt(t,e,(m,E,f)=>{const y="formats"in m&&typeof m.formats=="function"?m.formats():{};h.push({child:m,offset:E,length:f,indent:y.indent||0,type:y.list})}),tn(h,-1,[])}const s=[];if(r.children.forEachAt(t,e,(h,m,E)=>{s.push(zn(h,m,E))}),n||r.statics.blotName==="list")return s.join("");const{outerHTML:i,innerHTML:l}=r.domNode,[a,u]=i.split(`>${l}<`);return a==="<table"?`<table style="border: 1px solid #000;">${s.join("")}<${u}`:`${a}>${s.join("")}<${u}`}return r.domNode instanceof Element?r.domNode.outerHTML:""}function ed(r,t){return Object.keys(t).reduce((e,n)=>{if(r[n]==null)return e;const s=t[n];return s===r[n]?e[n]=s:Array.isArray(s)?s.indexOf(r[n])<0?e[n]=s.concat([r[n]]):e[n]=s:e[n]=[s,r[n]],e},{})}function Fs(r){const t=r==="ordered"?"ol":"ul";switch(r){case"checked":return[t,' data-list="checked"'];case"unchecked":return[t,' data-list="unchecked"'];default:return[t,""]}}function To(r){return r.reduce((t,e)=>{if(typeof e.insert=="string"){const n=e.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return t.insert(n,e.attributes)}return t.push(e)},new P)}function No(r,t){let{index:e,length:n}=r;return new Ie(e+t,n)}function nd(r){const t=[];return r.forEach(e=>{typeof e.insert=="string"?e.insert.split(`
`).forEach((s,i)=>{i&&t.push({insert:`
`,attributes:e.attributes}),s&&t.push({insert:s,attributes:e.attributes})}):t.push(e)}),t}class Kt{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=t,this.options=e}}I(Kt,"DEFAULTS",{});const Ar="\uFEFF";class _i extends Lt{constructor(t,e){super(t,e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(n=>{this.contentNode.appendChild(n)}),this.leftGuard=document.createTextNode(Ar),this.rightGuard=document.createTextNode(Ar),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,e)}restore(t){let e=null,n;const s=t.data.split(Ar).join("");if(t===this.leftGuard)if(this.prev instanceof zt){const i=this.prev.length();this.prev.insertAt(i,s),e={startNode:this.prev.domNode,startOffset:i+s.length}}else n=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(n),this),e={startNode:n,startOffset:s.length};else t===this.rightGuard&&(this.next instanceof zt?(this.next.insertAt(0,s),e={startNode:this.next.domNode,startOffset:s.length}):(n=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(n),this.next),e={startNode:n,startOffset:s.length}));return t.data=Ar,e}update(t,e){t.forEach(n=>{if(n.type==="characterData"&&(n.target===this.leftGuard||n.target===this.rightGuard)){const s=this.restore(n.target);s&&(e.range=s)}})}}class rd{constructor(t,e){I(this,"isComposing",!1);this.scroll=t,this.emitter=e,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",t=>{this.isComposing||this.handleCompositionStart(t)}),this.scroll.domNode.addEventListener("compositionend",t=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(t)})})}handleCompositionStart(t){const e=t.target instanceof Node?this.scroll.find(t.target,!0):null;e&&!(e instanceof _i)&&(this.emitter.emit(k.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(k.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(k.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(k.events.COMPOSITION_END,t),this.isComposing=!1}}const Mn=class Mn{constructor(t,e){I(this,"modules",{});this.quill=t,this.options=e}init(){Object.keys(this.options.modules).forEach(t=>{this.modules[t]==null&&this.addModule(t)})}addModule(t){const e=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}};I(Mn,"DEFAULTS",{modules:{}}),I(Mn,"themes",{default:Mn});let cn=Mn;const sd=r=>r.parentElement||r.getRootNode().host||null,id=r=>{const t=r.getBoundingClientRect(),e="offsetWidth"in r&&Math.abs(t.width)/r.offsetWidth||1,n="offsetHeight"in r&&Math.abs(t.height)/r.offsetHeight||1;return{top:t.top,right:t.left+r.clientWidth*e,bottom:t.top+r.clientHeight*n,left:t.left}},Tr=r=>{const t=parseInt(r,10);return Number.isNaN(t)?0:t},xo=(r,t,e,n,s,i)=>r<e&&t>n?0:r<e?-(e-r+s):t>n?t-r>n-e?r+s-e:t-n+i:0,od=(r,t)=>{var i,l,a;const e=r.ownerDocument;let n=t,s=r;for(;s;){const u=s===e.body,h=u?{top:0,right:((i=window.visualViewport)==null?void 0:i.width)??e.documentElement.clientWidth,bottom:((l=window.visualViewport)==null?void 0:l.height)??e.documentElement.clientHeight,left:0}:id(s),m=getComputedStyle(s),E=xo(n.left,n.right,h.left,h.right,Tr(m.scrollPaddingLeft),Tr(m.scrollPaddingRight)),f=xo(n.top,n.bottom,h.top,h.bottom,Tr(m.scrollPaddingTop),Tr(m.scrollPaddingBottom));if(E||f)if(u)(a=e.defaultView)==null||a.scrollBy(E,f);else{const{scrollLeft:y,scrollTop:g}=s;f&&(s.scrollTop+=f),E&&(s.scrollLeft+=E);const b=s.scrollLeft-y,v=s.scrollTop-g;n={left:n.left-b,top:n.top-v,right:n.right-b,bottom:n.bottom-v}}s=u||m.position==="fixed"?null:sd(s)}},ld=100,ad=["block","break","cursor","inline","scroll","text"],cd=(r,t,e)=>{const n=new ln;return ad.forEach(s=>{const i=t.query(s);i&&n.register(i)}),r.forEach(s=>{let i=t.query(s);i||e.error(`Cannot register "${s}" specified in "formats" config. Are you sure it was registered?`);let l=0;for(;i;)if(n.register(i),i="blotName"in i?i.requiredContainer??null:null,l+=1,l>ld){e.error(`Cycle detected in registering blot requiredContainer: "${s}"`);break}}),n},sn=he("quill"),Nr=new ln;Ut.uiClass="ql-ui";const Dt=class Dt{static debug(t){t===!0&&(t="log"),he.level(t)}static find(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return oi.get(t)||Nr.find(t,e)}static import(t){return this.imports[t]==null&&sn.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const t=arguments.length<=0?void 0:arguments[0],e=!!(!(arguments.length<=1)&&arguments[1]),n="attrName"in t?t.attrName:t.blotName;typeof n=="string"?this.register(`formats/${n}`,t,e):Object.keys(t).forEach(s=>{this.register(s,t[s],e)})}else{const t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],n=!!(!(arguments.length<=2)&&arguments[2]);this.imports[t]!=null&&!n&&sn.warn(`Overwriting ${t} with`,e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&e&&typeof e!="boolean"&&e.blotName!=="abstract"&&Nr.register(e),typeof e.register=="function"&&e.register(Nr)}}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=ud(t,e),this.container=this.options.container,this.container==null){sn.error("Invalid Quill container",t);return}this.options.debug&&Dt.debug(this.options.debug);const n=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",oi.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new k;const s=Si.blotName,i=this.options.registry.query(s);if(!i||!("blotName"in i))throw new Error(`Cannot initialize Quill without "${s}" blot`);if(this.scroll=new i(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new td(this.scroll),this.selection=new Qf(this.scroll,this.emitter),this.composition=new rd(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(k.events.EDITOR_CHANGE,l=>{l===k.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(k.events.SCROLL_UPDATE,(l,a)=>{const u=this.selection.lastRange,[h]=this.selection.getRange(),m=u&&h?{oldRange:u,newRange:h}:void 0;Mt.call(this,()=>this.editor.update(null,a,m),l)}),this.emitter.on(k.events.SCROLL_EMBED_UPDATE,(l,a)=>{const u=this.selection.lastRange,[h]=this.selection.getRange(),m=u&&h?{oldRange:u,newRange:h}:void 0;Mt.call(this,()=>{const E=new P().retain(l.offset(this)).retain({[l.statics.blotName]:a});return this.editor.update(E,[],m)},Dt.sources.USER)}),n){const l=this.clipboard.convert({html:`${n}<p><br></p>`,text:`
`});this.setContents(l)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof t=="string"){const n=t;t=document.createElement("div"),t.classList.add(n)}return this.container.insertBefore(t,e),t}blur(){this.selection.setRange(null)}deleteText(t,e,n){return[t,e,,n]=oe(t,e,n),Mt.call(this,()=>this.editor.deleteText(t,e),n,t,-1*e)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;const e=t();return this.allowReadOnlyEdits=!1,e}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k.sources.API;return Mt.call(this,()=>{const s=this.getSelection(!0);let i=new P;if(s==null)return i;if(this.scroll.query(t,D.BLOCK))i=this.editor.formatLine(s.index,s.length,{[t]:e});else{if(s.length===0)return this.selection.format(t,e),i;i=this.editor.formatText(s.index,s.length,{[t]:e})}return this.setSelection(s,k.sources.SILENT),i},n)}formatLine(t,e,n,s,i){let l;return[t,e,l,i]=oe(t,e,n,s,i),Mt.call(this,()=>this.editor.formatLine(t,e,l),i,t,0)}formatText(t,e,n,s,i){let l;return[t,e,l,i]=oe(t,e,n,s,i),Mt.call(this,()=>this.editor.formatText(t,e,l),i,t,0)}getBounds(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=null;if(typeof t=="number"?n=this.selection.getBounds(t,e):n=this.selection.getBounds(t.index,t.length),!n)return null;const s=this.container.getBoundingClientRect();return{bottom:n.bottom-s.top,height:n.height,left:n.left-s.left,right:n.right-s.left,top:n.top-s.top,width:n.width}}getContents(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-t;return[t,e]=oe(t,e),this.editor.getContents(t,e)}getFormat(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof t=="number"?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof t!="number"?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}getModule(t){return this.theme.modules[t]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(e=e??this.getLength()-t),[t,e]=oe(t,e),this.editor.getHTML(t,e)}getText(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(e=e??this.getLength()-t),[t,e]=oe(t,e),this.editor.getText(t,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,e,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Dt.sources.API;return Mt.call(this,()=>this.editor.insertEmbed(t,e,n),s,t)}insertText(t,e,n,s,i){let l;return[t,,l,i]=oe(t,0,n,s,i),Mt.call(this,()=>this.editor.insertText(t,e,l),i,t,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,e,n){return[t,e,,n]=oe(t,e,n),Mt.call(this,()=>this.editor.removeFormat(t,e),n,t)}scrollRectIntoView(t){od(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const t=this.selection.lastRange,e=t&&this.selection.getBounds(t.index,t.length);e&&this.scrollRectIntoView(e)}setContents(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k.sources.API;return Mt.call(this,()=>{t=new P(t);const n=this.getLength(),s=this.editor.deleteText(0,n),i=this.editor.insertContents(0,t),l=this.editor.deleteText(this.getLength()-1,1);return s.compose(i).compose(l)},e)}setSelection(t,e,n){t==null?this.selection.setRange(null,e||Dt.sources.API):([t,e,,n]=oe(t,e,n),this.selection.setRange(new Ie(Math.max(0,t),e),n),n!==k.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k.sources.API;const n=new P().insert(t);return this.setContents(n,e)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:k.sources.USER;const e=this.scroll.update(t);return this.selection.update(t),e}updateContents(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k.sources.API;return Mt.call(this,()=>(t=new P(t),this.editor.applyDelta(t)),e,!0)}};I(Dt,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Nr,theme:"default"}),I(Dt,"events",k.events),I(Dt,"sources",k.sources),I(Dt,"version","2.0.3"),I(Dt,"imports",{delta:P,parchment:zf,"core/module":Kt,"core/theme":cn});let N=Dt;function Lo(r){return typeof r=="string"?document.querySelector(r):r}function Hs(r){return Object.entries(r??{}).reduce((t,e)=>{let[n,s]=e;return{...t,[n]:s===!0?{}:s}},{})}function So(r){return Object.fromEntries(Object.entries(r).filter(t=>t[1]!==void 0))}function ud(r,t){const e=Lo(r);if(!e)throw new Error("Invalid Quill container");const s=!t.theme||t.theme===N.DEFAULTS.theme?cn:N.import(`themes/${t.theme}`);if(!s)throw new Error(`Invalid theme ${t.theme}. Did you register it?`);const{modules:i,...l}=N.DEFAULTS,{modules:a,...u}=s.DEFAULTS;let h=Hs(t.modules);h!=null&&h.toolbar&&h.toolbar.constructor!==Object&&(h={...h,toolbar:{container:h.toolbar}});const m=ve({},Hs(i),Hs(a),h),E={...l,...So(u),...So(t)};let f=t.registry;return f?t.formats&&sn.warn('Ignoring "formats" option because "registry" is specified'):f=t.formats?cd(t.formats,E.registry,sn):E.registry,{...E,registry:f,container:e,theme:s,modules:Object.entries(m).reduce((y,g)=>{let[b,v]=g;if(!v)return y;const A=N.import(`modules/${b}`);return A==null?(sn.error(`Cannot load ${b} module. Are you sure you registered it?`),y):{...y,[b]:ve({},A.DEFAULTS||{},v)}},{}),bounds:Lo(E.bounds)}}function Mt(r,t,e,n){if(!this.isEnabled()&&t===k.sources.USER&&!this.allowReadOnlyEdits)return new P;let s=e==null?null:this.getSelection();const i=this.editor.delta,l=r();if(s!=null&&(e===!0&&(e=s.index),n==null?s=_o(s,l,t):n!==0&&(s=_o(s,e,n,t)),this.setSelection(s,k.sources.SILENT)),l.length()>0){const a=[k.events.TEXT_CHANGE,l,i,t];this.emitter.emit(k.events.EDITOR_CHANGE,...a),t!==k.sources.SILENT&&this.emitter.emit(...a)}return l}function oe(r,t,e,n,s){let i={};return typeof r.index=="number"&&typeof r.length=="number"?typeof t!="number"?(s=n,n=e,e=t,t=r.length,r=r.index):(t=r.length,r=r.index):typeof t!="number"&&(s=n,n=e,e=t,t=0),typeof e=="object"?(i=e,s=n):typeof e=="string"&&(n!=null?i[e]=n:s=e),s=s||k.sources.API,[r,t,i,s]}function _o(r,t,e,n){const s=typeof e=="number"?e:0;if(r==null)return null;let i,l;return t&&typeof t.transformPosition=="function"?[i,l]=[r.index,r.index+r.length].map(a=>t.transformPosition(a,n!==k.sources.USER)):[i,l]=[r.index,r.index+r.length].map(a=>a<t||a===t&&n===k.sources.USER?a:s>=0?a+s:Math.max(t,a+s)),new Ie(i,l-i)}class Me extends $r{}function Co(r){return r instanceof gt||r instanceof qt}function Oo(r){return typeof r.updateContent=="function"}class en extends Si{constructor(t,e,n){let{emitter:s}=n;super(t,e),this.emitter=s,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",i=>this.handleDragStart(i))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const t=this.batch;this.batch=!1,this.update(t)}emitMount(t){this.emitter.emit(k.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit(k.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,e){this.emitter.emit(k.events.SCROLL_EMBED_UPDATE,t,e)}deleteAt(t,e){const[n,s]=this.line(t),[i]=this.line(t+e);if(super.deleteAt(t,e),i!=null&&n!==i&&s>0){if(n instanceof qt||i instanceof qt){this.optimize();return}const l=i.children.head instanceof Ht?null:i.children.head;n.moveChildren(i,l),n.remove()}this.optimize()}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,e,n,s){super.formatAt(t,e,n,s),this.optimize()}insertAt(t,e,n){if(t>=this.length())if(n==null||this.scroll.query(e,D.BLOCK)==null){const s=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(s),n==null&&e.endsWith(`
`)?s.insertAt(0,e.slice(0,-1),n):s.insertAt(0,e,n)}else{const s=this.scroll.create(e,n);this.appendChild(s)}else super.insertAt(t,e,n);this.optimize()}insertBefore(t,e){if(t.statics.scope===D.INLINE_BLOT){const n=this.scroll.create(this.statics.defaultChild.blotName);n.appendChild(t),super.insertBefore(n,e)}else super.insertBefore(t,e)}insertContents(t,e){const n=this.deltaToRenderBlocks(e.concat(new P().insert(`
`))),s=n.pop();if(s==null)return;this.batchStart();const i=n.shift();if(i){const u=i.type==="block"&&(i.delta.length()===0||!this.descendant(qt,t)[0]&&t<this.length()),h=i.type==="block"?i.delta:new P().insert({[i.key]:i.value});Ks(this,t,h);const m=i.type==="block"?1:0,E=t+h.length()+m;u&&this.insertAt(E-1,`
`);const f=Ct(this.line(t)[0]),y=It.AttributeMap.diff(f,i.attributes)||{};Object.keys(y).forEach(g=>{this.formatAt(E-1,1,g,y[g])}),t=E}let[l,a]=this.children.find(t);if(n.length&&(l&&(l=l.split(a),a=0),n.forEach(u=>{if(u.type==="block"){const h=this.createBlock(u.attributes,l||void 0);Ks(h,0,u.delta)}else{const h=this.create(u.key,u.value);this.insertBefore(h,l||void 0),Object.keys(u.attributes).forEach(m=>{h.format(m,u.attributes[m])})}})),s.type==="block"&&s.delta.length()){const u=l?l.offset(l.scroll)+a:this.length();Ks(this,u,s.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(t){const e=this.path(t).pop();if(!e)return[null,-1];const[n,s]=e;return n instanceof Et?[n,s]:[null,-1]}line(t){return t===this.length()?this.line(t-1):this.descendant(Co,t)}lines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const n=(s,i,l)=>{let a=[],u=l;return s.children.forEachAt(i,l,(h,m,E)=>{Co(h)?a.push(h):h instanceof $r&&(a=a.concat(n(h,m,u))),u-=E}),a};return n(this,t,e)}optimize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(t,e),t.length>0&&this.emitter.emit(k.events.SCROLL_OPTIMIZE,t,e))}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch){Array.isArray(t)&&(this.batch=this.batch.concat(t));return}let e=k.sources.USER;typeof t=="string"&&(e=t),Array.isArray(t)||(t=this.observer.takeRecords()),t=t.filter(n=>{let{target:s}=n;const i=this.find(s,!0);return i&&!Oo(i)}),t.length>0&&this.emitter.emit(k.events.SCROLL_BEFORE_UPDATE,e,t),super.update(t.concat([])),t.length>0&&this.emitter.emit(k.events.SCROLL_UPDATE,e,t)}updateEmbedAt(t,e,n){const[s]=this.descendant(i=>i instanceof qt,t);s&&s.statics.blotName===e&&Oo(s)&&s.updateContent(n)}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){const e=[];let n=new P;return t.forEach(s=>{const i=s==null?void 0:s.insert;if(i)if(typeof i=="string"){const l=i.split(`
`);l.slice(0,-1).forEach(u=>{n.insert(u,s.attributes),e.push({type:"block",delta:n,attributes:s.attributes??{}}),n=new P});const a=l[l.length-1];a&&n.insert(a,s.attributes)}else{const l=Object.keys(i)[0];if(!l)return;this.query(l,D.INLINE)?n.push(s):(n.length()&&e.push({type:"block",delta:n,attributes:{}}),n=new P,e.push({type:"blockEmbed",key:l,value:i[l],attributes:s.attributes??{}}))}}),n.length()&&e.push({type:"block",delta:n,attributes:{}}),e}createBlock(t,e){let n;const s={};Object.entries(t).forEach(a=>{let[u,h]=a;this.query(u,D.BLOCK&D.BLOT)!=null?n=u:s[u]=h});const i=this.create(n||this.statics.defaultChild.blotName,n?t[n]:void 0);this.insertBefore(i,e||void 0);const l=i.length();return Object.entries(s).forEach(a=>{let[u,h]=a;i.formatAt(0,l,u,h)}),i}}I(en,"blotName","scroll"),I(en,"className","ql-editor"),I(en,"tagName","DIV"),I(en,"defaultChild",gt),I(en,"allowedChildren",[gt,qt,Me]);function Ks(r,t,e){e.reduce((n,s)=>{const i=It.Op.length(s);let l=s.attributes||{};if(s.insert!=null){if(typeof s.insert=="string"){const a=s.insert;r.insertAt(n,a);const[u]=r.descendant(Et,n),h=Ct(u);l=It.AttributeMap.diff(h,l)||{}}else if(typeof s.insert=="object"){const a=Object.keys(s.insert)[0];if(a==null)return n;if(r.insertAt(n,a,s.insert[a]),r.scroll.query(a,D.INLINE)!=null){const[h]=r.descendant(Et,n),m=Ct(h);l=It.AttributeMap.diff(m,l)||{}}}}return Object.keys(l).forEach(a=>{r.formatAt(n,i,a,l[a])}),n+i},t)}const Ci={scope:D.BLOCK,whitelist:["right","center","justify"]},hd=new Jt("align","align",Ci),ql=new Ft("align","ql-align",Ci),Il=new Ae("align","text-align",Ci);class Rl extends Ae{value(t){let e=super.value(t);return e.startsWith("rgb(")?(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${e.split(",").map(s=>`00${parseInt(s,10).toString(16)}`.slice(-2)).join("")}`):e}}const fd=new Ft("color","ql-color",{scope:D.INLINE}),Oi=new Rl("color","color",{scope:D.INLINE}),dd=new Ft("background","ql-bg",{scope:D.INLINE}),qi=new Rl("background","background-color",{scope:D.INLINE});class Pe extends Me{static create(t){const e=super.create(t);return e.setAttribute("spellcheck","false"),e}code(t,e){return this.children.map(n=>n.length()<=1?"":n.domNode.innerText).join(`
`).slice(t,t+e)}html(t,e){return`<pre>
${Ur(this.code(t,e))}
</pre>`}}class wt extends gt{static register(){N.register(Pe)}}I(wt,"TAB","  ");class Ii extends te{}Ii.blotName="code";Ii.tagName="CODE";wt.blotName="code-block";wt.className="ql-code-block";wt.tagName="DIV";Pe.blotName="code-block-container";Pe.className="ql-code-block-container";Pe.tagName="DIV";Pe.allowedChildren=[wt];wt.allowedChildren=[zt,Ht,an];wt.requiredContainer=Pe;const Ri={scope:D.BLOCK,whitelist:["rtl"]},kl=new Jt("direction","dir",Ri),Bl=new Ft("direction","ql-direction",Ri),Ml=new Ae("direction","direction",Ri),Pl={scope:D.INLINE,whitelist:["serif","monospace"]},Dl=new Ft("font","ql-font",Pl);class pd extends Ae{value(t){return super.value(t).replace(/["']/g,"")}}const jl=new pd("font","font-family",Pl),$l=new Ft("size","ql-size",{scope:D.INLINE,whitelist:["small","large","huge"]}),Ul=new Ae("size","font-size",{scope:D.INLINE,whitelist:["10px","18px","32px"]}),gd=he("quill:keyboard"),md=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class zr extends Kt{static match(t,e){return["altKey","ctrlKey","metaKey","shiftKey"].some(n=>!!e[n]!==t[n]&&e[n]!==null)?!1:e.key===t.key||e.key===t.which}constructor(t,e){super(t,e),this.bindings={},Object.keys(this.options.bindings).forEach(n=>{this.options.bindings[n]&&this.addBinding(this.options.bindings[n])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=yd(t);if(s==null){gd.warn("Attempted to add invalid keyboard binding",s);return}typeof e=="function"&&(e={handler:e}),typeof n=="function"&&(n={handler:n}),(Array.isArray(s.key)?s.key:[s.key]).forEach(l=>{const a={...s,key:l,...e,...n};this.bindings[a.key]=this.bindings[a.key]||[],this.bindings[a.key].push(a)})}listen(){this.quill.root.addEventListener("keydown",t=>{if(t.defaultPrevented||t.isComposing||t.keyCode===229&&(t.key==="Enter"||t.key==="Backspace"))return;const s=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter(A=>zr.match(t,A));if(s.length===0)return;const i=N.find(t.target,!0);if(i&&i.scroll!==this.quill.scroll)return;const l=this.quill.getSelection();if(l==null||!this.quill.hasFocus())return;const[a,u]=this.quill.getLine(l.index),[h,m]=this.quill.getLeaf(l.index),[E,f]=l.length===0?[h,m]:this.quill.getLeaf(l.index+l.length),y=h instanceof kr?h.value().slice(0,m):"",g=E instanceof kr?E.value().slice(f):"",b={collapsed:l.length===0,empty:l.length===0&&a.length()<=1,format:this.quill.getFormat(l),line:a,offset:u,prefix:y,suffix:g,event:t};s.some(A=>{if(A.collapsed!=null&&A.collapsed!==b.collapsed||A.empty!=null&&A.empty!==b.empty||A.offset!=null&&A.offset!==b.offset)return!1;if(Array.isArray(A.format)){if(A.format.every(x=>b.format[x]==null))return!1}else if(typeof A.format=="object"&&!Object.keys(A.format).every(x=>A.format[x]===!0?b.format[x]!=null:A.format[x]===!1?b.format[x]==null:ge(A.format[x],b.format[x])))return!1;return A.prefix!=null&&!A.prefix.test(b.prefix)||A.suffix!=null&&!A.suffix.test(b.suffix)?!1:A.handler.call(this,l,b,A)!==!0})&&t.preventDefault()})}handleBackspace(t,e){const n=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(t.index===0||this.quill.getLength()<=1)return;let s={};const[i]=this.quill.getLine(t.index);let l=new P().retain(t.index-n).delete(n);if(e.offset===0){const[a]=this.quill.getLine(t.index-1);if(a&&!(a.statics.blotName==="block"&&a.length()<=1)){const h=i.formats(),m=this.quill.getFormat(t.index-1,1);if(s=It.AttributeMap.diff(h,m)||{},Object.keys(s).length>0){const E=new P().retain(t.index+i.length()-2).retain(1,s);l=l.compose(E)}}}this.quill.updateContents(l,N.sources.USER),this.quill.focus()}handleDelete(t,e){const n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(t.index>=this.quill.getLength()-n)return;let s={};const[i]=this.quill.getLine(t.index);let l=new P().retain(t.index).delete(n);if(e.offset>=i.length()-1){const[a]=this.quill.getLine(t.index+1);if(a){const u=i.formats(),h=this.quill.getFormat(t.index,1);s=It.AttributeMap.diff(u,h)||{},Object.keys(s).length>0&&(l=l.retain(a.length()-1).retain(1,s))}}this.quill.updateContents(l,N.sources.USER),this.quill.focus()}handleDeleteRange(t){ki({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,e){const n=Object.keys(e.format).reduce((i,l)=>(this.quill.scroll.query(l,D.BLOCK)&&!Array.isArray(e.format[l])&&(i[l]=e.format[l]),i),{}),s=new P().retain(t.index).delete(t.length).insert(`
`,n);this.quill.updateContents(s,N.sources.USER),this.quill.setSelection(t.index+1,N.sources.SILENT),this.quill.focus()}}const bd={bindings:{bold:Gs("bold"),italic:Gs("italic"),underline:Gs("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(r,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","+1",N.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(r,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","-1",N.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(r,t){t.format.indent!=null?this.quill.format("indent","-1",N.sources.USER):t.format.list!=null&&this.quill.format("list",!1,N.sources.USER)}},"indent code-block":qo(!0),"outdent code-block":qo(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(r){this.quill.deleteText(r.index-1,1,N.sources.USER)}},tab:{key:"Tab",handler(r,t){if(t.format.table)return!0;this.quill.history.cutoff();const e=new P().retain(r.index).delete(r.length).insert("	");return this.quill.updateContents(e,N.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(r.index+1,N.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,N.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(r,t){const e={list:!1};t.format.indent&&(e.indent=!1),this.quill.formatLine(r.index,r.length,e,N.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(r){const[t,e]=this.quill.getLine(r.index),n={...t.formats(),list:"checked"},s=new P().retain(r.index).insert(`
`,n).retain(t.length()-e-1).retain(1,{list:"unchecked"});this.quill.updateContents(s,N.sources.USER),this.quill.setSelection(r.index+1,N.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(r,t){const[e,n]=this.quill.getLine(r.index),s=new P().retain(r.index).insert(`
`,t.format).retain(e.length()-n-1).retain(1,{header:null});this.quill.updateContents(s,N.sources.USER),this.quill.setSelection(r.index+1,N.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(r){const t=this.quill.getModule("table");if(t){const[e,n,s,i]=t.getTable(r),l=vd(e,n,s,i);if(l==null)return;let a=e.offset();if(l<0){const u=new P().retain(a).insert(`
`);this.quill.updateContents(u,N.sources.USER),this.quill.setSelection(r.index+1,r.length,N.sources.SILENT)}else if(l>0){a+=e.length();const u=new P().retain(a).insert(`
`);this.quill.updateContents(u,N.sources.USER),this.quill.setSelection(a,N.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(r,t){const{event:e,line:n}=t,s=n.offset(this.quill.scroll);e.shiftKey?this.quill.setSelection(s-1,N.sources.USER):this.quill.setSelection(s+n.length(),N.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(r,t){if(this.quill.scroll.query("list")==null)return!0;const{length:e}=t.prefix,[n,s]=this.quill.getLine(r.index);if(s>e)return!0;let i;switch(t.prefix.trim()){case"[]":case"[ ]":i="unchecked";break;case"[x]":i="checked";break;case"-":case"*":i="bullet";break;default:i="ordered"}this.quill.insertText(r.index," ",N.sources.USER),this.quill.history.cutoff();const l=new P().retain(r.index-s).delete(e+1).retain(n.length()-2-s).retain(1,{list:i});return this.quill.updateContents(l,N.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(r.index-e,N.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(r){const[t,e]=this.quill.getLine(r.index);let n=2,s=t;for(;s!=null&&s.length()<=1&&s.formats()["code-block"];)if(s=s.prev,n-=1,n<=0){const i=new P().retain(r.index+t.length()-e-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(i,N.sources.USER),this.quill.setSelection(r.index-1,N.sources.SILENT),!1}return!0}},"embed left":xr("ArrowLeft",!1),"embed left shift":xr("ArrowLeft",!0),"embed right":xr("ArrowRight",!1),"embed right shift":xr("ArrowRight",!0),"table down":Io(!1),"table up":Io(!0)}};zr.DEFAULTS=bd;function qo(r){return{key:"Tab",shiftKey:!r,format:{"code-block":!0},handler(t,e){let{event:n}=e;const s=this.quill.scroll.query("code-block"),{TAB:i}=s;if(t.length===0&&!n.shiftKey){this.quill.insertText(t.index,i,N.sources.USER),this.quill.setSelection(t.index+i.length,N.sources.SILENT);return}const l=t.length===0?this.quill.getLines(t.index,1):this.quill.getLines(t);let{index:a,length:u}=t;l.forEach((h,m)=>{r?(h.insertAt(0,i),m===0?a+=i.length:u+=i.length):h.domNode.textContent.startsWith(i)&&(h.deleteAt(0,i.length),m===0?a-=i.length:u-=i.length)}),this.quill.update(N.sources.USER),this.quill.setSelection(a,u,N.sources.SILENT)}}}function xr(r,t){return{key:r,shiftKey:t,altKey:null,[r==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(n){let{index:s}=n;r==="ArrowRight"&&(s+=n.length+1);const[i]=this.quill.getLeaf(s);return i instanceof Lt?(r==="ArrowLeft"?t?this.quill.setSelection(n.index-1,n.length+1,N.sources.USER):this.quill.setSelection(n.index-1,N.sources.USER):t?this.quill.setSelection(n.index,n.length+1,N.sources.USER):this.quill.setSelection(n.index+n.length+1,N.sources.USER),!1):!0}}}function Gs(r){return{key:r[0],shortKey:!0,handler(t,e){this.quill.format(r,!e.format[r],N.sources.USER)}}}function Io(r){return{key:r?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(t,e){const n=r?"prev":"next",s=e.line,i=s.parent[n];if(i!=null){if(i.statics.blotName==="table-row"){let l=i.children.head,a=s;for(;a.prev!=null;)a=a.prev,l=l.next;const u=l.offset(this.quill.scroll)+Math.min(e.offset,l.length()-1);this.quill.setSelection(u,0,N.sources.USER)}}else{const l=s.table()[n];l!=null&&(r?this.quill.setSelection(l.offset(this.quill.scroll)+l.length()-1,0,N.sources.USER):this.quill.setSelection(l.offset(this.quill.scroll),0,N.sources.USER))}return!1}}}function yd(r){if(typeof r=="string"||typeof r=="number")r={key:r};else if(typeof r=="object")r=nn(r);else return null;return r.shortKey&&(r[md]=r.shortKey,delete r.shortKey),r}function ki(r){let{quill:t,range:e}=r;const n=t.getLines(e);let s={};if(n.length>1){const i=n[0].formats(),l=n[n.length-1].formats();s=It.AttributeMap.diff(l,i)||{}}t.deleteText(e,N.sources.USER),Object.keys(s).length>0&&t.formatLine(e.index,1,s,N.sources.USER),t.setSelection(e.index,N.sources.SILENT)}function vd(r,t,e,n){return t.prev==null&&t.next==null?e.prev==null&&e.next==null?n===0?-1:1:e.prev==null?-1:1:t.prev==null?-1:t.next==null?1:null}const Ed=/font-weight:\s*normal/,wd=["P","OL","UL"],Ro=r=>r&&wd.includes(r.tagName),Ad=r=>{Array.from(r.querySelectorAll("br")).filter(t=>Ro(t.previousElementSibling)&&Ro(t.nextElementSibling)).forEach(t=>{var e;(e=t.parentNode)==null||e.removeChild(t)})},Td=r=>{Array.from(r.querySelectorAll('b[style*="font-weight"]')).filter(t=>{var e;return(e=t.getAttribute("style"))==null?void 0:e.match(Ed)}).forEach(t=>{var n;const e=r.createDocumentFragment();e.append(...t.childNodes),(n=t.parentNode)==null||n.replaceChild(e,t)})};function Nd(r){r.querySelector('[id^="docs-internal-guid-"]')&&(Td(r),Ad(r))}const xd=/\bmso-list:[^;]*ignore/i,Ld=/\bmso-list:[^;]*\bl(\d+)/i,Sd=/\bmso-list:[^;]*\blevel(\d+)/i,_d=(r,t)=>{const e=r.getAttribute("style"),n=e==null?void 0:e.match(Ld);if(!n)return null;const s=Number(n[1]),i=e==null?void 0:e.match(Sd),l=i?Number(i[1]):1,a=new RegExp(`@list l${s}:level${l}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),u=t.match(a),h=u&&u[1]==="bullet"?"bullet":"ordered";return{id:s,indent:l,type:h,element:r}},Cd=r=>{var l,a;const t=Array.from(r.querySelectorAll("[style*=mso-list]")),e=[],n=[];t.forEach(u=>{(u.getAttribute("style")||"").match(xd)?e.push(u):n.push(u)}),e.forEach(u=>{var h;return(h=u.parentNode)==null?void 0:h.removeChild(u)});const s=r.documentElement.innerHTML,i=n.map(u=>_d(u,s)).filter(u=>u);for(;i.length;){const u=[];let h=i.shift();for(;h;)u.push(h),h=i.length&&((l=i[0])==null?void 0:l.element)===h.element.nextElementSibling&&i[0].id===h.id?i.shift():null;const m=document.createElement("ul");u.forEach(y=>{const g=document.createElement("li");g.setAttribute("data-list",y.type),y.indent>1&&g.setAttribute("class",`ql-indent-${y.indent-1}`),g.innerHTML=y.element.innerHTML,m.appendChild(g)});const E=(a=u[0])==null?void 0:a.element,{parentNode:f}=E??{};E&&(f==null||f.replaceChild(m,E)),u.slice(1).forEach(y=>{let{element:g}=y;f==null||f.removeChild(g)})}};function Od(r){r.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&Cd(r)}const qd=[Od,Nd],Id=r=>{r.documentElement&&qd.forEach(t=>{t(r)})},Rd=he("quill:clipboard"),kd=[[Node.TEXT_NODE,Gd],[Node.TEXT_NODE,Bo],["br",jd],[Node.ELEMENT_NODE,Bo],[Node.ELEMENT_NODE,Dd],[Node.ELEMENT_NODE,Pd],[Node.ELEMENT_NODE,Hd],["li",zd],["ol, ul",Fd],["pre",$d],["tr",Kd],["b",Vs("bold")],["i",Vs("italic")],["strike",Vs("strike")],["style",Ud]],Bd=[hd,kl].reduce((r,t)=>(r[t.keyName]=t,r),{}),ko=[Il,qi,Oi,Ml,jl,Ul].reduce((r,t)=>(r[t.keyName]=t,r),{});class zl extends Kt{constructor(t,e){super(t,e),this.quill.root.addEventListener("copy",n=>this.onCaptureCopy(n,!1)),this.quill.root.addEventListener("cut",n=>this.onCaptureCopy(n,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],kd.concat(this.options.matchers??[]).forEach(n=>{let[s,i]=n;this.addMatcher(s,i)})}addMatcher(t,e){this.matchers.push([t,e])}convert(t){let{html:e,text:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s[wt.blotName])return new P().insert(n||"",{[wt.blotName]:s[wt.blotName]});if(!e)return new P().insert(n||"",s);const i=this.convertHTML(e);return Wn(i,`
`)&&(i.ops[i.ops.length-1].attributes==null||s.table)?i.compose(new P().retain(i.length()-1).delete(1)):i}normalizeHTML(t){Id(t)}convertHTML(t){const e=new DOMParser().parseFromString(t,"text/html");this.normalizeHTML(e);const n=e.body,s=new WeakMap,[i,l]=this.prepareMatching(n,s);return Bi(this.quill.scroll,n,i,l,s)}dangerouslyPasteHTML(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:N.sources.API;if(typeof t=="string"){const s=this.convert({html:t,text:""});this.quill.setContents(s,e),this.quill.setSelection(0,N.sources.SILENT)}else{const s=this.convert({html:e,text:""});this.quill.updateContents(new P().retain(t).concat(s),n),this.quill.setSelection(t+s.length(),N.sources.SILENT)}}onCaptureCopy(t){var l,a;let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t.defaultPrevented)return;t.preventDefault();const[n]=this.quill.selection.getRange();if(n==null)return;const{html:s,text:i}=this.onCopy(n,e);(l=t.clipboardData)==null||l.setData("text/plain",i),(a=t.clipboardData)==null||a.setData("text/html",s),e&&ki({range:n,quill:this.quill})}normalizeURIList(t){return t.split(/\r?\n/).filter(e=>e[0]!=="#").join(`
`)}onCapturePaste(t){var l,a,u,h,m;if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();const e=this.quill.getSelection(!0);if(e==null)return;const n=(l=t.clipboardData)==null?void 0:l.getData("text/html");let s=(a=t.clipboardData)==null?void 0:a.getData("text/plain");if(!n&&!s){const E=(u=t.clipboardData)==null?void 0:u.getData("text/uri-list");E&&(s=this.normalizeURIList(E))}const i=Array.from(((h=t.clipboardData)==null?void 0:h.files)||[]);if(!n&&i.length>0){this.quill.uploader.upload(e,i);return}if(n&&i.length>0){const E=new DOMParser().parseFromString(n,"text/html");if(E.body.childElementCount===1&&((m=E.body.firstElementChild)==null?void 0:m.tagName)==="IMG"){this.quill.uploader.upload(e,i);return}}this.onPaste(e,{html:n,text:s})}onCopy(t){const e=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:e}}onPaste(t,e){let{text:n,html:s}=e;const i=this.quill.getFormat(t.index),l=this.convert({text:n,html:s},i);Rd.log("onPaste",l,{text:n,html:s});const a=new P().retain(t.index).delete(t.length).concat(l);this.quill.updateContents(a,N.sources.USER),this.quill.setSelection(a.length()-t.length,N.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(t,e){const n=[],s=[];return this.matchers.forEach(i=>{const[l,a]=i;switch(l){case Node.TEXT_NODE:s.push(a);break;case Node.ELEMENT_NODE:n.push(a);break;default:Array.from(t.querySelectorAll(l)).forEach(u=>{if(e.has(u)){const h=e.get(u);h==null||h.push(a)}else e.set(u,[a])});break}}),[n,s]}}I(zl,"DEFAULTS",{matchers:[]});function De(r,t,e,n){return n.query(t)?r.reduce((s,i)=>{if(!i.insert)return s;if(i.attributes&&i.attributes[t])return s.push(i);const l=e?{[t]:e}:{};return s.insert(i.insert,{...l,...i.attributes})},new P):r}function Wn(r,t){let e="";for(let n=r.ops.length-1;n>=0&&e.length<t.length;--n){const s=r.ops[n];if(typeof s.insert!="string")break;e=s.insert+e}return e.slice(-1*t.length)===t}function be(r,t){if(!(r instanceof Element))return!1;const e=t.query(r);return e&&e.prototype instanceof Lt?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(r.tagName.toLowerCase())}function Md(r,t){return r.previousElementSibling&&r.nextElementSibling&&!be(r.previousElementSibling,t)&&!be(r.nextElementSibling,t)}const Lr=new WeakMap;function Fl(r){return r==null?!1:(Lr.has(r)||(r.tagName==="PRE"?Lr.set(r,!0):Lr.set(r,Fl(r.parentNode))),Lr.get(r))}function Bi(r,t,e,n,s){return t.nodeType===t.TEXT_NODE?n.reduce((i,l)=>l(t,i,r),new P):t.nodeType===t.ELEMENT_NODE?Array.from(t.childNodes||[]).reduce((i,l)=>{let a=Bi(r,l,e,n,s);return l.nodeType===t.ELEMENT_NODE&&(a=e.reduce((u,h)=>h(l,u,r),a),a=(s.get(l)||[]).reduce((u,h)=>h(l,u,r),a)),i.concat(a)},new P):new P}function Vs(r){return(t,e,n)=>De(e,r,!0,n)}function Pd(r,t,e){const n=Jt.keys(r),s=Ft.keys(r),i=Ae.keys(r),l={};return n.concat(s).concat(i).forEach(a=>{let u=e.query(a,D.ATTRIBUTE);u!=null&&(l[u.attrName]=u.value(r),l[u.attrName])||(u=Bd[a],u!=null&&(u.attrName===a||u.keyName===a)&&(l[u.attrName]=u.value(r)||void 0),u=ko[a],u!=null&&(u.attrName===a||u.keyName===a)&&(u=ko[a],l[u.attrName]=u.value(r)||void 0))}),Object.entries(l).reduce((a,u)=>{let[h,m]=u;return De(a,h,m,e)},t)}function Dd(r,t,e){const n=e.query(r);if(n==null)return t;if(n.prototype instanceof Lt){const s={},i=n.value(r);if(i!=null)return s[n.blotName]=i,new P().insert(s,n.formats(r,e))}else if(n.prototype instanceof Un&&!Wn(t,`
`)&&t.insert(`
`),"blotName"in n&&"formats"in n&&typeof n.formats=="function")return De(t,n.blotName,n.formats(r,e),e);return t}function jd(r,t){return Wn(t,`
`)||t.insert(`
`),t}function $d(r,t,e){const n=e.query("code-block"),s=n&&"formats"in n&&typeof n.formats=="function"?n.formats(r,e):!0;return De(t,"code-block",s,e)}function Ud(){return new P}function zd(r,t,e){const n=e.query(r);if(n==null||n.blotName!=="list"||!Wn(t,`
`))return t;let s=-1,i=r.parentNode;for(;i!=null;)["OL","UL"].includes(i.tagName)&&(s+=1),i=i.parentNode;return s<=0?t:t.reduce((l,a)=>a.insert?a.attributes&&typeof a.attributes.indent=="number"?l.push(a):l.insert(a.insert,{indent:s,...a.attributes||{}}):l,new P)}function Fd(r,t,e){const n=r;let s=n.tagName==="OL"?"ordered":"bullet";const i=n.getAttribute("data-checked");return i&&(s=i==="true"?"checked":"unchecked"),De(t,"list",s,e)}function Bo(r,t,e){if(!Wn(t,`
`)){if(be(r,e)&&(r.childNodes.length>0||r instanceof HTMLParagraphElement))return t.insert(`
`);if(t.length()>0&&r.nextSibling){let n=r.nextSibling;for(;n!=null;){if(be(n,e))return t.insert(`
`);const s=e.query(n);if(s&&s.prototype instanceof qt)return t.insert(`
`);n=n.firstChild}}}return t}function Hd(r,t,e){var i;const n={},s=r.style||{};return s.fontStyle==="italic"&&(n.italic=!0),s.textDecoration==="underline"&&(n.underline=!0),s.textDecoration==="line-through"&&(n.strike=!0),((i=s.fontWeight)!=null&&i.startsWith("bold")||parseInt(s.fontWeight,10)>=700)&&(n.bold=!0),t=Object.entries(n).reduce((l,a)=>{let[u,h]=a;return De(l,u,h,e)},t),parseFloat(s.textIndent||0)>0?new P().insert("	").concat(t):t}function Kd(r,t,e){var s,i;const n=((s=r.parentElement)==null?void 0:s.tagName)==="TABLE"?r.parentElement:(i=r.parentElement)==null?void 0:i.parentElement;if(n!=null){const a=Array.from(n.querySelectorAll("tr")).indexOf(r)+1;return De(t,"table",a,e)}return t}function Gd(r,t,e){var s;let n=r.data;if(((s=r.parentElement)==null?void 0:s.tagName)==="O:P")return t.insert(n.trim());if(!Fl(r)){if(n.trim().length===0&&n.includes(`
`)&&!Md(r,e))return t;n=n.replace(/[^\S\u00a0]/g," "),n=n.replace(/ {2,}/g," "),(r.previousSibling==null&&r.parentElement!=null&&be(r.parentElement,e)||r.previousSibling instanceof Element&&be(r.previousSibling,e))&&(n=n.replace(/^ /,"")),(r.nextSibling==null&&r.parentElement!=null&&be(r.parentElement,e)||r.nextSibling instanceof Element&&be(r.nextSibling,e))&&(n=n.replace(/ $/,"")),n=n.replaceAll(" "," ")}return t.insert(n)}class Hl extends Kt{constructor(e,n){super(e,n);I(this,"lastRecorded",0);I(this,"ignoreChange",!1);I(this,"stack",{undo:[],redo:[]});I(this,"currentRange",null);this.quill.on(N.events.EDITOR_CHANGE,(s,i,l,a)=>{s===N.events.SELECTION_CHANGE?i&&a!==N.sources.SILENT&&(this.currentRange=i):s===N.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||a===N.sources.USER?this.record(i,l):this.transform(i)),this.currentRange=ci(this.currentRange,i))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",s=>{s.inputType==="historyUndo"?(this.undo(),s.preventDefault()):s.inputType==="historyRedo"&&(this.redo(),s.preventDefault())})}change(e,n){if(this.stack[e].length===0)return;const s=this.stack[e].pop();if(!s)return;const i=this.quill.getContents(),l=s.delta.invert(i);this.stack[n].push({delta:l,range:ci(s.range,l)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(s.delta,N.sources.USER),this.ignoreChange=!1,this.restoreSelection(s)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,n){if(e.ops.length===0)return;this.stack.redo=[];let s=e.invert(n),i=this.currentRange;const l=Date.now();if(this.lastRecorded+this.options.delay>l&&this.stack.undo.length>0){const a=this.stack.undo.pop();a&&(s=s.compose(a.delta),i=a.range)}else this.lastRecorded=l;s.length()!==0&&(this.stack.undo.push({delta:s,range:i}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){Mo(this.stack.undo,e),Mo(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,N.sources.USER);else{const n=Wd(this.quill.scroll,e.delta);this.quill.setSelection(n,N.sources.USER)}}}I(Hl,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function Mo(r,t){let e=t;for(let n=r.length-1;n>=0;n-=1){const s=r[n];r[n]={delta:e.transform(s.delta,!0),range:s.range&&ci(s.range,e)},e=s.delta.transform(e),r[n].delta.length()===0&&r.splice(n,1)}}function Vd(r,t){const e=t.ops[t.ops.length-1];return e==null?!1:e.insert!=null?typeof e.insert=="string"&&e.insert.endsWith(`
`):e.attributes!=null?Object.keys(e.attributes).some(n=>r.query(n,D.BLOCK)!=null):!1}function Wd(r,t){const e=t.reduce((s,i)=>s+(i.delete||0),0);let n=t.length()-e;return Vd(r,t)&&(n-=1),n}function ci(r,t){if(!r)return r;const e=t.transformPosition(r.index),n=t.transformPosition(r.index+r.length);return{index:e,length:n-e}}class Kl extends Kt{constructor(t,e){super(t,e),t.root.addEventListener("drop",n=>{var l;n.preventDefault();let s=null;if(document.caretRangeFromPoint)s=document.caretRangeFromPoint(n.clientX,n.clientY);else if(document.caretPositionFromPoint){const a=document.caretPositionFromPoint(n.clientX,n.clientY);s=document.createRange(),s.setStart(a.offsetNode,a.offset),s.setEnd(a.offsetNode,a.offset)}const i=s&&t.selection.normalizeNative(s);if(i){const a=t.selection.normalizedToRange(i);(l=n.dataTransfer)!=null&&l.files&&this.upload(a,n.dataTransfer.files)}})}upload(t,e){const n=[];Array.from(e).forEach(s=>{var i;s&&((i=this.options.mimetypes)!=null&&i.includes(s.type))&&n.push(s)}),n.length>0&&this.options.handler.call(this,t,n)}}Kl.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(r,t){if(!this.quill.scroll.query("image"))return;const e=t.map(n=>new Promise(s=>{const i=new FileReader;i.onload=()=>{s(i.result)},i.readAsDataURL(n)}));Promise.all(e).then(n=>{const s=n.reduce((i,l)=>i.insert({image:l}),new P().retain(r.index).delete(r.length));this.quill.updateContents(s,k.sources.USER),this.quill.setSelection(r.index+n.length,k.sources.SILENT)})}};const Zd=["insertText","insertReplacementText"];class Xd extends Kt{constructor(t,e){super(t,e),t.root.addEventListener("beforeinput",n=>{this.handleBeforeInput(n)}),/Android/i.test(navigator.userAgent)||t.on(N.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(t){ki({range:t,quill:this.quill})}replaceText(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t.length===0)return!1;if(e){const n=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents(new P().retain(t.index).insert(e,n),N.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+e.length,0,N.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!Zd.includes(t.inputType))return;const e=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!e||e.collapsed===!0)return;const n=Yd(t);if(n==null)return;const s=this.quill.selection.normalizeNative(e),i=s?this.quill.selection.normalizedToRange(s):null;i&&this.replaceText(i,n)&&t.preventDefault()}handleCompositionStart(){const t=this.quill.getSelection();t&&this.replaceText(t)}}function Yd(r){var t;return typeof r.data=="string"?r.data:(t=r.dataTransfer)!=null&&t.types.includes("text/plain")?r.dataTransfer.getData("text/plain"):null}const Qd=/Mac/i.test(navigator.platform),Jd=100,tp=r=>!!(r.key==="ArrowLeft"||r.key==="ArrowRight"||r.key==="ArrowUp"||r.key==="ArrowDown"||r.key==="Home"||Qd&&r.key==="a"&&r.ctrlKey===!0);class ep extends Kt{constructor(e,n){super(e,n);I(this,"isListening",!1);I(this,"selectionChangeDeadline",0);this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,n){let{line:s,event:i}=n;if(!(s instanceof Ut)||!s.uiNode)return!0;const l=getComputedStyle(s.domNode).direction==="rtl";return l&&i.key!=="ArrowRight"||!l&&i.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(i.shiftKey?1:0),N.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&tp(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+Jd,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const n=e.getRangeAt(0);if(n.collapsed!==!0||n.startOffset!==0)return;const s=this.quill.scroll.find(n.startContainer);if(!(s instanceof Ut)||!s.uiNode)return;const i=document.createRange();i.setStartAfter(s.uiNode),i.setEndAfter(s.uiNode),e.removeAllRanges(),e.addRange(i)}}N.register({"blots/block":gt,"blots/block/embed":qt,"blots/break":Ht,"blots/container":Me,"blots/cursor":an,"blots/embed":_i,"blots/inline":te,"blots/scroll":en,"blots/text":zt,"modules/clipboard":zl,"modules/history":Hl,"modules/keyboard":zr,"modules/uploader":Kl,"modules/input":Xd,"modules/uiNode":ep});class np extends Ft{add(t,e){let n=0;if(e==="+1"||e==="-1"){const s=this.value(t)||0;n=e==="+1"?s+1:s-1}else typeof e=="number"&&(n=e);return n===0?(this.remove(t),!0):super.add(t,n.toString())}canAdd(t,e){return super.canAdd(t,e)||super.canAdd(t,parseInt(e,10))}value(t){return parseInt(super.value(t),10)||void 0}}const rp=new np("indent","ql-indent",{scope:D.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class ui extends gt{}I(ui,"blotName","blockquote"),I(ui,"tagName","blockquote");class hi extends gt{static formats(t){return this.tagName.indexOf(t.tagName)+1}}I(hi,"blotName","header"),I(hi,"tagName",["H1","H2","H3","H4","H5","H6"]);class Zn extends Me{}Zn.blotName="list-container";Zn.tagName="OL";class Xn extends gt{static create(t){const e=super.create();return e.setAttribute("data-list",t),e}static formats(t){return t.getAttribute("data-list")||void 0}static register(){N.register(Zn)}constructor(t,e){super(t,e);const n=e.ownerDocument.createElement("span"),s=i=>{if(!t.isEnabled())return;const l=this.statics.formats(e,t);l==="checked"?(this.format("list","unchecked"),i.preventDefault()):l==="unchecked"&&(this.format("list","checked"),i.preventDefault())};n.addEventListener("mousedown",s),n.addEventListener("touchstart",s),this.attachUI(n)}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-list",e):super.format(t,e)}}Xn.blotName="list";Xn.tagName="LI";Zn.allowedChildren=[Xn];Xn.requiredContainer=Zn;class Fn extends te{static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}I(Fn,"blotName","bold"),I(Fn,"tagName",["STRONG","B"]);class fi extends Fn{}I(fi,"blotName","italic"),I(fi,"tagName",["EM","I"]);class ye extends te{static create(t){const e=super.create(t);return e.setAttribute("href",this.sanitize(t)),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}static formats(t){return t.getAttribute("href")}static sanitize(t){return Gl(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,e){t!==this.statics.blotName||!e?super.format(t,e):this.domNode.setAttribute("href",this.constructor.sanitize(e))}}I(ye,"blotName","link"),I(ye,"tagName","A"),I(ye,"SANITIZED_URL","about:blank"),I(ye,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function Gl(r,t){const e=document.createElement("a");e.href=r;const n=e.href.slice(0,e.href.indexOf(":"));return t.indexOf(n)>-1}class di extends te{static create(t){return t==="super"?document.createElement("sup"):t==="sub"?document.createElement("sub"):super.create(t)}static formats(t){if(t.tagName==="SUB")return"sub";if(t.tagName==="SUP")return"super"}}I(di,"blotName","script"),I(di,"tagName",["SUB","SUP"]);class pi extends Fn{}I(pi,"blotName","strike"),I(pi,"tagName",["S","STRIKE"]);class gi extends te{}I(gi,"blotName","underline"),I(gi,"tagName","U");class _r extends _i{static create(t){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const e=super.create(t);return typeof t=="string"&&(window.katex.render(t,e,{throwOnError:!1,errorColor:"#f00"}),e.setAttribute("data-value",t)),e}static value(t){return t.getAttribute("data-value")}html(){const{formula:t}=this.value();return`<span>${t}</span>`}}I(_r,"blotName","formula"),I(_r,"className","ql-formula"),I(_r,"tagName","SPAN");const Po=["alt","height","width"];class mi extends Lt{static create(t){const e=super.create(t);return typeof t=="string"&&e.setAttribute("src",this.sanitize(t)),e}static formats(t){return Po.reduce((e,n)=>(t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e),{})}static match(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}static sanitize(t){return Gl(t,["http","https","data"])?t:"//:0"}static value(t){return t.getAttribute("src")}format(t,e){Po.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}}I(mi,"blotName","image"),I(mi,"tagName","IMG");const Do=["height","width"];class Cr extends qt{static create(t){const e=super.create(t);return e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen","true"),e.setAttribute("src",this.sanitize(t)),e}static formats(t){return Do.reduce((e,n)=>(t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e),{})}static sanitize(t){return ye.sanitize(t)}static value(t){return t.getAttribute("src")}format(t,e){Do.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}html(){const{video:t}=this.value();return`<a href="${t}">${t}</a>`}}I(Cr,"blotName","video"),I(Cr,"className","ql-video"),I(Cr,"tagName","IFRAME");const Rn=new Ft("code-token","hljs",{scope:D.INLINE});class ae extends te{static formats(t,e){for(;t!=null&&t!==e.domNode;){if(t.classList&&t.classList.contains(wt.className))return super.formats(t,e);t=t.parentNode}}constructor(t,e,n){super(t,e,n),Rn.add(this.domNode,n)}format(t,e){t!==ae.blotName?super.format(t,e):e?Rn.add(this.domNode,e):(Rn.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Rn.value(this.domNode)||this.unwrap()}}ae.blotName="code-token";ae.className="ql-token";class Ot extends wt{static create(t){const e=super.create(t);return typeof t=="string"&&e.setAttribute("data-language",t),e}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):super.format(t,e)}replaceWith(t,e){return this.formatAt(0,this.length(),ae.blotName,!1),super.replaceWith(t,e)}}class Bn extends Pe{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(t,e){t===Ot.blotName&&(this.forceNext=!0,this.children.forEach(n=>{n.format(t,e)}))}formatAt(t,e,n,s){n===Ot.blotName&&(this.forceNext=!0),super.formatAt(t,e,n,s)}highlight(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const s=`${Array.from(this.domNode.childNodes).filter(l=>l!==this.uiNode).map(l=>l.textContent).join(`
`)}
`,i=Ot.formats(this.children.head.domNode);if(e||this.forceNext||this.cachedText!==s){if(s.trim().length>0||this.cachedText==null){const l=this.children.reduce((u,h)=>u.concat(Cl(h,!1)),new P),a=t(s,i);l.diff(a).reduce((u,h)=>{let{retain:m,attributes:E}=h;return m?(E&&Object.keys(E).forEach(f=>{[Ot.blotName,ae.blotName].includes(f)&&this.formatAt(u,m,f,E[f])}),u+m):u},0)}this.cachedText=s,this.forceNext=!1}}html(t,e){const[n]=this.children.find(t);return`<pre data-language="${n?Ot.formats(n.domNode):"plain"}">
${Ur(this.code(t,e))}
</pre>`}optimize(t){if(super.optimize(t),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const e=Ot.formats(this.children.head.domNode);e!==this.uiNode.value&&(this.uiNode.value=e)}}}Bn.allowedChildren=[Ot];Ot.requiredContainer=Bn;Ot.allowedChildren=[ae,an,zt,Ht];const sp=(r,t,e)=>{if(typeof r.versionString=="string"){const n=r.versionString.split(".")[0];if(parseInt(n,10)>=11)return r.highlight(e,{language:t}).value}return r.highlight(t,e).value};class Vl extends Kt{static register(){N.register(ae,!0),N.register(Ot,!0),N.register(Bn,!0)}constructor(t,e){if(super(t,e),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((n,s)=>{let{key:i}=s;return n[i]=!0,n},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(N.events.SCROLL_BLOT_MOUNT,t=>{if(!(t instanceof Bn))return;const e=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(n=>{let{key:s,label:i}=n;const l=e.ownerDocument.createElement("option");l.textContent=i,l.setAttribute("value",s),e.appendChild(l)}),e.addEventListener("change",()=>{t.format(Ot.blotName,e.value),this.quill.root.focus(),this.highlight(t,!0)}),t.uiNode==null&&(t.attachUI(e),t.children.head&&(e.value=Ot.formats(t.children.head.domNode)))})}initTimer(){let t=null;this.quill.on(N.events.SCROLL_OPTIMIZE,()=>{t&&clearTimeout(t),t=setTimeout(()=>{this.highlight(),t=null},this.options.interval)})}highlight(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(N.sources.USER);const n=this.quill.getSelection();(t==null?this.quill.scroll.descendants(Bn):[t]).forEach(i=>{i.highlight(this.highlightBlot,e)}),this.quill.update(N.sources.SILENT),n!=null&&this.quill.setSelection(n,N.sources.SILENT)}highlightBlot(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(e=this.languages[e]?e:"plain",e==="plain")return Ur(t).split(`
`).reduce((s,i,l)=>(l!==0&&s.insert(`
`,{[wt.blotName]:e}),s.insert(i)),new P);const n=this.quill.root.ownerDocument.createElement("div");return n.classList.add(wt.className),n.innerHTML=sp(this.options.hljs,e,t),Bi(this.quill.scroll,n,[(s,i)=>{const l=Rn.value(s);return l?i.compose(new P().retain(i.length(),{[ae.blotName]:l})):i}],[(s,i)=>s.data.split(`
`).reduce((l,a,u)=>(u!==0&&l.insert(`
`,{[wt.blotName]:e}),l.insert(a)),i)],new WeakMap)}}Vl.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const Pn=class Pn extends gt{static create(t){const e=super.create();return t?e.setAttribute("data-row",t):e.setAttribute("data-row",Mi()),e}static formats(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(t,e){t===Pn.blotName&&e?this.domNode.setAttribute("data-row",e):super.format(t,e)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};I(Pn,"blotName","table"),I(Pn,"tagName","TD");let $t=Pn;class ce extends Me{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const t=this.children.head.formats(),e=this.children.tail.formats(),n=this.next.children.head.formats(),s=this.next.children.tail.formats();return t.table===e.table&&t.table===n.table&&t.table===s.table}return!1}optimize(t){super.optimize(t),this.children.forEach(e=>{if(e.next==null)return;const n=e.formats(),s=e.next.formats();if(n.table!==s.table){const i=this.splitAfter(e);i&&i.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}I(ce,"blotName","table-row"),I(ce,"tagName","TR");class Qt extends Me{}I(Qt,"blotName","table-body"),I(Qt,"tagName","TBODY");class un extends Me{balanceCells(){const t=this.descendants(ce),e=t.reduce((n,s)=>Math.max(s.children.length,n),0);t.forEach(n=>{new Array(e-n.children.length).fill(0).forEach(()=>{let s;n.children.head!=null&&(s=$t.formats(n.children.head.domNode));const i=this.scroll.create($t.blotName,s);n.appendChild(i),i.optimize()})})}cells(t){return this.rows().map(e=>e.children.at(t))}deleteColumn(t){const[e]=this.descendant(Qt);e==null||e.children.head==null||e.children.forEach(n=>{const s=n.children.at(t);s!=null&&s.remove()})}insertColumn(t){const[e]=this.descendant(Qt);e==null||e.children.head==null||e.children.forEach(n=>{const s=n.children.at(t),i=$t.formats(n.children.head.domNode),l=this.scroll.create($t.blotName,i);n.insertBefore(l,s)})}insertRow(t){const[e]=this.descendant(Qt);if(e==null||e.children.head==null)return;const n=Mi(),s=this.scroll.create(ce.blotName);e.children.head.children.forEach(()=>{const l=this.scroll.create($t.blotName,n);s.appendChild(l)});const i=e.children.at(t);e.insertBefore(s,i)}rows(){const t=this.children.head;return t==null?[]:t.children.map(e=>e)}}I(un,"blotName","table-container"),I(un,"tagName","TABLE");un.allowedChildren=[Qt];Qt.requiredContainer=un;Qt.allowedChildren=[ce];ce.requiredContainer=Qt;ce.allowedChildren=[$t];$t.requiredContainer=ce;function Mi(){return`row-${Math.random().toString(36).slice(2,6)}`}class ip extends Kt{static register(){N.register($t),N.register(ce),N.register(Qt),N.register(un)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(un).forEach(t=>{t.balanceCells()})}deleteColumn(){const[t,,e]=this.getTable();e!=null&&(t.deleteColumn(e.cellOffset()),this.quill.update(N.sources.USER))}deleteRow(){const[,t]=this.getTable();t!=null&&(t.remove(),this.quill.update(N.sources.USER))}deleteTable(){const[t]=this.getTable();if(t==null)return;const e=t.offset();t.remove(),this.quill.update(N.sources.USER),this.quill.setSelection(e,N.sources.SILENT)}getTable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(t==null)return[null,null,null,-1];const[e,n]=this.quill.getLine(t.index);if(e==null||e.statics.blotName!==$t.blotName)return[null,null,null,-1];const s=e.parent;return[s.parent.parent,s,e,n]}insertColumn(t){const e=this.quill.getSelection();if(!e)return;const[n,s,i]=this.getTable(e);if(i==null)return;const l=i.cellOffset();n.insertColumn(l+t),this.quill.update(N.sources.USER);let a=s.rowOffset();t===0&&(a+=1),this.quill.setSelection(e.index+a,e.length,N.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){const e=this.quill.getSelection();if(!e)return;const[n,s,i]=this.getTable(e);if(i==null)return;const l=s.rowOffset();n.insertRow(l+t),this.quill.update(N.sources.USER),t>0?this.quill.setSelection(e,N.sources.SILENT):this.quill.setSelection(e.index+s.children.length,e.length,N.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,e){const n=this.quill.getSelection();if(n==null)return;const s=new Array(t).fill(0).reduce(i=>{const l=new Array(e).fill(`
`).join("");return i.insert(l,{table:Mi()})},new P().retain(n.index));this.quill.updateContents(s,N.sources.USER),this.quill.setSelection(n.index,N.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(N.events.SCROLL_OPTIMIZE,t=>{t.some(e=>["TD","TR","TBODY","TABLE"].includes(e.target.tagName)?(this.quill.once(N.events.TEXT_CHANGE,(n,s,i)=>{i===N.sources.USER&&this.balanceTables()}),!0):!1)})}}const jo=he("quill:toolbar");class Pi extends Kt{constructor(t,e){var n,s;if(super(t,e),Array.isArray(this.options.container)){const i=document.createElement("div");i.setAttribute("role","toolbar"),op(i,this.options.container),(s=(n=t.container)==null?void 0:n.parentNode)==null||s.insertBefore(i,t.container),this.container=i}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){jo.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(i=>{var a;const l=(a=this.options.handlers)==null?void 0:a[i];l&&this.addHandler(i,l)}),Array.from(this.container.querySelectorAll("button, select")).forEach(i=>{this.attach(i)}),this.quill.on(N.events.EDITOR_CHANGE,()=>{const[i]=this.quill.selection.getRange();this.update(i)})}addHandler(t,e){this.handlers[t]=e}attach(t){let e=Array.from(t.classList).find(s=>s.indexOf("ql-")===0);if(!e)return;if(e=e.slice(3),t.tagName==="BUTTON"&&t.setAttribute("type","button"),this.handlers[e]==null&&this.quill.scroll.query(e)==null){jo.warn("ignoring attaching to nonexistent format",e,t);return}const n=t.tagName==="SELECT"?"change":"click";t.addEventListener(n,s=>{let i;if(t.tagName==="SELECT"){if(t.selectedIndex<0)return;const a=t.options[t.selectedIndex];a.hasAttribute("selected")?i=!1:i=a.value||!1}else t.classList.contains("ql-active")?i=!1:i=t.value||!t.hasAttribute("value"),s.preventDefault();this.quill.focus();const[l]=this.quill.selection.getRange();if(this.handlers[e]!=null)this.handlers[e].call(this,i);else if(this.quill.scroll.query(e).prototype instanceof Lt){if(i=prompt(`Enter ${e}`),!i)return;this.quill.updateContents(new P().retain(l.index).delete(l.length).insert({[e]:i}),N.sources.USER)}else this.quill.format(e,i,N.sources.USER);this.update(l)}),this.controls.push([e,t])}update(t){const e=t==null?{}:this.quill.getFormat(t);this.controls.forEach(n=>{const[s,i]=n;if(i.tagName==="SELECT"){let l=null;if(t==null)l=null;else if(e[s]==null)l=i.querySelector("option[selected]");else if(!Array.isArray(e[s])){let a=e[s];typeof a=="string"&&(a=a.replace(/"/g,'\\"')),l=i.querySelector(`option[value="${a}"]`)}l==null?(i.value="",i.selectedIndex=-1):l.selected=!0}else if(t==null)i.classList.remove("ql-active"),i.setAttribute("aria-pressed","false");else if(i.hasAttribute("value")){const l=e[s],a=l===i.getAttribute("value")||l!=null&&l.toString()===i.getAttribute("value")||l==null&&!i.getAttribute("value");i.classList.toggle("ql-active",a),i.setAttribute("aria-pressed",a.toString())}else{const l=e[s]!=null;i.classList.toggle("ql-active",l),i.setAttribute("aria-pressed",l.toString())}})}}Pi.DEFAULTS={};function $o(r,t,e){const n=document.createElement("button");n.setAttribute("type","button"),n.classList.add(`ql-${t}`),n.setAttribute("aria-pressed","false"),e!=null?(n.value=e,n.setAttribute("aria-label",`${t}: ${e}`)):n.setAttribute("aria-label",t),r.appendChild(n)}function op(r,t){Array.isArray(t[0])||(t=[t]),t.forEach(e=>{const n=document.createElement("span");n.classList.add("ql-formats"),e.forEach(s=>{if(typeof s=="string")$o(n,s);else{const i=Object.keys(s)[0],l=s[i];Array.isArray(l)?lp(n,i,l):$o(n,i,l)}}),r.appendChild(n)})}function lp(r,t,e){const n=document.createElement("select");n.classList.add(`ql-${t}`),e.forEach(s=>{const i=document.createElement("option");s!==!1?i.setAttribute("value",String(s)):i.setAttribute("selected","selected"),n.appendChild(i)}),r.appendChild(n)}Pi.DEFAULTS={container:null,handlers:{clean(){const r=this.quill.getSelection();if(r!=null)if(r.length===0){const t=this.quill.getFormat();Object.keys(t).forEach(e=>{this.quill.scroll.query(e,D.INLINE)!=null&&this.quill.format(e,!1,N.sources.USER)})}else this.quill.removeFormat(r.index,r.length,N.sources.USER)},direction(r){const{align:t}=this.quill.getFormat();r==="rtl"&&t==null?this.quill.format("align","right",N.sources.USER):!r&&t==="right"&&this.quill.format("align",!1,N.sources.USER),this.quill.format("direction",r,N.sources.USER)},indent(r){const t=this.quill.getSelection(),e=this.quill.getFormat(t),n=parseInt(e.indent||0,10);if(r==="+1"||r==="-1"){let s=r==="+1"?1:-1;e.direction==="rtl"&&(s*=-1),this.quill.format("indent",n+s,N.sources.USER)}},link(r){r===!0&&(r=prompt("Enter link URL:")),this.quill.format("link",r,N.sources.USER)},list(r){const t=this.quill.getSelection(),e=this.quill.getFormat(t);r==="check"?e.list==="checked"||e.list==="unchecked"?this.quill.format("list",!1,N.sources.USER):this.quill.format("list","unchecked",N.sources.USER):this.quill.format("list",r,N.sources.USER)}}};const ap='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',cp='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',up='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',hp='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',fp='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',dp='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',pp='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',gp='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',Uo='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',mp='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',bp='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',yp='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',vp='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',Ep='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',wp='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Ap='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Tp='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',Np='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',xp='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',Lp='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',Sp='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',_p='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',Cp='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',Op='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',qp='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',Ip='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',Rp='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',kp='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',Bp='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',Mp='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',Pp='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',Dp='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',jp='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',Hn={align:{"":ap,center:cp,right:up,justify:hp},background:fp,blockquote:dp,bold:pp,clean:gp,code:Uo,"code-block":Uo,color:mp,direction:{"":bp,rtl:yp},formula:vp,header:{1:Ep,2:wp,3:Ap,4:Tp,5:Np,6:xp},italic:Lp,image:Sp,indent:{"+1":_p,"-1":Cp},link:Op,list:{bullet:qp,check:Ip,ordered:Rp},script:{sub:kp,super:Bp},strike:Mp,table:Pp,underline:Dp,video:jp},$p='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let zo=0;function Fo(r,t){r.setAttribute(t,`${r.getAttribute(t)!=="true"}`)}class Fr{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",e=>{switch(e.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),e.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),Fo(this.label,"aria-expanded"),Fo(this.options,"aria-hidden")}buildItem(t){const e=document.createElement("span");e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item");const n=t.getAttribute("value");return n&&e.setAttribute("data-value",n),t.textContent&&e.setAttribute("data-label",t.textContent),e.addEventListener("click",()=>{this.selectItem(e,!0)}),e.addEventListener("keydown",s=>{switch(s.key){case"Enter":this.selectItem(e,!0),s.preventDefault();break;case"Escape":this.escape(),s.preventDefault();break}}),e}buildLabel(){const t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=$p,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){const t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${zo}`,zo+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach(e=>{const n=this.buildItem(e);t.appendChild(n),e.selected===!0&&this.selectItem(n)}),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach(t=>{this.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.container.querySelector(".ql-selected");t!==n&&(n!=null&&n.classList.remove("ql-selected"),t!=null&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){const n=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(n)}else this.selectItem(null);const e=t!=null&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}}class Wl extends Fr{constructor(t,e){super(t),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(n=>{n.classList.add("ql-primary")})}buildItem(t){const e=super.buildItem(t);return e.style.backgroundColor=t.getAttribute("value")||"",e}selectItem(t,e){super.selectItem(t,e);const n=this.label.querySelector(".ql-color-label"),s=t&&t.getAttribute("data-value")||"";n&&(n.tagName==="line"?n.style.stroke=s:n.style.fill=s)}}class Zl extends Fr{constructor(t,e){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(n=>{n.innerHTML=e[n.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,e){super.selectItem(t,e);const n=t||this.defaultItem;if(n!=null){if(this.label.innerHTML===n.innerHTML)return;this.label.innerHTML=n.innerHTML}}}const Up=r=>{const{overflowY:t}=getComputedStyle(r,null);return t!=="visible"&&t!=="clip"};class Xl{constructor(t,e){this.quill=t,this.boundsContainer=e||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,Up(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){const e=t.left+t.width/2-this.root.offsetWidth/2,n=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`,this.root.style.top=`${n}px`,this.root.classList.remove("ql-flip");const s=this.boundsContainer.getBoundingClientRect(),i=this.root.getBoundingClientRect();let l=0;if(i.right>s.right&&(l=s.right-i.right,this.root.style.left=`${e+l}px`),i.left<s.left&&(l=s.left-i.left,this.root.style.left=`${e+l}px`),i.bottom>s.bottom){const a=i.bottom-i.top,u=t.bottom-t.top+a;this.root.style.top=`${n-u}px`,this.root.classList.add("ql-flip")}return l}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const zp=[!1,"center","right","justify"],Fp=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Hp=[!1,"serif","monospace"],Kp=["1","2","3",!1],Gp=["small",!1,"large","huge"];class Yn extends cn{constructor(t,e){super(t,e);const n=s=>{if(!document.body.contains(t.root)){document.body.removeEventListener("click",n);return}this.tooltip!=null&&!this.tooltip.root.contains(s.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(i=>{i.container.contains(s.target)||i.close()})};t.emitter.listenDOM("click",document.body,n)}addModule(t){const e=super.addModule(t);return t==="toolbar"&&this.extendToolbar(e),e}buildButtons(t,e){Array.from(t).forEach(n=>{(n.getAttribute("class")||"").split(/\s+/).forEach(i=>{if(i.startsWith("ql-")&&(i=i.slice(3),e[i]!=null))if(i==="direction")n.innerHTML=e[i][""]+e[i].rtl;else if(typeof e[i]=="string")n.innerHTML=e[i];else{const l=n.value||"";l!=null&&e[i][l]&&(n.innerHTML=e[i][l])}})})}buildPickers(t,e){this.pickers=Array.from(t).map(s=>{if(s.classList.contains("ql-align")&&(s.querySelector("option")==null&&On(s,zp),typeof e.align=="object"))return new Zl(s,e.align);if(s.classList.contains("ql-background")||s.classList.contains("ql-color")){const i=s.classList.contains("ql-background")?"background":"color";return s.querySelector("option")==null&&On(s,Fp,i==="background"?"#ffffff":"#000000"),new Wl(s,e[i])}return s.querySelector("option")==null&&(s.classList.contains("ql-font")?On(s,Hp):s.classList.contains("ql-header")?On(s,Kp):s.classList.contains("ql-size")&&On(s,Gp)),new Fr(s)});const n=()=>{this.pickers.forEach(s=>{s.update()})};this.quill.on(k.events.EDITOR_CHANGE,n)}}Yn.DEFAULTS=ve({},cn.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let r=this.container.querySelector("input.ql-image[type=file]");r==null&&(r=document.createElement("input"),r.setAttribute("type","file"),r.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),r.classList.add("ql-image"),r.addEventListener("change",()=>{const t=this.quill.getSelection(!0);this.quill.uploader.upload(t,r.files),r.value=""}),this.container.appendChild(r)),r.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class Yl extends Xl{constructor(t,e){super(t,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",t=>{t.key==="Enter"?(this.save(),t.preventDefault()):t.key==="Escape"&&(this.cancel(),t.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;e!=null?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const n=this.quill.getBounds(this.quill.selection.savedRange);n!=null&&this.position(n),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,k.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,k.sources.USER)),this.quill.root.scrollTop=e;break}case"video":t=Vp(t);case"formula":{if(!t)break;const e=this.quill.getSelection(!0);if(e!=null){const n=e.index+e.length;this.quill.insertEmbed(n,this.root.getAttribute("data-mode"),t,k.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(n+1," ",k.sources.USER),this.quill.setSelection(n+2,k.sources.USER)}break}}this.textbox.value="",this.hide()}}function Vp(r){let t=r.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||r.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?`${t[1]||"https"}://www.youtube.com/embed/${t[2]}?showinfo=0`:(t=r.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${t[1]||"https"}://player.vimeo.com/video/${t[2]}/`:r}function On(r,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;t.forEach(n=>{const s=document.createElement("option");n===e?s.setAttribute("selected","selected"):s.setAttribute("value",String(n)),r.appendChild(s)})}const Wp=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class Ql extends Yl{constructor(t,e){super(t,e),this.quill.on(k.events.EDITOR_CHANGE,(n,s,i,l)=>{if(n===k.events.SELECTION_CHANGE)if(s!=null&&s.length>0&&l===k.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const a=this.quill.getLines(s.index,s.length);if(a.length===1){const u=this.quill.getBounds(s);u!=null&&this.position(u)}else{const u=a[a.length-1],h=this.quill.getIndex(u),m=Math.min(u.length()-1,s.index+s.length-h),E=this.quill.getBounds(new Ie(h,m));E!=null&&this.position(E)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(k.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const t=this.quill.getSelection();if(t!=null){const e=this.quill.getBounds(t);e!=null&&this.position(e)}},1)})}cancel(){this.show()}position(t){const e=super.position(t),n=this.root.querySelector(".ql-tooltip-arrow");return n.style.marginLeft="",e!==0&&(n.style.marginLeft=`${-1*e-n.offsetWidth/2}px`),e}}I(Ql,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class Jl extends Yn{constructor(t,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=Wp),super(t,e),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new Ql(this.quill,this.options.bounds),t.container!=null&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),Hn),this.buildPickers(t.container.querySelectorAll("select"),Hn))}}Jl.DEFAULTS=ve({},Yn.DEFAULTS,{modules:{toolbar:{handlers:{link(r){r?this.quill.theme.tooltip.edit():this.quill.format("link",!1,N.sources.USER)}}}}});const Zp=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class ta extends Yl{constructor(){super(...arguments);I(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const n=this.linkRange;this.restoreFocus(),this.quill.formatText(n,"link",!1,k.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(k.events.SELECTION_CHANGE,(e,n,s)=>{if(e!=null){if(e.length===0&&s===k.sources.USER){const[i,l]=this.quill.scroll.descendant(ye,e.index);if(i!=null){this.linkRange=new Ie(e.index-l,i.length());const a=ye.formats(i.domNode);this.preview.textContent=a,this.preview.setAttribute("href",a),this.show();const u=this.quill.getBounds(this.linkRange);u!=null&&this.position(u);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}I(ta,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class ea extends Yn{constructor(t,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=Zp),super(t,e),this.quill.container.classList.add("ql-snow")}extendToolbar(t){t.container!=null&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),Hn),this.buildPickers(t.container.querySelectorAll("select"),Hn),this.tooltip=new ta(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(e,n)=>{t.handlers.link.call(t,!n.format.link)}))}}ea.DEFAULTS=ve({},Yn.DEFAULTS,{modules:{toolbar:{handlers:{link(r){if(r){const t=this.quill.getSelection();if(t==null||t.length===0)return;let e=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(e)&&e.indexOf("mailto:")!==0&&(e=`mailto:${e}`);const{tooltip:n}=this.quill.theme;n.edit("link",e)}else this.quill.format("link",!1,N.sources.USER)}}}}});N.register({"attributors/attribute/direction":kl,"attributors/class/align":ql,"attributors/class/background":dd,"attributors/class/color":fd,"attributors/class/direction":Bl,"attributors/class/font":Dl,"attributors/class/size":$l,"attributors/style/align":Il,"attributors/style/background":qi,"attributors/style/color":Oi,"attributors/style/direction":Ml,"attributors/style/font":jl,"attributors/style/size":Ul},!0);N.register({"formats/align":ql,"formats/direction":Bl,"formats/indent":rp,"formats/background":qi,"formats/color":Oi,"formats/font":Dl,"formats/size":$l,"formats/blockquote":ui,"formats/code-block":wt,"formats/header":hi,"formats/list":Xn,"formats/bold":Fn,"formats/code":Ii,"formats/italic":fi,"formats/link":ye,"formats/script":di,"formats/strike":pi,"formats/underline":gi,"formats/formula":_r,"formats/image":mi,"formats/video":Cr,"modules/syntax":Vl,"modules/table":ip,"modules/toolbar":Pi,"themes/bubble":Jl,"themes/snow":ea,"ui/icons":Hn,"ui/picker":Fr,"ui/icon-picker":Zl,"ui/color-picker":Wl,"ui/tooltip":Xl},!0);class Hr extends Pt.Component{constructor(t){super(t),this.editingAreaRef=Go.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(n,s,i,l)=>{var a,u;n==="text-change"?(a=this.onEditorChangeText)==null||a.call(this,this.editor.root.innerHTML,s,l,this.unprivilegedEditor):n==="selection-change"&&((u=this.onEditorChangeSelection)==null||u.call(this,s,l,this.unprivilegedEditor))};const e=this.isControlled()?t.value:t.defaultValue;this.value=e??""}validateProps(t){if(Pt.Children.count(t.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Pt.Children.count(t.children)){const e=Pt.Children.only(t.children);if((e==null?void 0:e.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&t.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(t,e){if(this.validateProps(t),!this.editor||this.state.generation!==e.generation)return!0;if("value"in t){const n=this.getEditorContents(),s=t.value??"";this.isEqualValue(s,n)||this.setEditorContents(this.editor,s)}return t.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,t.readOnly),[...this.cleanProps,...this.dirtyProps].some(n=>!ge(t[n],this.props[n]))}shouldComponentRegenerate(t){return this.dirtyProps.some(e=>!ge(t[e],this.props[e]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(t,e){if(this.editor&&this.shouldComponentRegenerate(t)){const n=this.editor.getContents(),s=this.editor.getSelection();this.regenerationSnapshot={delta:n,selection:s},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==e.generation){const{delta:n,selection:s}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const i=this.editor;i.setContents(n),Ho(()=>this.setEditorSelection(i,s))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){this.editor&&(this.unhookEditor(this.editor),delete this.editor)}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(t,e){const n=new N(t,e);return e.tabIndex!=null&&this.setEditorTabIndex(n,e.tabIndex),this.hookEditor(n),n}hookEditor(t){this.unprivilegedEditor=this.makeUnprivilegedEditor(t),t.on("editor-change",this.onEditorChange)}unhookEditor(t){t.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(t){return t&&t.ops}isEqualValue(t,e){return this.isDelta(t)&&this.isDelta(e)?ge(t.ops,e.ops):ge(t,e)}setEditorContents(t,e){this.value=e;const n=this.getEditorSelection();typeof e=="string"?t.setContents(t.clipboard.convert({html:e})):t.setContents(e),Ho(()=>this.setEditorSelection(t,n))}setEditorSelection(t,e){if(this.selection=e,e){const n=t.getLength();e.index=Math.max(0,Math.min(e.index,n-1)),e.length=Math.max(0,Math.min(e.length,n-1-e.index)),t.setSelection(e)}}setEditorTabIndex(t,e){var n;(n=t==null?void 0:t.scroll)!=null&&n.domNode&&(t.scroll.domNode.tabIndex=e)}setEditorReadOnly(t,e){e?t.disable():t.enable()}makeUnprivilegedEditor(t){const e=t;return{getHTML:()=>e.root.innerHTML,getSemanticHTML:e.getSemanticHTML.bind(e),getLength:e.getLength.bind(e),getText:e.getText.bind(e),getContents:e.getContents.bind(e),getSelection:e.getSelection.bind(e),getBounds:e.getBounds.bind(e)}}getEditingArea(){const t=this.editingAreaRef.current;if(!t)throw new Error("Cannot find element for editing area");if(t.nodeType===3)throw new Error("Editing area cannot be a text node");return t}renderEditingArea(){const{children:t,preserveWhitespace:e}=this.props,{generation:n}=this.state,s={key:n,ref:this.editingAreaRef};return Pt.Children.count(t)?Pt.cloneElement(Pt.Children.only(t),s):e?Pt.createElement("pre",{...s}):Pt.createElement("div",{...s})}render(){return Pt.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(t,e,n,s){var l,a;if(!this.editor)return;const i=this.isDelta(this.value)?s.getContents():s.getHTML();i!==this.getEditorContents()&&(this.lastDeltaChangeSet=e,this.value=i,(a=(l=this.props).onChange)==null||a.call(l,t,e,n,s))}onEditorChangeSelection(t,e,n){var a,u,h,m,E,f;if(!this.editor)return;const s=this.getEditorSelection(),i=!s&&t,l=s&&!t;ge(t,s)||(this.selection=t,(u=(a=this.props).onChangeSelection)==null||u.call(a,t,e,n),i?(m=(h=this.props).onFocus)==null||m.call(h,t,e,n):l&&((f=(E=this.props).onBlur)==null||f.call(E,s,e,n)))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}Hr.displayName="React Quill";Hr.Quill=N;Hr.defaultProps={theme:"snow",modules:{},readOnly:!1};function Ho(r){Promise.resolve().then(r)}var Or={exports:{}},Xp=Or.exports,Ko;function Yp(){return Ko||(Ko=1,function(r,t){(function(e,n){r.exports=n()})(Xp,function(){function e(g){if(!(typeof window>"u")){var b=document.createElement("style");return b.setAttribute("media","screen"),b.innerHTML=g,document.head.appendChild(b),g}}/*! *****************************************************************************
		    Copyright (c) Microsoft Corporation.

		    Permission to use, copy, modify, and/or distribute this software for any
		    purpose with or without fee is hereby granted.

		    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		    PERFORMANCE OF THIS SOFTWARE.
		    ***************************************************************************** */var n=function(g,b){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,A){v.__proto__=A}||function(v,A){for(var x in A)A.hasOwnProperty(x)&&(v[x]=A[x])},n(g,b)};function s(g,b){n(g,b);function v(){this.constructor=g}g.prototype=b===null?Object.create(b):(v.prototype=b.prototype,new v)}var i=function(){return i=Object.assign||function(b){for(var v,A=1,x=arguments.length;A<x;A++){v=arguments[A];for(var C in v)Object.prototype.hasOwnProperty.call(v,C)&&(b[C]=v[C])}return b},i.apply(this,arguments)};e(`#editor-resizer {
  position: absolute;
  border: 1px dashed #fff;
  background-color: rgba(0, 0, 0, 0.5);
}
#editor-resizer .handler {
  position: absolute;
  right: -5px;
  bottom: -5px;
  width: 10px;
  height: 10px;
  border: 1px solid #333;
  background-color: rgba(255, 255, 255, 0.8);
  cursor: nwse-resize;
  user-select: none;
}
#editor-resizer .toolbar {
  position: absolute;
  top: -5em;
  left: 50%;
  padding: 0.5em;
  border: 1px solid #fff;
  border-radius: 3px;
  background-color: #fff;
  box-shadow: 0 0 3px rgba(0, 0, 0, 0.5);
  transform: translateX(-50%);
  width: 20em;
}
#editor-resizer .toolbar .group {
  display: flex;
  border: 1px solid #aaa;
  border-radius: 6px;
  white-space: nowrap;
  text-align: center;
  line-height: 2;
  color: rgba(0, 0, 0, 0.65);
}
#editor-resizer .toolbar .group:not(:first-child) {
  margin-top: 0.5em;
}
#editor-resizer .toolbar .group .btn {
  flex: 1 0 0;
  text-align: center;
  width: 25%;
  padding: 0 0.5rem;
  display: inline-block;
  vertical-align: top;
  user-select: none;
  color: inherit;
}
#editor-resizer .toolbar .group .btn:not(:last-child) {
  border-right: 1px solid #bbb;
}
#editor-resizer .toolbar .group .btn:not(.btn-group):active {
  background-color: rgba(0, 0, 0, 0.1);
}
#editor-resizer .toolbar .group .input-wrapper {
  width: 25%;
  border: 1px solid #eee;
  position: relative;
  border-right: 1px solid #bbb;
  min-width: 4em;
}
#editor-resizer .toolbar .group .input-wrapper::after {
  content: " ";
  position: absolute;
  height: 1px;
  background-color: #333;
  left: 0.5em;
  right: 1em;
  bottom: 0.2em;
}
#editor-resizer .toolbar .group .input-wrapper input {
  color: inherit;
  text-align: center;
  width: 100%;
  border: none;
  outline: none;
  padding: 0 0.5em;
  padding-right: 1.5em;
}
#editor-resizer .toolbar .group .input-wrapper input:focus ~ .tooltip {
  display: block;
}
#editor-resizer .toolbar .group .input-wrapper .suffix {
  position: absolute;
  right: 0.5em;
}
#editor-resizer .toolbar .group .input-wrapper .tooltip {
  display: none;
  position: absolute;
  top: 100%;
  left: 0;
  font-size: small;
  background-color: #fff;
  box-shadow: 0 0 3px #a7a7a7;
  padding: 0 0.6em;
  border-radius: 5px;
  zoom: 0.85;
}
`);var l=function(){function g(b){this.config=i(i({},a),b)}return g.prototype.findLabel=function(b){return this.config?Reflect.get(this.config,b):null},g}(),a={floatLeft:"left",floatRight:"right",center:"center",restore:"restore",altTip:"Press and hold alt to lock ratio!",inputTip:"Press enter key to apply change!"};function u(g){for(var b=[],v=1;v<arguments.length;v++)b[v-1]=arguments[v];return g.replace(/\{(\d+)\}/g,function(A,x){return b.length>x?b[x]:""})}(function(g){s(b,g);function b(){var v=g!==null&&g.apply(this,arguments)||this;return v.originSize=null,v}return b})(HTMLElement);var h=`
<div class="handler" title="{0}"></div>
<div class="toolbar">
  <div class="group">
    <a class="btn" data-type="width" data-styles="width:100%">100%</a>
    <a class="btn" data-type="width" data-styles="width:50%">50%</a>
    <span class="input-wrapper"><input data-type="width" maxlength="3" /><span class="suffix">%</span><span class="tooltip">{5}</span></span>
    <a class="btn" data-type="width" data-styles="width:auto">{4}</a>
  </div>
  <div class="group">
    <a class="btn" data-type="align" data-styles="float:left">{1}</a>
    <a class="btn" data-type="align" data-styles="display:block;margin:auto;">{2}</a>
    <a class="btn" data-type="align" data-styles="float:right;">{3}</a>
    <a class="btn" data-type="align" data-styles="">{4}</a>
  </div>
</div>
`,m=function(){function g(b,v,A,x){this.resizer=null,this.startResizePosition=null,this.i18n=new l((x==null?void 0:x.locale)||a),this.options=x,this.resizeTarget=b,b.originSize||(b.originSize={width:b.clientWidth,height:b.clientHeight}),this.editor=A,this.container=v,this.initResizer(),this.positionResizerToTarget(b),this.resizing=this.resizing.bind(this),this.endResize=this.endResize.bind(this),this.startResize=this.startResize.bind(this),this.toolbarClick=this.toolbarClick.bind(this),this.toolbarInputChange=this.toolbarInputChange.bind(this),this.onScroll=this.onScroll.bind(this),this.bindEvents()}return g.prototype.initResizer=function(){var b=this.container.querySelector("#editor-resizer");b||(b=document.createElement("div"),b.setAttribute("id","editor-resizer"),b.innerHTML=u(h,this.i18n.findLabel("altTip"),this.i18n.findLabel("floatLeft"),this.i18n.findLabel("center"),this.i18n.findLabel("floatRight"),this.i18n.findLabel("restore"),this.i18n.findLabel("inputTip")),this.container.appendChild(b)),this.resizer=b},g.prototype.positionResizerToTarget=function(b){this.resizer!==null&&(this.resizer.style.setProperty("left",b.offsetLeft+"px"),this.resizer.style.setProperty("top",b.offsetTop-this.editor.scrollTop+"px"),this.resizer.style.setProperty("width",b.clientWidth+"px"),this.resizer.style.setProperty("height",b.clientHeight+"px"))},g.prototype.bindEvents=function(){this.resizer!==null&&(this.resizer.addEventListener("mousedown",this.startResize),this.resizer.addEventListener("click",this.toolbarClick),this.resizer.addEventListener("change",this.toolbarInputChange)),window.addEventListener("mouseup",this.endResize),window.addEventListener("mousemove",this.resizing),this.editor.addEventListener("scroll",this.onScroll)},g.prototype.onScroll=function(){this.positionResizerToTarget(this.resizeTarget)},g.prototype._setStylesForToolbar=function(b,v){var A,x="_styles_"+b,C=this.resizeTarget.style,U=this.resizeTarget[x];C.cssText=C.cssText.replaceAll(" ","").replace(U,"")+(";"+v),this.resizeTarget[x]=v,this.positionResizerToTarget(this.resizeTarget),(A=this.options)===null||A===void 0||A.onChange(this.resizeTarget)},g.prototype.toolbarInputChange=function(b){var v,A=b.target,x=(v=A==null?void 0:A.dataset)===null||v===void 0?void 0:v.type,C=A.value;x&&Number(C)&&this._setStylesForToolbar(x,"width: "+Number(C)+"%;")},g.prototype.toolbarClick=function(b){var v,A,x=b.target,C=(v=x==null?void 0:x.dataset)===null||v===void 0?void 0:v.type;C&&x.classList.contains("btn")&&this._setStylesForToolbar(C,(A=x==null?void 0:x.dataset)===null||A===void 0?void 0:A.styles)},g.prototype.startResize=function(b){var v=b.target;v.classList.contains("handler")&&b.which===1&&(this.startResizePosition={left:b.clientX,top:b.clientY,width:this.resizeTarget.clientWidth,height:this.resizeTarget.clientHeight})},g.prototype.endResize=function(){var b;this.startResizePosition=null,(b=this.options)===null||b===void 0||b.onChange(this.resizeTarget)},g.prototype.resizing=function(b){if(this.startResizePosition){var v=b.clientX-this.startResizePosition.left,A=b.clientY-this.startResizePosition.top,x=this.startResizePosition.width,C=this.startResizePosition.height;if(x+=v,C+=A,b.altKey){var U=this.resizeTarget.originSize,B=U.height/U.width;C=B*x}this.resizeTarget.style.setProperty("width",Math.max(x,30)+"px"),this.resizeTarget.style.setProperty("height",Math.max(C,30)+"px"),this.positionResizerToTarget(this.resizeTarget)}},g.prototype.destory=function(){this.container.removeChild(this.resizer),window.removeEventListener("mouseup",this.endResize),window.removeEventListener("mousemove",this.resizing),this.editor.removeEventListener("scroll",this.onScroll),this.resizer=null},g}(),E=function(){function g(b,v){this.element=b,this.cb=v,this.hasTracked=!1}return g}(),f=function(){function g(){}return g.track=function(b,v){this.iframes.push(new E(b,v)),this.interval||(this.interval=setInterval(function(){g.checkClick()},this.resolution))},g.checkClick=function(){if(document.activeElement){var b=document.activeElement;for(var v in this.iframes)b===this.iframes[v].element?this.iframes[v].hasTracked==!1&&(this.iframes[v].cb.apply(window,[]),this.iframes[v].hasTracked=!0):this.iframes[v].hasTracked=!1}},g.resolution=200,g.iframes=[],g.interval=null,g}();function y(g,b){var v=g.root,A,x;function C(){var U=g.getContents().constructor,B=new U().retain(1);g.updateContents(B)}v.addEventListener("click",function(U){var B=U.target;U.target&&["img","video"].includes(B.tagName.toLowerCase())&&(A=B,x=new m(B,v.parentElement,v,i(i({},b),{onChange:C})))}),g.on("text-change",function(U,B){v.querySelectorAll("iframe").forEach(function(Z){f.track(Z,function(){A=Z,x=new m(Z,v.parentElement,v,i(i({},b),{onChange:C}))})})}),document.addEventListener("mousedown",function(U){var B,Z,lt,ct=U.target;ct!==A&&!(!((Z=(B=x==null?void 0:x.resizer)===null||B===void 0?void 0:B.contains)===null||Z===void 0)&&Z.call(B,ct))&&((lt=x==null?void 0:x.destory)===null||lt===void 0||lt.call(x),x=null,A=null)},{capture:!0})}return y})}(Or)),Or.exports}var Qp=Yp();const Jp=Br(Qp);N.register("modules/resize",Jp);const tg=N.import("blots/block/embed");class Kr extends tg{static create(t){const e=super.create();return e.setAttribute("controls",""),e.setAttribute("src",t),e}static value(t){return t.getAttribute("src")}}Kr.blotName="audio";Kr.tagName="audio";Kr.className="ql-audio";N.register(Kr);class hn extends Go.Component{constructor(e){super(e);I(this,"handleChange",e=>{this.setState({editorHtml:e}),this.props.onChange(e)});I(this,"handleImageUpload",()=>{const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","image/*"),e.click(),e.onchange=async()=>{var s;const n=e.files[0];if(n){const i=new FormData;i.append("file",n);try{const a=await(await fetch("/api/cbt/upload/image",{method:"POST",body:i})).json(),u=(s=this.reactQuillRef.current)==null?void 0:s.getEditor();if(u){const h=u.getSelection(!0);u.insertEmbed(h.index,"image",a.url)}}catch(l){console.error("Error uploading image:",l),alert("Gagal mengunggah gambar. Coba lagi.")}}}});I(this,"handleAudioUpload",()=>{const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","audio/*"),e.click(),e.onchange=async()=>{var s;const n=e.files[0];if(n){const i=new FormData;i.append("file",n);try{const a=await(await fetch("/api/cbt/upload/audio",{method:"POST",body:i})).json(),u=(s=this.reactQuillRef.current)==null?void 0:s.getEditor();if(u){const h=u.getSelection(!0);u.insertEmbed(h.index,"audio",a.url)}}catch(l){console.error("Error uploading audio:",l),alert("Gagal mengunggah audio. Coba lagi.")}}}});this.state={editorHtml:e.value||""},this.reactQuillRef=Pt.createRef()}componentDidUpdate(e){e.value!==this.props.value&&this.setState({editorHtml:this.props.value})}render(){const{placeholder:e,height:n,classname:s}=this.props;return ji.jsx("div",{className:"d-flex mb-2",style:{height:n},children:ji.jsx(Hr,{ref:this.reactQuillRef,theme:"snow",value:this.state.editorHtml,onChange:this.handleChange,modules:hn.modules(this.handleImageUpload,this.handleAudioUpload),formats:hn.formats,placeholder:e,style:{width:"100%"},className:`react-quill border border-2 bg-white rounded ${s}`})})}}hn.modules=(r,t)=>({toolbar:{container:[[{header:"1"},{header:"2"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","audio","video"],["clean"]],handlers:{image:r,audio:t}},clipboard:{matchVisual:!1},resize:{modules:["Resize"]}});hn.formats=["header","font","size","bold","italic","underline","strike","blockquote","list","indent","link","image","audio","video"];hn.propTypes={placeholder:Rs.string,value:Rs.string,onChange:Rs.func.isRequired};export{hn as E};
