import{r as s,i as k,j as e,e as S,k as y,l as v,V as w}from"./index-Bkq01jzn.js";import{L as H}from"./Layout-uGiKgFPI.js";import{T as D}from"./Table-BJdfPgdp.js";const M=({detail:a,setDetail:t})=>{const[d,l]=s.useState(""),[j,m]=s.useState(""),[p,{data:N,isLoading:o,isSuccess:u,error:f,reset:x}]=k(),g=i=>{i.preventDefault(),d||S.error("Lenkapi data");const h={id:j,name:d};S.promise(p(h).unwrap().then(n=>n.message),{loading:"Menyimpan data...",success:n=>n,error:n=>{var b;return(b=n.data)==null?void 0:b.message}})};return s.useEffect(()=>{a&&(l(a.name),m(a.id))},[a]),s.useEffect(()=>{u&&(x(),l(""),m("")),f&&x()},[u]),e.jsxs("form",{onSubmit:g,className:"rounded border p-2 d-flex flex-column gap-2 shadow bg-white",children:[e.jsx("p",{className:"m-0 h6",children:"Satuan Pendidikan"}),e.jsx("input",{type:"text",name:"homebase",className:"form-control",placeholder:"SD / SMP / SMA / SMK / Sekolah",value:d||"",onChange:i=>l(i.target.value)}),e.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-warning",onClick:()=>t({}),children:"Batal"}),e.jsx("button",{type:"submit",className:"btn btn-success",disabled:o,children:"Simpan"})]})]})},L=({setDetail:a})=>{const[t,d]=s.useState(1),[l,j]=s.useState(10),[m,p]=s.useState(""),{data:N={}}=y({page:t,limit:l,search:m}),{homebase:o=[],totalPages:u,totalData:f}=N,[x,{isLoading:g,isSuccess:i,error:h,reset:n}]=v(),b=c=>{w.promise(x(c).unwrap().then(r=>r.message),{loading:"Memproses...",success:r=>r,error:r=>r.data.message})};return s.useEffect(()=>{i&&n(),h&&n()},[i,h]),e.jsx(D,{totalData:f,totalPages:u,page:t,setPage:d,setLimit:j,setSearch:p,children:e.jsxs("table",{className:"table table-bordered table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center",children:"No"}),e.jsx("th",{className:"text-center",children:"_id"}),e.jsx("th",{className:"text-center",children:"Satuan Pendidikan"}),e.jsx("th",{className:"text-center",children:"Aksi"})]})}),e.jsx("tbody",{children:o==null?void 0:o.map((c,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center align-middle",children:(t-1)*l+r+1}),e.jsx("td",{className:"text-center align-middle",children:c.id}),e.jsx("td",{className:"text-center align-middle",children:c.name}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex gap-2 justify-content-center",children:[e.jsx("button",{className:"btn btn-warning",onClick:()=>a(c),children:e.jsx("i",{className:"bi bi-pencil-square"})}),e.jsx("button",{className:"btn btn-danger",disabled:g,onClick:()=>b(c.id),children:e.jsx("i",{className:"bi bi-folder-minus"})})]})})]},c.id))})]})})},A=()=>{const[a,t]=s.useState("");return e.jsx(H,{title:"Satuan Pendidikan",children:e.jsxs("div",{className:"h-100 row g-2",children:[e.jsx("div",{className:"col-lg-3 col-12",children:e.jsx(M,{detail:a,setDetail:t})}),e.jsx("div",{className:"col-lg-9 col-12",children:e.jsx(L,{setDetail:t})})]})})};export{A as default};
