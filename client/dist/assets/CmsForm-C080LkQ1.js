import{j as e}from"./index-CNbAajcm.js";import{b as a}from"./vendor-BYWiIb5-.js";import{x as t,y as s}from"./index-C-OX0RB-.js";import{m as l}from"./proxy-B0Xu6tIC.js";const i=({fields:i,initialValues:n={},onSubmit:r,submitButtonText:o="Simpan",submitButtonClass:c="btn-primary",cancelButtonText:m="Batal",onCancel:d,layout:h="vertical"})=>{const[p,u]=a.useState(n),[x,b]=a.useState({}),[j,v]=a.useState(null),g=(e,a)=>{const{name:t,value:s,type:l,files:i}=e.target;if("file"===l&&i&&i[0]){const e=i[0];if(u({...p,[t]:e}),e.type.startsWith("image/")){const a=new FileReader;a.onloadend=()=>{v(a.result)},a.readAsDataURL(e)}}else u({...p,[t]:s}),"textarea"===l&&(e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px");x[t]&&b({...x,[t]:null})},f=a=>{const{name:l,label:i,type:n="text",placeholder:r,options:o,rows:c=3,accept:m,helpText:d}=a;return e.jsxs("div",{className:"mb-3 "+("horizontal"===h?"row":""),children:[e.jsxs("label",{htmlFor:l,className:"form-label "+("horizontal"===h?"col-sm-3":""),children:[i,a.required&&e.jsx("span",{className:"text-danger ms-1",children:"*"})]}),e.jsxs("div",{className:"horizontal"===h?"col-sm-9":"",children:["textarea"===n?e.jsx("textarea",{id:l,name:l,className:"form-control "+(x[l]?"is-invalid":""),placeholder:r,rows:c,value:p[l]||"",onChange:e=>g(e),style:{minHeight:"200px",resize:"auto"}}):"select"===n?e.jsxs("select",{id:l,name:l,className:"form-select "+(x[l]?"is-invalid":""),value:p[l]||"",onChange:e=>g(e),children:[e.jsxs("option",{value:"",children:["Select ",i]}),o.map((a=>e.jsx("option",{value:a.value,children:a.label},a.value)))]}):"file"===n?e.jsxs("div",{children:[e.jsxs("div",{className:"input-group",children:[e.jsx("input",{id:l,name:l,type:"file",className:"form-control "+(x[l]?"is-invalid":""),accept:m,onChange:e=>g(e)}),e.jsx("label",{className:"input-group-text",htmlFor:l,children:e.jsx(t,{})})]}),j&&e.jsxs("div",{className:"mt-2 position-relative d-inline-block",children:[e.jsx("img",{src:j,alt:"Preview",className:"img-thumbnail",style:{maxHeight:"150px"}}),e.jsx("button",{type:"button",className:"btn btn-sm btn-danger position-absolute top-0 end-0 m-1",onClick:()=>{v(null),u({...p,[l]:null})},children:e.jsx(s,{})})]})]}):"checkbox"===n?e.jsxs("div",{className:"form-check",children:[e.jsx("input",{id:l,name:l,type:"checkbox",className:"form-check-input "+(x[l]?"is-invalid":""),checked:p[l]||!1,onChange:e=>g({target:{name:l,value:e.target.checked}})}),e.jsx("label",{className:"form-check-label",htmlFor:l,children:r})]}):e.jsx("input",{id:l,name:l,type:n,className:"form-control "+(x[l]?"is-invalid":""),placeholder:r,value:p[l]||"",onChange:e=>g(e)}),x[l]&&e.jsx("div",{className:"invalid-feedback",children:x[l]}),d&&!x[l]&&e.jsx("div",{className:"form-text",children:d})]})]})};return e.jsxs(l.form,{onSubmit:e=>{e.preventDefault(),(()=>{const e={};return i.forEach((a=>{a.required&&!p[a.name]&&(e[a.name]=`${a.label} harus diisi`),a.pattern&&p[a.name]&&(new RegExp(a.pattern).test(p[a.name])||(e[a.name]=a.patternMessage||`${a.label} tidak sesuai`))})),b(e),0===Object.keys(e).length})()&&r(p)},initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[i.map((a=>e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},children:f(a)},a.name))),e.jsxs("div",{className:"d-flex justify-content-end gap-2 mt-4",children:[d&&e.jsx(l.button,{type:"button",className:"btn btn-sm btn-warning",onClick:d,whileHover:{scale:1.05},whileTap:{scale:.95},children:m}),e.jsx(l.button,{type:"submit",className:`btn btn-sm ${c}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:o})]})]})};export{i as C};
//# sourceMappingURL=CmsForm-C080LkQ1.js.map
