import{j as e}from"./index-CNbAajcm.js";import{b as t}from"./vendor-BYWiIb5-.js";import{M as n,u as s,P as o,a as i,b as r,L as a,m as l}from"./proxy-B0Xu6tIC.js";class d extends t.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=e instanceof HTMLElement&&e.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=n-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function c({children:s,isPresent:o,anchorX:i}){const r=t.useId(),a=t.useRef(null),l=t.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=t.useContext(n);return t.useInsertionEffect((()=>{const{width:e,height:t,top:n,left:s,right:d}=l.current;if(o||!a.current||!e||!t)return;const u="left"===i?`left: ${s}`:`right: ${d}`;a.current.dataset.motionPopId=r;const h=document.createElement("style");return c&&(h.nonce=c),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`\n          [data-motion-pop-id="${r}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${t}px !important;\n            ${u}px !important;\n            top: ${n}px !important;\n          }\n        `),()=>{document.head.removeChild(h)}}),[o]),e.jsx(d,{isPresent:o,childRef:a,sizeRef:l,children:t.cloneElement(s,{ref:a})})}const u=({children:n,initial:i,isPresent:r,onExitComplete:a,custom:l,presenceAffectsLayout:d,mode:u,anchorX:m})=>{const p=s(h),f=t.useId();let x=!0,g=t.useMemo((()=>(x=!1,{id:f,initial:i,isPresent:r,custom:l,onExitComplete:e=>{p.set(e,!0);for(const t of p.values())if(!t)return;a&&a()},register:e=>(p.set(e,!1),()=>p.delete(e))})),[r,p,a]);return d&&x&&(g={...g}),t.useMemo((()=>{p.forEach(((e,t)=>p.set(t,!1)))}),[r]),t.useEffect((()=>{!r&&!p.size&&a&&a()}),[r]),"popLayout"===u&&(n=e.jsx(c,{isPresent:r,anchorX:m,children:n})),e.jsx(o.Provider,{value:g,children:n})};function h(){return new Map}const m=e=>e.key||"";function p(e){const n=[];return t.Children.forEach(e,(e=>{t.isValidElement(e)&&n.push(e)})),n}const f=({children:n,custom:o,initial:l=!0,onExitComplete:d,presenceAffectsLayout:c=!0,mode:h="sync",propagate:f=!1,anchorX:x="left"})=>{const[g,y]=i(f),v=t.useMemo((()=>p(n)),[n]),b=f&&!g?[]:v.map(m),j=t.useRef(!0),E=t.useRef(v),C=s((()=>new Map)),[w,P]=t.useState(v),[k,R]=t.useState(v);r((()=>{j.current=!1,E.current=v;for(let e=0;e<k.length;e++){const t=m(k[e]);b.includes(t)?C.delete(t):!0!==C.get(t)&&C.set(t,!1)}}),[k,b.length,b.join("-")]);const L=[];if(v!==w){let e=[...v];for(let t=0;t<k.length;t++){const n=k[t],s=m(n);b.includes(s)||(e.splice(t,0,n),L.push(n))}return"wait"===h&&L.length&&(e=L),R(p(e)),P(v),null}const{forceRender:N}=t.useContext(a);return e.jsx(e.Fragment,{children:k.map((t=>{const n=m(t),s=!(f&&!g)&&(v===k||b.includes(n));return e.jsx(u,{isPresent:s,initial:!(j.current&&!l)&&void 0,custom:o,presenceAffectsLayout:c,mode:h,onExitComplete:s?void 0:()=>{if(!C.has(n))return;C.set(n,!0);let e=!0;C.forEach((t=>{t||(e=!1)})),e&&(null==N||N(),R(E.current),f&&(null==y||y()),d&&d())},anchorX:x,children:t},n)}))})},x=({isOpen:n,onClose:s,title:o,children:i,footer:r,size:a="md"})=>(t.useEffect((()=>{const e=e=>{"Escape"===e.key&&n&&s()};return n&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow=""}}),[n,s]),e.jsx(f,{children:n&&e.jsxs(e.Fragment,{children:[e.jsx(l.div,{className:"modal-backdrop",initial:"hidden",animate:"visible",exit:"exit",variants:{hidden:{opacity:0},visible:{opacity:1},exit:{opacity:0}},onClick:s,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:1040}}),e.jsx("div",{className:"modal fade "+(n?"show":""),tabIndex:"-1",role:"dialog","aria-modal":"true",style:{display:"block",zIndex:1045},children:e.jsx(l.div,{className:`modal-dialog modal-dialog-centered ${(()=>{switch(a){case"sm":return"modal-sm";case"lg":return"modal-lg";case"xl":return"modal-xl";default:return""}})()}`,initial:"hidden",animate:"visible",exit:"exit",variants:{hidden:{opacity:0,y:-50},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:30}},exit:{opacity:0,y:-50,transition:{duration:.2}}},onClick:e=>e.stopPropagation(),children:e.jsxs("div",{className:"modal-content border-0 shadow",children:[e.jsxs("div",{className:"modal-header border-bottom",children:[e.jsx("h5",{className:"modal-title",children:o}),e.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:s})]}),e.jsx("div",{className:"modal-body",children:i}),r&&e.jsx("div",{className:"modal-footer border-top",children:r})]})})})]})}));export{x as C};
//# sourceMappingURL=CmsModal-mC8bpiPz.js.map
