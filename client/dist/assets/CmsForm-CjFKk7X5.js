import{j as e,m as a}from"./index-DFhdulld.js";import{b as t}from"./vendor-CnnDPxwB.js";import{y as s,z as l}from"./index-B8CuzAwO.js";const i=({fields:i,initialValues:n={},onSubmit:r,submitButtonText:c="Simpan",submitButtonClass:o="btn-primary",cancelButtonText:m="Batal",onCancel:d,layout:h="vertical",children:u})=>{const[p,x]=t.useState(n),[b,j]=t.useState({}),[g,v]=t.useState(null);t.useEffect((()=>{"string"==typeof n.image&&n.image&&v(n.image)}),[n.image]);const f=(e,a)=>{const{name:t,value:s,type:l,files:i}=e.target;if("file"===l&&i&&i[0]){const e=i[0];if(x({...p,[t]:e}),e.type.startsWith("image/")){const a=new FileReader;a.onloadend=()=>{v(a.result)},a.readAsDataURL(e)}}else x({...p,[t]:s}),"textarea"===l&&(e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px");b[t]&&j({...b,[t]:null})},y=a=>{const{name:t,label:i,type:n="text",placeholder:r,options:c,rows:o=3,accept:m,helpText:d}=a;return e.jsxs("div",{className:"mb-3 "+("horizontal"===h?"row":""),children:[e.jsxs("label",{htmlFor:t,className:"form-label "+("horizontal"===h?"col-sm-3":""),children:[i,a.required&&e.jsx("span",{className:"text-danger ms-1",children:"*"})]}),e.jsxs("div",{className:"horizontal"===h?"col-sm-9":"",children:["textarea"===n?e.jsx("textarea",{id:t,name:t,className:"form-control "+(b[t]?"is-invalid":""),placeholder:r,rows:o,value:p[t]||"",onChange:e=>f(e),style:{minHeight:"200px",resize:"auto"}}):"select"===n?e.jsxs("select",{id:t,name:t,className:"form-select "+(b[t]?"is-invalid":""),value:p[t]||"",onChange:e=>f(e),children:[e.jsxs("option",{value:"",children:["Select ",i]}),c.map((a=>e.jsx("option",{value:a.value,children:a.label},a.value)))]}):"file"===n?e.jsxs("div",{children:[e.jsxs("div",{className:"input-group",children:[e.jsx("input",{id:t,name:t,type:"file",className:"form-control "+(b[t]?"is-invalid":""),accept:m,onChange:e=>f(e)}),e.jsx("label",{className:"input-group-text",htmlFor:t,children:e.jsx(s,{})})]}),g&&e.jsxs("div",{className:"mt-2 position-relative d-inline-block",children:[e.jsx("img",{src:g,alt:"Preview",className:"img-thumbnail",style:{maxHeight:"150px"}}),e.jsx("button",{type:"button",className:"btn btn-sm btn-danger position-absolute top-0 end-0 m-1",onClick:()=>{v(null),x({...p,[t]:null})},children:e.jsx(l,{})})]})]}):"checkbox"===n?e.jsxs("div",{className:"form-check",children:[e.jsx("input",{id:t,name:t,type:"checkbox",className:"form-check-input "+(b[t]?"is-invalid":""),checked:p[t]||!1,onChange:e=>f({target:{name:t,value:e.target.checked}})}),e.jsx("label",{className:"form-check-label",htmlFor:t,children:r})]}):e.jsx("input",{id:t,name:t,type:n,className:"form-control "+(b[t]?"is-invalid":""),placeholder:r,value:p[t]||"",onChange:e=>f(e)}),b[t]&&e.jsx("div",{className:"invalid-feedback",children:b[t]}),d&&!b[t]&&e.jsx("div",{className:"form-text",children:d})]})]})};return e.jsxs(a.form,{onSubmit:e=>{e.preventDefault(),(()=>{const e={};return i.forEach((a=>{a.required&&!p[a.name]&&(e[a.name]=`${a.label} harus diisi`),a.pattern&&p[a.name]&&(new RegExp(a.pattern).test(p[a.name])||(e[a.name]=a.patternMessage||`${a.label} tidak sesuai`))})),j(e),0===Object.keys(e).length})()&&r(p)},initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[i.map((t=>e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},children:y(t)},t.name))),u,e.jsxs("div",{className:"d-flex justify-content-end gap-2 mt-4",children:[d&&e.jsx(a.button,{type:"button",className:"btn btn-sm btn-warning",onClick:d,whileHover:{scale:1.05},whileTap:{scale:.95},children:m}),e.jsx(a.button,{type:"submit",className:`btn btn-sm ${o}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:c})]})]})};export{i as C};
//# sourceMappingURL=CmsForm-CjFKk7X5.js.map
