import{af as e,ag as s,j as a,e as t,ah as i}from"./index-DFhdulld.js";import{b as n}from"./vendor-CnnDPxwB.js";import{L as l}from"./Layout-GZnRoUIy.js";import{S as r}from"./react-select.esm-C351JJ6e.js";import{T as d}from"./Table-CpyGbvYh.js";import"./index-B8CuzAwO.js";import"./index-g0LoU_Ie.js";const c=({detail:i,setDetail:l})=>{const[d,c]=n.useState({id:"",agency:"",userid:"",description:""}),{data:o=[]}=e(),m=null==o?void 0:o.map((e=>({value:e.id,label:e.name}))),[u,{isLoading:x,isSuccess:h,isError:j,reset:g}]=s();return n.useEffect((()=>{i&&c({id:i.id,agency:i.agency,userid:i.userid,description:i.description})}),[i]),n.useEffect((()=>{(h||j)&&(h&&(l({}),c({id:"",agency:"",userid:"",description:""})),g())}),[h,j]),a.jsxs("form",{onSubmit:e=>{e.preventDefault(),t.promise(u(d).unwrap().then((e=>e.message)),{loading:"Memuat data...",success:e=>e,error:e=>e.data.message})},className:"d-flex border p-2 rounded flex-column gap-3",children:[a.jsx("h6",{className:"m-0",children:"Data Lulusan"}),a.jsx(r,{isClearable:!0,isSearchable:!0,placeholder:"Cari Murid",value:(null==m?void 0:m.find((e=>e.value===d.userid)))||null,options:m,onChange:e=>{c((s=>({...s,userid:(null==e?void 0:e.value)||null})))}}),a.jsx("input",{type:"text",name:"agency",id:"agency",placeholder:"Nama Instansi",className:"form-control",required:!0,value:d.agency,onChange:e=>c({...d,agency:e.target.value})}),a.jsx("textarea",{name:"description",id:"description",placeholder:"Keterangan",className:"form-control",value:d.description,onChange:e=>c({...d,description:e.target.value})}),a.jsxs("div",{className:"text-end",children:[a.jsx("button",{type:"button",className:"me-2 btn btn-sm btn-warning",onClick:()=>{l({}),c({id:"",agency:"",userid:"",description:""})},children:"Batal"}),a.jsx("button",{type:"submit",className:"me-2 btn btn-sm btn-success",disabled:x,children:"Simpan"})]})]})},o=({setDetail:e})=>{const[s,t]=n.useState(1),[l,r]=n.useState(10),[c,o]=n.useState(""),{data:m,isLoading:u}=i({page:s,limit:l,search:c}),{result:x,totalData:h,totalPages:j}=m||{};return a.jsx(d,{isLoading:u,totalData:h,totalPages:j,page:s,limit:l,setPage:t,setLimit:r,setSearch:o,children:a.jsxs("table",{className:"mb-0 table table-hover table-striped table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-center",children:"No"}),a.jsx("th",{className:"text-center",children:"Nis"}),a.jsx("th",{className:"text-center",children:"Nama"}),a.jsx("th",{className:"text-center",children:"Instansi"}),a.jsx("th",{className:"text-center",children:"Deskripsi"}),a.jsx("th",{className:"text-center",children:"Aksi"})]})}),a.jsx("tbody",{children:null==x?void 0:x.map(((t,i)=>a.jsxs("tr",{children:[a.jsx("td",{className:"align-middle text-center",children:(s-1)*l+i+1}),a.jsx("td",{className:"align-middle text-center",children:t.nis}),a.jsx("td",{className:"align-middle ",children:t.student_name}),a.jsx("td",{className:"align-middle ",children:t.agency}),a.jsx("td",{className:"align-middle ",children:t.description}),a.jsx("td",{className:"align-middle text-center",children:a.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[a.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>e(t),children:a.jsx("i",{className:"bi bi-pencil-square"})}),a.jsx("button",{className:"btn btn-sm btn-danger",children:a.jsx("i",{className:"bi bi-trash"})})]})})]},t.id)))})]})})},m=()=>{const[e,s]=n.useState({});return a.jsx(l,{title:"Lulusan",levels:["admin"],children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-lg-3 col-12",children:a.jsx(c,{detail:e,setDetail:s})}),a.jsx("div",{className:"col-lg-9 col-12",children:a.jsx(o,{setDetail:s})})]})})};export{m as default};
//# sourceMappingURL=AdminGraduation-DzASMLEC.js.map
