{"version":3,"file":"CenterAdmin-zX1Z95Jx.js","sources":["../../src/page/center/admin/Form.jsx","../../src/page/center/admin/TableData.jsx","../../src/page/center/admin/CenterAdmin.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useGetHomebaseQuery } from \"../../../controller/api/center/ApiHomebase\";\r\nimport { useAddAdminMutation } from \"../../../controller/api/center/ApiAdmin\";\r\nimport toast from \"react-hot-toast\";\r\n\r\nconst convertPhoneNumber = (phone) =>\r\n  phone?.startsWith(\"0\") ? `62${phone.slice(1)}` : phone;\r\n\r\nconst Form = () => {\r\n  const page = \"\";\r\n  const limit = \"\";\r\n  const search = \"\";\r\n\r\n  const { data: homebase } = useGetHomebaseQuery({ page, limit, search });\r\n  const [addAdmin, { isSuccess, isLoading, error, reset }] =\r\n    useAddAdminMutation();\r\n\r\n  const [formData, setFormData] = useState({\r\n    id: \"\",\r\n    home: \"\",\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    level: \"\",\r\n    phone: \"\",\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [name]: name === \"phone\" ? convertPhoneNumber(value) : value,\r\n    }));\r\n  };\r\n\r\n  const addHandler = (e) => {\r\n    e.preventDefault();\r\n\r\n    const formatted = {\r\n      ...formData,\r\n      home: parseInt(formData.home, 10),\r\n    };\r\n\r\n    toast.promise(\r\n      addAdmin(formatted)\r\n        .unwrap()\r\n        .then((res) => res.message),\r\n      {\r\n        loading: \"Menyimpan Data...\",\r\n        success: (message) => message,\r\n        error: (err) => err.data.message,\r\n      }\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isSuccess) {\r\n      setFormData({\r\n        id: \"\",\r\n        home: \"\",\r\n        name: \"\",\r\n        email: \"\",\r\n        password: \"\",\r\n        level: \"\",\r\n        phone: \"\",\r\n      });\r\n      reset();\r\n    }\r\n\r\n    if (error) {\r\n      reset();\r\n    }\r\n  }, [isSuccess, error]);\r\n  return (\r\n    <form\r\n      onSubmit={addHandler}\r\n      className=\"d-flex flex-column gap-2 rounded p-2 border \"\r\n    >\r\n      <p className=\"m-0 h6\">Administrator</p>\r\n\r\n      <select\r\n        name=\"level\"\r\n        id=\"level\"\r\n        className=\"form-select\"\r\n        value={formData.level}\r\n        onChange={handleChange}\r\n      >\r\n        <option value=\"\" hidden>\r\n          Pilih Level\r\n        </option>\r\n        <option value=\"center\">Pusat</option>\r\n        <option value=\"admin\">Satuan</option>\r\n        <option value=\"tahfiz\">Tahfiz</option>\r\n        <option value=\"cms\">Konten Managemen</option>\r\n      </select>\r\n\r\n      {formData.level !== \"center\" && (\r\n        <select\r\n          name=\"home\"\r\n          id=\"home\"\r\n          className=\"form-select\"\r\n          value={formData.home}\r\n          onChange={handleChange}\r\n        >\r\n          <option value=\"\" hidden>\r\n            Pilih Satuan\r\n          </option>\r\n          {homebase?.map((item) => (\r\n            <option key={item.id} value={item.id}>\r\n              {item.name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      )}\r\n\r\n      <input\r\n        type=\"text\"\r\n        name=\"name\"\r\n        id=\"name\"\r\n        placeholder=\"Username\"\r\n        className=\"form-control\"\r\n        value={formData.name || \"\"}\r\n        onChange={handleChange}\r\n        required\r\n      />\r\n\r\n      <input\r\n        type=\"email\"\r\n        name=\"email\"\r\n        id=\"email\"\r\n        className=\"form-control\"\r\n        placeholder=\"Email\"\r\n        value={formData.email || \"\"}\r\n        onChange={handleChange}\r\n        required\r\n      />\r\n\r\n      <input\r\n        type=\"text\"\r\n        name=\"phone\"\r\n        id=\"phone\"\r\n        className=\"form-control\"\r\n        placeholder=\"Whatsapp\"\r\n        value={formData.phone || \"\"}\r\n        onChange={handleChange}\r\n      />\r\n\r\n      <input\r\n        type=\"password\"\r\n        name=\"password\"\r\n        id=\"password\"\r\n        className=\"form-control\"\r\n        placeholder=\"Password\"\r\n        value={formData.password || \"\"}\r\n        onChange={handleChange}\r\n        required\r\n      />\r\n\r\n      <div className=\"d-flex justify-content-end gap-2\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-warning\"\r\n          onClick={() => setDetail(\"\")}\r\n        >\r\n          Batal\r\n        </button>\r\n        <button type=\"submit\" className=\"btn btn-success\" disabled={isLoading}>\r\n          Simpan\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Table from \"../../../components/table/Table\";\r\nimport {\r\n  useDeleteAdminMutation,\r\n  useGetAdminQuery,\r\n} from \"../../../controller/api/center/ApiAdmin\";\r\nimport { toast } from \"react-hot-toast\";\r\n\r\nconst TableData = () => {\r\n  const [page, setPage] = useState(1);\r\n  const [limit, setLimit] = useState(10);\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  const { data: rawData = {} } = useGetAdminQuery({ page, limit, search });\r\n  const { admin = [], totalData, totalPages } = rawData;\r\n\r\n  console.log(admin);\r\n\r\n  const [deleteAdmin, { isLoading, isSuccess, error, reset }] =\r\n    useDeleteAdminMutation();\r\n\r\n  const deleteHandler = (id) => {\r\n    toast.promise(\r\n      deleteAdmin(id)\r\n        .unwrap()\r\n        .then((res) => res.message),\r\n      {\r\n        loading: \"Memproses...\",\r\n        success: (message) => message,\r\n        error: (err) => err.data.message,\r\n      }\r\n    );\r\n  };\r\n\r\n  const copyLink = (code) => {\r\n    const link = `${window.location.origin}/aktivasi-akun/${code}`;\r\n    navigator.clipboard\r\n      .writeText(link)\r\n      .then(() => toast.success(\"Berhasil di copy\"));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isSuccess) {\r\n      reset();\r\n    }\r\n\r\n    if (error) {\r\n      reset();\r\n    }\r\n  }, [isSuccess, error]);\r\n\r\n  return (\r\n    <Table\r\n      page={page}\r\n      setPage={setPage}\r\n      setLimit={setLimit}\r\n      setSearch={setSearch}\r\n      totalData={totalData}\r\n      totalPages={totalPages}\r\n    >\r\n      <table className=\"table table-bordered table-striped table-hover\">\r\n        <thead>\r\n          <tr>\r\n            <th className=\"text-center\">No</th>\r\n            <th className=\"text-center\">Level</th>\r\n            <th className=\"text-center\">Nama</th>\r\n            <th className=\"text-center\">Email</th>\r\n            <th className=\"text-center\">Whatsapp</th>\r\n            <th className=\"text-center\">Status</th>\r\n            <th className=\"text-center\">Aksi</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {admin?.map((item, i) => (\r\n            <tr key={i}>\r\n              <td className=\"align-middle text-center\">\r\n                {(page - 1) * limit + i + 1}\r\n              </td>\r\n              <td className=\"align-middle\">{item.level}</td>\r\n              <td className=\"align-middle\">{item.username}</td>\r\n              <td className=\"align-middle\">{item.email}</td>\r\n              <td className=\"align-middle\">{item.phone}</td>\r\n              <td className=\"align-middle text-center\">\r\n                {item.isactive ? (\r\n                  <span className=\"badge text-bg-success\">aktif</span>\r\n                ) : (\r\n                  <span className=\"badge text-bg-danger\">non-aktif</span>\r\n                )}\r\n              </td>\r\n              <td className=\"align-middle text-center\">\r\n                <div className=\"d-flex justify-content-center gap-2\">\r\n                  <div className=\"d-flex gap-2 justify-content-center\">\r\n                    <button\r\n                      className=\"btn btn-sm btn-warning\"\r\n                      onClick={() => copyLink(item.activation)}\r\n                    >\r\n                      <i className=\"bi bi-link-45deg\"></i>\r\n                    </button>\r\n                    <button\r\n                      className=\"btn btn-sm btn-danger\"\r\n                      disabled={isLoading}\r\n                      onClick={() => deleteHandler(item.id)}\r\n                    >\r\n                      <i className=\"bi bi-folder-minus\"></i>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </Table>\r\n  );\r\n};\r\n\r\nexport default TableData;\r\n","import React, { useState } from \"react\";\r\nimport Layout from \"../../../components/layout/Layout\";\r\nimport Form from \"./Form\";\r\nimport TableData from \"./TableData\";\r\n\r\nconst CenterAdmin = () => {\r\n  return (\r\n    <Layout title={\"Administrator\"} levels={[\"center\"]}>\r\n      <div className=\"row g-2\">\r\n        <div className=\"col-lg-3 col-12\">\r\n          <Form />\r\n        </div>\r\n        <div className=\"col-lg-9 col-12\">\r\n          <TableData />\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default CenterAdmin;\r\n"],"names":["Form","data","homebase","useGetHomebaseQuery","page","limit","search","addAdmin","isSuccess","isLoading","error","reset","useAddAdminMutation","formData","setFormData","useState","id","home","name","email","password","level","phone","handleChange","e","value","target","prev","startsWith","slice","useEffect","jsxRuntimeExports","jsxs","onSubmit","preventDefault","formatted","parseInt","Vt","promise","unwrap","then","res","message","loading","success","err","className","children","jsx","onChange","hidden","map","item","type","placeholder","required","onClick","setDetail","disabled","TableData","setPage","setLimit","setSearch","rawData","useGetAdminQuery","admin","totalData","totalPages","console","log","deleteAdmin","useDeleteAdminMutation","Table","i","username","isactive","code","link","window","location","origin","navigator","clipboard","writeText","toast","copyLink","activation","deleteHandler","c","CenterAdmin","Layout","title","levels"],"mappings":"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"}