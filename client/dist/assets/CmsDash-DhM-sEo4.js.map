{"version":3,"file":"CmsDash-DhM-sEo4.js","sources":["../../src/page/cms/Dashboard/CmsDash.jsx"],"sourcesContent":["import React from \"react\";\r\nimport Layout from \"../layout/Layout\";\r\nimport { motion } from \"framer-motion\";\r\nimport {\r\n  FaNewspaper,\r\n  FaTags,\r\n  FaBuilding,\r\n  FaComments,\r\n  FaChartLine,\r\n  FaEye,\r\n  FaUsers,\r\n  FaClock,\r\n  FaGlobe,\r\n} from \"react-icons/fa\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useGetCmsDashboardQuery } from \"../../../controller/api/dashboard/ApiDashboard\";\r\n\r\nconst containerVariants = {\r\n  hidden: { opacity: 0 },\r\n  visible: {\r\n    opacity: 1,\r\n    transition: {\r\n      staggerChildren: 0.1,\r\n    },\r\n  },\r\n};\r\n\r\nconst itemVariants = {\r\n  hidden: { y: 20, opacity: 0 },\r\n  visible: {\r\n    y: 0,\r\n    opacity: 1,\r\n    transition: {\r\n      type: \"spring\",\r\n      stiffness: 100,\r\n    },\r\n  },\r\n};\r\n\r\nconst CmsDash = () => {\r\n  const {\r\n    data: cmsDashboardData,\r\n    isLoading,\r\n    error,\r\n  } = useGetCmsDashboardQuery();\r\n\r\n  if (isLoading) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div>Error: {error.message}</div>;\r\n  }\r\n\r\n  const statsData = [\r\n    {\r\n      id: \"total_visitors\",\r\n      title: \"Total Pengunjung\",\r\n      value: cmsDashboardData?.stats?.total_visitors?.toLocaleString() || \"0\",\r\n      icon: <FaEye />,\r\n      color: \"primary\",\r\n      change: `${\r\n        cmsDashboardData?.stats?.changes?.visitors?.value > 0 ? \"+\" : \"\"\r\n      }${cmsDashboardData?.stats?.changes?.visitors?.value}%`,\r\n      period:\r\n        cmsDashboardData?.stats?.changes?.visitors?.period || \"vs Bulan lalu\",\r\n    },\r\n    {\r\n      id: \"total_news\",\r\n      title: \"Berita Terbit\",\r\n      value: cmsDashboardData?.stats?.total_news?.toLocaleString() || \"0\",\r\n      icon: <FaNewspaper />,\r\n      color: \"success\",\r\n      change: `+${cmsDashboardData?.stats?.changes?.news?.value || 0}`,\r\n      period: cmsDashboardData?.stats?.changes?.news?.period || \"Bulan ini\",\r\n    },\r\n    {\r\n      id: \"total_facilities\",\r\n      title: \"Fasilitas\",\r\n      value: cmsDashboardData?.stats?.total_facilities?.toLocaleString() || \"0\",\r\n      icon: <FaBuilding />,\r\n      color: \"info\",\r\n      change: cmsDashboardData?.stats?.changes?.facilities?.value || 0,\r\n      period:\r\n        cmsDashboardData?.stats?.changes?.facilities?.period || \"Bulan ini\",\r\n    },\r\n    {\r\n      id: \"total_testimonials\",\r\n      title: \"Testimoni\",\r\n      value:\r\n        cmsDashboardData?.stats?.total_testimonials?.toLocaleString() || \"0\",\r\n      icon: <FaComments />,\r\n      color: \"warning\",\r\n      change: `+${cmsDashboardData?.stats?.changes?.testimonials?.value || 0}`,\r\n      period:\r\n        cmsDashboardData?.stats?.changes?.testimonials?.period || \"Bulan ini\",\r\n    },\r\n  ];\r\n\r\n  // Format daily trend data for the chart\r\n  const dailyTrendData = cmsDashboardData?.visitorStats?.daily_trend?.map(\r\n    (day) => ({\r\n      date: new Date(day.date).toLocaleDateString(),\r\n      visitors: day.unique_visitors,\r\n      visits: day.total_visits,\r\n    })\r\n  );\r\n\r\n  // Format country data for the chart\r\n  const countryData = cmsDashboardData?.visitorStats?.top_countries?.map(\r\n    (country) => ({\r\n      country: country.country,\r\n      visitors: country.count,\r\n    })\r\n  );\r\n\r\n  // Helper function to format time\r\n  const getTimeAgo = (timestamp) => {\r\n    const date = new Date(timestamp);\r\n    const now = new Date();\r\n    const seconds = Math.floor((now - date) / 1000);\r\n    const minutes = Math.floor(seconds / 60);\r\n    const hours = Math.floor(minutes / 60);\r\n    const days = Math.floor(hours / 24);\r\n\r\n    if (days > 0) return `${days} day${days > 1 ? \"s\" : \"\"} ago`;\r\n    if (hours > 0) return `${hours} hour${hours > 1 ? \"s\" : \"\"} ago`;\r\n    if (minutes > 0) return `${minutes} minute${minutes > 1 ? \"s\" : \"\"} ago`;\r\n    return \"just now\";\r\n  };\r\n\r\n  return (\r\n    <Layout title='Dashboard' levels={[\"cms\"]}>\r\n      <div className='container-fluid py-3 py-md-4'>\r\n        <motion.div\r\n          className='row g-3 g-md-4'\r\n          initial='hidden'\r\n          animate='visible'\r\n          variants={containerVariants}>\r\n          {/* Stats Cards */}\r\n          {statsData.map((stat) => (\r\n            <motion.div\r\n              key={stat.id}\r\n              className='col-12 col-sm-6 col-lg-3'\r\n              variants={itemVariants}>\r\n              <div\r\n                className={`card border-0 shadow-sm h-100 bg-${stat.color} bg-opacity-10`}>\r\n                <div className='card-body'>\r\n                  <div className='d-flex justify-content-between align-items-start'>\r\n                    <div>\r\n                      <h6 className='card-title text-muted mb-1'>\r\n                        {stat.title}\r\n                      </h6>\r\n                      <h2 className='mb-1 fs-3'>{stat.value}</h2>\r\n                      <div className='small text-success'>\r\n                        {stat.change} {stat.period}\r\n                      </div>\r\n                    </div>\r\n                    <div className={`display-6 text-${stat.color}`}>\r\n                      {stat.icon}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </motion.div>\r\n          ))}\r\n\r\n          {/* Recent Activities */}\r\n          <motion.div className='col-12 col-lg-8' variants={itemVariants}>\r\n            <div className='card border-0 shadow-sm h-100'>\r\n              <div className='card-body'>\r\n                <div className='d-flex justify-content-between align-items-center mb-4'>\r\n                  <h5 className='card-title mb-0'>Aktivitas Terakhir</h5>\r\n                  <Link\r\n                    to='/cms-news'\r\n                    className='btn btn-sm btn-outline-primary'>\r\n                    Lihat Semua\r\n                  </Link>\r\n                </div>\r\n                <div className='timeline'>\r\n                  {cmsDashboardData?.recentActivities?.map((activity) => (\r\n                    <div\r\n                      key={activity.id}\r\n                      className='timeline-item mb-3 pb-3 border-bottom'>\r\n                      <div className='d-flex justify-content-between'>\r\n                        <div>\r\n                          <div className='text-muted small mb-1'>\r\n                            {activity.action}\r\n                          </div>\r\n                          <div className='fw-medium'>{activity.title}</div>\r\n                        </div>\r\n                        <div className='text-muted small'>\r\n                          <FaClock className='me-1' />\r\n                          {getTimeAgo(activity.time)}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n\r\n          {/* Page Analytics */}\r\n          <motion.div className='col-12 col-lg-4' variants={itemVariants}>\r\n            <div className='card border-0 shadow-sm h-100'>\r\n              <div className='card-body'>\r\n                <h5 className='card-title mb-4'>Analisis Halaman</h5>\r\n                <div className='d-flex align-items-center mb-3'>\r\n                  <div className='flex-shrink-0'>\r\n                    <div className='bg-primary bg-opacity-10 p-3 rounded'>\r\n                      <FaChartLine className='text-primary fs-4' />\r\n                    </div>\r\n                  </div>\r\n                  <div className='flex-grow-1 ms-3'>\r\n                    <div className='text-muted small'>Total Halaman</div>\r\n                    <div className='fs-5 fw-medium'>\r\n                      {cmsDashboardData?.websiteAnalytics?.pageViews?.toLocaleString() ||\r\n                        \"0\"}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className='d-flex align-items-center mb-3'>\r\n                  <div className='flex-shrink-0'>\r\n                    <div className='bg-success bg-opacity-10 p-3 rounded'>\r\n                      <FaUsers className='text-success fs-4' />\r\n                    </div>\r\n                  </div>\r\n                  <div className='flex-grow-1 ms-3'>\r\n                    <div className='text-muted small'>Pengunjung Unik</div>\r\n                    <div className='fs-5 fw-medium'>\r\n                      {cmsDashboardData?.websiteAnalytics?.uniqueVisitors?.toLocaleString() ||\r\n                        \"0\"}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className='d-flex align-items-center'>\r\n                  <div className='flex-shrink-0'>\r\n                    <div className='bg-info bg-opacity-10 p-3 rounded'>\r\n                      <FaGlobe className='text-info fs-4' />\r\n                    </div>\r\n                  </div>\r\n                  <div className='flex-grow-1 ms-3'>\r\n                    <div className='text-muted small'>Negara</div>\r\n                    <div className='fs-5 fw-medium'>\r\n                      {cmsDashboardData?.visitorStats?.top_countries?.length ||\r\n                        \"0\"}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        </motion.div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default CmsDash;\r\n"],"names":["containerVariants","hidden","opacity","visible","transition","staggerChildren","itemVariants","y","type","stiffness","CmsDash","data","cmsDashboardData","isLoading","error","useGetCmsDashboardQuery","jsx","children","message","statsData","id","title","value","_b","_a","stats","total_visitors","toLocaleString","icon","FaEye","color","change","_e","_d","_c","changes","visitors","_h","_g","_f","period","_k","_i","_j","_m","_l","total_news","FaNewspaper","_p","_o","_n","news","_s","_q","_r","_u","_t","total_facilities","FaBuilding","_x","_v","_w","facilities","_A","_y","_z","_C","_B","total_testimonials","FaComments","_F","_E","_D","testimonials","_I","_G","_H","_K","_J","visitorStats","daily_trend","map","day","date","Date","toLocaleDateString","unique_visitors","visits","total_visits","_M","_L","top_countries","country","count","getTimeAgo","timestamp","now","seconds","Math","floor","minutes","hours","days","Layout","levels","className","jsxRuntimeExports","jsxs","motion","div","initial","animate","variants","stat","Link","to","recentActivities","activity","action","FaClock","time","FaChartLine","_O","websiteAnalytics","pageViews","_P","FaUsers","_Q","uniqueVisitors","_R","FaGlobe","_S","_T","length"],"mappings":"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"}