import{u as e,a as s,b as a,c as i,j as t,d as n,s as r}from"./index-Deb7CCnC.js";import{u as l,b as c}from"./vendor-CAuU4qY4.js";const o=()=>{const o=e();l();const[d,x]=c.useState("none"),[m,h]=c.useState(!1),[p,u]=c.useState(""),[b,g]=c.useState(""),[j,f]=c.useState(!1),[N,{isLoading:w,data:y}]=s(),[v,{isLoading:k}]=a();i((e=>e.auth));const S=e=>{x(e),u("")},C={center:"/center-dashboard",admin:"/admin-dashboard",student:"/siswa-dashboard",teacher:"/guru-dashboard",parent:"/wali-dashboard",tahfiz:"/tahfiz-dashboard"};return t.jsxs("div",{children:[t.jsx("div",{className:"area",children:t.jsxs("ul",{className:"circles",children:[t.jsx("li",{}),t.jsx("li",{}),t.jsx("li",{}),t.jsx("li",{}),t.jsx("li",{}),t.jsx("li",{}),t.jsx("li",{}),t.jsx("li",{}),t.jsx("li",{}),t.jsx("li",{})]})}),t.jsxs("div",{className:"d-flex align-items-center justify-content-center flex-column gap-3",style:{height:"100vh"},children:[t.jsx("img",{src:"/logo.png",alt:"logo",style:{height:120,width:120,marginBottom:"1rem"}}),"none"===d&&t.jsxs("div",{className:"d-flex flex-wrap justify-content-center gap-3",children:[t.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>S("admin"),children:t.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[t.jsx("i",{className:"bi bi-person-badge-fill transition-icon",style:{fontSize:"2rem"}}),t.jsx("h5",{className:"card-title mb-0",children:"Admin"})]})}),t.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>S("teacher"),children:t.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[t.jsx("i",{className:"bi bi-person-workspace transition-icon",style:{fontSize:"2rem"}}),t.jsx("h5",{className:"card-title mb-0",children:"Guru"})]})}),t.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>S("student"),children:t.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[t.jsx("i",{className:"bi bi-mortarboard-fill transition-icon",style:{fontSize:"2rem"}}),t.jsx("h5",{className:"card-title mb-0",children:"Siswa"})]})}),t.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>S("parent"),children:t.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[t.jsx("i",{className:"bi bi-people-fill transition-icon",style:{fontSize:"2rem"}}),t.jsx("h5",{className:"card-title mb-0",children:"Wali Murid"})]})}),t.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>{x(""),h(!0),u("")},children:t.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[t.jsx("i",{className:"bi bi-person-plus-fill transition-icon",style:{fontSize:"2rem"}}),t.jsx("h5",{className:"card-title mb-0",children:"Pendaftaran"})]})})]}),"none"!==d&&!m&&t.jsxs("form",{style:{width:300},className:"d-flex flex-column gap-3",onSubmit:async e=>{var s;e.preventDefault();const a={password:b,..."student"===d?{nis:p}:"teacher"===d?{username:p}:"parent"===d?{name:p}:{email:p}};try{const e=await N(a).unwrap();n.loading("Memuat data pengguna..."),o(r(e.user));try{const s=await v().unwrap();o(r(s)),n.dismiss(),n.success(e.message),window.location.href=C[s.level]||"/"}catch(i){console.error("Error loading user data:",i),n.dismiss(),n.error("Gagal memuat data lengkap pengguna"),window.location.href=C[e.user.level]||"/"}}catch(i){n.error((null==(s=i.data)?void 0:s.message)||"Gagal masuk")}},children:[t.jsxs("div",{className:"input-group",children:[t.jsx("span",{className:"input-group-text",children:t.jsx("i",{className:"bi "+("student"===d?"bi-person-badge":"teacher"===d?"bi-person-workspace":"bi-envelope")})}),t.jsx("input",{type:"admin"===d||"parent"===d?"email":"text",placeholder:"student"===d?"NIS":"teacher"===d?"USERNAME":"EMAIL",value:p,onChange:e=>u(e.target.value),required:!0,className:"form-control"})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("span",{className:"input-group-text",children:t.jsx("i",{className:"bi bi-lock-fill"})}),t.jsx("input",{type:j?"text":"password",placeholder:"Password",className:"form-control",value:b,onChange:e=>g(e.target.value),required:!0})]}),t.jsxs("div",{className:"form-check",children:[t.jsx("input",{className:"form-check-input",type:"checkbox",id:"flexCheckDefault",checked:j,onChange:()=>{f((e=>!e))}}),t.jsx("label",{className:"form-check-label text-white",htmlFor:"flexCheckDefault",children:"Tampilkan Password"})]}),t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsxs("button",{type:"button",className:"btn btn-danger d-flex align-items-center gap-2",onClick:()=>x("none"),children:[t.jsx("i",{className:"bi bi-arrow-left"}),"Kembali"]}),t.jsx("button",{type:"submit",className:"btn btn-success d-flex align-items-center gap-2",disabled:w||k,children:w||k?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"spinner-border spinner-border-sm","aria-hidden":"true"}),t.jsx("span",{role:"status",children:"Loading..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"bi bi-box-arrow-in-right"}),"Masuk"]})})]})]}),m&&t.jsx(SignUp,{setRole:()=>{x("none"),h(!1),u("")}})]})]})};export{o as default};
//# sourceMappingURL=Index-WwaP9WRj.js.map
