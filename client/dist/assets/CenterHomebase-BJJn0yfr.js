import{g as e,j as s,d as a,h as t,i as n,V as l}from"./index-CMyBabIx.js";import{b as i}from"./vendor-BYWiIb5-.js";import{L as r}from"./Layout-sWiut_Ip.js";import{T as d}from"./Table-C5wZDMjw.js";const c=({detail:t,setDetail:n})=>{const[l,r]=i.useState(""),[d,c]=i.useState(""),[o,{data:m,isLoading:h,isSuccess:u,error:x,reset:j}]=e();return i.useEffect((()=>{t&&(r(t.name),c(t.id))}),[t]),i.useEffect((()=>{u&&(j(),r(""),c("")),x&&j()}),[u]),s.jsxs("form",{onSubmit:e=>{e.preventDefault(),l||a.error("Lenkapi data");const s={id:d,name:l};a.promise(o(s).unwrap().then((e=>e.message)),{loading:"Menyimpan data...",success:e=>e,error:e=>{var s;return null==(s=e.data)?void 0:s.message}})},className:"rounded border p-2 d-flex flex-column gap-2 shadow bg-white",children:[s.jsx("p",{className:"m-0 h6",children:"Satuan Pendidikan"}),s.jsx("input",{type:"text",name:"homebase",className:"form-control",placeholder:"SD / SMP / SMA / SMK / Sekolah",value:l||"",onChange:e=>r(e.target.value)}),s.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[s.jsx("button",{type:"button",className:"btn btn-warning",onClick:()=>n({}),children:"Batal"}),s.jsx("button",{type:"submit",className:"btn btn-success",disabled:h,children:"Simpan"})]})]})},o=({setDetail:e})=>{const[a,r]=i.useState(1),[c,o]=i.useState(10),[m,h]=i.useState(""),{data:u={}}=t({page:a,limit:c,search:m}),{homebase:x=[],totalPages:j,totalData:b}=u,[g,{isLoading:p,isSuccess:N,error:f,reset:S}]=n();return i.useEffect((()=>{N&&S(),f&&S()}),[N,f]),s.jsx(d,{totalData:b,totalPages:j,page:a,setPage:r,setLimit:o,setSearch:h,children:s.jsxs("table",{className:"table table-bordered table-striped table-hover",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-center",children:"No"}),s.jsx("th",{className:"text-center",children:"_id"}),s.jsx("th",{className:"text-center",children:"Satuan Pendidikan"}),s.jsx("th",{className:"text-center",children:"Aksi"})]})}),s.jsx("tbody",{children:null==x?void 0:x.map(((t,n)=>s.jsxs("tr",{children:[s.jsx("td",{className:"text-center align-middle",children:(a-1)*c+n+1}),s.jsx("td",{className:"text-center align-middle",children:t.id}),s.jsx("td",{className:"text-center align-middle",children:t.name}),s.jsx("td",{children:s.jsxs("div",{className:"d-flex gap-2 justify-content-center",children:[s.jsx("button",{className:"btn btn-warning",onClick:()=>e(t),children:s.jsx("i",{className:"bi bi-pencil-square"})}),s.jsx("button",{className:"btn btn-danger",disabled:p,onClick:()=>{return e=t.id,void l.promise(g(e).unwrap().then((e=>e.message)),{loading:"Memproses...",success:e=>e,error:e=>e.data.message});var e},children:s.jsx("i",{className:"bi bi-folder-minus"})})]})})]},t.id)))})]})})},m=()=>{const[e,a]=i.useState("");return s.jsx(r,{title:"Satuan Pendidikan",levels:["center"],children:s.jsxs("div",{className:"h-100 row g-2",children:[s.jsx("div",{className:"col-lg-3 col-12",children:s.jsx(c,{detail:e,setDetail:a})}),s.jsx("div",{className:"col-lg-9 col-12",children:s.jsx(o,{setDetail:a})})]})})};export{m as default};
//# sourceMappingURL=CenterHomebase-BJJn0yfr.js.map
