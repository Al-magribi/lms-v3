import{A as e,C as s,j as a,V as t,D as n,E as l,d as i}from"./index-CNbAajcm.js";import{b as r}from"./vendor-BYWiIb5-.js";import{L as c}from"./Layout-_SAc74nU.js";import{T as d}from"./Table-BSwODE4h.js";import"./index-C-OX0RB-.js";import"./index-DLmIb9aI.js";const o=()=>{const{data:n}=e({page:"",limit:"",search:""}),[l,{isSuccess:i,isLoading:c,error:d,reset:o}]=s(),[m,h]=r.useState({id:"",home:"",name:"",email:"",password:"",level:"",phone:""}),x=e=>{const{name:s,value:a}=e.target;h((e=>{return{...e,[s]:"phone"===s?(t=a,(null==t?void 0:t.startsWith("0"))?`62${t.slice(1)}`:t):a};var t}))};return r.useEffect((()=>{i&&(h({id:"",home:"",name:"",email:"",password:"",level:"",phone:""}),o()),d&&o()}),[i,d]),a.jsxs("form",{onSubmit:e=>{e.preventDefault();const s={...m,home:parseInt(m.home,10)};t.promise(l(s).unwrap().then((e=>e.message)),{loading:"Menyimpan Data...",success:e=>e,error:e=>e.data.message})},className:"d-flex flex-column gap-2 rounded p-2 border ",children:[a.jsx("p",{className:"m-0 h6",children:"Administrator"}),a.jsxs("select",{name:"level",id:"level",className:"form-select",value:m.level,onChange:x,children:[a.jsx("option",{value:"",hidden:!0,children:"Pilih Level"}),a.jsx("option",{value:"center",children:"Pusat"}),a.jsx("option",{value:"admin",children:"Satuan"}),a.jsx("option",{value:"tahfiz",children:"Tahfiz"}),a.jsx("option",{value:"cms",children:"Konten Managemen"})]}),"center"!==m.level&&a.jsxs("select",{name:"home",id:"home",className:"form-select",value:m.home,onChange:x,children:[a.jsx("option",{value:"",hidden:!0,children:"Pilih Satuan"}),null==n?void 0:n.map((e=>a.jsx("option",{value:e.id,children:e.name},e.id)))]}),a.jsx("input",{type:"text",name:"name",id:"name",placeholder:"Username",className:"form-control",value:m.name||"",onChange:x,required:!0}),a.jsx("input",{type:"email",name:"email",id:"email",className:"form-control",placeholder:"Email",value:m.email||"",onChange:x,required:!0}),a.jsx("input",{type:"text",name:"phone",id:"phone",className:"form-control",placeholder:"Whatsapp",value:m.phone||"",onChange:x}),a.jsx("input",{type:"password",name:"password",id:"password",className:"form-control",placeholder:"Password",value:m.password||"",onChange:x,required:!0}),a.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[a.jsx("button",{type:"button",className:"btn btn-warning",onClick:()=>setDetail(""),children:"Batal"}),a.jsx("button",{type:"submit",className:"btn btn-success",disabled:c,children:"Simpan"})]})]})},m=()=>{const[e,s]=r.useState(1),[t,c]=r.useState(10),[o,m]=r.useState(""),{data:h={}}=n({page:e,limit:t,search:o}),{admin:x=[],totalData:p,totalPages:u}=h;console.log(x);const[j,{isLoading:g,isSuccess:v,error:b,reset:N}]=l();return r.useEffect((()=>{v&&N(),b&&N()}),[v,b]),a.jsx(d,{page:e,setPage:s,setLimit:c,setSearch:m,totalData:p,totalPages:u,children:a.jsxs("table",{className:"table table-bordered table-striped table-hover",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-center",children:"No"}),a.jsx("th",{className:"text-center",children:"Level"}),a.jsx("th",{className:"text-center",children:"Nama"}),a.jsx("th",{className:"text-center",children:"Email"}),a.jsx("th",{className:"text-center",children:"Whatsapp"}),a.jsx("th",{className:"text-center",children:"Status"}),a.jsx("th",{className:"text-center",children:"Aksi"})]})}),a.jsx("tbody",{children:null==x?void 0:x.map(((s,n)=>a.jsxs("tr",{children:[a.jsx("td",{className:"align-middle text-center",children:(e-1)*t+n+1}),a.jsx("td",{className:"align-middle",children:s.level}),a.jsx("td",{className:"align-middle",children:s.username}),a.jsx("td",{className:"align-middle",children:s.email}),a.jsx("td",{className:"align-middle",children:s.phone}),a.jsx("td",{className:"align-middle text-center",children:s.isactive?a.jsx("span",{className:"badge text-bg-success",children:"aktif"}):a.jsx("span",{className:"badge text-bg-danger",children:"non-aktif"})}),a.jsx("td",{className:"align-middle text-center",children:a.jsx("div",{className:"d-flex justify-content-center gap-2",children:a.jsxs("div",{className:"d-flex gap-2 justify-content-center",children:[a.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>(e=>{const s=`${window.location.origin}/aktivasi-akun/${e}`;navigator.clipboard.writeText(s).then((()=>i.success("Berhasil di copy")))})(s.activation),children:a.jsx("i",{className:"bi bi-link-45deg"})}),a.jsx("button",{className:"btn btn-sm btn-danger",disabled:g,onClick:()=>{return e=s.id,void i.promise(j(e).unwrap().then((e=>e.message)),{loading:"Memproses...",success:e=>e,error:e=>e.data.message});var e},children:a.jsx("i",{className:"bi bi-folder-minus"})})]})})})]},n)))})]})})},h=()=>a.jsx(c,{title:"Administrator",levels:["center"],children:a.jsxs("div",{className:"row g-2",children:[a.jsx("div",{className:"col-lg-3 col-12",children:a.jsx(o,{})}),a.jsx("div",{className:"col-lg-9 col-12",children:a.jsx(m,{})})]})});export{h as default};
//# sourceMappingURL=CenterAdmin-zX1Z95Jx.js.map
