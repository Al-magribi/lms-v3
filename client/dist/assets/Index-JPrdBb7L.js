import{u as e,a as s,b as a,j as i,c as t,s as n}from"./index-Dm8HVZNu.js";import{u as l,b as r}from"./vendor-BB4zGQ0b.js";const c=()=>{const c=e(),d=l(),{user:o,isSignin:x}=s((e=>e.auth)),h={center:"/center-dashboard",admin:"/admin-dashboard",student:"/siswa-dashboard",teacher:"/guru-dashboard",parent:"/wali-dashboard",tahfiz:"/tahfiz-dashboard"};r.useEffect((()=>{x&&(null==o?void 0:o.level)&&d(h[o.level])}),[x,o,d]);const[m,p]=r.useState("none"),[u,b]=r.useState(!1),[j,g]=r.useState(""),[f,N]=r.useState(""),[v,w]=r.useState(!1),[y,{isLoading:k,data:S}]=a(),[C,z]=r.useState({}),M=e=>{p(e),g(""),z({})};return x&&(null==o?void 0:o.level)?i.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{height:"100vh"},children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"spinner-border text-primary",role:"status",children:i.jsx("span",{className:"visually-hidden",children:"Loading..."})}),i.jsx("p",{className:"mt-2",children:"Mengalihkan ke dashboard..."})]})}):i.jsxs("div",{children:[i.jsx("div",{className:"area",children:i.jsxs("ul",{className:"circles",children:[i.jsx("li",{}),i.jsx("li",{}),i.jsx("li",{}),i.jsx("li",{}),i.jsx("li",{}),i.jsx("li",{}),i.jsx("li",{}),i.jsx("li",{}),i.jsx("li",{}),i.jsx("li",{})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-center flex-column gap-3",style:{height:"100vh"},children:[i.jsx("img",{src:"/logo.png",alt:"logo",style:{height:120,width:120,marginBottom:"1rem"}}),"none"===m&&i.jsxs("div",{className:"d-flex flex-wrap justify-content-center gap-3",children:[i.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>M("admin"),children:i.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[i.jsx("i",{className:"bi bi-person-badge-fill transition-icon",style:{fontSize:"2rem"}}),i.jsx("h5",{className:"card-title mb-0",children:"Admin"})]})}),i.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>M("teacher"),children:i.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[i.jsx("i",{className:"bi bi-person-workspace transition-icon",style:{fontSize:"2rem"}}),i.jsx("h5",{className:"card-title mb-0",children:"Guru"})]})}),i.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>M("student"),children:i.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[i.jsx("i",{className:"bi bi-mortarboard-fill transition-icon",style:{fontSize:"2rem"}}),i.jsx("h5",{className:"card-title mb-0",children:"Siswa"})]})}),i.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>M("parent"),children:i.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[i.jsx("i",{className:"bi bi-people-fill transition-icon",style:{fontSize:"2rem"}}),i.jsx("h5",{className:"card-title mb-0",children:"Wali Murid"})]})}),i.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>{p(""),b(!0),g(""),z({})},children:i.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[i.jsx("i",{className:"bi bi-person-plus-fill transition-icon",style:{fontSize:"2rem"}}),i.jsx("h5",{className:"card-title mb-0",children:"Pendaftaran"})]})})]}),"none"!==m&&!u&&i.jsxs("form",{style:{width:300},className:"d-flex flex-column gap-3",onSubmit:async e=>{var s;if(e.preventDefault(),!(()=>{const e={};return j.trim()||(e.account="Field ini wajib diisi"),f||(e.password="Password wajib diisi"),z(e),0===Object.keys(e).length})())return;const a=t.loading("Memproses login..."),i={password:f,..."student"===m?{nis:j}:"teacher"===m?{username:j}:"parent"===m?{name:j}:{email:j}};try{const e=await y(i).unwrap();c(n(e.user)),t.success("Login berhasil",{id:a}),d(h[e.user.level]||"/")}catch(l){const e=(null==(s=l.data)?void 0:s.message)||"Gagal masuk. Silakan coba lagi.";t.error(e,{id:a}),N("")}},children:[i.jsxs("div",{className:"input-group",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"bi "+("student"===m?"bi-person-badge":"teacher"===m?"bi-person-workspace":"bi-envelope")})}),i.jsx("input",{type:"admin"===m||"parent"===m?"email":"text",placeholder:"student"===m?"NIS":"teacher"===m?"USERNAME":"EMAIL",value:j,onChange:e=>{g(e.target.value),z({...C,account:""})},required:!0,className:"form-control "+(C.account?"is-invalid":"")}),C.account&&i.jsx("div",{className:"invalid-feedback",children:C.account})]}),i.jsxs("div",{className:"input-group",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"bi bi-lock-fill"})}),i.jsx("input",{type:v?"text":"password",placeholder:"Password",className:"form-control "+(C.password?"is-invalid":""),value:f,onChange:e=>{N(e.target.value),z({...C,password:""})},required:!0}),C.password&&i.jsx("div",{className:"invalid-feedback",children:C.password})]}),i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"flexCheckDefault",checked:v,onChange:()=>{w((e=>!e))}}),i.jsx("label",{className:"form-check-label text-white",htmlFor:"flexCheckDefault",children:"Tampilkan Password"})]}),i.jsxs("div",{className:"d-flex justify-content-between",children:[i.jsxs("button",{type:"button",className:"btn btn-danger d-flex align-items-center gap-2",onClick:()=>p("none"),children:[i.jsx("i",{className:"bi bi-arrow-left"}),"Kembali"]}),i.jsx("button",{type:"submit",className:"btn btn-success d-flex align-items-center gap-2",disabled:k,children:k?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm","aria-hidden":"true"}),i.jsx("span",{role:"status",children:"Loading..."})]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"bi bi-box-arrow-in-right"}),"Masuk"]})})]})]}),u&&i.jsx(SignUp,{setRole:()=>{p("none"),b(!1),g(""),z({})}})]})]})};export{c as default};
//# sourceMappingURL=Index-JPrdBb7L.js.map
