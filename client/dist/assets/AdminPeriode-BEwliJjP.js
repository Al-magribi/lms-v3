import{a7 as e,j as s,e as a,a8 as t,a9 as i,aa as n,ab as r,ac as c,V as d}from"./index-mQl5svQ-.js";import{b as l}from"./vendor-DfXzdC0j.js";import{L as o}from"./Layout-CMxW7Kh2.js";import{T as m}from"./Table-D4ODITAU.js";import"./index-CGMX7dKw.js";import"./index-hpZ4eOv6.js";import"./index-DyuEXp_a.js";const h=({detail:t,setDetail:i})=>{const[n,r]=l.useState(""),[c,d]=l.useState(""),[o,{isSuccess:m,isLoading:h,isError:x,reset:u}]=e();return l.useEffect((()=>{m&&(u(),i({}),r(""),d("")),x&&u()}),[m,x]),l.useEffect((()=>{t&&(r(t.id),d(t.name))}),[t]),s.jsxs("form",{onSubmit:e=>{e.preventDefault();const s={id:n,name:c};a.promise(o(s).unwrap().then((e=>e.message)),{loading:"Menyimpan data...",success:e=>e,error:e=>e.data.message})},className:"d-flex align-items-center justify-content-between gap-2",children:[s.jsx("input",{type:"text",name:"periode",id:"periode",className:"form-control",placeholder:"Periode",required:!0,value:c||"",onChange:e=>d(e.target.value)}),s.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[s.jsx("button",{type:"button",className:"btn btn-sm btn-warning",onClick:()=>{i({}),r(""),d("")},children:"Batal"}),s.jsx("button",{type:"submit",className:"btn btn-sm btn-success",disabled:h,children:"Simpan"})]})]})},x=({setDetail:e})=>{const[a,o]=l.useState(1),[h,x]=l.useState(10),[u,p]=l.useState(""),{data:j={},isLoading:g}=t({page:a,limit:h,search:u}),{periodes:b=[],totalData:f,totalPages:N}=j,[k,{isSuccess:v,isLoading:y,isError:w,reset:S}]=i(),[C]=n(),{refetch:D}=r({page:a,limit:h,search:u}),{refetch:L}=c({page:a,limit:h,search:u});return l.useEffect((()=>{v&&S(),w&&S()}),[v,w]),s.jsx(m,{page:a,setPage:o,setLimit:x,setSearch:p,totalData:f,totalPages:N,isLoading:g,children:s.jsxs("table",{className:"table table-bordered table-striped table-hover",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-center",children:"No"}),s.jsx("th",{className:"text-center",children:"_id"}),s.jsx("th",{className:"text-center",children:"Periode"}),s.jsx("th",{className:"text-center",children:"Status"}),s.jsx("th",{className:"text-center",children:"Aksi"})]})}),s.jsx("tbody",{children:null==b?void 0:b.map(((t,i)=>s.jsxs("tr",{children:[s.jsx("td",{className:"text-center align-middle",children:(a-1)*h+i+1}),s.jsx("td",{className:"text-center align-middle",children:t.id}),s.jsx("td",{className:"text-center align-middle",children:t.name}),s.jsx("td",{className:"text-center align-middle",children:s.jsx("div",{className:"form-check form-switch d-flex justify-content-center",onClick:()=>{return e=t.id,void(window.confirm("Apakah anda yakin ingin mengubah status periode ini?")&&d.promise(C(e).unwrap().then((e=>(D(),L(),e.message))),{loading:"Memproses...",success:e=>e,error:e=>e.data.message}));var e},children:s.jsx("input",{className:"form-check-input pointer",type:"checkbox",role:"switch",id:"flexSwitchCheckChecked",checked:t.isactive,readOnly:!0})})}),s.jsx("td",{className:"text-cente align-middle",children:s.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[s.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>e(t),children:s.jsx("i",{className:"bi bi-pencil-square"})}),s.jsx("button",{className:"btn btn-sm btn-danger",disabled:y,onClick:()=>{return e=t.id,void(window.confirm("Apakah anda yakin ingin menghapus periode ini dan semua data yang terkait dengan periode ini?")&&d.promise(k(e).unwrap().then((e=>e.message)),{loading:"Memproses...",success:e=>e,error:e=>e.data.message}));var e},children:s.jsx("i",{className:"bi bi-folder-minus"})})]})})]},i)))})]})})},u=()=>{const[e,a]=l.useState("");return s.jsx(o,{title:"Management Periode Pembelajaran",levels:["admin"],children:s.jsxs("div",{className:"container d-flex flex-column gap-4",children:[s.jsx(h,{detail:e,setDetail:a}),s.jsx(x,{setDetail:a})]})})};export{u as default};
//# sourceMappingURL=AdminPeriode-BEwliJjP.js.map
