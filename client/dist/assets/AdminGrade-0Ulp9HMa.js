import{X as e,j as s,d as t,Y as a,Z as n}from"./index-CAxv6K-O.js";import{b as i}from"./vendor-BYWiIb5-.js";import{L as l}from"./Layout-CTpYXQVy.js";import{T as r}from"./Table-D2KkIbvf.js";import"./index-C-OX0RB-.js";import"./index-DLmIb9aI.js";const d=({detail:a,setDetail:n})=>{const[l,r]=i.useState(""),[d,c]=i.useState(""),[o,{isSuccess:m,isLoading:x,error:u,reset:h}]=e();return i.useEffect((()=>{a&&(r(a.id),c(a.name))}),[a]),i.useEffect((()=>{m&&(h(),r(""),c(""),n("")),u&&h()}),[m,u]),s.jsxs("form",{onSubmit:e=>{e.preventDefault();const s={id:l,name:d};t.promise(o(s).unwrap().then((e=>e.message)),{loading:"Menyimpan data...",success:e=>e,error:e=>e.data.message})},className:"bg-white rounded border p-2 d-flex flex-column gap-2",children:[s.jsx("p",{className:"m-0 h6",children:"Tingkat Satuan Pendidikan"}),s.jsx("input",{type:"text",name:"grade",id:"grade",className:"form-control",placeholder:"Tingkat",required:!0,value:d||"",onChange:e=>c(e.target.value)}),s.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[s.jsx("button",{type:"button",className:"btn btn-sm btn-warning",onClick:()=>{r(""),c(""),n("")},children:"Batal"}),s.jsx("button",{type:"submit",className:"btn btn-sm btn-success",disabled:x,children:"Simpan"})]})]})},c=({setDetail:e})=>{const[l,d]=i.useState(1),[c,o]=i.useState(10),[m,x]=i.useState(""),{data:u={},isLoading:h}=a({page:l,limit:c,search:m}),{grades:j=[],totalData:b,totalPages:g}=u,[p,{isSuccess:N,isLoading:f,error:v,reset:S}]=n();return i.useEffect((()=>{N&&S(),v&&S()}),[N,v]),s.jsx(r,{page:l,setPage:d,setLimit:o,setSearch:x,totalData:b,totalPages:g,isLoading:h,children:s.jsxs("table",{className:"table table-bordered table-striped table-hover",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-center",children:"No"}),s.jsx("th",{className:"text-center",children:"Satuan"}),s.jsx("th",{className:"text-center",children:"Tingkat"}),s.jsx("th",{className:"text-center",children:"Aksi"})]})}),s.jsx("tbody",{children:null==j?void 0:j.map(((a,n)=>s.jsxs("tr",{children:[s.jsx("td",{className:"text-center align-middle",children:(l-1)*c+n+1}),s.jsx("td",{className:"align-middle",children:a.homebase}),s.jsx("td",{className:"text-center align-middle",children:a.name}),s.jsx("td",{className:"text-center align-middle",children:s.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[s.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>e(a),children:s.jsx("i",{className:"bi bi-pencil-square"})}),s.jsx("button",{className:"btn btn-sm btn-danger",disabled:f,onClick:()=>{return e=a.id,void t.promise(p(e).unwrap().then((e=>e.message)),{loading:"Memproses...",success:e=>e,error:e=>e.data.message});var e},children:s.jsx("i",{className:"bi bi-folder-minus"})})]})})]},n)))})]})})},o=()=>{const[e,t]=i.useState("");return s.jsx(l,{title:"Tingkat Pendidikan",levels:["admin"],children:s.jsxs("div",{className:"row g-2",children:[s.jsx("div",{className:"col-lg-3 col-12",children:s.jsx(d,{detail:e,setDetail:t})}),s.jsx("div",{className:"col-lg-9 col-12",children:s.jsx(c,{setDetail:t})})]})})};export{o as default};
//# sourceMappingURL=AdminGrade-0Ulp9HMa.js.map
