import{r as n,w,j as e,e as k,x as C,y as L,z as E,V as S}from"./index-_V-Hszfs.js";import{L as M}from"./Layout-BOPYSC9s.js";import{T as D}from"./Table-pFA1e1UJ.js";const A=({detail:c,setDetail:a})=>{const[h,i]=n.useState(""),[m,d]=n.useState(""),[j,{isSuccess:u,isLoading:b,isError:l,reset:x}]=w(),g=o=>{o.preventDefault();const f={id:h,name:m};k.promise(j(f).unwrap().then(r=>r.message),{loading:"Menyimpan data...",success:r=>r,error:r=>r.data.message})},p=()=>{a({}),i(""),d("")};return n.useEffect(()=>{u&&(x(),a({}),i(""),d("")),l&&x()},[u,l]),n.useEffect(()=>{c&&(i(c.id),d(c.name))},[c]),e.jsxs("form",{onSubmit:g,className:"rounded bg-white p-2 border d-flex flex-column gap-2",children:[e.jsx("p",{className:"m-0 h6",children:"Periode"}),e.jsx("input",{type:"text",name:"periode",id:"periode",className:"form-control",placeholder:"Periode",required:!0,value:m||"",onChange:o=>d(o.target.value)}),e.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-warning",onClick:p,children:"Batal"}),e.jsx("button",{type:"submit",className:"btn btn-sm btn-success",disabled:b,children:"Simpan"})]})]})},H=({setDetail:c})=>{const[a,h]=n.useState(1),[i,m]=n.useState(10),[d,j]=n.useState(""),{data:u={},isLoading:b}=C({page:a,limit:i,search:d}),{periodes:l=[],totalData:x,totalPages:g}=u,[p,{isSuccess:o,isLoading:f,isError:r,reset:N}]=L(),[y]=E(),P=t=>{S.promise(p(t).unwrap().then(s=>s.message),{loading:"Memproses...",success:s=>s,error:s=>s.data.message})},v=t=>{S.promise(y(t).unwrap().then(s=>s.message),{loading:"Memproses...",success:s=>s,error:s=>s.data.message})};return n.useEffect(()=>{o&&N(),r&&N()},[o,r]),e.jsx(D,{page:a,setPage:h,setLimit:m,setSearch:j,totalData:x,totalPages:g,isLoading:b,children:e.jsxs("table",{className:"table table-bordered table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center",children:"No"}),e.jsx("th",{className:"text-center",children:"_id"}),e.jsx("th",{className:"text-center",children:"Periode"}),e.jsx("th",{className:"text-center",children:"Status"}),e.jsx("th",{className:"text-center",children:"Aksi"})]})}),e.jsx("tbody",{children:l==null?void 0:l.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center align-middle",children:(a-1)*i+s+1}),e.jsx("td",{className:"text-center align-middle",children:t.id}),e.jsx("td",{className:"text-center align-middle",children:t.name}),e.jsx("td",{className:"text-center align-middle",children:e.jsx("div",{className:"form-check form-switch d-flex justify-content-center",onClick:()=>v(t.id),children:e.jsx("input",{className:"form-check-input pointer",type:"checkbox",role:"switch",id:"flexSwitchCheckChecked",checked:t.isactive,readOnly:!0})})}),e.jsx("td",{className:"text-cente align-middle",children:e.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[e.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>c(t),children:e.jsx("i",{className:"bi bi-pencil-square"})}),e.jsx("button",{className:"btn btn-sm btn-danger",disabled:f,onClick:()=>P(t.id),children:e.jsx("i",{className:"bi bi-folder-minus"})})]})})]},s))})]})})},z=()=>{const[c,a]=n.useState("");return e.jsx(M,{title:"Periode Pembelajaran",levels:["admin"],children:e.jsxs("div",{className:"row g-2",children:[e.jsx("div",{className:"col-lg-3 col-12",children:e.jsx(A,{detail:c,setDetail:a})}),e.jsx("div",{className:"col-lg-9 col-12",children:e.jsx(H,{setDetail:a})})]})})};export{z as default};
