import{b as s,a,cn as e,j as l,co as r}from"./index-CWxNWZvk.js";import{b as d}from"./vendor-DfXzdC0j.js";import{L as i}from"./Layout-CrHSAK76.js";import"./index-CGMX7dKw.js";import"./index-hpZ4eOv6.js";import"./index-DyuEXp_a.js";const c=()=>{const{user:c}=s((s=>s.auth)),m=a(),[n]=e(),[o,t]=d.useState({name:(null==c?void 0:c.name)||"",email:(null==c?void 0:c.email)||"",oldPassword:"",newPassword:"",confirmPassword:""}),[x,h]=d.useState(!1),[j,N]=d.useState({type:"",text:""}),b=s=>{const{name:a,value:e}=s.target;t((s=>({...s,[a]:e})))};return l.jsx(i,{title:"Profile Orang Tua",levels:["parent"],children:l.jsx("div",{className:"container-fluid",children:l.jsx("div",{className:"row",children:l.jsx("div",{className:"col-12",children:l.jsxs("div",{className:"card shadow-sm",children:[l.jsx("div",{className:"card-header bg-primary text-white",children:l.jsxs("h4",{className:"mb-0",children:[l.jsx("i",{className:"fas fa-user-edit me-2"}),"Profile Orang Tua"]})}),l.jsxs("div",{className:"card-body",children:[j.text&&l.jsxs("div",{className:`alert alert-${"error"===j.type?"danger":"success"} alert-dismissible fade show`,role:"alert",children:[j.text,l.jsx("button",{type:"button",className:"btn-close",onClick:()=>N({type:"",text:""})})]}),l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-md-6",children:l.jsxs("div",{className:"card border-0 bg-light",children:[l.jsx("div",{className:"card-header bg-info text-white",children:l.jsxs("h5",{className:"mb-0",children:[l.jsx("i",{className:"fas fa-info-circle me-2"}),"Informasi Profil"]})}),l.jsxs("div",{className:"card-body",children:[l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{className:"form-label fw-bold",children:"Nama Lengkap:"}),l.jsx("p",{className:"form-control-plaintext",children:(null==c?void 0:c.name)||"-"})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{className:"form-label fw-bold",children:"Email:"}),l.jsx("p",{className:"form-control-plaintext",children:(null==c?void 0:c.email)||"-"})]})]})]})}),l.jsx("div",{className:"col-md-6",children:l.jsxs("div",{className:"card border-0 bg-light",children:[l.jsx("div",{className:"card-header bg-success text-white",children:l.jsxs("h5",{className:"mb-0",children:[l.jsx("i",{className:"fas fa-graduation-cap me-2"}),"Informasi Siswa"]})}),l.jsxs("div",{className:"card-body",children:[l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{className:"form-label fw-bold",children:"Nama Siswa:"}),l.jsx("p",{className:"form-control-plaintext",children:(null==c?void 0:c.student)||"-"})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{className:"form-label fw-bold",children:"NIS:"}),l.jsx("p",{className:"form-control-plaintext",children:(null==c?void 0:c.nis)||"-"})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{className:"form-label fw-bold",children:"Kelas:"}),l.jsx("p",{className:"form-control-plaintext",children:(null==c?void 0:c.class)||"-"})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{className:"form-label fw-bold",children:"Jurusan:"}),l.jsx("p",{className:"form-control-plaintext",children:(null==c?void 0:c.major)||"-"})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{className:"form-label fw-bold",children:"Homebase:"}),l.jsx("p",{className:"form-control-plaintext",children:(null==c?void 0:c.homebase)||"-"})]})]})]})})]}),l.jsx("div",{className:"row mt-4",children:l.jsx("div",{className:"col-12",children:l.jsxs("div",{className:"card border-0",children:[l.jsx("div",{className:"card-header bg-warning text-dark",children:l.jsxs("h5",{className:"mb-0",children:[l.jsx("i",{className:"fas fa-edit me-2"}),"Update Profil"]})}),l.jsx("div",{className:"card-body",children:l.jsxs("form",{onSubmit:async s=>{var a;s.preventDefault(),h(!0),N({type:"",text:""});try{if(o.newPassword&&o.newPassword!==o.confirmPassword)return N({type:"error",text:"Konfirmasi password tidak cocok"}),void h(!1);const s={name:o.name,email:o.email};o.newPassword&&(s.oldPassword=o.oldPassword,s.newPassword=o.newPassword);const a=await n(s).unwrap();N({type:"success",text:a.message}),m(r({name:o.name,email:o.email})),t((s=>({...s,oldPassword:"",newPassword:"",confirmPassword:""})))}catch(e){N({type:"error",text:(null==(a=e.data)?void 0:a.message)||"Terjadi kesalahan saat memperbarui profil"})}finally{h(!1)}},children:[l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-md-4",children:l.jsxs("div",{className:"mb-3",children:[l.jsxs("label",{htmlFor:"name",className:"form-label fw-bold",children:["Nama Lengkap"," ",l.jsx("span",{className:"text-danger",children:"*"})]}),l.jsx("input",{type:"text",className:"form-control",id:"name",name:"name",value:o.name,onChange:b,required:!0})]})}),l.jsx("div",{className:"col-md-4",children:l.jsxs("div",{className:"mb-3",children:[l.jsxs("label",{htmlFor:"email",className:"form-label fw-bold",children:["Email ",l.jsx("span",{className:"text-danger",children:"*"})]}),l.jsx("input",{type:"email",className:"form-control",id:"email",name:"email",value:o.email,onChange:b,required:!0})]})})]}),l.jsx("hr",{className:"my-4"}),l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-12",children:l.jsxs("h6",{className:"text-muted mb-3",children:[l.jsx("i",{className:"fas fa-lock me-2"}),"Ubah Password (Opsional)"]})}),l.jsx("div",{className:"col-md-4",children:l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{htmlFor:"oldPassword",className:"form-label",children:"Password Lama"}),l.jsx("input",{type:"password",className:"form-control",id:"oldPassword",name:"oldPassword",value:o.oldPassword,onChange:b})]})}),l.jsx("div",{className:"col-md-4",children:l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{htmlFor:"newPassword",className:"form-label",children:"Password Baru"}),l.jsx("input",{type:"password",className:"form-control",id:"newPassword",name:"newPassword",value:o.newPassword,onChange:b})]})}),l.jsx("div",{className:"col-md-4",children:l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{htmlFor:"confirmPassword",className:"form-label",children:"Konfirmasi Password Baru"}),l.jsx("input",{type:"password",className:"form-control",id:"confirmPassword",name:"confirmPassword",value:o.confirmPassword,onChange:b})]})})]}),l.jsx("div",{className:"d-flex justify-content-end",children:l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:x,children:x?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Menyimpan..."]}):l.jsxs(l.Fragment,{children:[l.jsx("i",{className:"fas fa-save me-2"}),"Simpan Perubahan"]})})})]})})]})})})]})]})})})})})};export{c as default};
//# sourceMappingURL=ParentProfile-BAbvyfW7.js.map
