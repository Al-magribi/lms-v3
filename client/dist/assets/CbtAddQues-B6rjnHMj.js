import{aC as e,aD as a,j as s,d as i}from"./index-CNbAajcm.js";import{u as o,e as c,b as n}from"./vendor-BYWiIb5-.js";import{L as l}from"./Layout-_SAc74nU.js";import{E as t}from"./Editor-ZJ1Q2U_u.js";import"./index-C-OX0RB-.js";import"./index-DLmIb9aI.js";import"./index-Bx5UHif0.js";const r=()=>{const r=o(),d=c(),{subject:h,name:u,bankid:m,questionid:p}=d,[v,j]=n.useState(1),[x,g]=n.useState(""),[b,f]=n.useState(""),[k,y]=n.useState(""),[C,E]=n.useState({choiceA:"",choiceB:"",choiceC:"",choiceD:"",choiceE:""}),{data:N}=e(p,{skip:!p}),[w,{isSuccess:q,isLoading:S,isError:A,reset:D}]=a(),B=e=>a=>{E((s=>({...s,[e]:a})))};return n.useEffect((()=>{q&&(j(1),g(""),f(""),y(""),E({choiceA:"",choiceB:"",choiceC:"",choiceD:"",choiceE:""}),D(),(()=>{const e=u.replace(/[\s/]/g,"-"),a=h.replace(/[\s/]/g,"-");r(`/admin-cbt-bank/${a}/${e}/${m}`)})()),A&&D()}),[q,A]),n.useEffect((()=>{N&&(j(null==N?void 0:N.qtype),g(null==N?void 0:N.qkey),f(null==N?void 0:N.poin),y(null==N?void 0:N.question),E({choiceA:null==N?void 0:N.a,choiceB:null==N?void 0:N.b,choiceC:null==N?void 0:N.c,choiceD:null==N?void 0:N.d,choiceE:null==N?void 0:N.e}))}),[N]),s.jsx(l,{title:"Tambah Soal",levels:["admin","teacher"],children:s.jsxs("div",{className:"row g-2",children:[s.jsx("div",{className:"col-lg-3 col-12",children:s.jsxs("select",{name:"type",id:"type",className:"form-select shadow",required:!0,value:v,onChange:e=>j(e.target.value),children:[s.jsx("option",{value:1,children:"PG"}),s.jsx("option",{value:2,children:"Essay"})]})}),s.jsx("div",{className:"col-lg-3 col-12",children:s.jsxs("select",{name:"key",id:"key",className:"form-select shadow",required:!0,value:x,onChange:e=>g(e.target.value),children:[s.jsx("option",{value:"",hidden:!0,children:"Kunci Jawaban"}),s.jsx("option",{value:"A",children:"A"}),s.jsx("option",{value:"B",children:"B"}),s.jsx("option",{value:"C",children:"C"}),s.jsx("option",{value:"D",children:"D"}),s.jsx("option",{value:"E",children:"E"})]})}),s.jsx("div",{className:"col-lg-3 col-12",children:s.jsx("input",{type:"number",name:"poin",id:"poin",className:"form-control shadow",placeholder:"Nilai",value:b||"",onChange:e=>f(e.target.value)})}),s.jsx("div",{className:"col-lg-3 col-12 d-flex align-items-center justify-content-start",children:s.jsx("button",{className:"btn btn-sm btn-success shadow",disabled:S,onClick:()=>{if(!k)return void i.error("Pertanyaan tidak boleh kosong");if(1==v&&!x)return void i.error("Kunci jawaban tidak boleh kosong");const e={id:p||"",bank:m,qtype:parseInt(v),qkey:x,poin:parseInt(b),question:k,a:C.choiceA,b:C.choiceB,c:C.choiceC,d:C.choiceD,e:C.choiceE};i.promise(w(e).unwrap().then((e=>e.message)),{loading:"Memuat data ...",success:e=>e,error:e=>e.data.message})},children:"Simpan"})}),s.jsx("div",{className:"col-12",children:s.jsx(t,{placeholder:"Ketikan pertanyaan di sini ...",value:k,onChange:e=>y(e),classname:"shadow",height:300})}),1==v&&Object.keys(C).map(((e,a)=>s.jsx("div",{className:"col-12",children:s.jsx(t,{placeholder:`Jawaban ${e.charAt(e.length-1)}`,value:C[e],onChange:B(e),classname:"shadow",height:300})},a)))]})})};export{r as default};
//# sourceMappingURL=CbtAddQues-B6rjnHMj.js.map
