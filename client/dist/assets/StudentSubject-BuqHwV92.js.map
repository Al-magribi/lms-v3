{"version":3,"file":"StudentSubject-BuqHwV92.js","sources":["../../src/page/lms/list/ListSubjects.jsx","../../src/page/student/subjects/StudentSubject.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useGetSubjectsOnClassQuery } from \"../../../controller/api/lms/ApiLms\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst ListSubjects = () => {\r\n  const navigate = useNavigate();\r\n  const { user } = useSelector((state) => state.auth);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [debouncedSearchTerm, setDebouncedSearchTerm] = useState(\"\");\r\n\r\n  // Use debounced search term for API calls\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setDebouncedSearchTerm(searchTerm);\r\n    }, 500); // 500ms delay\r\n\r\n    return () => clearTimeout(timer);\r\n  }, [searchTerm]);\r\n\r\n  const { data, isLoading, isError, error } = useGetSubjectsOnClassQuery(\r\n    { classid: user?.class_id, search: debouncedSearchTerm },\r\n    { skip: !user?.class_id }\r\n  );\r\n\r\n  const goToLink = (name, id) => {\r\n    const formattedName = name.replace(/\\s+/g, \"-\");\r\n    navigate(`/pelajaran/${formattedName}/${id}`);\r\n  };\r\n\r\n  const container = {\r\n    hidden: { opacity: 0 },\r\n    show: {\r\n      opacity: 1,\r\n      transition: {\r\n        staggerChildren: 0.1,\r\n      },\r\n    },\r\n  };\r\n\r\n  const item = {\r\n    hidden: { y: 20, opacity: 0 },\r\n    show: { y: 0, opacity: 1 },\r\n  };\r\n\r\n  return (\r\n    <div className='container-fluid'>\r\n      <div className='row mb-4'>\r\n        <div className='col-lg-4 col-md-6'>\r\n          <div className='input-group'>\r\n            <span className='input-group-text bg-white border-end-0'>\r\n              <i className='bi bi-search text-primary'></i>\r\n            </span>\r\n            <input\r\n              type='text'\r\n              className='form-control border-start-0 ps-0'\r\n              placeholder='Cari mata pelajaran...'\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {isLoading ? (\r\n        <div className='text-center py-5'>\r\n          <div className='spinner-border text-primary' role='status'>\r\n            <span className='visually-hidden'>Loading...</span>\r\n          </div>\r\n          <p className='mt-3 text-muted'>Memuat data mata pelajaran...</p>\r\n        </div>\r\n      ) : data?.length > 0 ? (\r\n        <motion.div\r\n          className='row g-4'\r\n          variants={container}\r\n          initial='hidden'\r\n          animate='show'>\r\n          {data.map((item) => (\r\n            <motion.div\r\n              key={item.id}\r\n              className='col-xl-3 col-lg-4 col-md-6'\r\n              variants={item}>\r\n              <div\r\n                className='card h-100 shadow-sm border-0 hover-card'\r\n                onClick={() => goToLink(item.name, item.id)}>\r\n                <div className='position-relative'>\r\n                  <img\r\n                    src={\r\n                      item.cover\r\n                        ? `${window.location.origin}${item.cover}`\r\n                        : `/logo.png`\r\n                    }\r\n                    alt={item.name}\r\n                    className='card-img-top'\r\n                    style={{\r\n                      height: \"400px\",\r\n                      objectFit: \"cover\",\r\n                    }}\r\n                  />\r\n                </div>\r\n                <div className='card-body'>\r\n                  <div className='d-flex align-items-center text-muted mb-2'>\r\n                    <i className='bi bi-book me-2'></i>\r\n                    <span>Mata Pelajaran {item.name}</span>\r\n                  </div>\r\n                  <button\r\n                    className='btn btn-outline-primary btn-sm rounded-pill w-100'\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      goToLink(item.name, item.id);\r\n                    }}>\r\n                    <i className='bi bi-arrow-right-circle me-2'></i>\r\n                    Masuk Pelajaran\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </motion.div>\r\n          ))}\r\n        </motion.div>\r\n      ) : (\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          className='row justify-content-center'>\r\n          <div className='col-md-6 text-center'>\r\n            <div className='py-5'>\r\n              <i className='bi bi-journal-x display-1 text-muted mb-4'></i>\r\n              <h4 className='text-muted mb-3'>\r\n                {searchTerm\r\n                  ? \"Mata Pelajaran Tidak Ditemukan\"\r\n                  : \"Data Belum Tersedia\"}\r\n              </h4>\r\n              <p className='text-muted mb-0'>\r\n                {searchTerm\r\n                  ? \"Maaf, tidak ada mata pelajaran yang sesuai dengan pencarian Anda\"\r\n                  : \"Belum ada mata pelajaran yang tersedia saat ini\"}\r\n              </p>\r\n              {isError && (\r\n                <div className='alert alert-danger mt-3' role='alert'>\r\n                  <small>{error?.message}</small>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ListSubjects;\r\n","import React from \"react\";\r\nimport Layout from \"../../../components/layout/Layout\";\r\nimport ListSubjects from \"../../lms/list/ListSubjects\";\r\n\r\nconst StudentSubject = () => {\r\n  return (\r\n    <Layout title={\"Daftar Pelajaran\"} levels={[\"student\"]}>\r\n      <ListSubjects />\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default StudentSubject;\r\n"],"names":["ListSubjects","navigate","useNavigate","user","useSelector","state","auth","searchTerm","setSearchTerm","useState","debouncedSearchTerm","setDebouncedSearchTerm","useEffect","timer","setTimeout","clearTimeout","data","isLoading","isError","error","useGetSubjectsOnClassQuery","classid","class_id","search","skip","goToLink","name","id","formattedName","replace","jsxs","className","children","jsx","jsxRuntimeExports","type","placeholder","value","onChange","e","target","role","length","motion","div","variants","hidden","opacity","show","transition","staggerChildren","initial","animate","map","item","onClick","src","cover","window","location","origin","alt","style","height","objectFit","stopPropagation","y","message","StudentSubject","Layout","title","levels"],"mappings":"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"}