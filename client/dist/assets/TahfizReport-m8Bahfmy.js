import{j as e,bR as s,bS as a,e as l,bq as i,bG as t}from"./index-Crz-ZxvS.js";import{b as r,g as n,u as c}from"./vendor-CnnDPxwB.js";import{L as d}from"./Layout-8dPvkf5v.js";import{T as m}from"./Table-DmgUSnWx.js";import{P as o}from"./index-CyJYIQ-o.js";import{C as h,b as x,L as j,B as b,c as u,p,a as N,d as g}from"./index-BQoB5aE1.js";import{L as v,M as f,e as y,N as w,O as k}from"./index-B8CuzAwO.js";import"./index-g0LoU_Ie.js";import"./index-BpPDjKa5.js";import"./index-Bx5UHif0.js";const L=({detail:s,setDetail:a,id:l})=>{var i,t;const n=r.useRef(null),c=()=>{a("")};return e.jsx("div",{ref:n,className:"modal fade",id:`modal-${l}`,"data-bs-backdrop":"static","data-bs-keyboard":"false",tabIndex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog modal-lg modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-primary text-white",children:[e.jsx("h1",{className:"modal-title fs-5",id:"staticBackdropLabel",children:null==s?void 0:s.name}),e.jsx("button",{type:"button",className:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close",onClick:c})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row g-2 mb-3",children:[e.jsx("div",{className:"col-lg-3 col-6",children:e.jsx("div",{className:"card bg-light",children:e.jsxs("div",{className:"card-body p-2",children:[e.jsx("small",{className:"text-muted",children:"Jenis Penilaian"}),e.jsx("p",{className:"mb-0",children:null==s?void 0:s.type})]})})}),e.jsx("div",{className:"col-lg-3 col-6",children:e.jsx("div",{className:"card bg-light",children:e.jsxs("div",{className:"card-body p-2",children:[e.jsx("small",{className:"text-muted",children:"Penguji"}),e.jsx("p",{className:"mb-0",children:null==s?void 0:s.examiner})]})})}),e.jsx("div",{className:"col-lg-3 col-6",children:e.jsx("div",{className:"card bg-light",children:e.jsxs("div",{className:"card-body p-2",children:[e.jsx("small",{className:"text-muted",children:"Nilai"}),e.jsx("p",{className:"mb-0",children:null==s?void 0:s.totalPoints})]})})}),e.jsx("div",{className:"col-lg-3 col-6",children:e.jsx("div",{className:"card bg-light",children:e.jsxs("div",{className:"card-body p-2",children:[e.jsx("small",{className:"text-muted",children:"Tanggal"}),e.jsx("p",{className:"mb-0",children:new Date(null==s?void 0:s.date).toLocaleDateString()})]})})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"m-0 h6",children:"Detail Penilaian"}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-hover table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center",children:"Kategori"}),e.jsx("th",{className:"text-center",children:"Nilai"}),e.jsx("th",{className:"text-center",children:"Indikator"})]})}),e.jsx("tbody",{children:null==(i=null==s?void 0:s.scores)?void 0:i.map(((s,a)=>{var l;return e.jsxs("tr",{children:[e.jsx("td",{className:"align-middle",children:s.category}),e.jsx("td",{className:"text-center align-middle",children:s.poin}),e.jsx("td",{children:(null==(l=s.indicators)?void 0:l.length)>0?e.jsx("table",{className:"table table-sm mb-0",children:e.jsx("tbody",{children:s.indicators.map(((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:s.indicator}),e.jsx("td",{className:"text-center",children:s.poin||"-"})]},a)))})}):e.jsx("div",{className:"text-center",children:"-"})})]},a)}))})]})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"m-0 h6",children:"Daftar Surah"}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-hover table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Surah"}),e.jsx("th",{children:"Ayat"}),e.jsx("th",{children:"Baris"})]})}),e.jsx("tbody",{children:null==(t=null==s?void 0:s.surahs)?void 0:t.map(((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:s.name}),e.jsx("td",{children:`${s.from_ayat} - ${s.to_ayat}`}),e.jsx("td",{children:`${s.from_line} - ${s.to_line}`})]},a)))})]})})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:c,children:"Tutup"})})]})})})};var S,C,T,D={};const $=n(function(){if(T)return C;T=1;var e=function(){if(S)return D;S=1,D.match=function(e,s){return t(e).some((function(e){var a=e.inverse,l="all"===e.type||s.type===e.type;if(l&&a||!l&&!a)return!1;var i=e.expressions.every((function(e){var a=e.feature,l=e.modifier,i=e.value,t=s[a];if(!t)return!1;switch(a){case"orientation":case"scan":return t.toLowerCase()===i.toLowerCase();case"width":case"height":case"device-width":case"device-height":i=c(i),t=c(t);break;case"resolution":i=n(i),t=n(t);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":i=r(i),t=r(t);break;case"grid":case"color":case"color-index":case"monochrome":i=parseInt(i,10)||1,t=parseInt(t,10)||0}switch(l){case"min":return t>=i;case"max":return t<=i;default:return t===i}}));return i&&!a||!i&&a}))},D.parse=t;var e=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,s=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,a=/^(?:(min|max)-)?(.+)/,l=/(em|rem|px|cm|mm|in|pt|pc)?$/,i=/(dpi|dpcm|dppx)?$/;function t(l){return l.split(",").map((function(l){var i=(l=l.trim()).match(e),t=i[1],r=i[2],n=i[3]||"",c={};return c.inverse=!!t&&"not"===t.toLowerCase(),c.type=r?r.toLowerCase():"all",n=n.match(/\([^\)]+\)/g)||[],c.expressions=n.map((function(e){var l=e.match(s),i=l[1].toLowerCase().match(a);return{modifier:i[1],feature:i[2],value:l[2]}})),c}))}function r(e){var s,a=Number(e);return a||(a=(s=e.match(/^(\d+)\s*\/\s*(\d+)$/))[1]/s[2]),a}function n(e){var s=parseFloat(e);switch(String(e).match(i)[1]){case"dpcm":return s/2.54;case"dppx":return 96*s;default:return s}}function c(e){var s=parseFloat(e);switch(String(e).match(l)[1]){case"em":case"rem":return 16*s;case"cm":return 96*s/2.54;case"mm":return 96*s/2.54/10;case"in":return 96*s;case"pt":return 72*s;case"pc":return 72*s/12;default:return s}}return D}().match,s="undefined"!=typeof window?window.matchMedia:null;function a(a,l,i){var t,r=this;function n(e){r.matches=e.matches,r.media=e.media}s&&!i&&(t=s.call(window,a)),t?(this.matches=t.matches,this.media=t.media,t.addListener(n)):(this.matches=e(a,l),this.media=a),this.addListener=function(e){t&&t.addListener(e)},this.removeListener=function(e){t&&t.removeListener(e)},this.dispose=function(){t&&t.removeListener(n)}}return C=function(e,s,l){return new a(e,s,l)}}());var _=/[A-Z]/g,P=/^ms-/,B={};function M(e){return"-"+e.toLowerCase()}function z(e){if(B.hasOwnProperty(e))return B[e];var s=e.replace(_,M);return B[e]=P.test(s)?"-"+s:s}const I=o.oneOfType([o.string,o.number]),R={all:o.bool,grid:o.bool,aural:o.bool,braille:o.bool,handheld:o.bool,print:o.bool,projection:o.bool,screen:o.bool,tty:o.bool,tv:o.bool,embossed:o.bool},A={orientation:o.oneOf(["portrait","landscape"]),scan:o.oneOf(["progressive","interlace"]),aspectRatio:o.string,deviceAspectRatio:o.string,height:I,deviceHeight:I,width:I,deviceWidth:I,color:o.bool,colorIndex:o.bool,monochrome:o.bool,resolution:I,type:Object.keys(R)},{type:H,...O}=A,E={minAspectRatio:o.string,maxAspectRatio:o.string,minDeviceAspectRatio:o.string,maxDeviceAspectRatio:o.string,minHeight:I,maxHeight:I,minDeviceHeight:I,maxDeviceHeight:I,minWidth:I,maxWidth:I,minDeviceWidth:I,maxDeviceWidth:I,minColor:o.number,maxColor:o.number,minColorIndex:o.number,maxColorIndex:o.number,minMonochrome:o.number,maxMonochrome:o.number,minResolution:I,maxResolution:I,...O};var J={all:{...R,...E},types:R,matchers:A,features:E};const K=e=>{const s=[];return Object.keys(J.all).forEach((a=>{const l=e[a];null!=l&&s.push(((e,s)=>{const a=z(e);return"number"==typeof s&&(s=`${s}px`),!0===s?a:!1===s?`not ${a}`:`(${a}: ${s})`})(a,l))})),s.join(" and ")},W=r.createContext(void 0),q=e=>{if(!e)return;return Object.keys(e).reduce(((s,a)=>(s[z(a)]=e[a],s)),{})},F=()=>{const e=r.useRef(!1);return r.useEffect((()=>{e.current=!0}),[]),e.current},G=e=>{const s=r.useContext(W),a=()=>q(e)||q(s),[l,i]=r.useState(a);return r.useEffect((()=>{const e=a();(function(e,s){if(e===s)return!0;if(!e||!s)return!1;const a=Object.keys(e),l=Object.keys(s),i=a.length;if(l.length!==i)return!1;for(let t=0;t<i;t++){const l=a[t];if(e[l]!==s[l]||!Object.prototype.hasOwnProperty.call(s,l))return!1}return!0})(l,e)||i(e)}),[e,s]),l},Z=e=>{const s=()=>(e=>e.query||K(e))(e),[a,l]=r.useState(s);return r.useEffect((()=>{const e=s();a!==e&&l(e)}),[e]),a},Q=(e,s,a)=>{const l=G(s),i=Z(e);if(!i)throw new Error("Invalid or missing MediaQuery!");const t=((e,s)=>{const a=()=>$(e,s||{},!!s),[l,i]=r.useState(a),t=F();return r.useEffect((()=>{if(t){const e=a();return i(e),()=>{e&&e.dispose()}}}),[e,s]),l})(i,l),n=(e=>{const[s,a]=r.useState(e.matches);return r.useEffect((()=>{const s=e=>{a(e.matches)};return e.addListener(s),a(e.matches),()=>{e.removeListener(s)}}),[e]),s})(t);return F(),r.useEffect((()=>{}),[n]),r.useEffect((()=>()=>{t&&t.dispose()}),[]),n},U=({type:i})=>{const[t,n]=r.useState(1),[c,d]=r.useState(10),[o,h]=r.useState(""),[x,j]=r.useState(""),[b,u]=r.useState(""),{data:p={},isLoading:N}=s({page:t,limit:c,search:o,type:i}),{report:g=[],totalData:v,totalPages:f}=p,[y,{isLoading:w}]=a(),k=Q({maxWidth:768}),S=(e,s)=>{j(e),u(s)},C=(e,s,a)=>{window.confirm("Apakah anda yakin ingin menghapus data ini?")&&l.promise(y({userid:e,typeId:s,createdat:a}).unwrap().then((e=>e.message)),{loading:"Menghapus data...",success:e=>e,error:e=>e.data.message})};return e.jsx("div",{className:"container-fluid",children:k?e.jsx("div",{className:"px-2",children:N?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):0===(null==g?void 0:g.length)?e.jsxs("div",{className:"text-center py-4 text-muted",children:[e.jsx("i",{className:"bi bi-inbox-fill fs-1"}),e.jsx("p",{className:"mt-2",children:"Belum ada data"})]}):null==g?void 0:g.map((s=>e.jsx("div",{className:"card mb-3 shadow-sm animate__animated animate__fadeIn",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsxs("h6",{className:"card-subtitle text-muted",children:[e.jsx("i",{className:"bi bi-calendar-event me-1"}),new Date(s.date).toLocaleDateString()]}),e.jsxs("span",{className:"badge bg-primary rounded-pill px-3",children:[e.jsx("i",{className:"bi bi-star-fill me-1"}),s.totalPoints]})]}),e.jsxs("h5",{className:"card-title d-flex align-items-center",children:[e.jsx("i",{className:"bi bi-person-circle me-2"}),s.name,e.jsxs("small",{className:"text-muted ms-2",children:["(",s.nis,")"]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("i",{className:"bi bi-mortarboard-fill text-secondary me-2"}),e.jsx("span",{children:s.class})]}),e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("i",{className:"bi bi-journal-text text-secondary me-2"}),e.jsx("span",{children:s.type})]}),e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("i",{className:"bi bi-book-fill text-secondary me-2"}),e.jsx("span",{children:s.examiner})]})]}),e.jsxs("div",{className:"d-grid gap-2 d-flex mt-3",children:[e.jsxs("button",{className:"btn btn-primary flex-grow-1 d-flex align-items-center justify-content-center gap-2",onClick:()=>S(s,s.id),children:[e.jsx("i",{className:"bi bi-eye-fill"}),e.jsx("span",{children:"Detail"})]}),e.jsxs("button",{className:"btn btn-danger flex-grow-1 d-flex align-items-center justify-content-center gap-2",onClick:()=>C(s.userid,s.type_id,new Date(s.date).toLocaleDateString()),children:[e.jsx("i",{className:"bi bi-trash"}),e.jsx("span",{children:"Hapus"})]})]})]})},s.id)))}):e.jsxs(m,{isLoading:N,totalData:v,totalPages:f,page:t,setPage:n,limit:c,setLimit:d,setSearch:h,children:[e.jsxs("table",{className:"table table-striped table-hover table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"align-middle text-center",children:"No"}),e.jsx("th",{className:"align-middle text-center",children:"Tanggal"}),e.jsx("th",{className:"align-middle text-center",children:"NIS"}),e.jsx("th",{className:"align-middle text-center",children:"Nama Siswa"}),e.jsx("th",{className:"align-middle text-center",children:"Tingkat"}),e.jsx("th",{className:"align-middle text-center",children:"Kelas"}),e.jsx("th",{className:"align-middle text-center",children:"Jenis Penilaian"}),e.jsx("th",{className:"align-middle text-center",children:"Nilai"}),e.jsx("th",{className:"align-middle text-center",children:"Penguji"}),e.jsx("th",{className:"align-middle text-center",children:"Aksi"})]})}),e.jsx("tbody",{children:null==g?void 0:g.map(((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center align-middle",children:a+1}),e.jsx("td",{className:"text-center align-middle",children:new Date(s.date).toLocaleDateString()}),e.jsx("td",{className:"text-center align-middle",children:s.nis}),e.jsx("td",{className:"text-start align-middle",children:s.name}),e.jsx("td",{className:"text-center align-middle",children:s.grade}),e.jsx("td",{className:"text-center align-middle",children:s.class}),e.jsx("td",{className:"text-center align-middle",children:s.type}),e.jsx("td",{className:"text-center align-middle",children:s.totalPoints}),e.jsx("td",{className:"text-center align-middle",children:s.examiner}),e.jsx("td",{className:"align-middle",children:e.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>S(s,s.id),title:"Lihat Detail",children:e.jsx("i",{className:"bi bi-eye-fill"})}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>C(s.userid,s.type_id,new Date(s.date).toLocaleDateString()),children:e.jsx("i",{className:"bi bi-trash"})})]})})]},a)))})]}),null==g?void 0:g.map(((s,a)=>e.jsx(L,{detail:s.id===b?x:null,setDetail:j,id:s.id},a)))]})})},V=({students:s,gradename:a})=>{const l=c(),[i,t]=r.useState(null),[n,d]=r.useState("progress"),m=e=>e>=100?"bg-success":e>=75?"bg-info":e>=50?"bg-warning":"bg-danger";return e.jsx("div",{className:"modal fade",id:"detail-student","data-bs-backdrop":"static","data-bs-keyboard":"false",tabIndex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog modal-lg modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-primary text-white",children:[e.jsxs("h1",{className:"modal-title fs-5",id:"staticBackdropLabel",children:[e.jsx(v,{className:"me-2"}),"Tingkat - ",a]}),e.jsx("button",{type:"button",className:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title",children:[e.jsx(f,{className:"me-2"}),"Informasi Kelas"]}),e.jsxs("p",{className:"card-text",children:["Total Siswa: ",s.length," | Tingkat: ",a]})]})})})}),e.jsx("div",{className:"row g-3",children:s.map(((s,a)=>e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card "+(i===a?"border-primary":""),style:{cursor:"pointer"},onClick:()=>t(a),children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"card-title mb-1",children:s.name}),e.jsxs("p",{className:"card-subtitle text-muted",children:["NIS: ",s.nis," | Kelas: ",s.class]})]}),e.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>((e,s)=>{const a=document.querySelector('[data-bs-dismiss="modal"]');a&&a.click();const i=s.replace(/\s+/g,"-");l(`/tahfiz-laporan-siswa/${e}/${i}`)})(s.userid,s.name),children:[e.jsx(y,{className:"me-1"}),"Detail"]})]}),e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"card bg-light",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h6",{className:"card-title",children:[e.jsx(w,{className:"me-2"}),"Progress Target"]}),e.jsx("div",{className:"d-flex flex-column gap-2",children:s.progress.map(((s,a)=>e.jsxs("div",{className:"progress-item",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[e.jsxs("span",{className:"badge bg-secondary",children:["Juz ",s.juz]}),e.jsxs("span",{className:"badge bg-primary",children:[s.persentase,"%"]})]}),e.jsx("div",{className:"progress",style:{height:"8px"},children:e.jsx("div",{className:`progress-bar ${m(s.persentase)}`,role:"progressbar",style:{width:`${s.persentase}%`},"aria-valuenow":s.persentase,"aria-valuemin":"0","aria-valuemax":"100"})})]},a)))})]})})}),e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"card bg-light",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h6",{className:"card-title",children:[e.jsx(k,{className:"me-2"}),"Progress Melebihi Target"]}),s.exceed&&s.exceed.length>0?e.jsx("div",{className:"d-flex flex-column gap-2",children:s.exceed.map(((s,a)=>e.jsxs("div",{className:"progress-item",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[e.jsxs("span",{className:"badge bg-success",children:["Juz ",s.juz]}),e.jsxs("span",{className:"badge bg-info",children:[s.persentase,"%"]})]}),e.jsx("div",{className:"progress",style:{height:"8px"},children:e.jsx("div",{className:`progress-bar ${m(s.persentase)}`,role:"progressbar",style:{width:`${s.persentase}%`},"aria-valuenow":s.persentase,"aria-valuemin":"0","aria-valuemax":"100"})}),e.jsxs("div",{className:"d-flex justify-content-between mt-1",children:[e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-book-open me-1"}),"Ayat: ",s.verses.completed,"/",s.verses.target]}),e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-align-left me-1"}),"Baris: ",s.lines.completed,"/",s.lines.target]})]})]},a)))}):e.jsx("div",{className:"alert alert-info py-2 mb-0",children:e.jsxs("small",{children:[e.jsx("i",{className:"fas fa-info-circle me-1"}),"Belum ada hafalan melebihi target"]})})]})})})]})]})})},a)))}),null!==i&&e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("ul",{className:"nav nav-tabs card-header-tabs",children:[e.jsx("li",{className:"nav-item",children:e.jsx("button",{className:"nav-link "+("progress"===n?"active":""),onClick:()=>d("progress"),children:"Progress"})}),e.jsx("li",{className:"nav-item",children:e.jsx("button",{className:"nav-link "+("statistics"===n?"active":""),onClick:()=>d("statistics"),children:"Statistik"})})]})}),e.jsxs("div",{className:"card-body",children:["progress"===n&&e.jsxs("div",{className:"student-detail-content",children:[e.jsx("h5",{className:"mb-3",children:"Detail Progress Siswa"}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("h6",{children:"Target Hafalan"}),s[i].progress.map(((s,a)=>e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("span",{children:["Juz ",s.juz]}),e.jsxs("span",{className:"badge bg-primary",children:[s.persentase,"%"]})]}),e.jsx("div",{className:"progress mt-1",style:{height:"10px"},children:e.jsx("div",{className:`progress-bar ${m(s.persentase)}`,style:{width:`${s.persentase}%`}})})]},a)))]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("h6",{children:"Hafalan Melebihi Target"}),s[i].exceed&&s[i].exceed.length>0?s[i].exceed.map(((s,a)=>e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("span",{children:["Juz ",s.juz]}),e.jsxs("span",{className:"badge bg-success",children:[s.persentase,"%"]})]}),e.jsx("div",{className:"progress mt-1",style:{height:"10px"},children:e.jsx("div",{className:`progress-bar ${m(s.persentase)}`,style:{width:`${s.persentase}%`}})}),e.jsx("div",{className:"mt-2",children:e.jsxs("small",{className:"text-muted",children:["Ayat: ",s.verses.completed,"/",s.verses.target," | Baris:"," ",s.lines.completed,"/",s.lines.target]})})]},a))):e.jsx("div",{className:"alert alert-info",children:"Belum ada hafalan melebihi target"})]})]})]}),"statistics"===n&&e.jsxs("div",{className:"student-detail-content",children:[e.jsx("h5",{className:"mb-3",children:"Statistik Hafalan"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"card bg-light",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Rata-rata Progress"}),e.jsxs("p",{className:"card-text",children:[(s[i].progress.reduce(((e,s)=>e+s.persentase),0)/s[i].progress.length).toFixed(1),"%"]})]})})}),e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"card bg-light",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title",children:"Juz Terbanyak"}),e.jsxs("p",{className:"card-text",children:["Juz"," ",s[i].progress.reduce(((e,s)=>s.persentase>e.persentase?s:e),s[i].progress[0]).juz]})]})})})]})]})]})]})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Tutup"}),e.jsxs("button",{type:"button",className:"btn btn-primary",children:[e.jsx("i",{className:"fas fa-download me-1"}),"Export Data"]})]})]})})})};h.register(x,j,b,u,p,N);const X=()=>{const{data:s,isLoading:a}=i(),[l,t]=r.useState({students:[],gradeName:"",className:""});if(a||!s)return e.jsx("div",{children:"Loading..."});const n={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Capaian Hafalan Per Tingkat"}},scales:{y:{beginAtZero:!0,max:100}}};return e.jsxs("div",{className:"container-fluid p-0",children:[s.map(((s,a)=>e.jsxs("div",{className:"card mb-4",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h4",{children:s.periode}),e.jsx("small",{className:"text-muted",children:s.homebase})]}),e.jsxs("div",{className:"card-body",children:[s.grade.map(((s,a)=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("h5",{children:s.name}),e.jsxs("div",{className:"badge bg-primary",children:[s.achievement,"% Ketuntasan Total"]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("div",{className:"card mb-3",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{children:"Target Hafalan"}),s.target.map(((s,a)=>e.jsx("div",{className:"mb-2",children:e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{className:"badge bg-success",children:s.juz}),e.jsxs("small",{className:"badge bg-danger",children:[s.lines," Baris"]})]})},a)))]})}),e.jsx("div",{className:"card mb-3",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{children:"Statistik Grade"}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"d-flex justify-content-between mb-1",children:[e.jsx("span",{children:"Ketuntasan Target"}),e.jsxs("span",{children:[s.achievement,"%"]})]}),e.jsx("div",{className:"progress mb-3",children:e.jsxs("div",{className:"progress-bar "+(s.achievement>=75?"bg-success":s.achievement>=50?"bg-warning":"bg-danger"),role:"progressbar",style:{width:`${s.achievement}%`},"aria-valuenow":s.achievement,"aria-valuemin":"0","aria-valuemax":"100",children:[s.achievement,"%"]})}),e.jsxs("div",{className:"d-flex justify-content-between mb-1",children:[e.jsx("span",{children:"Melebihi Target"}),e.jsxs("span",{children:[s.exceed_achievement,"%"]})]}),e.jsx("div",{className:"progress",children:e.jsxs("div",{className:"progress-bar "+(s.exceed_achievement>=75?"bg-success":s.exceed_achievement>=50?"bg-warning":"bg-danger"),role:"progressbar",style:{width:`${s.exceed_achievement}%`},"aria-valuenow":s.exceed_achievement,"aria-valuemin":"0","aria-valuemax":"100",children:[s.exceed_achievement,"%"]})})]}),e.jsxs("div",{className:"row text-center g-2",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"border rounded p-2",children:[e.jsx("div",{className:"h5 mb-0",children:s.completed}),e.jsx("small",{className:"text-success",children:"Tuntas"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"border rounded p-2",children:[e.jsx("div",{className:"h5 mb-0",children:s.uncompleted}),e.jsx("small",{className:"text-danger",children:"Belum Tuntas"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"border rounded p-2",children:[e.jsx("div",{className:"h5 mb-0",children:s.exceed_completed}),e.jsx("small",{className:"text-success",children:"Melebihi Target"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"border rounded p-2",children:[e.jsx("div",{className:"h5 mb-0",children:s.exceed_uncompleted}),e.jsx("small",{className:"text-danger",children:"Belum Melebihi"})]})})]})]})})]}),e.jsx("div",{className:"col-md-8",children:e.jsx("div",{className:"row",children:s.classes.map(((a,l)=>e.jsx("div",{className:"col-md-6 mb-3",children:e.jsxs("div",{className:"card h-100",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{className:"mb-0",children:a.class_name})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row text-center g-2 mb-3",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"border rounded p-2",children:[e.jsx("div",{className:"h6 mb-0",children:a.completed}),e.jsx("small",{className:"text-success",children:"Tuntas"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"border rounded p-2",children:[e.jsx("div",{className:"h6 mb-0",children:a.uncompleted}),e.jsx("small",{className:"text-danger",children:"Belum Tuntas"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"border rounded p-2",children:[e.jsx("div",{className:"h6 mb-0",children:a.exceed_completed}),e.jsx("small",{className:"text-success",children:"Melebihi Target"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"border rounded p-2",children:[e.jsx("div",{className:"h6 mb-0",children:a.exceed_uncompleted}),e.jsx("small",{className:"text-danger",children:"Belum Melebihi"})]})})]}),e.jsx("button",{className:"btn btn-sm btn-primary w-100","data-bs-toggle":"modal","data-bs-target":"#detail-student",onClick:()=>t({students:a.students,gradeName:s.name,className:a.class_name}),children:"Lihat Detail Siswa"})]})]})},l)))})})]})]},a))),e.jsx("div",{className:"mt-4",children:e.jsx(g,{options:n,data:{labels:s.grade.map((e=>e.name)),datasets:[{label:"Pencapaian Target (%)",data:s.grade.map((e=>e.achievement)),backgroundColor:"rgba(53, 162, 235, 0.5)"},{label:"Siswa Tuntas Target",data:s.grade.map((e=>e.completed)),backgroundColor:"rgba(75, 192, 192, 0.5)"},{label:"Siswa Belum Tuntas Target",data:s.grade.map((e=>e.uncompleted)),backgroundColor:"rgba(255, 99, 132, 0.5)"},{label:"Pencapaian Melebihi Target (%)",data:s.grade.map((e=>e.exceed_achievement)),backgroundColor:"rgba(255, 159, 64, 0.5)"},{label:"Siswa Melebihi Target",data:s.grade.map((e=>e.exceed_completed)),backgroundColor:"rgba(153, 102, 255, 0.5)"},{label:"Siswa Belum Melebihi Target",data:s.grade.map((e=>e.exceed_uncompleted)),backgroundColor:"rgba(255, 205, 86, 0.5)"}]}})})]})]},a))),e.jsx(V,{students:l.students,gradename:l.gradeName,classname:l.className})]})},Y=()=>{const[s,a]=r.useState(""),[l,i]=r.useState(!1),{data:n,isLoading:c}=t({page:"",limit:"",search:""});return e.jsxs(d,{title:"Laporan Hafalan Siswa",levels:["tahfiz"],children:[e.jsx("div",{className:"container-fluid card mb-3",children:e.jsx("div",{className:"card-body text-end",children:c?e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("div",{className:"spinner-border spinner-border-sm text-secondary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):e.jsxs("div",{className:"btn-group btn-group-lg d-flex flex-wrap justify-content-end gap-2",children:[null==n?void 0:n.map((l=>e.jsx("button",{className:`btn ${s===l.id?"btn-secondary":"btn-outline-secondary"} transition-all hover:shadow-md`,onClick:()=>a(l.id),"aria-pressed":s===l.id,"aria-label":`Lihat laporan ${l.name}`,children:l.name},l.id))),e.jsxs("button",{className:"btn btn-danger d-flex align-items-center gap-2 hover:shadow-md",onClick:()=>a(""),"aria-label":"Reset pilihan",children:[e.jsx("i",{className:"bi bi-recycle"}),e.jsx("span",{className:"d-none d-sm-inline",children:"Reset"})]}),e.jsxs("button",{className:"btn btn-success d-flex align-items-center gap-2 hover:shadow-md",onClick:()=>i(!l),"aria-pressed":l,"aria-label":"Tampilkan "+(l?"Laporan":"Capaian"),children:[e.jsx("i",{className:"bi "+(l?"bi-file-text":"bi-trophy")}),e.jsx("span",{className:"d-none d-sm-inline",children:l?"Laporan":"Capaian"})]})]})})}),l?e.jsx(X,{}):e.jsx(U,{type:s})]})};export{Y as default};
//# sourceMappingURL=TahfizReport-m8Bahfmy.js.map
