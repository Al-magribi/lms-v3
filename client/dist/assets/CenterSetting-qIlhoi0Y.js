import{J as a,K as s,j as e,V as t,L as i,N as n,O as l}from"./index-CNbAajcm.js";import{b as o}from"./vendor-BYWiIb5-.js";import{L as r}from"./Layout-_SAc74nU.js";import{m as d}from"./proxy-B0Xu6tIC.js";import"./index-C-OX0RB-.js";import"./index-DLmIb9aI.js";const p=({app:i})=>{const[n,l]=o.useState({id:null==i?void 0:i.id,app_name:(null==i?void 0:i.app_name)||"",logo:(null==i?void 0:i.logo)||""}),[r,d]=o.useState((null==i?void 0:i.logo)||""),[p,{isLoading:m,isSuccess:c,isError:u,reset:h}]=a(),{refetch:x}=s(),b=o.useRef(null);return o.useEffect((()=>{i&&(l((a=>({...a,id:i.id,app_name:i.app_name||"",logo:i.logo||""}))),d(i.logo||""))}),[i]),o.useEffect((()=>{(c||u)&&(b.current.value="",h())}),[c,u,h]),e.jsxs("form",{className:"d-flex flex-column gap-3 p-2",onSubmit:async a=>{a.preventDefault();const s=new FormData;s.append("id",n.id),s.append("app_name",n.app_name),n.logo instanceof File&&s.append("logo",n.logo),t.promise(p(s).unwrap().then((a=>(x(),a.message))),{loading:"Menyimpan...",success:a=>a,error:a=>a.data.message})},children:[e.jsx("p",{className:"m-0 h6",children:"Aplikasi"}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{style:{width:150},className:"input-group-text",id:"basic-addon1",children:"Nama Aplikasi"}),e.jsx("input",{type:"text",className:"form-control","aria-label":"Nama Aplikasi","aria-describedby":"basic-addon1",name:"app_name",value:n.app_name,onChange:a=>{const{name:s,value:e}=a.target;l((a=>({...a,[s]:e})))}})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{style:{width:150},className:"input-group-text",id:"basic-addon1",children:"Logo Aplikasi"}),e.jsx("input",{ref:b,type:"file",className:"form-control","aria-label":"Logo Aplikasi","aria-describedby":"basic-addon1",accept:"image/*",onChange:a=>{const s=a.target.files[0];s&&(l((a=>({...a,logo:s}))),d(URL.createObjectURL(s)))}})]}),e.jsx("div",{className:"text-end",children:e.jsx("button",{className:"btn btn-sm btn-success",type:"submit",disabled:m,children:m?"Menyimpan...":"Simpan"})}),e.jsx("div",{className:"text-start",children:e.jsx("img",{src:r,alt:"Logo Aplikasi",className:"img-fluid",style:{width:150}})})]})},m=({app:a})=>{const[n,l]=o.useState({smtp_host:"",smtp_port:"",smtp_email:"",smtp_password:"",smtp_domain:""}),[r,{isLoading:d}]=i(),{refetch:p}=s();o.useEffect((()=>{a&&l({smtp_host:a.smtp_host||"",smtp_port:a.smtp_port||"",smtp_email:a.smtp_email||"",smtp_password:a.smtp_password||"",smtp_domain:a.smtp_domain||""})}),[a]);const m=a=>{const{name:s,value:e}=a.target;l((a=>({...a,[s]:e})))};return e.jsxs("form",{className:"d-flex flex-column gap-3 p-2",onSubmit:async a=>{a.preventDefault();const s={smtp_host:n.smtp_host,smtp_port:n.smtp_port,smtp_email:n.smtp_email,smtp_password:n.smtp_password,smtp_domain:n.smtp_domain};t.promise(r(s).unwrap().then((a=>(p(),a.message))),{loading:"Menyimpan...",success:a=>a,error:a=>a.data.message})},children:[e.jsx("p",{className:"m-0 h6",children:"Pengaturan SMTP Email"}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{style:{width:150},className:"input-group-text",id:"smtp-host-label",children:"SMTP Host"}),e.jsx("input",{type:"text",className:"form-control","aria-label":"SMTP Host","aria-describedby":"smtp-host-label",name:"smtp_host",placeholder:"Masukkan Host SMTP",value:n.smtp_host,onChange:m})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{style:{width:150},className:"input-group-text",id:"smtp-port-label",children:"SMTP Port"}),e.jsx("input",{type:"text",className:"form-control","aria-label":"SMTP Port","aria-describedby":"smtp-port-label",name:"smtp_port",placeholder:"Masukkan Port SMTP",value:n.smtp_port,onChange:m})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{style:{width:150},className:"input-group-text",id:"smtp-email-label",children:"SMTP Email"}),e.jsx("input",{type:"text",className:"form-control","aria-label":"SMTP Email","aria-describedby":"smtp-email-label",name:"smtp_email",placeholder:"Masukkan Email SMTP",value:n.smtp_email,onChange:m})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{style:{width:150},className:"input-group-text",id:"smtp-password-label",children:"SMTP Password"}),e.jsx("input",{type:"password",className:"form-control","aria-label":"SMTP Password","aria-describedby":"smtp-password-label",name:"smtp_password",placeholder:"Masukkan Password SMTP",value:n.smtp_password,onChange:m})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{style:{width:150},className:"input-group-text",id:"smtp-domain-label",children:"SMTP Domain"}),e.jsx("input",{type:"text",className:"form-control","aria-label":"SMTP Domain","aria-describedby":"smtp-domain-label",name:"smtp_domain",placeholder:"Masukkan Domain",value:n.smtp_domain,onChange:m})]}),e.jsx("div",{className:"text-end",children:e.jsx("button",{className:"btn btn-sm btn-success",type:"submit",disabled:d,children:d?"Menyimpan...":"Simpan"})})]})},c=({admin:a})=>{const[i,r]=o.useState({name:"",email:"",phone:"",old_password:"",new_password:""}),[d,{isLoading:p,isSuccess:m,isError:c,reset:u}]=n(),{refetch:h}=s(),[x]=l(),b=a=>{const{name:s,value:e}=a.target;if("phone"===s){let a=e;e.startsWith("0")&&(a="62"+e.substring(1)),r((e=>({...e,[s]:a})))}else r((a=>({...a,[s]:e})))};return o.useEffect((()=>{var s;if(a){const e=(null==(s=a.phone)?void 0:s.startsWith("0"))?"62"+a.phone.substring(1):a.phone;r({name:a.name||"",email:a.email||"",phone:e||"",old_password:"",new_password:""})}}),[a]),o.useEffect((()=>{(m||c)&&(u(),x(),h())}),[m,c]),e.jsxs("form",{className:"d-flex flex-column gap-3 p-2",onSubmit:a=>{a.preventDefault(),t.promise(d(i).unwrap().then((a=>a.message)),{loading:"Menyimpan...",success:a=>a,error:a=>a.data.message})},children:[e.jsx("p",{className:"m-0 h6",children:"Profile"}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{style:{width:150},className:"input-group-text",id:"basic-addon1",children:"Username"}),e.jsx("input",{type:"text",className:"form-control",name:"name",value:i.name,onChange:b,"aria-label":"Nama","aria-describedby":"basic-addon1"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{style:{width:150},className:"input-group-text",id:"basic-addon1",children:"Email"}),e.jsx("input",{type:"email",className:"form-control",name:"email",value:i.email,onChange:b,"aria-label":"Email","aria-describedby":"basic-addon1"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{style:{width:150},className:"input-group-text",id:"basic-addon1",children:"Whatsapp"}),e.jsx("input",{type:"text",className:"form-control",name:"phone",value:i.phone,onChange:b,"aria-label":"Whatsapp","aria-describedby":"basic-addon1"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{style:{width:150},className:"input-group-text",id:"basic-addon1",children:"Password Lama"}),e.jsx("input",{type:"password",className:"form-control",name:"old_password",value:i.old_password,onChange:b,"aria-label":"Password Lama","aria-describedby":"basic-addon1"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{style:{width:150},className:"input-group-text",id:"basic-addon1",children:"Password Baru"}),e.jsx("input",{type:"password",className:"form-control",name:"new_password",value:i.new_password,onChange:b,"aria-label":"Password Baru","aria-describedby":"basic-addon1"})]}),e.jsx("div",{className:"text-end",children:e.jsx("button",{type:"submit",className:"btn btn-sm btn-success",disabled:p,children:p?"Menyimpan...":"Simpan"})})]})},u=({title:a,levels:s})=>e.jsx(r,{title:a,levels:s,children:e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"50vh"},children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Memuat data..."})})})}),h={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}},x={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},b=()=>{const{data:a,isLoading:t}=s(),{admin:i,app:n}=a||{};return t?e.jsx(u,{title:"Pengaturan Aplikasi",levels:["center","admin"]}):e.jsx(r,{title:"Pengaturan Aplikasi",levels:["center"],children:e.jsxs(d.div,{className:"row g-4 p-3",variants:h,initial:"hidden",animate:"visible",children:[e.jsx(d.div,{className:"col-lg-6 col-12",variants:x,children:e.jsx("div",{className:"card h-100 shadow-sm rounded-3 hover-shadow",children:e.jsx(p,{app:n})})}),e.jsx(d.div,{className:"col-lg-6 col-12",variants:x,children:e.jsx("div",{className:"card h-100 shadow-sm rounded-3 hover-shadow",children:e.jsx(m,{app:n})})}),e.jsx(d.div,{className:"col-lg-6 col-12",variants:x,children:e.jsx("div",{className:"card h-100 shadow-sm rounded-3 hover-shadow",children:e.jsx(c,{admin:i})})})]})})};export{b as default};
//# sourceMappingURL=CenterSetting-qIlhoi0Y.js.map
