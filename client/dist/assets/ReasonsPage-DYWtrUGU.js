import{o as e,p as a,q as s,e as t,j as i,m as n}from"./index-DFhdulld.js";import{b as l}from"./vendor-CnnDPxwB.js";import{L as r}from"./Layout-BdxnsoD5.js";import{C as c}from"./CmsModal-B4WHKLRt.js";import{C as d}from"./CmsForm-CjFKk7X5.js";import{k as o,l as m}from"./index-B8CuzAwO.js";import{F as x,a as h}from"./index-g0LoU_Ie.js";import{T as u}from"./Table-CpyGbvYh.js";const b=()=>{const[b,j]=l.useState(!1),[p,g]=l.useState("add"),[N,y]=l.useState(null),[f,v]=l.useState(1),[k,w]=l.useState(10),[A,S]=l.useState(""),[C,T]=l.useState(0),{data:F,isLoading:L,refetch:q}=e({page:f,limit:k,search:A}),{reasons:D,totalData:M,totalPage:B}=F||{},[P,{isSuccess:E,error:I,isLoading:G,data:O,reset:R}]=a(),[U]=s();l.useEffect((()=>{var e;E&&(t.success(O.message),j(!1),q(),y(null),T((e=>e+1)),R()),I&&(t.error(null==(e=I.data)?void 0:e.message),R())}),[E,I,O,R,q]);const V=[{name:"name",label:"Alasan",type:"text",required:!0,placeholder:"Masukkan alasan"},{name:"description",label:"Deskripsi",type:"textarea",required:!0,placeholder:"Masukkan deskripsi lengkap",rows:4},{name:"icon",label:"Icon",type:"text",required:!0,placeholder:"Masukkan nama icon",helpText:i.jsxs(i.Fragment,{children:["Gunakan icon dari library"," ",i.jsx("a",{href:"https://react-icons.github.io/react-icons/",target:"_blank",rel:"noopener noreferrer",className:"text-primary",children:"react-icons"})," ","FontAwesome 5 atau FontAwesome 6"]})}];return i.jsxs(r,{title:"Alasan",levels:["cms"],children:[i.jsx("div",{className:"container-fluid py-3 py-md-4",children:i.jsxs(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsxs("div",{className:"d-flex align-items-center",children:[i.jsx("div",{className:"bg-primary bg-opacity-10 p-3 rounded me-3",children:i.jsx("i",{className:"bi bi-lightbulb text-primary fs-4"})}),i.jsx("h4",{className:"mb-0",children:"Alasan"})]}),i.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>{g("add"),y(null),j(!0)},children:[i.jsx("i",{className:"bi bi-plus-circle"}),i.jsx("span",{className:"ms-2",children:"Tambah Alasan"})]})]}),i.jsx("div",{className:"card border-0 shadow-sm",children:i.jsx("div",{className:"card-body",children:i.jsx(u,{isLoading:L,page:f,setPage:v,totalPages:B,limit:k,setLimit:w,setSearch:S,totalData:M,children:i.jsxs("table",{className:"mb-0 table table-bordered table-striped table-hover",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-center align-middle",children:"No"}),i.jsx("th",{className:"text-center align-middle",children:"Icon"}),i.jsx("th",{className:"text-center align-middle",children:"Alasan"}),i.jsx("th",{className:"text-center align-middle",children:"Deskripsi"}),i.jsx("th",{className:"text-center align-middle",children:"Aksi"})]})}),i.jsx("tbody",{children:null==D?void 0:D.map(((e,a)=>{var s;const n=(null==(s=null==e?void 0:e.icon)?void 0:s.startsWith("Fa6"))?x[e.icon]||h:o[e.icon]||m;return i.jsxs("tr",{children:[i.jsx("td",{className:"text-center align-middle",children:(f-1)*k+a+1}),i.jsx("td",{className:"text-center align-middle",children:i.jsx("div",{className:"rounded-circle bg-primary bg-opacity-10 p-3 me-3 text-primary",children:i.jsx(n,{className:"fs-2"})})}),i.jsx("td",{className:"align-middle",children:e.name}),i.jsx("td",{className:"align-middle",children:e.description}),i.jsx("td",{className:"text-center align-middle",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-center gap-2",children:[i.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>(e=>{g("edit"),y(e),j(!0)})(e),children:i.jsx("i",{className:"bi bi-pencil-square"})}),i.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>(async e=>{var a;if(window.confirm("Are you sure you want to delete this reason?"))try{await U(e).unwrap(),t.success("Reason deleted successfully"),q()}catch(s){t.error((null==(a=s.data)?void 0:a.message)||"Failed to delete reason")}})(e.id),children:i.jsx("i",{className:"bi bi-trash"})})]})})]},e.id)}))})]})})})})]})}),i.jsx(c,{isOpen:b,onClose:()=>{j(!1),y(null),T((e=>e+1))},title:"add"===p?"Tambah Alasan":"Edit Alasan",children:i.jsx(d,{fields:V,initialValues:N||{name:"",description:"",icon:""},onSubmit:async e=>{try{await P(e).unwrap()}catch(a){console.log(a)}},onCancel:()=>{y(null),j(!1),T((e=>e+1))},submitButtonText:"add"===p?"Tambah Alasan":"Ubah Alasan",cancelButtonText:"Batal",isLoading:G},C)})]})};export{b as default};
//# sourceMappingURL=ReasonsPage-DYWtrUGU.js.map
