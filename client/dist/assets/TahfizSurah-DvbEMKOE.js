import{r as t,aR as v,j as e,e as S,aP as D,aS as w}from"./index-_V-Hszfs.js";import{L}from"./Layout-BOPYSC9s.js";import{T as C}from"./Table-pFA1e1UJ.js";const A=({detail:a,setDetail:n})=>{const[u,c]=t.useState(""),[h,i]=t.useState(""),[x,d]=t.useState(""),[j,o]=t.useState(""),[f,{isLoading:b,isSuccess:g,isError:p,reset:N}]=v(),s=async l=>{l.preventDefault();const y={id:u||"",name:h,ayat:x,lines:j};S.promise(f(y).unwrap().then(m=>m.message),{loading:"Menyimpan...",success:m=>m,error:m=>m.data.message})},r=()=>{n({}),c(""),i(""),d(""),o("")};return t.useEffect(()=>{g&&(n({}),c(""),i(""),d(""),o(""),N()),p&&N()},[g,p]),t.useEffect(()=>{a&&(c(a.id),i(a.name),d(a.ayat),o(a.lines))},[a]),e.jsxs("form",{onSubmit:s,className:"rounded border bg-white d-flex flex-column gap-2 p-2",children:[e.jsx("p",{className:"m-0 h6",children:"Surah"}),e.jsx("input",{type:"text",name:"name",id:"name",className:"form-control",placeholder:"Nama Surah",value:h||"",onChange:l=>i(l.target.value),required:!0}),e.jsx("input",{type:"number",name:"ayat",id:"ayat",className:"form-control",placeholder:"Jumlah Ayat",value:x||"",onChange:l=>d(l.target.value),required:!0}),e.jsx("input",{type:"number",name:"line",id:"line",className:"form-control",placeholder:"Jumlah Baris",value:j||"",onChange:l=>o(l.target.value),required:!0}),e.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-warning",onClick:r,children:"Batal"}),e.jsx("button",{type:"submit",className:"btn btn-success",disabled:b,children:b?"Menyimpan...":"Simpan"})]})]})},E=({setDetail:a})=>{const[n,u]=t.useState(1),[c,h]=t.useState(10),[i,x]=t.useState(""),{data:d={},isLoading:j}=D({page:n,limit:c,search:i}),{result:o=[],totalData:f,totalPages:b}=d,[g,{isLoading:p}]=w(),N=async s=>{S.promise(g(s).unwrap().then(r=>r.message),{loading:"Menghapus...",success:r=>r,error:r=>r.data.message})};return e.jsx(C,{isLoading:j,totalData:f,totalPages:b,page:n,setPage:u,setLimit:h,setSearch:x,children:e.jsxs("table",{className:"mb-0 table table-hover table-striped table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center",children:"No"}),e.jsx("th",{className:"text-center",children:"Nama Surah"}),e.jsx("th",{className:"text-center",children:"Jumlah Ayat"}),e.jsx("th",{className:"text-center",children:"Jumlah Baris"}),e.jsx("th",{className:"text-center",children:"Aksi"})]})}),e.jsx("tbody",{children:o.map((s,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center align-middle",children:(n-1)*c+r+1}),e.jsx("td",{className:"align-middle",children:s.name}),e.jsx("td",{className:"text-center align-middle",children:s.ayat}),e.jsx("td",{className:"text-center align-middle",children:s.lines}),e.jsx("td",{className:"text-center align-middle",children:e.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[e.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>a(s),children:e.jsx("i",{className:"bi bi-pencil-square"})}),e.jsx("button",{className:"btn btn-sm btn-danger",disabled:p,onClick:()=>N(s.id),children:e.jsx("i",{className:"bi bi-trash"})})]})})]},s.id))})]})})},q=()=>{const[a,n]=t.useState({});return e.jsx(L,{title:"Tahfiz - Daftar Surah",levels:["tahfiz"],children:e.jsxs("div",{className:"row g-2",children:[e.jsx("div",{className:"col-lg-3 col-12",children:e.jsx(A,{detail:a,setDetail:n})}),e.jsx("div",{className:"col-lg-9 col-12",children:e.jsx(E,{setDetail:n})})]})})};export{q as default};
