import{M as e,j as t,B as n,P as s,C as o,D as i,L as r,m as a}from"./index-DFhdulld.js";import{b as l}from"./vendor-CnnDPxwB.js";class d extends l.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=e instanceof HTMLElement&&e.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=n-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function c({children:n,isPresent:s,anchorX:o}){const i=l.useId(),r=l.useRef(null),a=l.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=l.useContext(e);return l.useInsertionEffect((()=>{const{width:e,height:t,top:n,left:l,right:d}=a.current;if(s||!r.current||!e||!t)return;const u="left"===o?`left: ${l}`:`right: ${d}`;r.current.dataset.motionPopId=i;const h=document.createElement("style");return c&&(h.nonce=c),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`\n          [data-motion-pop-id="${i}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${t}px !important;\n            ${u}px !important;\n            top: ${n}px !important;\n          }\n        `),()=>{document.head.removeChild(h)}}),[s]),t.jsx(d,{isPresent:s,childRef:r,sizeRef:a,children:l.cloneElement(n,{ref:r})})}const u=({children:e,initial:o,isPresent:i,onExitComplete:r,custom:a,presenceAffectsLayout:d,mode:u,anchorX:m})=>{const p=n(h),f=l.useId();let x=!0,g=l.useMemo((()=>(x=!1,{id:f,initial:o,isPresent:i,custom:a,onExitComplete:e=>{p.set(e,!0);for(const t of p.values())if(!t)return;r&&r()},register:e=>(p.set(e,!1),()=>p.delete(e))})),[i,p,r]);return d&&x&&(g={...g}),l.useMemo((()=>{p.forEach(((e,t)=>p.set(t,!1)))}),[i]),l.useEffect((()=>{!i&&!p.size&&r&&r()}),[i]),"popLayout"===u&&(e=t.jsx(c,{isPresent:i,anchorX:m,children:e})),t.jsx(s.Provider,{value:g,children:e})};function h(){return new Map}const m=e=>e.key||"";function p(e){const t=[];return l.Children.forEach(e,(e=>{l.isValidElement(e)&&t.push(e)})),t}const f=({children:e,custom:s,initial:a=!0,onExitComplete:d,presenceAffectsLayout:c=!0,mode:h="sync",propagate:f=!1,anchorX:x="left"})=>{const[g,y]=o(f),v=l.useMemo((()=>p(e)),[e]),b=f&&!g?[]:v.map(m),j=l.useRef(!0),C=l.useRef(v),E=n((()=>new Map)),[w,P]=l.useState(v),[k,R]=l.useState(v);i((()=>{j.current=!1,C.current=v;for(let e=0;e<k.length;e++){const t=m(k[e]);b.includes(t)?E.delete(t):!0!==E.get(t)&&E.set(t,!1)}}),[k,b.length,b.join("-")]);const L=[];if(v!==w){let e=[...v];for(let t=0;t<k.length;t++){const n=k[t],s=m(n);b.includes(s)||(e.splice(t,0,n),L.push(n))}return"wait"===h&&L.length&&(e=L),R(p(e)),P(v),null}const{forceRender:N}=l.useContext(r);return t.jsx(t.Fragment,{children:k.map((e=>{const n=m(e),o=!(f&&!g)&&(v===k||b.includes(n));return t.jsx(u,{isPresent:o,initial:!(j.current&&!a)&&void 0,custom:s,presenceAffectsLayout:c,mode:h,onExitComplete:o?void 0:()=>{if(!E.has(n))return;E.set(n,!0);let e=!0;E.forEach((t=>{t||(e=!1)})),e&&(null==N||N(),R(C.current),f&&(null==y||y()),d&&d())},anchorX:x,children:e},n)}))})},x=({isOpen:e,onClose:n,title:s,children:o,footer:i,size:r="md"})=>(l.useEffect((()=>{const t=t=>{"Escape"===t.key&&e&&n()};return e&&(document.addEventListener("keydown",t),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",t),document.body.style.overflow=""}}),[e,n]),t.jsx(f,{children:e&&t.jsxs(t.Fragment,{children:[t.jsx(a.div,{className:"modal-backdrop",initial:"hidden",animate:"visible",exit:"exit",variants:{hidden:{opacity:0},visible:{opacity:1},exit:{opacity:0}},onClick:n,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:1040}}),t.jsx("div",{className:"modal fade "+(e?"show":""),tabIndex:"-1",role:"dialog","aria-modal":"true",style:{display:"block",zIndex:1045},children:t.jsx(a.div,{className:`modal-dialog modal-dialog-centered modal-dialog-scrollable ${(()=>{switch(r){case"sm":return"modal-sm";case"lg":return"modal-lg";case"xl":return"modal-xl";default:return""}})()}`,initial:"hidden",animate:"visible",exit:"exit",variants:{hidden:{opacity:0,y:-50},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:30}},exit:{opacity:0,y:-50,transition:{duration:.2}}},onClick:e=>e.stopPropagation(),children:t.jsxs("div",{className:"modal-content border-0 shadow",children:[t.jsxs("div",{className:"modal-header border-bottom",children:[t.jsx("h5",{className:"modal-title",children:s}),t.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:n})]}),t.jsx("div",{className:"modal-body",children:o}),i&&t.jsx("div",{className:"modal-footer border-top",children:i})]})})})]})}));export{x as C};
//# sourceMappingURL=CmsModal-B4WHKLRt.js.map
