{"version":3,"file":"TeacherPresensi-DElbTJm5.js","sources":["../../src/page/teacher/presensi/TableData.jsx","../../src/page/teacher/presensi/TeacherPresensi.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Table from \"../../../components/table/Table\";\r\nimport { useGetStudentsInClassQuery } from \"../../../controller/api/admin/ApiClass\";\r\nimport {\r\n  useGetPresensiQuery,\r\n  useAddPresensiMutation,\r\n} from \"../../../controller/api/lms/ApiPresensi\";\r\nimport { toast } from \"react-hot-toast\";\r\n\r\nconst TableData = ({ classid, subjectid }) => {\r\n  const [page, setPage] = useState(1);\r\n  const [limit, setLimit] = useState(10);\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  const { data, isLoading } = useGetStudentsInClassQuery(\r\n    {\r\n      page,\r\n      limit,\r\n      search,\r\n      classid,\r\n    },\r\n    { skip: !classid }\r\n  );\r\n\r\n  const { data: presensiData } = useGetPresensiQuery(\r\n    { classid, subjectid },\r\n    { skip: !classid || !subjectid }\r\n  );\r\n\r\n  const [addPresensi] = useAddPresensiMutation();\r\n\r\n  const { students, totalData, totalPages } = data || {};\r\n\r\n  const handleCheck = async ({ studentid, note }) => {\r\n    const data = { classid, subjectid, studentid, note };\r\n\r\n    toast.promise(\r\n      addPresensi(data)\r\n        .unwrap()\r\n        .then((res) => res.message),\r\n      {\r\n        loading: \"Memproses...\",\r\n        success: (message) => message,\r\n        error: (error) => error.data?.message || \"Terjadi kesalahan\",\r\n      }\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {!classid || !subjectid ? (\r\n        <div className=\"text-center py-5\">\r\n          <div className=\"mb-3\">\r\n            <i className=\"bi bi-clipboard2-check display-1 text-muted\"></i>\r\n          </div>\r\n          <h5 className=\"fw-bold text-muted mb-2\">Pilih Data Presensi</h5>\r\n          <p className=\"text-muted mb-0\">\r\n            Silakan pilih mata pelajaran dan kelas terlebih dahulu\r\n          </p>\r\n        </div>\r\n      ) : !students ? (\r\n        <div className=\"text-center py-5\">\r\n          <div className=\"mb-3\">\r\n            <i className=\"bi bi-people display-1 text-muted\"></i>\r\n          </div>\r\n          <h5 className=\"fw-bold text-muted mb-2\">Data Siswa Tidak Tersedia</h5>\r\n          <p className=\"text-muted mb-0\">\r\n            Tidak ada data siswa yang ditemukan untuk kelas ini\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        <Table\r\n          isLoading={isLoading}\r\n          page={page}\r\n          setPage={setPage}\r\n          limit={limit}\r\n          setLimit={setLimit}\r\n          setSearch={setSearch}\r\n          totalData={totalData}\r\n          totalPages={totalPages}\r\n        >\r\n          <div className=\"table-responsive\">\r\n            <table className=\"table table-hover align-middle\">\r\n              <thead className=\"bg-light\">\r\n                <tr>\r\n                  <th\r\n                    className=\"align-middle text-center\"\r\n                    style={{ width: \"5%\" }}\r\n                  >\r\n                    No\r\n                  </th>\r\n                  <th\r\n                    className=\"align-middle text-center\"\r\n                    style={{ width: \"10%\" }}\r\n                  >\r\n                    NIS\r\n                  </th>\r\n                  <th\r\n                    className=\"align-middle text-center\"\r\n                    style={{ width: \"25%\" }}\r\n                  >\r\n                    Nama\r\n                  </th>\r\n                  <th\r\n                    className=\"align-middle text-center\"\r\n                    style={{ width: \"10%\" }}\r\n                  >\r\n                    Tingkat\r\n                  </th>\r\n                  <th\r\n                    className=\"align-middle text-center\"\r\n                    style={{ width: \"15%\" }}\r\n                  >\r\n                    Kelas\r\n                  </th>\r\n                  <th\r\n                    className=\"align-middle text-center\"\r\n                    style={{ width: \"10%\" }}\r\n                  >\r\n                    <i className=\"bi bi-check-circle text-success\"></i>\r\n                    <div className=\"small\">Hadir</div>\r\n                  </th>\r\n                  <th\r\n                    className=\"align-middle text-center\"\r\n                    style={{ width: \"10%\" }}\r\n                  >\r\n                    <i className=\"bi bi-heart-pulse text-primary\"></i>\r\n                    <div className=\"small\">Sakit</div>\r\n                  </th>\r\n                  <th\r\n                    className=\"align-middle text-center\"\r\n                    style={{ width: \"10%\" }}\r\n                  >\r\n                    <i className=\"bi bi-envelope-paper text-info\"></i>\r\n                    <div className=\"small\">Izin</div>\r\n                  </th>\r\n                  <th\r\n                    className=\"align-middle text-center\"\r\n                    style={{ width: \"10%\" }}\r\n                  >\r\n                    <i className=\"bi bi-x-circle text-danger\"></i>\r\n                    <div className=\"small\">Alpa</div>\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {students.map((student, index) => (\r\n                  <tr key={student.id}>\r\n                    <td className=\"text-center align-middle\">\r\n                      {(page - 1) * limit + index + 1}\r\n                    </td>\r\n                    <td className=\"text-center align-middle\">{student.nis}</td>\r\n                    <td className=\"align-middle\">{student.student_name}</td>\r\n                    <td className=\"text-center align-middle\">\r\n                      {student.grade_name}\r\n                    </td>\r\n                    <td className=\"text-center align-middle\">\r\n                      {student.class_name}\r\n                    </td>\r\n                    <td className=\"text-center align-middle\">\r\n                      <div className=\"form-check d-flex justify-content-center\">\r\n                        <input\r\n                          className=\"form-check-input border-success\"\r\n                          type=\"checkbox\"\r\n                          style={{ width: \"1.5em\", height: \"1.5em\" }}\r\n                          checked={\r\n                            presensiData?.find(\r\n                              (item) => item.studentid === student.student\r\n                            )?.note === \"Hadir\"\r\n                          }\r\n                          onChange={(e) => {\r\n                            handleCheck({\r\n                              studentid: student.student,\r\n                              note: \"Hadir\",\r\n                              checked: e.target.checked,\r\n                            });\r\n                          }}\r\n                        />\r\n                      </div>\r\n                    </td>\r\n\r\n                    <td className=\"text-center align-middle\">\r\n                      <div className=\"form-check d-flex justify-content-center\">\r\n                        <input\r\n                          className=\"form-check-input border-primary\"\r\n                          type=\"checkbox\"\r\n                          style={{ width: \"1.5em\", height: \"1.5em\" }}\r\n                          checked={\r\n                            presensiData?.find(\r\n                              (item) => item.studentid === student.student\r\n                            )?.note === \"Sakit\"\r\n                          }\r\n                          onChange={(e) => {\r\n                            handleCheck({\r\n                              studentid: student.student,\r\n                              note: \"Sakit\",\r\n                              checked: e.target.checked,\r\n                            });\r\n                          }}\r\n                        />\r\n                      </div>\r\n                    </td>\r\n\r\n                    <td className=\"text-center align-middle\">\r\n                      <div className=\"form-check d-flex justify-content-center\">\r\n                        <input\r\n                          className=\"form-check-input border-info\"\r\n                          type=\"checkbox\"\r\n                          style={{ width: \"1.5em\", height: \"1.5em\" }}\r\n                          checked={\r\n                            presensiData?.find(\r\n                              (item) => item.studentid === student.student\r\n                            )?.note === \"Izin\"\r\n                          }\r\n                          onChange={(e) => {\r\n                            handleCheck({\r\n                              studentid: student.student,\r\n                              note: \"Izin\",\r\n                              checked: e.target.checked,\r\n                            });\r\n                          }}\r\n                        />\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"text-center align-middle\">\r\n                      <div className=\"form-check d-flex justify-content-center\">\r\n                        <input\r\n                          className=\"form-check-input border-danger\"\r\n                          type=\"checkbox\"\r\n                          style={{ width: \"1.5em\", height: \"1.5em\" }}\r\n                          checked={\r\n                            presensiData?.find(\r\n                              (item) => item.studentid === student.student\r\n                            )?.note === \"Alpa\"\r\n                          }\r\n                          onChange={(e) => {\r\n                            handleCheck({\r\n                              studentid: student.student,\r\n                              note: \"Alpa\",\r\n                              checked: e.target.checked,\r\n                            });\r\n                          }}\r\n                        />\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </Table>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default TableData;\r\n","import React, { useState } from \"react\";\r\nimport Layout from \"../../../components/layout/Layout\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Select from \"react-select\";\r\nimport { useGetClassQuery } from \"../../../controller/api/admin/ApiClass\";\r\nimport Table from \"../../../components/table/Table\";\r\nimport TableData from \"./TableData\";\r\n\r\nconst TeacherPresensi = () => {\r\n  const { user } = useSelector((state) => state.auth);\r\n  const { data: classes } = useGetClassQuery({\r\n    page: \"\",\r\n    limit: \"\",\r\n    search: \"\",\r\n  });\r\n\r\n  const [classid, setClassid] = useState(\"\");\r\n  const [subjectid, setSubjectid] = useState(\"\");\r\n\r\n  const options = user?.subjects?.map((subject) => ({\r\n    value: subject.id,\r\n    label: subject.name,\r\n  }));\r\n\r\n  const optionsClass = classes?.map((kelas) => ({\r\n    value: kelas.id,\r\n    label: kelas.name,\r\n  }));\r\n\r\n  return (\r\n    <Layout title={\"Presensi Siswa\"} levels={[\"teacher\"]}>\r\n      <div className=\"row g-2 mb-4\">\r\n        <div className=\"col-12 col-lg-3\">\r\n          <Select\r\n            options={options}\r\n            isSearchable={true}\r\n            placeholder=\"Pilih Mata Pelajaran\"\r\n            onChange={(e) => setSubjectid(e.value)}\r\n          />\r\n        </div>\r\n        <div className=\"col-12 col-lg-3\">\r\n          <Select\r\n            options={optionsClass}\r\n            isSearchable={true}\r\n            placeholder=\"Pilih Kelas\"\r\n            onChange={(e) => setClassid(e.value)}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <TableData classid={classid} subjectid={subjectid} />\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default TeacherPresensi;\r\n"],"names":["TableData","classid","subjectid","page","setPage","useState","limit","setLimit","search","setSearch","data","isLoading","useGetStudentsInClassQuery","skip","presensiData","useGetPresensiQuery","addPresensi","useAddPresensiMutation","students","totalData","totalPages","handleCheck","async","studentid","note","c","promise","unwrap","then","res","message","loading","success","error","_a","jsx","Fragment","children","jsxRuntimeExports","Table","className","jsxs","style","width","map","student","index","nis","student_name","grade_name","class_name","type","height","checked","find","item","onChange","e","target","_b","_c","_d","id","TeacherPresensi","user","useSelector","state","auth","classes","useGetClassQuery","setClassid","setSubjectid","options","subjects","subject","value","label","name","optionsClass","kelas","Layout","title","levels","Select","isSearchable","placeholder"],"mappings":"uVASA,MAAMA,EAAY,EAAGC,UAASC,gBAC5B,MAAOC,EAAMC,GAAWC,EAAAA,SAAS,IAC1BC,EAAOC,GAAYF,EAAAA,SAAS,KAC5BG,EAAQC,GAAaJ,EAAAA,SAAS,KAE/BK,KAAEA,EAAMC,UAAAA,GAAcC,EAC1B,CACET,OACAG,QACAE,SACAP,WAEF,CAAEY,MAAOZ,KAGHS,KAAMI,GAAiBC,EAC7B,CAAEd,UAASC,aACX,CAAEW,MAAOZ,IAAYC,KAGhBc,GAAeC,KAEhBC,SAAEA,EAAUC,UAAAA,EAAAC,WAAWA,GAAeV,GAAQ,CAAC,EAE/CW,EAAcC,OAASC,YAAWC,WACtC,MAAMd,EAAO,CAAET,UAASC,YAAWqB,YAAWC,QAExCC,EAAAC,QACJV,EAAYN,GACTiB,SACAC,MAAMC,GAAQA,EAAIC,UACrB,CACEC,QAAS,eACTC,QAAUF,GAAYA,EACtBG,MAAQA,UAAgB,OAAN,OAAMC,EAAAD,EAAAvB,eAAMoB,UAAW,mBAAA,GAE7C,EAIA,SAAAK,IAAAC,EAAAA,SAAA,CACGC,SAACpC,GAAYC,EAUTgB,EAWHoB,EAAAH,IAACI,EAAA,CACC5B,YACAR,OACAC,UACAE,QACAC,WACAE,YACAU,YACAC,aAEAiB,eAAC,MAAI,CAAAG,UAAU,mBACbH,SAACI,EAAAA,KAAA,QAAA,CAAMD,UAAU,iCACfH,SAAA,CAAAF,MAAC,QAAM,CAAAK,UAAU,WACfH,SAAAC,EAAAG,KAAC,KACC,CAAAJ,SAAA,CAAAC,EAAAH,IAAC,KAAA,CACCK,UAAU,2BACVE,MAAO,CAAEC,MAAO,MACjBN,SAAA,OAGDC,EAAAH,IAAC,KAAA,CACCK,UAAU,2BACVE,MAAO,CAAEC,MAAO,OACjBN,SAAA,QAGDC,EAAAH,IAAC,KAAA,CACCK,UAAU,2BACVE,MAAO,CAAEC,MAAO,OACjBN,SAAA,SAGDC,EAAAH,IAAC,KAAA,CACCK,UAAU,2BACVE,MAAO,CAAEC,MAAO,OACjBN,SAAA,YAGDC,EAAAH,IAAC,KAAA,CACCK,UAAU,2BACVE,MAAO,CAAEC,MAAO,OACjBN,SAAA,UAGDC,EAAAG,KAAC,KAAA,CACCD,UAAU,2BACVE,MAAO,CAAEC,MAAO,OAEhBN,SAAA,GAACF,IAAA,IAAA,CAAEK,UAAU,oCACZL,EAAAA,IAAA,MAAA,CAAIK,UAAU,QAAQH,SAAK,aAE9BC,EAAAG,KAAC,KAAA,CACCD,UAAU,2BACVE,MAAO,CAAEC,MAAO,OAEhBN,SAAA,GAACF,IAAA,IAAA,CAAEK,UAAU,mCACZL,EAAAA,IAAA,MAAA,CAAIK,UAAU,QAAQH,SAAK,aAE9BC,EAAAG,KAAC,KAAA,CACCD,UAAU,2BACVE,MAAO,CAAEC,MAAO,OAEhBN,SAAA,GAACF,IAAA,IAAA,CAAEK,UAAU,mCACZL,EAAAA,IAAA,MAAA,CAAIK,UAAU,QAAQH,SAAI,YAE7BC,EAAAG,KAAC,KAAA,CACCD,UAAU,2BACVE,MAAO,CAAEC,MAAO,OAEhBN,SAAA,GAACF,IAAA,IAAA,CAAEK,UAAU,+BACZL,EAAAA,IAAA,MAAA,CAAIK,UAAU,QAAQH,SAAI,iBAIjCF,EAAAA,IAAC,SACEE,SAASnB,EAAA0B,KAAI,CAACC,EAASC,+BACrB,KACC,CAAAT,SAAA,CAAAF,EAAAA,IAAC,MAAGK,UAAU,2BACVH,YAAO,GAAK/B,EAAQwC,EAAQ,IAE/BX,EAAAA,IAAA,KAAA,CAAGK,UAAU,2BAA4BH,WAAQU,MACjDZ,EAAAA,IAAA,KAAA,CAAGK,UAAU,eAAgBH,WAAQW,eACrCb,EAAAA,IAAA,KAAA,CAAGK,UAAU,2BACXH,WAAQY,aAEVd,EAAAA,IAAA,KAAA,CAAGK,UAAU,2BACXH,WAAQa,mBAEV,KAAG,CAAAV,UAAU,2BACZH,eAAC,MAAA,CAAIG,UAAU,2CACbH,SAAAC,EAAAH,IAAC,QAAA,CACCK,UAAU,kCACVW,KAAK,WACLT,MAAO,CAAEC,MAAO,QAASS,OAAQ,SACjCC,QAGc,WAFZ,OAAAnB,EAAc,MAAApB,OAAA,EAAAA,EAAAwC,MACXC,GAASA,EAAKhC,YAAcsB,EAAQA,oBACpCrB,MAELgC,SAAWC,IACGpC,EAAA,CACVE,UAAWsB,EAAQA,QACnBrB,KAAM,QACN6B,QAASI,EAAEC,OAAOL,SACnB,cAMR,KAAG,CAAAb,UAAU,2BACZH,eAAC,MAAA,CAAIG,UAAU,2CACbH,SAAAC,EAAAH,IAAC,QAAA,CACCK,UAAU,kCACVW,KAAK,WACLT,MAAO,CAAEC,MAAO,QAASS,OAAQ,SACjCC,QAGc,WAFZ,OAAAM,EAAc,MAAA7C,OAAA,EAAAA,EAAAwC,MACXC,GAASA,EAAKhC,YAAcsB,EAAQA,oBACpCrB,MAELgC,SAAWC,IACGpC,EAAA,CACVE,UAAWsB,EAAQA,QACnBrB,KAAM,QACN6B,QAASI,EAAEC,OAAOL,SACnB,cAMR,KAAG,CAAAb,UAAU,2BACZH,eAAC,MAAA,CAAIG,UAAU,2CACbH,SAAAC,EAAAH,IAAC,QAAA,CACCK,UAAU,+BACVW,KAAK,WACLT,MAAO,CAAEC,MAAO,QAASS,OAAQ,SACjCC,QAGc,UAFZ,OAAAO,EAAc,MAAA9C,OAAA,EAAAA,EAAAwC,MACXC,GAASA,EAAKhC,YAAcsB,EAAQA,oBACpCrB,MAELgC,SAAWC,IACGpC,EAAA,CACVE,UAAWsB,EAAQA,QACnBrB,KAAM,OACN6B,QAASI,EAAEC,OAAOL,SACnB,cAKR,KAAG,CAAAb,UAAU,2BACZH,eAAC,MAAA,CAAIG,UAAU,2CACbH,SAAAC,EAAAH,IAAC,QAAA,CACCK,UAAU,iCACVW,KAAK,WACLT,MAAO,CAAEC,MAAO,QAASS,OAAQ,SACjCC,QAGc,UAFZ,OAAAQ,EAAc,MAAA/C,OAAA,EAAAA,EAAAwC,MACXC,GAASA,EAAKhC,YAAcsB,EAAQA,oBACpCrB,MAELgC,SAAWC,IACGpC,EAAA,CACVE,UAAWsB,EAAQA,QACnBrB,KAAM,OACN6B,QAASI,EAAEC,OAAOL,SACnB,UA7FFR,EAAQiB,GAkGjB,aAxLTxB,EAAAG,KAAA,MAAA,CAAID,UAAU,mBACbH,SAAA,CAAAF,EAAAA,IAAC,OAAIK,UAAU,OACbH,eAAC,IAAE,CAAAG,UAAU,wCAEdL,EAAAA,IAAA,KAAA,CAAGK,UAAU,0BAA0BH,SAAyB,8BAChEF,EAAAA,IAAA,IAAA,CAAEK,UAAU,kBAAkBH,SAE/B,6DAjBDI,KAAA,MAAA,CAAID,UAAU,mBACbH,SAAA,CAAAF,EAAAA,IAAC,OAAIK,UAAU,OACbH,eAAC,IAAE,CAAAG,UAAU,kDAEdL,EAAAA,IAAA,KAAA,CAAGK,UAAU,0BAA0BH,SAAmB,wBAC1DF,EAAAA,IAAA,IAAA,CAAEK,UAAU,kBAAkBH,SAE/B,+DAkMN,ECpPE0B,EAAkB,WACtB,MAAMC,KAAEA,GAASC,GAAaC,GAAUA,EAAMC,QACtCzD,KAAM0D,GAAYC,EAAiB,CACzClE,KAAM,GACNG,MAAO,GACPE,OAAQ,MAGHP,EAASqE,GAAcjE,EAAAA,SAAS,KAChCH,EAAWqE,GAAgBlE,EAAAA,SAAS,IAErCmE,EAAU,OAAAtC,EAAM,MAAA8B,OAAA,EAAAA,EAAAS,eAAU,EAAAvC,EAAAU,KAAK8B,IAAa,CAChDC,MAAOD,EAAQZ,GACfc,MAAOF,EAAQG,SAGXC,EAAe,MAAAV,OAAA,EAAAA,EAASxB,KAAKmC,IAAW,CAC5CJ,MAAOI,EAAMjB,GACbc,MAAOG,EAAMF,uBAIZG,EAAO,CAAAC,MAAO,iBAAkBC,OAAQ,CAAC,WACxC7C,SAAA,GAACI,KAAA,MAAA,CAAID,UAAU,eACbH,SAAA,GAACF,IAAA,MAAA,CAAIK,UAAU,kBACbH,SAAAC,EAAAH,IAACgD,EAAA,CACCX,UACAY,cAAc,EACdC,YAAY,uBACZ7B,SAAWC,GAAMc,EAAad,EAAEkB,aAGpCxC,IAAC,MAAI,CAAAK,UAAU,kBACbH,SAAAC,EAAAH,IAACgD,EAAA,CACCX,QAASM,EACTM,cAAc,EACdC,YAAY,cACZ7B,SAAWC,GAAMa,EAAWb,EAAEkB,gBAKpCxC,IAACnC,EAAU,CAAAC,UAAkBC,gBAC/B"}