{"version":3,"file":"Database-Ile6r5TP.js","sources":["../../src/module/database/Database.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport {\r\n  Button,\r\n  Dropdown,\r\n  Flex,\r\n  Progress,\r\n  Space,\r\n  Typography,\r\n  message,\r\n} from \"antd\";\r\nimport { useGetDatabaseQuery } from \"../../service/api/database/ApiDatabase\";\r\nimport TableLayout from \"../../components/table/TableLayout\";\r\nimport { ArrowLeftOutlined, EditOutlined } from \"@ant-design/icons\";\r\nimport MainLayout from \"../../components/layout/MainLayout\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\nimport SingleDatabase from \"./SingleDatabase\";\r\n\r\nconst { Text } = Typography;\r\n\r\nconst conicColors = {\r\n  \"0%\": \"#ffccc7\",\r\n  \"50%\": \"#ffe58f\",\r\n  \"100%\": \"#87d068\",\r\n};\r\n\r\nconst Database = () => {\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const formInput = searchParams.get(\"form\");\r\n  const studentid = searchParams.get(\"studentid\");\r\n  const nis = searchParams.get(\"nis\");\r\n  const name = searchParams.get(\"name\");\r\n\r\n  const [page, setPage] = useState(1);\r\n  const [limit, setLimit] = useState(10);\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  const { data, isLoading } = useGetDatabaseQuery({ page, limit, search });\r\n\r\n  //   Functions\r\n  const handleSearch = (value) => {\r\n    setSearch(value);\r\n    setPage(1);\r\n  };\r\n\r\n  const handleTableChange = (pagination) => {\r\n    setPage(pagination.current);\r\n    setLimit(pagination.pageSize);\r\n  };\r\n\r\n  const handleInput = (student) => {\r\n    setSearchParams({\r\n      form: \"teacher-input\",\r\n      studentid: student.student_id,\r\n      nis: student.student_nis,\r\n      name: student.student_name.replace(/\\s+/g, \"-\"),\r\n    });\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: \"No\",\r\n      key: \"no\",\r\n      render: (text, record, index) => (page - 1) * limit + index + 1,\r\n    },\r\n    {\r\n      title: \"Nama Siswa\",\r\n      dataIndex: \"student_name\",\r\n      key: \"student_name\",\r\n      render: (record, text) => (\r\n        <Flex vertical gap={\"small\"}>\r\n          <Text strong>{record}</Text>\r\n          <Space>\r\n            <small>\r\n              {text.student_nis} • {text.student_grade} • {text.student_class}\r\n            </small>\r\n          </Space>\r\n        </Flex>\r\n      ),\r\n    },\r\n    {\r\n      title: \"L/P\",\r\n      dataIndex: \"student_gender\",\r\n      key: \"student_gender\",\r\n      render: (record) => (\r\n        <Text>\r\n          {record === \"P\" ? \"Perempuan\" : record === \"L\" ? \"Laki-laki\" : \"-\"}\r\n        </Text>\r\n      ),\r\n    },\r\n    {\r\n      title: \"Status\",\r\n      dataIndex: \"completeness\",\r\n      key: \"completeness\",\r\n      render: (record) => (\r\n        <Progress percent={record} strokeColor={conicColors} />\r\n      ),\r\n    },\r\n    {\r\n      title: \"Aksi\",\r\n      key: \"student_id\",\r\n      render: (record, text) => (\r\n        <Button\r\n          type=\"primary\"\r\n          icon={<EditOutlined />}\r\n          onClick={() => handleInput(text)}\r\n        >\r\n          Input Data\r\n        </Button>\r\n      ),\r\n    },\r\n  ];\r\n  return (\r\n    <MainLayout title={\"Data Pusat\"} levels={[\"admin\", \"center\", \"teacher\"]}>\r\n      {formInput ? (\r\n        <Flex vertical gap={\"middle\"}>\r\n          <Space>\r\n            <Button\r\n              shape=\"circle\"\r\n              icon={<ArrowLeftOutlined />}\r\n              onClick={() => setSearchParams({})}\r\n            />\r\n            <Typography.Title\r\n              style={{ margin: 0 }}\r\n              level={5}\r\n            >{`Data Siswa ${name?.replace(/-/g, \" \")}`}</Typography.Title>\r\n          </Space>\r\n          <SingleDatabase\r\n            formInput={formInput}\r\n            studentid={studentid}\r\n            nis={nis}\r\n            name={name}\r\n          />\r\n        </Flex>\r\n      ) : (\r\n        <Flex vertical gap={\"middle\"}>\r\n          <Typography.Title level={5}>Managemen Database</Typography.Title>\r\n          <TableLayout\r\n            onSearch={handleSearch}\r\n            isLoading={isLoading}\r\n            columns={columns}\r\n            source={data?.students}\r\n            rowKey=\"student_id\"\r\n            page={page}\r\n            limit={limit}\r\n            totalData={data?.totalData}\r\n            onChange={handleTableChange}\r\n          />\r\n        </Flex>\r\n      )}\r\n    </MainLayout>\r\n  );\r\n};\r\n\r\nexport default Database;\r\n"],"names":["Text","Typography","conicColors","Database","searchParams","setSearchParams","useSearchParams","formInput","get","studentid","nis","name","page","setPage","useState","limit","setLimit","search","setSearch","data","isLoading","useGetDatabaseQuery","columns","title","key","render","text","record","index","dataIndex","Flex","vertical","gap","children","jsx","strong","Space","jsxs","student_nis","student_grade","student_class","Progress","percent","strokeColor","Button","type","icon","EditOutlined","onClick","student","form","student_id","student_name","replace","MainLayout","levels","shape","ArrowLeftOutlined","Title","style","margin","level","SingleDatabase","TableLayout","onSearch","value","source","students","rowKey","totalData","onChange","pagination","current","pageSize"],"mappings":"8pBAiBA,MAAMA,KAAEA,GAASC,EAEXC,EAAc,CAClB,KAAM,UACN,MAAO,UACP,OAAQ,WAGJC,EAAW,KACf,MAAOC,EAAcC,GAAmBC,IAClCC,EAAYH,EAAaI,IAAI,QAC7BC,EAAYL,EAAaI,IAAI,aAC7BE,EAAMN,EAAaI,IAAI,OACvBG,EAAOP,EAAaI,IAAI,SAEvBI,EAAMC,GAAWC,EAAAA,SAAS,IAC1BC,EAAOC,GAAYF,EAAAA,SAAS,KAC5BG,EAAQC,GAAaJ,EAAAA,SAAS,KAE/BK,KAAEA,YAAMC,GAAcC,EAAoB,CAAET,OAAMG,QAAOE,WAsBzDK,EAAU,CACd,CACEC,MAAO,KACPC,IAAK,KACLC,OAAQ,CAACC,EAAMC,EAAQC,KAAWhB,EAAO,GAAKG,EAAQa,EAAQ,GAEhE,CACEL,MAAO,aACPM,UAAW,eACXL,IAAK,eACLC,OAAQ,CAACE,EAAQD,WACdI,EAAA,CAAKC,UAAQ,EAACC,IAAK,QAClBC,SAAA,CAAAC,EAAAA,IAAClC,EAAA,CAAKmC,QAAM,EAAEF,SAAAN,IACdO,EAAAA,IAACE,EAAA,CACCH,SAAAI,EAAAA,KAAC,QAAA,CACEJ,SAAA,CAAAP,EAAKY,YAAY,MAAIZ,EAAKa,cAAc,MAAIb,EAAKc,uBAM5D,CACEjB,MAAO,MACPM,UAAW,iBACXL,IAAK,iBACLC,OAASE,GACPO,MAAClC,EAAA,CACEiC,SAAW,MAAXN,EAAiB,YAAyB,MAAXA,EAAiB,YAAc,OAIrE,CACEJ,MAAO,SACPM,UAAW,eACXL,IAAK,eACLC,OAASE,GACPO,MAACO,GAASC,QAASf,EAAQgB,YAAazC,KAG5C,CACEqB,MAAO,OACPC,IAAK,aACLC,OAAQ,CAACE,EAAQD,IACfQ,EAAAA,IAACU,EAAA,CACCC,KAAK,UACLC,WAAOC,EAAA,IACPC,QAAS,KAvDG,IAACC,EACnB5C,EAAgB,CACd6C,KAAM,gBACNzC,WAHiBwC,EAuDcvB,GApDZyB,WACnBzC,IAAKuC,EAAQX,YACb3B,KAAMsC,EAAQG,aAAaC,QAAQ,OAAQ,QAmDxCpB,SAAA,iBAMP,aACGqB,EAAA,CAAW/B,MAAO,aAAcgC,OAAQ,CAAC,QAAS,SAAU,WAC1DtB,aACCI,KAACP,EAAA,CAAKC,UAAQ,EAACC,IAAK,SAClBC,SAAA,CAAAI,OAACD,EAAA,CACCH,SAAA,CAAAC,EAAAA,IAACU,EAAA,CACCY,MAAM,SACNV,WAAOW,EAAA,IACPT,QAAS,IAAM3C,EAAgB,CAAA,KAEjC6B,EAAAA,IAACjC,EAAWyD,MAAX,CACCC,MAAO,CAAEC,OAAQ,GACjBC,MAAO,EACP5B,SAAA,cAActB,GAAM0C,QAAQ,KAAM,YAEtCnB,EAAAA,IAAC4B,EAAA,CACCvD,YACAE,YACAC,MACAC,YAIJ0B,EAAAA,KAACP,EAAA,CAAKC,UAAQ,EAACC,IAAK,SAClBC,SAAA,CAAAC,EAAAA,IAACjC,EAAWyD,MAAX,CAAiBG,MAAO,EAAG5B,SAAA,uBAC5BC,EAAAA,IAAC6B,EAAA,CACCC,SAlGYC,IACpB/C,EAAU+C,GACVpD,EAAQ,IAiGAO,YACAE,UACA4C,OAAQ/C,GAAMgD,SACdC,OAAO,aACPxD,OACAG,QACAsD,UAAWlD,GAAMkD,UACjBC,SArGiBC,IACzB1D,EAAQ0D,EAAWC,SACnBxD,EAASuD,EAAWE"}