import{r as l,b2 as f,j as e,e as N,b3 as y,b4 as v}from"./index-Bkq01jzn.js";import{L as S}from"./Layout-uGiKgFPI.js";import{T}from"./Table-BJdfPgdp.js";const w=({detail:a,setDetail:t})=>{const[d,c]=l.useState(""),[o,r]=l.useState(""),[b,{isLoading:g,isSuccess:m,isError:i,reset:h}]=f(),j=x=>{x.preventDefault();const p={id:d||"",name:o};N.promise(b(p).unwrap().then(s=>s.message),{loading:"Memuat data...",success:s=>s,error:s=>s.data.message})},u=()=>{c(""),r(""),t({})};return l.useEffect(()=>{(m||i)&&(u(),h())},[m,i]),l.useEffect(()=>{a&&(c(a.id),r(a.name))},[a]),e.jsxs("form",{onSubmit:j,className:"rounded border bg-white p-2 d-flex flex-column gap-2",children:[e.jsx("p",{className:"m-0 h6",children:"Jenis Penilaian"}),e.jsx("input",{type:"text",name:"name",id:"name",className:"form-control",placeholder:"Nama Ujian",value:o||"",onChange:x=>r(x.target.value)}),e.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-warning",onClick:u,children:"Batal"}),e.jsx("button",{type:"submit",className:"btn btn-sm btn-success",children:"Simpan"})]})]})},D=({setDetail:a})=>{const[t,d]=l.useState(1),[c,o]=l.useState(10),[r,b]=l.useState(""),{data:g={},isLoading:m}=y({page:t,limit:c,search:r}),{types:i=[],totalData:h,totalPages:j}=g,[u,{isLoading:x}]=v(),p=s=>{N.promise(u(s).unwrap().then(n=>n.message),{loading:"Memuat data...",success:n=>n,error:n=>n.data.message})};return e.jsx(T,{isLoading:m,page:t,setPage:d,totalPages:j,limit:c,setLimit:o,setSearch:b,totalData:h,children:e.jsxs("table",{className:"mb-0 table table-hover table-striped table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:"No"}),e.jsx("td",{className:"text-center",children:"Penilaian"}),e.jsx("td",{className:"text-center",children:"Aksi"})]})}),e.jsx("tbody",{children:i==null?void 0:i.map((s,n)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center align-middle",children:(t-1)*c+n+1}),e.jsx("td",{className:"align-middle",children:s.name}),e.jsx("td",{className:"align-middle",children:e.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[e.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>a(s),children:e.jsx("i",{className:"bi bi-pencil-square"})}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>p(s.id),children:e.jsx("i",{className:"bi bi-trash"})})]})})]},n))})]})})},k=()=>{const[a,t]=l.useState({});return e.jsx(S,{title:"Penilaian Hafalan",levels:["tahfiz"],children:e.jsxs("div",{className:"row g-2",children:[e.jsx("div",{className:"col-lg-3 col-12",children:e.jsx(w,{detail:a,setDetail:t})}),e.jsx("div",{className:"col-lg-9 col-12",children:e.jsx(D,{setDetail:t})})]})})};export{k as default};
