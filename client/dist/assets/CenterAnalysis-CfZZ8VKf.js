import{x as e,j as t,t as a,y as n,a as i,z as s,A as r,h as l}from"./index-cuJKKqdJ.js";import{c}from"./vendor-BcjG7WjF.js";import{T as o}from"./TableLayout-DqFZf30w.js";import{S as d}from"./index-giWgCR4h.js";import{A as m}from"./index-Ckwhbos9.js";import{F as u}from"./Table-Cp1ErZG3.js";import"./Pagination-BDRZv-MK.js";const{Text:h,Link:x}=a,_=()=>{const[a,n]=c.useState(1),[i,s]=c.useState(10),[r,l]=c.useState(""),[m,u]=c.useState(""),[_,j]=c.useState(""),{data:g,isLoading:y}=e({page:a,limit:i,search:r,family_age:m,family_gender:_}),{results:p=[],totalData:f,totalPages:v}=g||{},k=[{title:"No",key:"no",render:(e,t,n)=>(a-1)*i+n+1},{title:"Nama Siswa",key:"student_name",render:(e,a)=>t.jsxs(d,{direction:"vertical",size:"small",children:[t.jsx(h,{children:a.student_name}),t.jsx("small",{children:a.nis})]})},{title:"Nama Keluarga",key:"family_name",render:(e,a)=>t.jsxs(d,{direction:"vertical",size:"small",children:[t.jsx(h,{children:a.family_name}),t.jsxs("span",{children:["P"===a.family_gender?t.jsx(h,{type:"success",children:"Perempuan"}):t.jsx(h,{type:"success",children:"Laki Laki"}),"- ",t.jsxs(h,{strong:!0,children:[a.family_age," thn"]})]})]})},{title:"Orang Tua",key:"parent",render:(e,a)=>{const n=a.father_phone?`62${a.father_phone.substring(1)}`:"",i=a.mother_phone?`62${a.mother_phone.substring(1)}`:"";return t.jsxs(d,{children:[t.jsxs(d,{direction:"vertical",size:"small",children:[t.jsx(h,{children:a.father_name}),t.jsx("small",{children:t.jsx(x,{href:`https://wa.me/${n}`,target:"_blank",children:a.father_phone})})]}),t.jsxs(d,{direction:"vertical",size:"small",children:[t.jsx(h,{children:a.mother_name}),t.jsx("small",{children:t.jsx(x,{href:`https://wa.me/${i}`,target:"_blank",children:a.mother_phone})})]})]})}}];return t.jsx(o,{onSearch:e=>{l(e),n(1)},isLoading:y,columns:k,source:p,rowKey:"family_id",page:a,limit:i,totalData:f,onChange:e=>{n(e.current),s(e.pageSize)}})},j=()=>t.jsx("div",{children:"Demographic"}),{TabPane:g}=r,{Title:y}=a,p=[{title:"Nama Provinsi",dataIndex:"province_name",key:"province_name",sorter:(e,t)=>e.province_name.length-t.province_name.length},{title:"Jumlah Siswa",dataIndex:"student_count",key:"student_count",sorter:(e,t)=>e.student_count-t.student_count,align:"right"}],f=[{title:"Nama Kota/Kabupaten",dataIndex:"city_name",key:"city_name"},{title:"Provinsi",dataIndex:"province_name",key:"province_name"},{title:"Jumlah Siswa",dataIndex:"student_count",key:"student_count",sorter:(e,t)=>e.student_count-t.student_count,align:"right"}],v=[{title:"Nama Kecamatan",dataIndex:"district_name",key:"district_name"},{title:"Kota/Kabupaten",dataIndex:"city_name",key:"city_name"},{title:"Jumlah Siswa",dataIndex:"student_count",key:"student_count",sorter:(e,t)=>e.student_count-t.student_count,align:"right"}],k=[{title:"Nama Desa/Kelurahan",dataIndex:"village_name",key:"village_name"},{title:"Kecamatan",dataIndex:"district_name",key:"district_name"},{title:"Kota/Kabupaten",dataIndex:"city_name",key:"city_name"},{title:"Jumlah Siswa",dataIndex:"student_count",key:"student_count",sorter:(e,t)=>e.student_count-t.student_count,align:"right"}],b=()=>{const{data:e,isLoading:a,isError:l}=n();return a?t.jsx(i,{title:t.jsx(y,{level:4,children:"Distribusi Geografis Siswa"}),children:t.jsx(s,{active:!0,paragraph:{rows:12}})}):l?t.jsx(i,{title:t.jsx(y,{level:4,children:"Distribusi Geografis Siswa"}),children:t.jsx(m,{message:"Error",description:"Gagal memuat data geografis. Silakan coba lagi nanti.",type:"error",showIcon:!0})}):t.jsx(i,{title:t.jsx(y,{level:4,children:"Distribusi Geografis Siswa"}),children:t.jsxs(r,{defaultActiveKey:"1",type:"card",children:[t.jsx(g,{tab:"Provinsi",children:t.jsx(u,{dataSource:e?.provinces,columns:p,rowKey:"province_name",pagination:!1,scroll:{x:"max-content"}})},"1"),t.jsx(g,{tab:"Kota/Kabupaten",children:t.jsx(u,{dataSource:e?.cities,columns:f,rowKey:"city_name",pagination:!1,scroll:{x:"max-content"}})},"2"),t.jsx(g,{tab:"Kecamatan",children:t.jsx(u,{dataSource:e?.districts,columns:v,rowKey:e=>`${e.district_name}-${e.city_name}`,pagination:!1,scroll:{x:"max-content"}})},"3"),t.jsx(g,{tab:"Desa/Kelurahan",children:t.jsx(u,{dataSource:e?.villages,columns:k,rowKey:e=>`${e.village_name}-${e.district_name}`,pagination:!1,scroll:{x:"max-content"}})},"4")]})})},K=()=>t.jsx(l,{title:"Analisa Pasar",levels:["center"],children:t.jsx(r,{defaultActiveKey:"1",centered:!0,items:[{label:"Potensial Analisis",key:"1",children:t.jsx(_,{})},{label:"Demografi",key:"2",children:t.jsx(j,{})},{label:"Georafi",key:"3",children:t.jsx(b,{})}]})});export{K as default};
