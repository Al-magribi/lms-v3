import{aY as e,aT as a,aZ as t,j as s,d as l,a_ as d}from"./index-BspV1biE.js";import{b as i}from"./vendor-CpHG0K6b.js";import{L as n}from"./Layout-ORp93zo3.js";import{S as r}from"./react-select.esm-CmDmI0uS.js";const c=({detail:d,setDetail:n})=>{const{data:c}=e(),{data:m}=a({page:"",limit:"",search:""}),[o,{isLoading:h,isSuccess:x,isError:j,reset:u}]=t(),[g,b]=i.useState({id:d?d.id:"",grade_id:"",juz_ids:[]});i.useEffect((()=>{d&&b({id:d.id||"",grade_id:d.grade_id||"",juz_ids:d.juz_id?[{value:d.juz_id,label:d.juz_name||`Juz ${d.juz_id}`}]:[]})}),[d]),i.useEffect((()=>{(j||x)&&(u(),n({}),b({id:"",grade_id:"",juz_ids:[]}))}),[x,j]);const p=(null==m?void 0:m.map((e=>({value:e.id,label:e.name}))))||[];return s.jsxs("form",{onSubmit:e=>{e.preventDefault();const a=g.juz_ids.map((e=>({id:g.id,gradeId:g.grade_id,juzId:e.value}))).map((e=>o(e).unwrap().then((e=>e.message))));l.promise(Promise.all(a),{loading:"Memuat data...",success:e=>e[0],error:e=>e.data.message})},className:"rounded border bg-white p-2 d-flex flex-column gap-2",children:[s.jsx("p",{className:"m-0 h6",children:"Target Hafalan"}),s.jsxs("select",{className:"form-select",value:g.grade_id,onChange:e=>b({...g,grade_id:e.target.value}),children:[s.jsx("option",{value:"",hidden:!0,children:"Pilih Tingkat"}),null==c?void 0:c.map((e=>s.jsx("option",{value:e.id,children:e.name},e.id)))]}),s.jsx(r,{isMulti:!0,options:p,value:g.juz_ids,onChange:e=>{b((a=>({...a,juz_ids:e||[]})))},className:"mb-2",placeholder:"Pilih Juz"}),s.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[s.jsx("button",{type:"button",className:"btn btn-sm  btn-warning",onClick:()=>{n({}),b({id:"",grade_id:"",juz_ids:[]})},children:"Batal"}),s.jsx("button",{type:"submit",className:"btn btn-sm btn-success",disabled:h,children:"Simpan"})]})]})},m=()=>{const{data:e}=d();return s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"mb-0 table table-bordered table-hover",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-center",children:"Tingkat"}),s.jsx("th",{className:"text-center",children:"Juz"}),s.jsx("th",{className:"text-center",children:"Ayat"}),s.jsx("th",{className:"text-center",children:"Baris"}),s.jsx("th",{className:"text-center",children:"Total Ayat"}),s.jsx("th",{className:"text-center",children:"Total Baris"}),s.jsx("th",{className:"text-center",children:"Aksi"})]})}),s.jsx("tbody",{children:(null==e?void 0:e.length)>0?null==e?void 0:e.map(((e,a)=>s.jsx(i.Fragment,{children:e.target.map(((a,t)=>s.jsxs("tr",{children:[0===t&&s.jsx("th",{rowSpan:e.target.length,className:"text-center align-middle",children:e.grade}),s.jsx("td",{className:"text-center",children:a.juz}),s.jsx("td",{className:"text-center",children:a.total_ayat}),s.jsx("td",{className:"text-center",children:a.total_line}),0===t&&s.jsx("td",{rowSpan:e.target.length,className:"text-center align-middle",children:e.total_ayat}),0===t&&s.jsx("td",{rowSpan:e.target.length,className:"text-center align-middle",children:e.total_line}),s.jsx("td",{className:"text-center",children:s.jsx("div",{className:"d-flex justify-content-center gap-2",children:s.jsx("button",{className:"btn btn-sm btn-danger",children:s.jsx("i",{className:"bi bi-trash"})})})})]},t)))},a))):s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"text-center",children:"Tidak ada data tersedia"})})})]})})},o=()=>{const[e,a]=i.useState({});return s.jsx(n,{title:"Target Hafalan",levels:["tahfiz"],children:s.jsxs("div",{className:"row g-2",children:[s.jsx("div",{className:"col-lg-3 col-12",children:s.jsx(c,{detail:e,setDetail:a})}),s.jsx("div",{className:"col-lg-9 col-12",children:s.jsx(m,{})})]})})};export{o as default};
//# sourceMappingURL=TahfizTarget-CyGiHp8y.js.map
