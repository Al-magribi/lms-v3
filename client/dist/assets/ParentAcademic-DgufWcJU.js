import{as as e,l as s,av as a,j as t,F as r,t as i,n as l,au as n,b as d,c,D as o,a0 as m,a as j,m as x,B as h,aw as u,R as p,C as g,h as f,y}from"./index-BEdDmCLf.js";import{c as b}from"./vendor-BcjG7WjF.js";import{G as v}from"./index-BJha7fjs.js";import{S as I,E as S}from"./Pagination-B_aQ4HIE.js";import{A as k}from"./index-o2YcaBQV.js";import{R as F}from"./ReadOutlined-BSdZW908.js";import{R as w}from"./TeamOutlined-Cbb34YxN.js";import{R as z}from"./CalendarOutlined-CkPVC32C.js";import{C as T}from"./Collapse-BLclnWFE.js";import{L as A}from"./index-B4OBkDbR.js";import{S as C}from"./index--yz9SaDy.js";import{R as O}from"./FallOutlined-DV0ugDYO.js";import{R as D}from"./BookOutlined-BZg_4GkG.js";const{Title:L,Text:B,Paragraph:P}=i,{useBreakpoint:R}=v,G=({detail:e})=>{const s=e?.[0]?.attendance||[],a=e?.[1]?.attitude||[],r=e?.[2]||{summative:[],formative:[]};return t.jsxs(p,{gutter:[16,16],children:[t.jsx(g,{xs:24,md:12,lg:6,children:t.jsx(j,{size:"small",title:"Attendance",children:t.jsx(A,{dataSource:s,renderItem:e=>{const s=Object.keys(e)[0],a=e[s];return t.jsxs(A.Item,{children:[t.jsx(B,{style:{textTransform:"capitalize"},children:s}),t.jsx(B,{strong:!0,children:"presentase"===s?`${a}%`:a})]})}})})}),t.jsx(g,{xs:24,md:12,lg:6,children:t.jsx(j,{size:"small",title:"Attitude",children:t.jsx(A,{dataSource:a,renderItem:e=>{const s=Object.keys(e)[0],a=e[s];return t.jsxs(A.Item,{children:[t.jsx(B,{style:{textTransform:"capitalize"},children:s}),t.jsx(C,{value:a,precision:2,valueStyle:{fontSize:"1rem"}})]})}})})}),t.jsx(g,{xs:24,md:12,lg:8,children:t.jsx(j,{size:"small",title:"Summative",children:t.jsx(A,{dataSource:r.summative,renderItem:e=>{const s=Object.keys(e)[0],a=e[s];return t.jsxs(A.Item,{children:[t.jsx(B,{style:{textTransform:"capitalize"},children:s}),t.jsx(C,{value:a,precision:2,valueStyle:{fontSize:"1rem"}})]})}})})}),t.jsx(g,{xs:24,md:12,lg:4,children:t.jsx(j,{size:"small",title:"Formative",children:t.jsx(A,{dataSource:r.formative,renderItem:e=>t.jsx(A.Item,{children:e}),locale:{emptyText:"-"}})})})]})},K=()=>{const i=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],p=i.map(e=>({label:e,value:e})),[g,f]=b.useState(null),[y,v]=b.useState(!1),[K,$]=b.useState(null),{user:N}=e(e=>e.auth),[H]=s.useForm(),J=R(),M=J.xs,E=N?.student_id,V=N?.periode;b.useEffect(()=>{const e=(new Date).getMonth(),s=i[0===e?11:e-1];f(s),H.setFieldsValue({month:s})},[H]);const{data:_,error:U,isFetching:W}=a({studentId:E,month:g,periode:V},{skip:!E||!g||!V}),q=_?.[0],Q=()=>{v(!1),$(null)},X=e=>t.jsx(A,{itemLayout:"vertical",dataSource:e,renderItem:e=>t.jsx(A.Item,{children:t.jsxs(j,{children:[t.jsxs(r,{justify:"space-between",align:"center",wrap:"wrap",gap:"small",children:[t.jsxs("div",{children:[t.jsx(L,{level:5,style:{marginBottom:0},children:e.name}),t.jsxs(B,{type:"secondary",children:[t.jsx(d,{})," Guru: ",e.teacher]})]}),t.jsx(C,{title:"Nilai Akhir",value:e.score,precision:2,valueStyle:{color:e.score>=75?"#3f8600":"#cf1322"},prefix:e.score>=75?t.jsx(u,{}):t.jsx(O,{})})]}),e.chapters&&e.chapters.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs(o,{orientation:"left",plain:!0,children:[t.jsx(D,{})," Chapter Bulan Ini"]}),t.jsx(A,{size:"small",dataSource:e.chapters,renderItem:e=>t.jsx(A.Item,{children:e.name})})]}),M?t.jsx(h,{type:"primary",ghost:!0,style:{marginTop:"1rem"},onClick:()=>(e=>{$(e),v(!0)})(e),children:"Lihat Detail Penilaian"}):t.jsxs(t.Fragment,{children:[t.jsx(o,{orientation:"left",plain:!0,children:"Detail Penilaian"}),t.jsx(G,{detail:e.detail}),e.note&&t.jsxs(t.Fragment,{children:[t.jsx(o,{orientation:"left",plain:!0,children:"Catatan Guru"}),t.jsxs(P,{italic:!0,children:['"',e.note,'"']})]})]})]})},`${e.name}-${e.teacher}`)});return t.jsxs(r,{vertical:!0,gap:"middle",children:[t.jsx(s,{form:H,layout:"vertical",children:t.jsx(s.Item,{name:"month",label:t.jsx(L,{level:4,style:{margin:0},children:"Pilih Bulan Laporan"}),children:t.jsx(I,{placeholder:"Pilih Bulan",onChange:e=>f(e),options:p,style:{width:300}})})}),W&&t.jsx("div",{style:{textAlign:"center",marginTop:50},children:t.jsx(l,{size:"large"})}),U&&t.jsx(k,{message:"Terjadi Kesalahan",description:U?.data?.message||"Gagal memuat data.",type:"error",showIcon:!0}),!W&&q&&t.jsxs(t.Fragment,{children:[t.jsxs(n,{bordered:!0,column:J.md?2:1,size:"small",children:[t.jsx(n.Item,{label:t.jsxs(t.Fragment,{children:[t.jsx(d,{})," Nama Siswa"]}),span:J.md?2:1,children:t.jsxs(B,{strong:!0,children:[q.name," (",q.nis,")"]})}),t.jsx(n.Item,{label:t.jsxs(t.Fragment,{children:[t.jsx(c,{})," Homebase"]}),children:q.homebase}),t.jsxs(n.Item,{label:t.jsxs(t.Fragment,{children:[t.jsx(F,{})," Kelas"]}),children:[q.grade," - ",q.class]}),t.jsx(n.Item,{label:t.jsxs(t.Fragment,{children:[t.jsx(w,{})," Wali Kelas"]}),children:q.teacher_homeroom}),t.jsx(n.Item,{label:t.jsxs(t.Fragment,{children:[t.jsx(z,{})," Periode Laporan"]}),children:t.jsxs(B,{strong:!0,children:[q.periode," - ",q.month]})})]}),t.jsx(o,{}),t.jsx(T,{accordion:!0,defaultActiveKey:["0"],ghost:!0,items:q.category.map((e,s)=>({key:s,label:t.jsx(L,{level:5,children:e.name}),children:"Diniyah"===e.name&&e.branch?t.jsx(T,{items:e.branch.map((e,s)=>({key:s,label:t.jsxs(r,{justify:"space-between",style:{width:"100%"},children:[t.jsx(B,{strong:!0,children:e.name}),t.jsxs(m,{color:"blue",children:["Rata-rata Nilai: ",e.score]})]}),children:X(e.subjects)}))}):X(e.subjects)}))})]}),!W&&!q&&g&&!U&&t.jsx(j,{children:t.jsx(S,{description:"Data laporan untuk bulan yang dipilih tidak tersedia."})}),t.jsx(x,{title:t.jsxs(L,{level:4,children:["Detail Laporan: ",K?.name||""]}),open:y,onCancel:Q,footer:[t.jsx(h,{onClick:Q,children:"Tutup"},"back")],width:1e3,children:K&&t.jsxs(r,{vertical:!0,gap:"middle",children:[t.jsx(o,{orientation:"left",plain:!0,children:"Detail Penilaian"}),t.jsx(G,{detail:K.detail}),K.note&&t.jsxs(t.Fragment,{children:[t.jsx(o,{orientation:"left",plain:!0,children:"Catatan Guru"}),t.jsxs(P,{italic:!0,children:['"',K.note,'"']})]})]})})]})},$=()=>t.jsx(k,{type:"info",showIcon:!0,message:"Laporan Semester",description:"Halaman ini masih dalam tahap pengembangan"}),N=()=>{const{user:s}=e(e=>e.auth),a=[{label:"Bulanan",key:"1",children:t.jsx(K,{})},{label:"Semester",key:"2",children:t.jsx($,{})}];return t.jsxs(f,{title:"Laporan Akademik",levels:["parent"],children:[t.jsx(i.Title,{level:5,children:`Laporan Akademik ${s?.student}`}),t.jsx(y,{centered:!0,defaultActiveKey:"1",items:a})]})};export{N as default};
