{"version":3,"file":"AdminMajor-BLUb0xzn.js","sources":["../../src/page/admin/major/Form.jsx","../../src/page/admin/major/TableData.jsx","../../src/page/admin/major/AdminMajor.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useAddMajorMutation } from \"../../../controller/api/admin/ApiMajor\";\r\nimport { toast } from \"react-hot-toast\";\r\n\r\nconst Form = ({ detail, setDetail }) => {\r\n  const [id, setId] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n\r\n  const [addMajor, { isSuccess, isLoading, error, reset }] =\r\n    useAddMajorMutation();\r\n\r\n  const addHandler = (e) => {\r\n    e.preventDefault();\r\n\r\n    const data = { id, name };\r\n\r\n    toast.promise(\r\n      addMajor(data)\r\n        .unwrap()\r\n        .then((res) => res.message),\r\n      {\r\n        loading: \"Meyimpan data...\",\r\n        success: (message) => message,\r\n        error: (err) => err.data.message,\r\n      }\r\n    );\r\n  };\r\n\r\n  const cancel = () => {\r\n    setDetail({});\r\n    setId(\"\");\r\n    setName(\"\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isSuccess) {\r\n      reset();\r\n      setName(\"\");\r\n      setId(\"\");\r\n    }\r\n\r\n    if (error) {\r\n      reset();\r\n    }\r\n  }, [isSuccess, error]);\r\n\r\n  useEffect(() => {\r\n    if (detail) {\r\n      setId(detail.id);\r\n      setName(detail.name);\r\n    }\r\n  }, [detail]);\r\n\r\n  return (\r\n    <form onSubmit={addHandler} className=\"bg-white rounded border p-3\">\r\n      <div className=\"form-floating\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"major\"\r\n          id=\"major\"\r\n          className=\"form-control\"\r\n          placeholder=\"Jurusan\"\r\n          required\r\n          value={name || \"\"}\r\n          onChange={(e) => setName(e.target.value)}\r\n        />\r\n\r\n        <label htmlFor=\"major\">Nama Jurusan</label>\r\n      </div>\r\n      <div className=\"d-flex justify-content-end gap-2 mt-2\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-sm btn-warning\"\r\n          onClick={cancel}\r\n        >\r\n          Batal\r\n        </button>\r\n        <button\r\n          type=\"submit\"\r\n          className=\"btn btn-sm btn-success\"\r\n          disabled={isLoading}\r\n        >\r\n          Simpan\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n","import { useEffect, useState } from \"react\";\r\nimport Table from \"../../../components/table/Table\";\r\nimport {\r\n  useDeleteMajorMutation,\r\n  useGetMajorQuery,\r\n} from \"../../../controller/api/admin/ApiMajor\";\r\nimport toast from \"react-hot-toast\";\r\n\r\nconst columns = [\r\n  { label: \"No\" },\r\n  { label: \"Satuan\" },\r\n  { label: \"Jurusan\" },\r\n  { label: \"aksi\" },\r\n];\r\n\r\nconst TableData = ({ setDetail }) => {\r\n  const [page, setPage] = useState(1);\r\n  const [limit, setLimit] = useState(10);\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  const { data: rawData = {}, isLoading: dataLoading } = useGetMajorQuery({\r\n    page,\r\n    limit,\r\n    search,\r\n  });\r\n  const { majors = [], totalData, totalPages } = rawData;\r\n  const [deleteMajor, { isSuccess, isLoading, error, reset }] =\r\n    useDeleteMajorMutation();\r\n\r\n  const deleteHandler = (id) => {\r\n    const confirm = window.confirm(\r\n      \"Apakah anda yakin ingin menghapus data jurusan ini dan semua data yang terkait dengan jurusan ini?\"\r\n    );\r\n    if (confirm) {\r\n      toast.promise(\r\n        deleteMajor(id)\r\n          .unwrap()\r\n          .then((res) => res.message),\r\n        {\r\n          loading: \"Memproses...\",\r\n          success: (message) => message,\r\n          error: (err) => err.data.message,\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isSuccess) {\r\n      reset();\r\n    }\r\n\r\n    if (error) {\r\n      reset();\r\n    }\r\n  }, [isSuccess, error]);\r\n\r\n  return (\r\n    <Table\r\n      page={page}\r\n      setPage={setPage}\r\n      setLimit={setLimit}\r\n      setSearch={setSearch}\r\n      totalData={totalData}\r\n      totalPages={totalPages}\r\n      isLoading={dataLoading}\r\n    >\r\n      <table className=\"table table-striped table-hover mb-0\">\r\n        <thead className=\"table-primary align-middle\">\r\n          <tr>\r\n            {columns.map((item) => (\r\n              <th key={item.label} className=\"text-center\">\r\n                {item.label}\r\n              </th>\r\n            ))}\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {majors?.length > 0 ? (\r\n            majors?.map((item, i) => (\r\n              <tr key={i}>\r\n                <td className=\"text-center align-middle\">\r\n                  {(page - 1) * limit + i + 1}\r\n                </td>\r\n                <td className=\"align-middle\">{item.homebase}</td>\r\n                <td className=\"align-middle\">{item.name}</td>\r\n                <td className=\"text-center align-middle\">\r\n                  <div className=\"d-flex justify-content-center gap-2\">\r\n                    <button\r\n                      className=\"btn btn-sm btn-warning\"\r\n                      onClick={() => setDetail(item)}\r\n                    >\r\n                      <i className=\"bi bi-pencil-square\"></i>\r\n                    </button>\r\n                    <button\r\n                      className=\"btn btn-sm btn-danger\"\r\n                      disabled={isLoading}\r\n                      onClick={() => deleteHandler(item.id)}\r\n                    >\r\n                      <i className=\"bi bi-folder-minus\"></i>\r\n                    </button>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            ))\r\n          ) : (\r\n            <tr>\r\n              <td colSpan={4} className=\"text-center text-muted py-3\">\r\n                Data tidak tersedia\r\n              </td>\r\n            </tr>\r\n          )}\r\n        </tbody>\r\n      </table>\r\n    </Table>\r\n  );\r\n};\r\n\r\nexport default TableData;\r\n","import { useState } from \"react\"\r\nimport Layout from \"../../../components/layout/Layout\"\r\nimport Form from \"./Form\"\r\nimport TableData from \"./TableData\"\r\n\r\nconst AdminMajor = () => {\r\n\tconst [detail, setDetail] = useState(\"\")\r\n\treturn (\r\n\t\t<Layout title={\"Jurusan\"} levels={[\"admin\"]}>\r\n\t\t\t<div className='row g-2'>\r\n\t\t\t\t<div className='col-lg-3 col-2'>\r\n\t\t\t\t\t<Form detail={detail} setDetail={setDetail} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='col-lg-9 col-2'>\r\n\t\t\t\t\t<TableData setDetail={setDetail} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Layout>\r\n\t)\r\n}\r\n\r\nexport default AdminMajor\r\n"],"names":["Form","detail","setDetail","id","setId","useState","name","setName","addMajor","isSuccess","isLoading","error","reset","useAddMajorMutation","jsxs","useEffect","onSubmit","e","preventDefault","data","c","promise","unwrap","then","res","message","loading","success","err","className","children","jsxRuntimeExports","jsx","type","placeholder","required","value","onChange","target","htmlFor","onClick","disabled","columns","label","TableData","page","setPage","limit","setLimit","search","setSearch","rawData","dataLoading","useGetMajorQuery","majors","totalData","totalPages","deleteMajor","useDeleteMajorMutation","Table","map","item","length","i","homebase","deleteHandler","window","confirm","Vt","colSpan","AdminMajor","Layout","title","levels"],"mappings":"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"}