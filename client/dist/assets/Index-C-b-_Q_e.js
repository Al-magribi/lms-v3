import{u as P,a as M,r as i,b as D,c as R,d as U,j as e,e as A,s as w}from"./index-Bkq01jzn.js";const q=()=>{const h=P();M();const[s,l]=i.useState("none"),[u,m]=i.useState(!1),[n,c]=i.useState(""),[p,N]=i.useState(""),[g,y]=i.useState(!1),[v,{isLoading:b,data:F}]=D(),[S,{isLoading:f}]=R(),{user:d,isSignin:j}=U(a=>a.auth),k=()=>{y(a=>!a)},o=a=>{l(a),c("")},C=()=>{l(""),m(!0),c("")},z=()=>{l("none"),m(!1),c("")},x={center:"/center-dashboard",admin:"/admin-dashboard",student:"/siswa-dashboard",teacher:"/guru-dashboard",parent:"/wali-dashboard",tahfiz:"/tahfiz-dashboard"},E=async a=>{a.preventDefault();const L={password:p,...s==="student"?{nis:n}:s==="teacher"?{username:n}:s==="parent"?{name:n}:{email:n}};await A.promise(v(L).unwrap(),{loading:"Sedang masuk...",success:async r=>{h(w(r.user));try{const t=await S().unwrap();h(w(t)),window.location.href=x[t.level]||"/"}catch(t){console.error("Error loading user data:",t),window.location.href=x[r.user.level]||"/"}return r.message},error:r=>{var t;return(t=r.data)==null?void 0:t.message}})};return i.useEffect(()=>{d.level&&j&&(window.location.href=x[d.level])},[d,j]),e.jsxs("div",{children:[e.jsx("div",{className:"area",children:e.jsxs("ul",{className:"circles",children:[e.jsx("li",{}),e.jsx("li",{}),e.jsx("li",{}),e.jsx("li",{}),e.jsx("li",{}),e.jsx("li",{}),e.jsx("li",{}),e.jsx("li",{}),e.jsx("li",{}),e.jsx("li",{})]})}),e.jsxs("div",{className:"d-flex align-items-center justify-content-center flex-column gap-3",style:{height:"100vh"},children:[e.jsx("img",{src:"/logo.png",alt:"logo",style:{height:120,width:120,marginBottom:"1rem"}}),s==="none"&&e.jsxs("div",{className:"d-flex flex-wrap justify-content-center gap-3",children:[e.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>o("admin"),children:e.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[e.jsx("i",{className:"bi bi-person-badge-fill transition-icon",style:{fontSize:"2rem"}}),e.jsx("h5",{className:"card-title mb-0",children:"Admin"})]})}),e.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>o("teacher"),children:e.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[e.jsx("i",{className:"bi bi-person-workspace transition-icon",style:{fontSize:"2rem"}}),e.jsx("h5",{className:"card-title mb-0",children:"Guru"})]})}),e.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>o("student"),children:e.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[e.jsx("i",{className:"bi bi-mortarboard-fill transition-icon",style:{fontSize:"2rem"}}),e.jsx("h5",{className:"card-title mb-0",children:"Siswa"})]})}),e.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>o("parent"),children:e.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[e.jsx("i",{className:"bi bi-people-fill transition-icon",style:{fontSize:"2rem"}}),e.jsx("h5",{className:"card-title mb-0",children:"Wali Murid"})]})}),e.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:C,children:e.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[e.jsx("i",{className:"bi bi-person-plus-fill transition-icon",style:{fontSize:"2rem"}}),e.jsx("h5",{className:"card-title mb-0",children:"Pendaftaran"})]})})]}),s!=="none"&&!u&&e.jsxs("form",{style:{width:300},className:"d-flex flex-column gap-3",onSubmit:E,children:[e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:`bi ${s==="student"?"bi-person-badge":s==="teacher"?"bi-person-workspace":"bi-envelope"}`})}),e.jsx("input",{type:s==="admin"||s==="parent"?"email":"text",placeholder:s==="student"?"NIS":s==="teacher"?"USERNAME":"EMAIL",value:n,onChange:a=>c(a.target.value),required:!0,className:"form-control"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"bi bi-lock-fill"})}),e.jsx("input",{type:g?"text":"password",placeholder:"Password",className:"form-control",value:p,onChange:a=>N(a.target.value),required:!0})]}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"flexCheckDefault",checked:g,onChange:k}),e.jsx("label",{className:"form-check-label text-white",htmlFor:"flexCheckDefault",children:"Tampilkan Password"})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("button",{type:"button",className:"btn btn-danger d-flex align-items-center gap-2",onClick:()=>l("none"),children:[e.jsx("i",{className:"bi bi-arrow-left"}),"Kembali"]}),e.jsx("button",{type:"submit",className:"btn btn-success d-flex align-items-center gap-2",disabled:b||f,children:b||f?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm","aria-hidden":"true"}),e.jsx("span",{role:"status",children:"Loading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-box-arrow-in-right"}),"Masuk"]})})]})]}),u&&e.jsx(SignUp,{setRole:z})]})]})};export{q as default};
