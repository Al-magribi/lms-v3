import{i as e,v as a,s,j as t,l as n,w as i,m as r,n as o,I as l,h as d,F as m,t as c}from"./index-Fj5DVbHb.js";import{A as u}from"./Add-0r-KNtaF.js";import{c as p}from"./vendor-BcjG7WjF.js";import{T as j}from"./TableLayout-BkVgQmLB.js";import{D as x}from"./Table-CebCfite.js";import{P as h}from"./index-BCtz5uJr.js";import"./Pagination-BnKCvK2K.js";import"./index-DKsWoNNU.js";const g=({onEdit:n})=>{const[i,r]=p.useState(1),[o,l]=p.useState(10),[d,m]=p.useState(""),{data:c,isLoading:u}=e({page:i,limit:o,search:d}),[g,{isLoading:f,isSuccess:S,data:k,error:b}]=a();p.useEffect(()=>{S&&s.success(k.message),b&&s.error(b.data.message)},[S,k,b]);const y=[{title:"No",key:"nomor",render:(e,a,s)=>(i-1)*o+s+1},{title:"Satuan",dataIndex:"name",key:"name"},{title:"Aksi",key:"action",render:(e,a)=>t.jsx(x.Button,{menu:{items:[{key:"edit",label:t.jsx("span",{onClick:()=>(e=>{n(e)})(e),children:"Edit"})},{key:"delete",label:t.jsx(h,{title:`Apakah Anda yakin ingin menghapus ${a.name}?`,okText:"Ya",cancelText:"Batal",onConfirm:()=>{return a=e.id,void g(a);var a},children:t.jsx("span",{style:{color:"red"},children:"Hapus"})})}]},children:"Pilihan Aksi"})}];return t.jsx(j,{onSearch:e=>{m(e),r(1)},isLoading:u||f,columns:y,source:c?.homebase,rowKey:"id",page:i,limit:o,totalData:c?.totalData,onChange:e=>{r(e.current),l(e.pageSize)}})},f=({title:e,open:a,setOpen:d,homebase:m,setHomebase:c})=>{const[u]=n.useForm(),[j,{isLoading:x,isSuccess:h,error:g,data:f}]=i(),S=()=>{d(!1),c(),u.resetFields()};return p.useEffect(()=>{a&&(u.resetFields(),m?u.setFieldsValue({name:m.name}):u.resetFields())},[a,m]),p.useEffect(()=>{h&&(S(),s.success(f.message)),g&&s.error(g.data.message)},[h,f,g]),t.jsx(r,{title:e,open:a,onCancel:S,destroyOnHidden:!0,style:{top:20},okText:"Simpan",cancelText:"Batal",onOk:()=>u.submit(),loading:x,confirmLoading:x,children:t.jsx(o,{tip:"Memproses data...",spinning:x,children:t.jsx(n,{form:u,layout:"vertical",onFinish:e=>{if(m){const a={...e,id:m.id};j(a)}else j(e)},children:t.jsx(n.Item,{name:"name",label:"Nama Satuan",rules:[{required:!0,message:"Nama satuan wajib diisi!"}],children:t.jsx(l,{placeholder:"Nama Satuan Pendidikan"})})})})})},{Title:S}=c,k=()=>{const[e,a]=p.useState(!1),[s,n]=p.useState(!1),[i,r]=p.useState({});return t.jsxs(d,{title:"Management Satuan",levels:["center"],children:[t.jsxs(m,{vertical:!0,gap:"middle",children:[t.jsxs(m,{justify:"space-between",children:[t.jsx(S,{level:5,children:"Management Satuan"}),t.jsx(u,{onClick:()=>a(!0)})]}),t.jsx(g,{onEdit:e=>{r(e),n(!0),a(!0)}})]}),t.jsx(f,{open:e,setOpen:()=>a(!1),title:s?"Edit Satuan":"Tambah Satuan",homebase:i,setHomebase:()=>r({})})]})};export{k as default};
