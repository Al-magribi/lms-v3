import{T as e,j as s,d as a,U as t,W as i,X as n,Y as r,Z as c,V as l}from"./index-CNbAajcm.js";import{b as d}from"./vendor-BYWiIb5-.js";import{L as o}from"./Layout-_SAc74nU.js";import{T as m}from"./Table-BSwODE4h.js";import"./index-C-OX0RB-.js";import"./index-DLmIb9aI.js";const h=({detail:t,setDetail:i})=>{const[n,r]=d.useState(""),[c,l]=d.useState(""),[o,{isSuccess:m,isLoading:h,isError:x,reset:u}]=e();return d.useEffect((()=>{m&&(u(),i({}),r(""),l("")),x&&u()}),[m,x]),d.useEffect((()=>{t&&(r(t.id),l(t.name))}),[t]),s.jsxs("form",{onSubmit:e=>{e.preventDefault();const s={id:n,name:c};a.promise(o(s).unwrap().then((e=>e.message)),{loading:"Menyimpan data...",success:e=>e,error:e=>e.data.message})},className:"rounded bg-white p-2 border d-flex flex-column gap-2",children:[s.jsx("p",{className:"m-0 h6",children:"Periode"}),s.jsx("input",{type:"text",name:"periode",id:"periode",className:"form-control",placeholder:"Periode",required:!0,value:c||"",onChange:e=>l(e.target.value)}),s.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[s.jsx("button",{type:"button",className:"btn btn-sm btn-warning",onClick:()=>{i({}),r(""),l("")},children:"Batal"}),s.jsx("button",{type:"submit",className:"btn btn-sm btn-success",disabled:h,children:"Simpan"})]})]})},x=({setDetail:e})=>{const[a,o]=d.useState(1),[h,x]=d.useState(10),[u,p]=d.useState(""),{data:j={},isLoading:g}=t({page:a,limit:h,search:u}),{periodes:b=[],totalData:f,totalPages:N}=j,[v,{isSuccess:k,isLoading:w,isError:y,reset:S}]=i(),[P]=n(),{refetch:C}=r({page:a,limit:h,search:u}),{refetch:D}=c({page:a,limit:h,search:u});return d.useEffect((()=>{k&&S(),y&&S()}),[k,y]),s.jsx(m,{page:a,setPage:o,setLimit:x,setSearch:p,totalData:f,totalPages:N,isLoading:g,children:s.jsxs("table",{className:"table table-bordered table-striped table-hover",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-center",children:"No"}),s.jsx("th",{className:"text-center",children:"_id"}),s.jsx("th",{className:"text-center",children:"Periode"}),s.jsx("th",{className:"text-center",children:"Status"}),s.jsx("th",{className:"text-center",children:"Aksi"})]})}),s.jsx("tbody",{children:null==b?void 0:b.map(((t,i)=>s.jsxs("tr",{children:[s.jsx("td",{className:"text-center align-middle",children:(a-1)*h+i+1}),s.jsx("td",{className:"text-center align-middle",children:t.id}),s.jsx("td",{className:"text-center align-middle",children:t.name}),s.jsx("td",{className:"text-center align-middle",children:s.jsx("div",{className:"form-check form-switch d-flex justify-content-center",onClick:()=>{return e=t.id,void(window.confirm("Apakah anda yakin ingin mengubah status periode ini?")&&l.promise(P(e).unwrap().then((e=>(C(),D(),e.message))),{loading:"Memproses...",success:e=>e,error:e=>e.data.message}));var e},children:s.jsx("input",{className:"form-check-input pointer",type:"checkbox",role:"switch",id:"flexSwitchCheckChecked",checked:t.isactive,readOnly:!0})})}),s.jsx("td",{className:"text-cente align-middle",children:s.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[s.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>e(t),children:s.jsx("i",{className:"bi bi-pencil-square"})}),s.jsx("button",{className:"btn btn-sm btn-danger",disabled:w,onClick:()=>{return e=t.id,void(window.confirm("Apakah anda yakin ingin menghapus periode ini dan semua data yang terkait dengan periode ini?")&&l.promise(v(e).unwrap().then((e=>e.message)),{loading:"Memproses...",success:e=>e,error:e=>e.data.message}));var e},children:s.jsx("i",{className:"bi bi-folder-minus"})})]})})]},i)))})]})})},u=()=>{const[e,a]=d.useState("");return s.jsx(o,{title:"Periode Pembelajaran",levels:["admin"],children:s.jsxs("div",{className:"row g-2",children:[s.jsx("div",{className:"col-lg-3 col-12",children:s.jsx(h,{detail:e,setDetail:a})}),s.jsx("div",{className:"col-lg-9 col-12",children:s.jsx(x,{setDetail:a})})]})})};export{u as default};
//# sourceMappingURL=AdminPeriode-6dgdZmbW.js.map
