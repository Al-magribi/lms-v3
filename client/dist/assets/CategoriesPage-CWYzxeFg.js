import{q as e,r as a,t as s,d as t,j as i}from"./index-CAxv6K-O.js";import{b as l}from"./vendor-BYWiIb5-.js";import{L as r}from"./Layout-WHGaODX4.js";import{t as n}from"./index-C-OX0RB-.js";import{C as d}from"./CmsModal-C5xXoTEC.js";import{C as c}from"./CmsForm-D-jAcB4V.js";import{T as o}from"./Table-D2KkIbvf.js";import{m}from"./proxy-DaCDdPQk.js";const u=()=>{const[u,x]=l.useState(!1),[j,h]=l.useState("add"),[b,g]=l.useState(null),[p,y]=l.useState(1),[N,f]=l.useState(10),[v,C]=l.useState(""),[w,S]=l.useState(0),{data:L,isLoading:T,refetch:A}=e({page:p,limit:N,search:v}),{result:k=[],totalData:q,totalPage:F}=L||{},[P,{isLoading:B,isSuccess:D,error:E,data:K,reset:M}]=a(),[O]=s();l.useEffect((()=>{var e;D&&(t.success((null==K?void 0:K.message)||"Category saved successfully"),x(!1),A(),g(null),S((e=>e+1)),M()),E&&(t.error(null==(e=E.data)?void 0:e.message),M())}),[D,E,K,M,A]);return i.jsxs(r,{children:[i.jsx("div",{className:"container-fluid py-3 py-md-4",children:i.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{className:"d-flex align-items-center",children:[i.jsx("div",{className:"bg-primary bg-opacity-10 p-3 rounded me-3",children:i.jsx(n,{className:"text-primary fs-4"})}),i.jsx("h4",{className:"mb-0",children:"Categories"})]}),i.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>{h("add"),g(null),x(!0)},children:[i.jsx("span",{className:"bi bi-plus-circle"}),i.jsx("span",{className:"ms-2",children:"Tambah Kategori"})]})]}),i.jsx("div",{className:"card border-0 shadow-sm",children:i.jsx("div",{className:"card-body",children:i.jsx(o,{isLoading:T,page:p,setPage:y,totalPages:F,limit:N,setLimit:f,setSearch:C,totalData:q,children:i.jsxs("table",{className:"mb-0 table table-bordered table-striped table-hover",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-center align-middle",children:"No"}),i.jsx("th",{className:"text-center align-middle",children:"Name"}),i.jsx("th",{className:"text-center align-middle",children:"Actions"})]})}),i.jsx("tbody",{children:null==k?void 0:k.map(((e,a)=>i.jsxs("tr",{children:[i.jsx("td",{className:"text-center align-middle",children:(p-1)*N+a+1}),i.jsx("td",{className:"align-middle",children:e.name}),i.jsx("td",{className:"text-center align-middle",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-center gap-2",children:[i.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>(e=>{h("edit"),g(e),x(!0)})(e),children:i.jsx("i",{className:"bi bi-pencil-square"})}),i.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>(async e=>{var a;if(window.confirm("Are you sure you want to delete this category?"))try{await O(e).unwrap(),t.success("Category deleted successfully"),A()}catch(s){t.error((null==(a=s.data)?void 0:a.message)||"Failed to delete category")}})(e.id),children:i.jsx("i",{className:"bi bi-trash"})})]})})]},e.id)))})]})})})})]})}),i.jsx(d,{isOpen:u,onClose:()=>{x(!1),g(null),S((e=>e+1))},title:"add"===j?"Add New Category":"Edit Category",children:i.jsx(c,{fields:[{name:"name",label:"Name",type:"text",required:!0}],initialValues:b||{name:"",description:"",slug:""},onSubmit:async e=>{var a;try{await P(e).unwrap()}catch(s){t.error((null==(a=s.data)?void 0:a.message)||"Failed to save category")}},onCancel:()=>{g(null),x(!1),S((e=>e+1))},submitButtonText:"add"===j?"Add Category":"Update Category",cancelButtonText:"Cancel",isLoading:B},w)})]})};export{u as default};
//# sourceMappingURL=CategoriesPage-CWYzxeFg.js.map
