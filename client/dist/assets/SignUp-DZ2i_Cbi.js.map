{"version":3,"file":"SignUp-DZ2i_Cbi.js","sources":["../../src/components/auth/SignUp.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport \"./Index.css\";\r\nimport { useGetAppQuery } from \"../../controller/api/center/ApiApp\";\r\nimport Meta from \"../meta/Meta\";\r\nimport { useSignupMutation } from \"../../controller/api/auth/ApiAuth\";\r\nimport { toast } from \"react-hot-toast\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst SignUp = () => {\r\n  const navigate = useNavigate();\r\n\r\n  const { data: app } = useGetAppQuery();\r\n\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [nis, setNis] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [formErrors, setFormErrors] = useState({});\r\n\r\n  const [signup, { isLoading, isSuccess, isError, error, data }] =\r\n    useSignupMutation();\r\n\r\n  const handlePasswordToggle = () => {\r\n    setShowPassword(!showPassword);\r\n  };\r\n\r\n  const handleSignup = (e) => {\r\n    e.preventDefault();\r\n\r\n    const data = {\r\n      nis: nis.trim(),\r\n      name: name.trim(),\r\n      email: email.trim(),\r\n      password: password.trim(),\r\n    };\r\n\r\n    signup(data);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isSuccess) {\r\n      toast.success(data.message);\r\n      setNis(\"\");\r\n      setName(\"\");\r\n      setEmail(\"\");\r\n      setPassword(\"\");\r\n\r\n      navigate(\"/signin\");\r\n    }\r\n    if (isError) {\r\n      toast.error(error.data.message);\r\n    }\r\n  }, [isSuccess, isError, error, data]);\r\n\r\n  return (\r\n    <div>\r\n      <Meta title={\"Pendaftaran Wali Murid\"} />\r\n      <div className=\"area\">\r\n        <ul className=\"circles\">\r\n          <li></li>\r\n          <li></li>\r\n          <li></li>\r\n          <li></li>\r\n          <li></li>\r\n          <li></li>\r\n          <li></li>\r\n          <li></li>\r\n          <li></li>\r\n          <li></li>\r\n        </ul>\r\n      </div>\r\n      <div\r\n        className=\"d-flex align-items-center justify-content-center flex-column gap-3\"\r\n        style={{ height: \"100vh\" }}\r\n      >\r\n        <img\r\n          src={app?.logo ? app?.logo : \"/logo.png\"}\r\n          alt=\"logo\"\r\n          style={{ height: 120, width: 120, marginBottom: \"1rem\" }}\r\n          className=\"pointer\"\r\n          onClick={() => (window.location.href = \"/\")}\r\n        />\r\n\r\n        <form\r\n          style={{ width: 300 }}\r\n          className=\"d-flex flex-column gap-3\"\r\n          onSubmit={handleSignup}\r\n        >\r\n          <div className=\"input-group\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"bi bi-person-vcard\"></i>\r\n            </span>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"NIS\"\r\n              className=\"form-control\"\r\n              value={nis}\r\n              onChange={(e) => setNis(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"input-group\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"bi bi-person\"></i>\r\n            </span>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Nama\"\r\n              className=\"form-control\"\r\n              value={name}\r\n              onChange={(e) => setName(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"input-group\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"bi bi-envelope\"></i>\r\n            </span>\r\n            <input\r\n              type=\"email\"\r\n              placeholder=\"Email\"\r\n              className=\"form-control\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"input-group\">\r\n            <span className=\"input-group-text\">\r\n              <i className=\"bi bi-lock-fill\"></i>\r\n            </span>\r\n            <input\r\n              type={showPassword ? \"text\" : \"password\"}\r\n              placeholder=\"Password\"\r\n              className={`form-control ${\r\n                formErrors.password ? \"is-invalid\" : \"\"\r\n              }`}\r\n              value={password}\r\n              onChange={(e) => {\r\n                setPassword(e.target.value);\r\n                setFormErrors({ ...formErrors, password: \"\" });\r\n              }}\r\n              required\r\n            />\r\n            {formErrors.password && (\r\n              <div className=\"invalid-feedback\">{formErrors.password}</div>\r\n            )}\r\n          </div>\r\n          <div className=\"form-check\">\r\n            <input\r\n              className=\"form-check-input\"\r\n              type=\"checkbox\"\r\n              id=\"flexCheckDefault\"\r\n              checked={showPassword}\r\n              onChange={handlePasswordToggle}\r\n            />\r\n            <label\r\n              className=\"form-check-label text-white\"\r\n              htmlFor=\"flexCheckDefault\"\r\n            >\r\n              Tampilkan Password\r\n            </label>\r\n          </div>\r\n\r\n          <div className=\"d-flex justify-content-between\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-danger d-flex align-items-center gap-2\"\r\n              onClick={() => (window.location.href = \"/signin\")}\r\n            >\r\n              <i className=\"bi bi-arrow-left\"></i>\r\n              Kembali\r\n            </button>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              className=\"btn btn-success d-flex align-items-center gap-2\"\r\n              disabled={isLoading}\r\n            >\r\n              {isLoading ? (\r\n                <>\r\n                  <span\r\n                    className=\"spinner-border spinner-border-sm\"\r\n                    aria-hidden=\"true\"\r\n                  ></span>\r\n                  <span role=\"status\">Loading...</span>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <i className=\"bi bi-key\"></i>\r\n                  Daftar\r\n                </>\r\n              )}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignUp;\r\n"],"names":["SignUp","navigate","useNavigate","data","app","useGetAppQuery","showPassword","setShowPassword","useState","nis","setNis","name","setName","email","setEmail","password","setPassword","formErrors","setFormErrors","signup","isLoading","isSuccess","isError","error","useSignupMutation","useEffect","c","success","message","children","jsx","Meta","title","className","jsxs","jsxRuntimeExports","style","height","src","logo","alt","width","marginBottom","onClick","window","location","href","onSubmit","e","preventDefault","trim","type","placeholder","value","onChange","target","required","id","checked","htmlFor","disabled","Fragment","role"],"mappings":"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"}