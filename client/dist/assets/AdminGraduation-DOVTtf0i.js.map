{"version":3,"file":"AdminGraduation-DOVTtf0i.js","sources":["../../src/page/admin/graduation/Form.jsx","../../src/page/admin/graduation/TableData.jsx","../../src/page/admin/graduation/AdminGraduation.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport {\n  useAddGraduationMutation,\n  useGetStudentsQuery,\n} from \"../../../controller/api/admin/ApiGraduation\";\nimport { toast } from \"react-hot-toast\";\nimport Select from \"react-select\";\n\nconst Form = ({ detail, setDetail }) => {\n  const [formData, setFormData] = useState({\n    id: \"\",\n    agency: \"\",\n    userid: \"\",\n    description: \"\",\n  });\n\n  const { data: students = [] } = useGetStudentsQuery();\n\n  const studentOptions = students?.map((student) => ({\n    value: student.id,\n    label: student.name,\n  }));\n\n  const [addGraduation, { isLoading, isSuccess, isError, reset }] =\n    useAddGraduationMutation();\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    toast.promise(\n      addGraduation(formData)\n        .unwrap()\n        .then((res) => res.message),\n      {\n        loading: \"Memuat data...\",\n        success: (message) => message,\n        error: (error) => error.data.message,\n      }\n    );\n  };\n\n  const handleCancel = () => {\n    setDetail({});\n    setFormData({\n      id: \"\",\n      agency: \"\",\n      userid: \"\",\n      description: \"\",\n    });\n  };\n\n  const handleStudentChange = (selectedOption) => {\n    setFormData((prev) => ({\n      ...prev,\n      userid: selectedOption?.value || null,\n    }));\n  };\n\n  useEffect(() => {\n    if (detail) {\n      setFormData({\n        id: detail.id ?? \"\",\n        agency: detail.agency ?? \"\",\n        userid: detail.userid ?? \"\",\n        description: detail.description ?? \"\",\n      });\n    }\n  }, [detail]);\n\n  useEffect(() => {\n    if (isSuccess || isError) {\n      if (isSuccess) {\n        setDetail({});\n        setFormData({\n          id: \"\",\n          agency: \"\",\n          userid: \"\",\n          description: \"\",\n        });\n        const closeModal = document.querySelector('[data-bs-dismiss=\"modal\"]');\n        closeModal.click();\n      }\n\n      reset();\n    }\n  }, [isSuccess, isError]);\n\n  return (\n    <div\n      className=\"modal fade\"\n      id=\"addgraduation\"\n      tabIndex=\"-1\"\n      aria-labelledby=\"addgraduationLabel\"\n      aria-hidden=\"true\"\n      data-bs-backdrop=\"static\"\n      data-bs-keyboard=\"false\"\n    >\n      <div className=\"modal-dialog\">\n        <div className=\"modal-content\">\n          <form\n            onSubmit={handleSubmit}\n            className=\"border-0 p-3 rounded flex-column gap-3\"\n          >\n            <div className=\"modal-header\">\n              <h5 className=\"modal-title\" id=\"addgraduationLabel\">\n                Data Lulusan\n              </h5>\n              <button\n                type=\"button\"\n                className=\"btn-close\"\n                data-bs-dismiss=\"modal\"\n                aria-label=\"Close\"\n                disabled={isLoading}\n              ></button>\n            </div>\n            <div className=\"modal-body d-flex flex-column gap-3\">\n              <Select\n                isClearable\n                isSearchable\n                placeholder=\"Cari Murid\"\n                value={\n                  studentOptions?.find(\n                    (opt) => opt.value === formData.userid\n                  ) || null\n                }\n                options={studentOptions}\n                onChange={handleStudentChange}\n              />\n              <input\n                type=\"text\"\n                name=\"agency\"\n                id=\"agency\"\n                placeholder=\"Nama Instansi\"\n                className=\"form-control\"\n                required\n                value={formData.agency}\n                onChange={(e) =>\n                  setFormData({ ...formData, agency: e.target.value })\n                }\n              />\n              <textarea\n                name=\"description\"\n                id=\"description\"\n                placeholder=\"Keterangan\"\n                className=\"form-control\"\n                value={formData.description}\n                onChange={(e) =>\n                  setFormData({ ...formData, description: e.target.value })\n                }\n              />\n            </div>\n            <div className=\"modal-footer\">\n              <button\n                type=\"button\"\n                className=\"btn btn-warning\"\n                data-bs-dismiss=\"modal\"\n                onClick={handleCancel}\n                disabled={isLoading}\n              >\n                Batal\n              </button>\n              <button\n                type=\"submit\"\n                className=\"btn btn-success\"\n                disabled={isLoading}\n              >\n                Simpan\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Form;\n","import React, { useState } from \"react\";\nimport Table from \"../../../components/table/Table\";\nimport { useGetGraduationQuery } from \"../../../controller/api/admin/ApiGraduation\";\n\nconst TableData = ({ setDetail }) => {\n  const [page, setPage] = useState(1);\n  const [limit, setLimit] = useState(10);\n  const [search, setSearch] = useState(\"\");\n\n  const { data, isLoading } = useGetGraduationQuery({ page, limit, search });\n  const { result, totalData, totalPages } = data || {};\n\n  return (\n    <Table\n      isLoading={isLoading}\n      totalData={totalData}\n      totalPages={totalPages}\n      page={page}\n      limit={limit}\n      setPage={setPage}\n      setLimit={setLimit}\n      setSearch={setSearch}\n    >\n      <div className=\"row g-3\">\n        {result?.length > 0 ? (\n          result.map((item, index) => {\n            // Ambil inisial nama\n            const initials = item.student_name\n              ? item.student_name\n                  .split(\" \")\n                  .map((w) => w[0])\n                  .join(\"\")\n                  .toUpperCase()\n                  .slice(0, 2)\n              : \"?\";\n            return (\n              <div className=\"col-12 col-md-4\" key={item.id}>\n                <div\n                  className=\"rounded d-flex flex-column justify-content-between h-100 p-4 shadow-sm hover-shadow\"\n                  style={{\n                    border: \"1px solid #f3f3f3\",\n                    minHeight: 180,\n                    boxShadow: \"0 4px 18px rgba(0,0,0,0.07)\",\n                  }}\n                >\n                  <div className=\"d-flex align-items-center gap-3 mb-2\">\n                    <div\n                      className=\"avatar flex-shrink-0 d-flex align-items-center justify-content-center bg-gradient-primary text-primary fw-bold rounded-circle shadow-sm\"\n                      style={{\n                        width: 56,\n                        height: 56,\n                        fontSize: 22,\n                        background:\n                          \"linear-gradient(135deg, #e3f0ff 0%, #f8fbff 100%)\",\n                        border: \"2px solid #d0e3ff\",\n                      }}\n                    >\n                      {initials}\n                    </div>\n                    <div className=\"flex-grow-1\">\n                      <div\n                        className=\"fw-bold fs-5 text-dark mb-1\"\n                        style={{ letterSpacing: 0.5 }}\n                      >\n                        {item.student_name}\n                      </div>\n                      <div className=\"small text-muted mb-1\">\n                        NIS:{\" \"}\n                        <span className=\"badge bg-light text-primary border border-primary bg-opacity-10\">\n                          {item.nis}\n                        </span>\n                      </div>\n\n                      <div className=\"d-flex align-items-center gap-2\">\n                        <div className=\"small text-secondary\">\n                          <i className=\"bi bi-building me-1\"></i>\n                          {item.agency}\n                        </div>\n\n                        <div className=\"vr\"></div>\n\n                        <div className=\"small text-secondary\">\n                          <i className=\"bi bi-building me-1\"></i>\n                          {item.description}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"d-flex justify-content-end gap-3 mt-auto pt-2\">\n                    <button\n                      className=\"btn btn-sm btn-outline-primary d-flex align-items-center gap-1 shadow-sm px-3\"\n                      title=\"Edit\"\n                      style={{ borderRadius: \"8px\", fontWeight: 500 }}\n                      onClick={() => setDetail(item)}\n                      data-bs-toggle=\"modal\"\n                      data-bs-target=\"#addgraduation\"\n                    >\n                      <i className=\"bi bi-pencil-square\"></i>\n                      <span>Edit</span>\n                    </button>\n                    <button\n                      className=\"btn btn-sm btn-outline-danger d-flex align-items-center gap-1 shadow-sm px-3\"\n                      title=\"Hapus\"\n                      style={{ borderRadius: \"8px\", fontWeight: 500 }}\n                    >\n                      <i className=\"bi bi-trash\"></i>\n                      <span>Hapus</span>\n                    </button>\n                  </div>\n                </div>\n              </div>\n            );\n          })\n        ) : (\n          <div className=\"text-center text-muted\">\n            <p className=\"bg-danger bg-opacity-10 p-3 rounded text-danger m-0\">\n              Tidak ada data lulusan.\n            </p>\n          </div>\n        )}\n      </div>\n    </Table>\n  );\n};\n\nexport default TableData;\n","import React, { useState } from \"react\";\r\nimport Layout from \"../../../components/layout/Layout\";\r\nimport Form from \"./Form\";\r\nimport TableData from \"./TableData\";\r\n\r\nconst AdminGraduation = () => {\r\n  const [detail, setDetail] = useState({});\r\n  return (\r\n    <Layout title=\"Lulusan\" levels={[\"admin\"]}>\r\n      <Form detail={detail} setDetail={setDetail} />\r\n\r\n      <TableData setDetail={setDetail} />\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default AdminGraduation;\r\n"],"names":["Form","detail","setDetail","formData","setFormData","useState","id","agency","userid","description","data","students","useGetStudentsQuery","studentOptions","map","student","value","label","name","addGraduation","isLoading","isSuccess","isError","reset","useAddGraduationMutation","useEffect","document","querySelector","click","jsxRuntimeExports","jsx","className","tabIndex","children","jsxs","onSubmit","e","preventDefault","c","promise","unwrap","then","res","message","loading","success","error","type","disabled","Select","isClearable","isSearchable","placeholder","find","opt","options","onChange","selectedOption","prev","required","target","onClick","TableData","page","setPage","limit","setLimit","search","setSearch","useGetGraduationQuery","result","totalData","totalPages","Table","length","item","index","initials","student_name","split","w","join","toUpperCase","slice","style","border","minHeight","boxShadow","width","height","fontSize","background","letterSpacing","nis","title","borderRadius","fontWeight","AdminGraduation","Layout","levels"],"mappings":"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"}