import{a3 as e,j as a,e as s,a4 as t,a5 as n,V as i}from"./index--FDqv5DW.js";import{b as l}from"./vendor-DfXzdC0j.js";import{L as r}from"./Layout-gnwZRalp.js";import{T as d}from"./Table-DHqShDAt.js";import"./index-Cjq_QsmG.js";import"./index-33-gAEu4.js";import"./index-C1AnEztE.js";const c=({detail:t,setDetail:n})=>{const[i,r]=l.useState(""),[d,c]=l.useState(""),[m,{isSuccess:o,isLoading:u,error:j,reset:b}]=e();return l.useEffect((()=>{o&&(b(),c(""),r("")),j&&b()}),[o,j]),l.useEffect((()=>{t&&(r(t.id),c(t.name))}),[t]),a.jsxs("form",{onSubmit:e=>{e.preventDefault();const a={id:i,name:d};s.promise(m(a).unwrap().then((e=>e.message)),{loading:"Meyimpan data...",success:e=>e,error:e=>e.data.message})},className:"bg-white rounded border p-3",children:[a.jsxs("div",{className:"form-floating",children:[a.jsx("input",{type:"text",name:"major",id:"major",className:"form-control",placeholder:"Jurusan",required:!0,value:d||"",onChange:e=>c(e.target.value)}),a.jsx("label",{htmlFor:"major",children:"Nama Jurusan"})]}),a.jsxs("div",{className:"d-flex justify-content-end gap-2 mt-2",children:[a.jsx("button",{type:"button",className:"btn btn-sm btn-warning",onClick:()=>{n({}),r(""),c("")},children:"Batal"}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-success",disabled:u,children:"Simpan"})]})]})},m=[{label:"No"},{label:"Satuan"},{label:"Jurusan"},{label:"aksi"}],o=({setDetail:e})=>{const[s,r]=l.useState(1),[c,o]=l.useState(10),[u,j]=l.useState(""),{data:b={},isLoading:x}=t({page:s,limit:c,search:u}),{majors:h=[],totalData:g,totalPages:p}=b,[N,{isSuccess:f,isLoading:v,error:S,reset:y}]=n();return l.useEffect((()=>{f&&y(),S&&y()}),[f,S]),a.jsx(d,{page:s,setPage:r,setLimit:o,setSearch:j,totalData:g,totalPages:p,isLoading:x,children:a.jsxs("table",{className:"table table-striped table-hover mb-0",children:[a.jsx("thead",{className:"table-primary align-middle",children:a.jsx("tr",{children:m.map((e=>a.jsx("th",{className:"text-center",children:e.label},e.label)))})}),a.jsx("tbody",{children:(null==h?void 0:h.length)>0?null==h?void 0:h.map(((t,n)=>a.jsxs("tr",{children:[a.jsx("td",{className:"text-center align-middle",children:(s-1)*c+n+1}),a.jsx("td",{className:"align-middle",children:t.homebase}),a.jsx("td",{className:"align-middle",children:t.name}),a.jsx("td",{className:"text-center align-middle",children:a.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[a.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>e(t),children:a.jsx("i",{className:"bi bi-pencil-square"})}),a.jsx("button",{className:"btn btn-sm btn-danger",disabled:v,onClick:()=>{return e=t.id,void(window.confirm("Apakah anda yakin ingin menghapus data jurusan ini dan semua data yang terkait dengan jurusan ini?")&&i.promise(N(e).unwrap().then((e=>e.message)),{loading:"Memproses...",success:e=>e,error:e=>e.data.message}));var e},children:a.jsx("i",{className:"bi bi-folder-minus"})})]})})]},n))):a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"text-center text-muted py-3",children:"Data tidak tersedia"})})})]})})},u=()=>{const[e,s]=l.useState("");return a.jsx(r,{title:"Jurusan",levels:["admin"],children:a.jsxs("div",{className:"row g-2",children:[a.jsx("div",{className:"col-lg-3 col-2",children:a.jsx(c,{detail:e,setDetail:s})}),a.jsx("div",{className:"col-lg-9 col-2",children:a.jsx(o,{setDetail:s})})]})})};export{u as default};
//# sourceMappingURL=AdminMajor-BCLiirIf.js.map
