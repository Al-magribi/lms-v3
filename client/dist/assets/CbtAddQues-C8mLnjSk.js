import{a as Q,f as K,r as n,a9 as L,aa as P,j as s,e as g}from"./index-Bkq01jzn.js";import{L as $}from"./Layout-uGiKgFPI.js";import{E as f}from"./Editor-Dux76y0a.js";import"./index-Chjiymov.js";const J=()=>{const k=Q(),C=K(),{subject:E,name:N,bankid:j,questionid:i}=C,[t,r]=n.useState(1),[l,h]=n.useState(""),[x,u]=n.useState(""),[d,m]=n.useState(""),[c,p]=n.useState({choiceA:"",choiceB:"",choiceC:"",choiceD:"",choiceE:""}),{data:e}=L(i,{skip:!i}),[w,{isSuccess:v,isLoading:q,isError:b,reset:y}]=P(),A=a=>o=>{p(D=>({...D,[a]:o}))},S=()=>{if(!d){g.error("Pertanyaan tidak boleh kosong");return}if(t==1&&!l){g.error("Kunci jawaban tidak boleh kosong");return}const a={id:i||"",bank:j,qtype:parseInt(t),qkey:l,poin:parseInt(x),question:d,a:c.choiceA,b:c.choiceB,c:c.choiceC,d:c.choiceD,e:c.choiceE};g.promise(w(a).unwrap().then(o=>o.message),{loading:"Memuat data ...",success:o=>o,error:o=>o.data.message})},B=()=>{const a=N.replace(/[\s/]/g,"-"),o=E.replace(/[\s/]/g,"-");k(`/admin-cbt-bank/${o}/${a}/${j}`)};return n.useEffect(()=>{v&&(r(1),h(""),u(""),m(""),p({choiceA:"",choiceB:"",choiceC:"",choiceD:"",choiceE:""}),y(),B()),b&&y()},[v,b]),n.useEffect(()=>{e&&(r(e==null?void 0:e.qtype),h(e==null?void 0:e.qkey),u(e==null?void 0:e.poin),m(e==null?void 0:e.question),p({choiceA:e==null?void 0:e.a,choiceB:e==null?void 0:e.b,choiceC:e==null?void 0:e.c,choiceD:e==null?void 0:e.d,choiceE:e==null?void 0:e.e}))},[e]),s.jsx($,{title:"Tambah Soal",children:s.jsxs("div",{className:"row g-2",children:[s.jsx("div",{className:"col-lg-3 col-12",children:s.jsxs("select",{name:"type",id:"type",className:"form-select shadow",required:!0,value:t,onChange:a=>r(a.target.value),children:[s.jsx("option",{value:1,children:"PG"}),s.jsx("option",{value:2,children:"Essay"})]})}),s.jsx("div",{className:"col-lg-3 col-12",children:s.jsxs("select",{name:"key",id:"key",className:"form-select shadow",required:!0,value:l,onChange:a=>h(a.target.value),children:[s.jsx("option",{value:"",hidden:!0,children:"Kunci Jawaban"}),s.jsx("option",{value:"A",children:"A"}),s.jsx("option",{value:"B",children:"B"}),s.jsx("option",{value:"C",children:"C"}),s.jsx("option",{value:"D",children:"D"}),s.jsx("option",{value:"E",children:"E"})]})}),s.jsx("div",{className:"col-lg-3 col-12",children:s.jsx("input",{type:"number",name:"poin",id:"poin",className:"form-control shadow",placeholder:"Nilai",value:x||"",onChange:a=>u(a.target.value)})}),s.jsx("div",{className:"col-lg-3 col-12 d-flex align-items-center justify-content-start",children:s.jsx("button",{className:"btn btn-sm btn-success shadow",disabled:q,onClick:S,children:"Simpan"})}),s.jsx("div",{className:"col-12",children:s.jsx(f,{placeholder:"Ketikan pertanyaan di sini ...",value:d,onChange:a=>m(a),classname:"shadow",height:300})}),t==1&&Object.keys(c).map((a,o)=>s.jsx("div",{className:"col-12",children:s.jsx(f,{placeholder:`Jawaban ${a.charAt(a.length-1)}`,value:c[a],onChange:A(a),classname:"shadow",height:300})},o))]})})};export{J as default};
