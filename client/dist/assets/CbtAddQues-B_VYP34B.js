import{aU as e,aV as a,j as s,e as i}from"./index-DFhdulld.js";import{u as o,e as c,b as n}from"./vendor-CnnDPxwB.js";import{L as l}from"./Layout-GZnRoUIy.js";import{E as t}from"./Editor-CbDDl2NV.js";import"./index-B8CuzAwO.js";import"./index-g0LoU_Ie.js";import"./quill.snow-9m3YVrDv.js";import"./index-Bx5UHif0.js";const r=()=>{const r=o(),d=c(),{subject:h,name:u,bankid:m,questionid:p}=d,[v,j]=n.useState(1),[x,g]=n.useState(""),[b,f]=n.useState(""),[k,y]=n.useState(""),[w,C]=n.useState({choiceA:"",choiceB:"",choiceC:"",choiceD:"",choiceE:""}),{data:E}=e(p,{skip:!p}),[N,{isSuccess:q,isLoading:S,isError:A,reset:B}]=a(),D=e=>a=>{C((s=>({...s,[e]:a})))};return n.useEffect((()=>{q&&(j(1),g(""),f(""),y(""),C({choiceA:"",choiceB:"",choiceC:"",choiceD:"",choiceE:""}),B(),(()=>{const e=u.replace(/[\s/]/g,"-"),a=h.replace(/[\s/]/g,"-");r(`/admin-cbt-bank/${a}/${e}/${m}`)})()),A&&B()}),[q,A]),n.useEffect((()=>{E&&(j(null==E?void 0:E.qtype),g(null==E?void 0:E.qkey),f(null==E?void 0:E.poin),y(null==E?void 0:E.question),C({choiceA:null==E?void 0:E.a,choiceB:null==E?void 0:E.b,choiceC:null==E?void 0:E.c,choiceD:null==E?void 0:E.d,choiceE:null==E?void 0:E.e}))}),[E]),s.jsx(l,{title:"Tambah Soal",levels:["admin","teacher"],children:s.jsxs("div",{className:"row g-2",children:[s.jsx("div",{className:"col-lg-3 col-12",children:s.jsxs("select",{name:"type",id:"type",className:"form-select shadow",required:!0,value:v,onChange:e=>j(e.target.value),children:[s.jsx("option",{value:1,children:"PG"}),s.jsx("option",{value:2,children:"Essay"})]})}),s.jsx("div",{className:"col-lg-3 col-12",children:s.jsxs("select",{name:"key",id:"key",className:"form-select shadow",required:!0,value:x,onChange:e=>g(e.target.value),children:[s.jsx("option",{value:"",hidden:!0,children:"Kunci Jawaban"}),s.jsx("option",{value:"A",children:"A"}),s.jsx("option",{value:"B",children:"B"}),s.jsx("option",{value:"C",children:"C"}),s.jsx("option",{value:"D",children:"D"}),s.jsx("option",{value:"E",children:"E"})]})}),s.jsx("div",{className:"col-lg-3 col-12",children:s.jsx("input",{type:"number",name:"poin",id:"poin",className:"form-control shadow",placeholder:"Nilai",value:b||"",onChange:e=>f(e.target.value)})}),s.jsx("div",{className:"col-lg-3 col-12 d-flex align-items-center justify-content-start",children:s.jsx("button",{className:"btn btn-sm btn-success shadow",disabled:S,onClick:()=>{if(!k)return void i.error("Pertanyaan tidak boleh kosong");if(1==v&&!x)return void i.error("Kunci jawaban tidak boleh kosong");const e={id:p||"",bank:m,qtype:parseInt(v),qkey:x,poin:parseInt(b),question:k,a:w.choiceA,b:w.choiceB,c:w.choiceC,d:w.choiceD,e:w.choiceE};i.promise(N(e).unwrap().then((e=>e.message)),{loading:"Memuat data ...",success:e=>e,error:e=>e.data.message})},children:"Simpan"})}),s.jsx("div",{className:"col-12",children:s.jsx(t,{placeholder:"Ketikan pertanyaan di sini ...",value:k,onChange:e=>y(e),classname:"shadow",height:300})}),1==v&&Object.keys(w).map(((e,a)=>s.jsx("div",{className:"col-12",children:s.jsx(t,{placeholder:`Jawaban ${e.charAt(e.length-1)}`,value:w[e],onChange:D(e),classname:"shadow",height:300})},a)))]})})};export{r as default};
//# sourceMappingURL=CbtAddQues-B_VYP34B.js.map
