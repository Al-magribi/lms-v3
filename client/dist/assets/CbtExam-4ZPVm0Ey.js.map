{"version":3,"file":"CbtExam-4ZPVm0Ey.js","sources":["../../src/page/cbt/exam/Form.jsx","../../src/page/cbt/exam/TableExam.jsx","../../src/page/cbt/exam/CbtExam.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useGetTeachersQuery } from \"../../../controller/api/cbt/ApiBank\";\r\nimport {\r\n  useCreateExamMutation,\r\n  useGetClassesQuery,\r\n} from \"../../../controller/api/cbt/ApiExam\";\r\nimport { toast } from \"react-hot-toast\";\r\nimport Select from \"react-select\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst Form = ({ detail, setDetail, onSuccess }) => {\r\n  const { user } = useSelector((state) => state.auth);\r\n\r\n  const initialFormState = {\r\n    examid: \"\",\r\n    teacher: user?.id || \"\",\r\n    bank: [],\r\n    name: \"\",\r\n    duration: \"\",\r\n    classes: [],\r\n    token: \"\",\r\n    isshuffle: \"\",\r\n    mc_score: \"\",\r\n    essay_score: \"\",\r\n  };\r\n\r\n  const [formData, setFormData] = useState(initialFormState);\r\n\r\n  const { data: teachers } = useGetTeachersQuery();\r\n  const { data: classes } = useGetClassesQuery();\r\n  const [createExam, { isSuccess, isLoading, isError, reset }] =\r\n    useCreateExamMutation();\r\n\r\n  const teacherOptions = teachers?.map((teacher) => ({\r\n    value: teacher.id,\r\n    label: teacher.name,\r\n    bank: teacher.bank,\r\n  }));\r\n\r\n  const selectedTeacher =\r\n    user?.level === \"teacher\"\r\n      ? teachers?.find((t) => t.id === user.id)\r\n      : teachers?.find((t) => t.id === formData.teacher);\r\n\r\n  const bankOptions = selectedTeacher?.bank?.map((bank) => ({\r\n    value: bank.id,\r\n    label: bank.name,\r\n    type: bank.type,\r\n  }));\r\n\r\n  const classOptions = classes?.map((item) => ({\r\n    value: item.id,\r\n    label: item.name,\r\n  }));\r\n\r\n  useEffect(() => {\r\n    if (detail?.id) {\r\n      setFormData({\r\n        examid: detail.id,\r\n        teacher: detail.teacher,\r\n        name: detail.name,\r\n        duration: detail.duration,\r\n        token: detail.token,\r\n        isshuffle: detail.isshuffle,\r\n        mc_score: detail.mc_score,\r\n        essay_score: detail.essay_score,\r\n        bank: detail.banks.map((bank) => ({\r\n          bankid: bank.id,\r\n          type: bank.type,\r\n          pg: bank.pg,\r\n          essay: bank.essay,\r\n        })),\r\n        classes: detail.classes.map((cls) => ({\r\n          value: cls.id,\r\n          label: cls.name,\r\n        })),\r\n      });\r\n    } else if (user?.level === \"teacher\") {\r\n      setFormData((prev) => ({\r\n        ...prev,\r\n        teacher: user.id,\r\n      }));\r\n    }\r\n  }, [detail, user]);\r\n\r\n  const handleTeacherChange = (selectedOption) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      teacher: selectedOption?.value || null,\r\n      bank: [],\r\n    }));\r\n  };\r\n\r\n  const handleBankChange = (selectedOptions) => {\r\n    const selectedBanks =\r\n      selectedOptions?.map((bank) => ({\r\n        bankid: bank.value,\r\n        type: bank.type,\r\n        pg: \"\",\r\n        essay: \"\",\r\n      })) || [];\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      bank: selectedBanks,\r\n    }));\r\n  };\r\n\r\n  const handleInput = (e, bankid, field) => {\r\n    const { value } = e.target;\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      bank: prev.bank.map((bank) =>\r\n        bank.bankid === bankid ? { ...bank, [field]: value } : bank\r\n      ),\r\n    }));\r\n  };\r\n\r\n  const handleClass = (selectedOption) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      classes: selectedOption || [],\r\n    }));\r\n  };\r\n\r\n  const addHandler = (e) => {\r\n    e.preventDefault();\r\n\r\n    toast.promise(\r\n      createExam(formData)\r\n        .unwrap()\r\n        .then((res) => res.message),\r\n      {\r\n        loading: \"Memuat data...\",\r\n        success: (message) => message,\r\n        error: (err) => err.data.message,\r\n      }\r\n    );\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setFormData({\r\n      ...initialFormState,\r\n      teacher: user?.id || \"\",\r\n    });\r\n    setDetail(null);\r\n  };\r\n\r\n  const cancel = () => {\r\n    resetForm();\r\n    onSuccess?.();\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isSuccess) {\r\n      resetForm();\r\n      reset();\r\n      onSuccess?.();\r\n      // Close modal using data-bs-dismiss\r\n      const closeButton = document.querySelector('[data-bs-dismiss=\"modal\"]');\r\n      if (closeButton) {\r\n        closeButton.click();\r\n      }\r\n    }\r\n\r\n    if (isError) {\r\n      reset();\r\n    }\r\n  }, [isSuccess, isError, onSuccess]);\r\n\r\n  useEffect(() => {\r\n    // Cleanup function to reset body overflow when component unmounts\r\n    return () => {\r\n      document.body.style.overflow = \"unset\";\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      className=\"modal fade\"\r\n      id=\"addexam\"\r\n      data-bs-backdrop=\"static\"\r\n      data-bs-keyboard=\"false\"\r\n      tabIndex=\"-1\"\r\n      aria-labelledby=\"staticBackdropLabel\"\r\n      aria-hidden=\"true\"\r\n    >\r\n      <div className=\"modal-dialog\">\r\n        <form onSubmit={addHandler} className=\"modal-content\">\r\n          <div className=\"modal-header\">\r\n            <h1 className=\"modal-title fs-5\" id=\"staticBackdropLabel\">\r\n              {detail?.id ? \"Edit Ujian\" : \"Tambah Ujian\"}\r\n            </h1>\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn-close\"\r\n              data-bs-dismiss=\"modal\"\r\n              aria-label=\"Close\"\r\n            ></button>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n            <div className=\"d-flex flex-column gap-2\">\r\n              <Select\r\n                isClearable\r\n                isSearchable\r\n                placeholder=\"Cari Guru\"\r\n                value={\r\n                  teacherOptions?.find(\r\n                    (opt) => opt.value === formData.teacher\r\n                  ) || null\r\n                }\r\n                options={teacherOptions}\r\n                onChange={handleTeacherChange}\r\n                isDisabled={!!detail?.id}\r\n              />\r\n\r\n              <Select\r\n                isClearable\r\n                isSearchable\r\n                isMulti\r\n                placeholder=\"Pilih Bank Soal\"\r\n                value={bankOptions?.filter((opt) =>\r\n                  formData.bank.some((b) => b.bankid === opt.value)\r\n                )}\r\n                options={bankOptions}\r\n                onChange={handleBankChange}\r\n                isDisabled={!formData.teacher || !!detail?.id}\r\n              />\r\n\r\n              {formData.bank\r\n                .filter((bank) => bank.type === \"bank\")\r\n                .map((bank) => (\r\n                  <div key={bank.bankid} className=\"border p-2 rounded\">\r\n                    <p className=\"m-0\">\r\n                      {bankOptions?.find((b) => b.value === bank.bankid)\r\n                        ?.label ||\r\n                        detail?.banks?.find((b) => b.id === bank.bankid)?.name}\r\n                    </p>\r\n                    <input\r\n                      type=\"number\"\r\n                      className=\"form-control mt-1\"\r\n                      placeholder={`Tampil Soal PG `}\r\n                      value={bank.pg}\r\n                      onChange={(e) => handleInput(e, bank.bankid, \"pg\")}\r\n                    />\r\n                    <input\r\n                      type=\"number\"\r\n                      className=\"form-control mt-1\"\r\n                      placeholder={`Tampil Soal Essay `}\r\n                      value={bank.essay}\r\n                      onChange={(e) => handleInput(e, bank.bankid, \"essay\")}\r\n                    />\r\n                  </div>\r\n                ))}\r\n\r\n              <Select\r\n                isClearable\r\n                isSearchable\r\n                isMulti\r\n                placeholder=\"Untuk Kelas\"\r\n                value={formData.classes}\r\n                options={classOptions}\r\n                onChange={handleClass}\r\n              />\r\n\r\n              <input\r\n                type=\"text\"\r\n                name=\"name\"\r\n                className=\"form-control\"\r\n                placeholder=\"Nama Ujian\"\r\n                value={formData.name || \"\"}\r\n                onChange={(e) =>\r\n                  setFormData({ ...formData, name: e.target.value })\r\n                }\r\n              />\r\n\r\n              <input\r\n                type=\"number\"\r\n                name=\"duration\"\r\n                className=\"form-control\"\r\n                placeholder=\"Durasi\"\r\n                value={formData.duration || \"\"}\r\n                onChange={(e) =>\r\n                  setFormData({ ...formData, duration: e.target.value })\r\n                }\r\n              />\r\n\r\n              <input\r\n                type=\"number\"\r\n                name=\"mc_score\"\r\n                id=\"mc_score\"\r\n                className=\"form-control\"\r\n                placeholder=\"Persentase Nilai PG\"\r\n                value={formData.mc_score}\r\n                onChange={(e) =>\r\n                  setFormData({ ...formData, mc_score: e.target.value })\r\n                }\r\n              />\r\n\r\n              <input\r\n                type=\"number\"\r\n                name=\"essay_score\"\r\n                id=\"essay_score\"\r\n                className=\"form-control\"\r\n                placeholder=\"Persentase Nilai Essay\"\r\n                value={formData.essay_score}\r\n                onChange={(e) =>\r\n                  setFormData({ ...formData, essay_score: e.target.value })\r\n                }\r\n              />\r\n\r\n              <select\r\n                name=\"isshuffle\"\r\n                className=\"form-control\"\r\n                value={formData.isshuffle}\r\n                onChange={(e) =>\r\n                  setFormData({ ...formData, isshuffle: e.target.value })\r\n                }\r\n              >\r\n                <option value=\"\" hidden>\r\n                  Acak Soal\r\n                </option>\r\n                <option value={true}>Ya</option>\r\n                <option value={false}>Tidak</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-sm btn-warning\"\r\n              data-bs-dismiss=\"modal\"\r\n              onClick={cancel}\r\n            >\r\n              Batal\r\n            </button>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              className=\"btn btn-sm btn-success\"\r\n              disabled={isLoading}\r\n            >\r\n              {detail?.id ? \"Update\" : \"Simpan\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n","import { useEffect, useState } from \"react\";\r\nimport Table from \"../../../components/table/Table\";\r\nimport {\r\n  useDeleteExamMutation,\r\n  useGetExamsQuery,\r\n  useChangeStatusMutation,\r\n} from \"../../../controller/api/cbt/ApiExam\";\r\nimport { toast } from \"react-hot-toast\";\r\n\r\nconst TableExam = ({ setDetail }) => {\r\n  const [page, setPage] = useState(1);\r\n  const [limit, setLimit] = useState(12);\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  const { data: rawData = {}, isLoading: loading } = useGetExamsQuery({\r\n    page,\r\n    limit,\r\n    search,\r\n  });\r\n  const { exams = [], totalData, totalPages } = rawData;\r\n\r\n  const [deleteExam, { isSuccess, isLoading, isError, reset }] =\r\n    useDeleteExamMutation();\r\n  const [\r\n    changeStatus,\r\n    { isSuccess: isSuccessStatus, isError: isErrorStatus, reset: resetStatus },\r\n  ] = useChangeStatusMutation();\r\n\r\n  const deleteHandler = (id) => {\r\n    const confirm = window.confirm(\r\n      \"Apakah anda yakin ingin menghapus ujian ini dan semua data yang terkait dengan ujian ini?\"\r\n    );\r\n\r\n    if (confirm) {\r\n      toast.promise(\r\n        deleteExam(id)\r\n          .unwrap()\r\n          .then((res) => res.message),\r\n        {\r\n          loading: \"Memproses...\",\r\n          success: (message) => message,\r\n          error: (err) => err.data.message,\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  const changeStatusHandler = (id) => {\r\n    toast.promise(\r\n      changeStatus(id)\r\n        .unwrap()\r\n        .then((res) => res.message),\r\n      {\r\n        loading: \"Memproses...\",\r\n        success: (message) => message,\r\n        error: (err) => err.data.message,\r\n      }\r\n    );\r\n  };\r\n\r\n  const copyTokenHandler = (token) => {\r\n    navigator.clipboard.writeText(token);\r\n    toast.success(\"Token berhasil disalin\");\r\n  };\r\n\r\n  const openNewTab = (name, id, token) => {\r\n    const formatName = name.toUpperCase().replace(/ /g, \"-\");\r\n    window.open(`/laporan-ujian/${formatName}/${id}/${token}`, \"_blank\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isSuccess || isError) {\r\n      reset();\r\n    }\r\n  }, [isSuccess, isError]);\r\n\r\n  useEffect(() => {\r\n    if (isSuccessStatus || isErrorStatus) {\r\n      resetStatus();\r\n    }\r\n  }, [isSuccessStatus, isErrorStatus]);\r\n\r\n  return (\r\n    <Table\r\n      page={page}\r\n      setPage={setPage}\r\n      setLimit={setLimit}\r\n      setSearch={setSearch}\r\n      totalData={totalData}\r\n      totalPages={totalPages}\r\n      isLoading={loading}\r\n    >\r\n      <div className=\"row g-4\">\r\n        {exams?.length > 0 ? (\r\n          exams?.map((exam, i) => (\r\n            <div key={i} className=\"col-12 col-lg-4\">\r\n              <div className=\"card shadow-sm h-100\">\r\n                <div className=\"card-body d-flex flex-column h-100\">\r\n                  <div className=\"d-flex align-items-start justify-content-between mb-3\">\r\n                    <div className=\"d-flex align-items-center flex-wrap gap-2\">\r\n                      <span className=\"badge bg-primary\">{i + 1}</span>\r\n                      <span className=\"fw-bold lh-1\">{exam.name}</span>\r\n                    </div>\r\n                    <div className=\"d-flex align-items-center gap-2\">\r\n                      <div\r\n                        className=\"form-check form-switch pointer d-flex align-items-center m-0\"\r\n                        onClick={() => changeStatusHandler(exam.id)}\r\n                      >\r\n                        <input\r\n                          className=\"form-check-input\"\r\n                          type=\"checkbox\"\r\n                          id={`flexSwitchCheckChecked-${i}`}\r\n                          checked={exam.isactive}\r\n                          readOnly\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"mb-2 d-flex align-items-center gap-2\">\r\n                    <i className=\"bi bi-person-badge-fill text-primary\"></i>\r\n                    <div className=\"fw-medium\">{exam.teacher_name}</div>\r\n                  </div>\r\n                  <div className=\"mb-2 d-flex align-items-center gap-2\">\r\n                    <i className=\"bi bi-file-earmark-text-fill text-primary\"></i>\r\n                    <div className=\"d-flex flex-column gap-1\">\r\n                      {exam.banks.map((bank, idx) => (\r\n                        <span key={idx} className=\"fw-medium\">\r\n                          {bank.type !== \"paket\"\r\n                            ? `${bank.name} - PG ${bank.pg} - Essay ${bank.essay}`\r\n                            : `${bank.name}`}\r\n                        </span>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"mb-3\">\r\n                    <div className=\"text-muted small mb-1\">Kelas</div>\r\n                    <div className=\"d-flex flex-wrap gap-2\">\r\n                      {exam.classes?.map((item, idx) => (\r\n                        <span key={idx} className=\"badge bg-primary\">\r\n                          {item.name}\r\n                        </span>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"row g-2 mb-3\">\r\n                    <div className=\"col-6 col-sm-3\">\r\n                      <div className=\"text-muted small\">PG</div>\r\n                      <span className=\"badge bg-success\">{exam.mc_score}%</span>\r\n                    </div>\r\n                    <div className=\"col-6 col-sm-3\">\r\n                      <div className=\"text-muted small\">Essay</div>\r\n                      <span className=\"badge bg-success\">\r\n                        {exam.essay_score}%\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"col-6 col-sm-3\">\r\n                      <div className=\"text-muted small\">Durasi</div>\r\n                      <span className=\"badge bg-primary\">\r\n                        {exam.duration} Menit\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"col-6 col-sm-3\">\r\n                      <div className=\"text-muted small\">Acak</div>\r\n                      {exam.isshuffle ? (\r\n                        <span className=\"badge bg-success\">Ya</span>\r\n                      ) : (\r\n                        <span className=\"badge bg-danger\">Tidak</span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  {/* Token & Dropdown Aksi */}\r\n                  <div className=\"mb-1 d-flex align-items-center justify-content-between gap-2 flex-wrap\">\r\n                    <span\r\n                      className=\"badge bg-secondary pointer fs-6\"\r\n                      data-toggle=\"tooltip\"\r\n                      data-placement=\"top\"\r\n                      title=\"Copy Token\"\r\n                      onClick={() => copyTokenHandler(exam.token)}\r\n                    >\r\n                      {exam.token}\r\n                    </span>\r\n\r\n                    <button\r\n                      className=\"btn btn-secondary btn-sm dropdown-toggle\"\r\n                      type=\"button\"\r\n                      id={`dropdownMenuButton-${i}`}\r\n                      data-bs-toggle=\"dropdown\"\r\n                      aria-expanded=\"false\"\r\n                    >\r\n                      Pilihan Aksi\r\n                    </button>\r\n                    <ul\r\n                      className=\"dropdown-menu\"\r\n                      aria-labelledby={`dropdownMenuButton-${i}`}\r\n                    >\r\n                      <li>\r\n                        <button\r\n                          className=\"dropdown-item d-flex align-items-center\"\r\n                          onClick={() =>\r\n                            openNewTab(exam.name, exam.id, exam.token)\r\n                          }\r\n                        >\r\n                          <i className=\"bi bi-people me-2\"></i>\r\n                          Lihat\r\n                        </button>\r\n                      </li>\r\n                      <li>\r\n                        <button\r\n                          className=\"dropdown-item d-flex align-items-center\"\r\n                          data-bs-toggle=\"modal\"\r\n                          data-bs-target=\"#addexam\"\r\n                          onClick={() => setDetail(exam)}\r\n                        >\r\n                          <i className=\"bi bi-pencil-square me-2\"></i>\r\n                          Edit\r\n                        </button>\r\n                      </li>\r\n                      <li>\r\n                        <button\r\n                          className=\"dropdown-item d-flex align-items-center text-danger\"\r\n                          disabled={isLoading}\r\n                          onClick={() => deleteHandler(exam.id)}\r\n                        >\r\n                          <i className=\"bi bi-folder-x me-2\"></i>\r\n                          Hapus\r\n                        </button>\r\n                      </li>\r\n                    </ul>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <div className=\"col-12\">\r\n            <div className=\"alert alert-info mb-0\">Data belum tersedia</div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </Table>\r\n  );\r\n};\r\n\r\nexport default TableExam;\r\n","import { useState } from \"react\";\r\nimport Form from \"./Form\";\r\nimport TableExam from \"./TableExam\";\r\n\r\nconst CbtExam = () => {\r\n  const [detail, setDetail] = useState(null);\r\n\r\n  const handleEdit = (exam) => {\r\n    setDetail(exam);\r\n  };\r\n\r\n  return (\r\n    <div className=\"row g-2\">\r\n      <div className=\"col-12\">\r\n        <TableExam setDetail={handleEdit} />\r\n      </div>\r\n\r\n      <Form detail={detail} setDetail={setDetail} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CbtExam;\r\n"],"names":["Form","detail","setDetail","onSuccess","user","useSelector","state","auth","initialFormState","examid","teacher","id","bank","name","duration","classes","token","isshuffle","mc_score","essay_score","formData","setFormData","useState","data","teachers","useGetTeachersQuery","useGetClassesQuery","createExam","isSuccess","isLoading","isError","reset","useCreateExamMutation","teacherOptions","map","value","label","selectedTeacher","level","find","t","bankOptions","_a","type","classOptions","item","useEffect","banks","bankid","pg","essay","cls","prev","handleInput","e","field","target","resetForm","closeButton","document","querySelector","click","body","style","overflow","jsxRuntimeExports","jsx","className","tabIndex","children","onSubmit","preventDefault","c","promise","unwrap","then","res","message","loading","success","error","err","jsxs","Select","isClearable","isSearchable","placeholder","opt","options","onChange","selectedOption","isDisabled","isMulti","filter","some","b","selectedOptions","selectedBanks","_c","_b","hidden","onClick","disabled","TableExam","page","setPage","limit","setLimit","search","setSearch","rawData","useGetExamsQuery","exams","totalData","totalPages","deleteExam","useDeleteExamMutation","changeStatus","isSuccessStatus","isErrorStatus","resetStatus","useChangeStatusMutation","Table","length","exam","i","changeStatusHandler","checked","isactive","readOnly","teacher_name","idx","title","copyTokenHandler","navigator","clipboard","writeText","toast","formatName","toUpperCase","replace","window","open","openNewTab","deleteHandler","confirm","CbtExam"],"mappings":"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"}