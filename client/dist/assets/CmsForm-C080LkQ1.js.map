{"version":3,"file":"CmsForm-C080LkQ1.js","sources":["../../src/page/cms/components/CmsForm.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { FaUpload, FaTimes } from \"react-icons/fa\";\r\n\r\nconst CmsForm = ({\r\n  fields,\r\n  initialValues = {},\r\n  onSubmit,\r\n  submitButtonText = \"Simpan\",\r\n  submitButtonClass = \"btn-primary\",\r\n  cancelButtonText = \"Batal\",\r\n  onCancel,\r\n  layout = \"vertical\",\r\n}) => {\r\n  const [formData, setFormData] = useState(initialValues);\r\n  const [errors, setErrors] = useState({});\r\n  const [imagePreview, setImagePreview] = useState(null);\r\n\r\n  const handleChange = (e, field) => {\r\n    const { name, value, type, files } = e.target;\r\n\r\n    if (type === \"file\" && files && files[0]) {\r\n      const file = files[0];\r\n      setFormData({ ...formData, [name]: file });\r\n\r\n      // Create preview for images\r\n      if (file.type.startsWith(\"image/\")) {\r\n        const reader = new FileReader();\r\n        reader.onloadend = () => {\r\n          setImagePreview(reader.result);\r\n        };\r\n        reader.readAsDataURL(file);\r\n      }\r\n    } else {\r\n      setFormData({ ...formData, [name]: value });\r\n\r\n      // Auto-resize textarea\r\n      if (type === \"textarea\") {\r\n        e.target.style.height = \"auto\";\r\n        e.target.style.height = e.target.scrollHeight + \"px\";\r\n      }\r\n    }\r\n\r\n    // Clear error when field is edited\r\n    if (errors[name]) {\r\n      setErrors({ ...errors, [name]: null });\r\n    }\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n\r\n    fields.forEach((field) => {\r\n      if (field.required && !formData[field.name]) {\r\n        newErrors[field.name] = `${field.label} harus diisi`;\r\n      }\r\n\r\n      if (field.pattern && formData[field.name]) {\r\n        const regex = new RegExp(field.pattern);\r\n        if (!regex.test(formData[field.name])) {\r\n          newErrors[field.name] =\r\n            field.patternMessage || `${field.label} tidak sesuai`;\r\n        }\r\n      }\r\n    });\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (validateForm()) {\r\n      onSubmit(formData);\r\n    }\r\n  };\r\n\r\n  const renderField = (field) => {\r\n    const {\r\n      name,\r\n      label,\r\n      type = \"text\",\r\n      placeholder,\r\n      options,\r\n      rows = 3,\r\n      accept,\r\n      helpText,\r\n    } = field;\r\n\r\n    return (\r\n      <div className={`mb-3 ${layout === \"horizontal\" ? \"row\" : \"\"}`}>\r\n        <label\r\n          htmlFor={name}\r\n          className={`form-label ${layout === \"horizontal\" ? \"col-sm-3\" : \"\"}`}\r\n        >\r\n          {label}\r\n          {field.required && <span className=\"text-danger ms-1\">*</span>}\r\n        </label>\r\n\r\n        <div className={layout === \"horizontal\" ? \"col-sm-9\" : \"\"}>\r\n          {type === \"textarea\" ? (\r\n            <textarea\r\n              id={name}\r\n              name={name}\r\n              className={`form-control ${errors[name] ? \"is-invalid\" : \"\"}`}\r\n              placeholder={placeholder}\r\n              rows={rows}\r\n              value={formData[name] || \"\"}\r\n              onChange={(e) => handleChange(e, field)}\r\n              style={{ minHeight: \"200px\", resize: \"auto\" }}\r\n            />\r\n          ) : type === \"select\" ? (\r\n            <select\r\n              id={name}\r\n              name={name}\r\n              className={`form-select ${errors[name] ? \"is-invalid\" : \"\"}`}\r\n              value={formData[name] || \"\"}\r\n              onChange={(e) => handleChange(e, field)}\r\n            >\r\n              <option value=\"\">Select {label}</option>\r\n              {options.map((option) => (\r\n                <option key={option.value} value={option.value}>\r\n                  {option.label}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          ) : type === \"file\" ? (\r\n            <div>\r\n              <div className=\"input-group\">\r\n                <input\r\n                  id={name}\r\n                  name={name}\r\n                  type=\"file\"\r\n                  className={`form-control ${errors[name] ? \"is-invalid\" : \"\"}`}\r\n                  accept={accept}\r\n                  onChange={(e) => handleChange(e, field)}\r\n                />\r\n                <label className=\"input-group-text\" htmlFor={name}>\r\n                  <FaUpload />\r\n                </label>\r\n              </div>\r\n              {imagePreview && (\r\n                <div className=\"mt-2 position-relative d-inline-block\">\r\n                  <img\r\n                    src={imagePreview}\r\n                    alt=\"Preview\"\r\n                    className=\"img-thumbnail\"\r\n                    style={{ maxHeight: \"150px\" }}\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-sm btn-danger position-absolute top-0 end-0 m-1\"\r\n                    onClick={() => {\r\n                      setImagePreview(null);\r\n                      setFormData({ ...formData, [name]: null });\r\n                    }}\r\n                  >\r\n                    <FaTimes />\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : type === \"checkbox\" ? (\r\n            <div className=\"form-check\">\r\n              <input\r\n                id={name}\r\n                name={name}\r\n                type=\"checkbox\"\r\n                className={`form-check-input ${\r\n                  errors[name] ? \"is-invalid\" : \"\"\r\n                }`}\r\n                checked={formData[name] || false}\r\n                onChange={(e) =>\r\n                  handleChange(\r\n                    { target: { name, value: e.target.checked } },\r\n                    field\r\n                  )\r\n                }\r\n              />\r\n              <label className=\"form-check-label\" htmlFor={name}>\r\n                {placeholder}\r\n              </label>\r\n            </div>\r\n          ) : (\r\n            <input\r\n              id={name}\r\n              name={name}\r\n              type={type}\r\n              className={`form-control ${errors[name] ? \"is-invalid\" : \"\"}`}\r\n              placeholder={placeholder}\r\n              value={formData[name] || \"\"}\r\n              onChange={(e) => handleChange(e, field)}\r\n            />\r\n          )}\r\n\r\n          {errors[name] && (\r\n            <div className=\"invalid-feedback\">{errors[name]}</div>\r\n          )}\r\n\r\n          {helpText && !errors[name] && (\r\n            <div className=\"form-text\">{helpText}</div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <motion.form\r\n      onSubmit={handleSubmit}\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      transition={{ duration: 0.3 }}\r\n    >\r\n      {fields.map((field) => (\r\n        <motion.div\r\n          key={field.name}\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.3, delay: 0.1 }}\r\n        >\r\n          {renderField(field)}\r\n        </motion.div>\r\n      ))}\r\n\r\n      <div className=\"d-flex justify-content-end gap-2 mt-4\">\r\n        {onCancel && (\r\n          <motion.button\r\n            type=\"button\"\r\n            className=\"btn btn-sm btn-warning\"\r\n            onClick={onCancel}\r\n            whileHover={{ scale: 1.05 }}\r\n            whileTap={{ scale: 0.95 }}\r\n          >\r\n            {cancelButtonText}\r\n          </motion.button>\r\n        )}\r\n\r\n        <motion.button\r\n          type=\"submit\"\r\n          className={`btn btn-sm ${submitButtonClass}`}\r\n          whileHover={{ scale: 1.05 }}\r\n          whileTap={{ scale: 0.95 }}\r\n        >\r\n          {submitButtonText}\r\n        </motion.button>\r\n      </div>\r\n    </motion.form>\r\n  );\r\n};\r\n\r\nexport default CmsForm;\r\n"],"names":["CmsForm","fields","initialValues","onSubmit","submitButtonText","submitButtonClass","cancelButtonText","onCancel","layout","formData","setFormData","useState","errors","setErrors","imagePreview","setImagePreview","handleChange","e","field","name","value","type","files","target","file","startsWith","reader","FileReader","onloadend","result","readAsDataURL","style","height","scrollHeight","renderField","label","placeholder","options","rows","accept","helpText","jsxs","className","children","jsxRuntimeExports","htmlFor","required","jsx","id","onChange","minHeight","resize","map","option","FaUpload","src","alt","maxHeight","onClick","FaTimes","checked","motion","form","preventDefault","newErrors","forEach","pattern","RegExp","test","patternMessage","Object","keys","length","validateForm","initial","opacity","animate","transition","duration","div","y","delay","button","whileHover","scale","whileTap"],"mappings":"wKAIA,MAAMA,EAAU,EACdC,SACAC,gBAAgB,CAAC,EACjBC,WACAC,mBAAmB,SACnBC,oBAAoB,cACpBC,mBAAmB,QACnBC,WACAC,SAAS,eAET,MAAOC,EAAUC,GAAeC,EAAAA,SAAST,IAClCU,EAAQC,GAAaF,EAAAA,SAAS,CAAA,IAC9BG,EAAcC,GAAmBJ,EAAAA,SAAS,MAE3CK,EAAe,CAACC,EAAGC,KACvB,MAAMC,KAAEA,EAAMC,MAAAA,EAAAC,KAAOA,EAAMC,MAAAA,GAAUL,EAAEM,OAEvC,GAAa,SAATF,GAAmBC,GAASA,EAAM,GAAI,CAClC,MAAAE,EAAOF,EAAM,GAInB,GAHAZ,EAAY,IAAKD,EAAUU,CAACA,GAAOK,IAG/BA,EAAKH,KAAKI,WAAW,UAAW,CAC5B,MAAAC,EAAS,IAAIC,WACnBD,EAAOE,UAAY,KACjBb,EAAgBW,EAAOG,OAAM,EAE/BH,EAAOI,cAAcN,EAAI,CAC3B,MAEAd,EAAY,IAAKD,EAAUU,CAACA,GAAOC,IAGtB,aAATC,IACAJ,EAAAM,OAAOQ,MAAMC,OAAS,OACxBf,EAAEM,OAAOQ,MAAMC,OAASf,EAAEM,OAAOU,aAAe,MAKhDrB,EAAOO,IACTN,EAAU,IAAKD,EAAQO,CAACA,GAAO,MAAM,EAiCnCe,EAAehB,IACb,MAAAC,KACJA,EAAAgB,MACAA,EAAAd,KACAA,EAAO,OAAAe,YACPA,EAAAC,QACAA,EAAAC,KACAA,EAAO,EAAAC,OACPA,EAAAC,SACAA,GACEtB,EAGFuB,OAAAA,OAAC,OAAIC,UAAW,SAAmB,eAAXlC,EAA0B,MAAQ,IACxDmC,SAAA,CAAAC,EAAAH,KAAC,QAAA,CACCI,QAAS1B,EACTuB,UAAW,eAAyB,eAAXlC,EAA0B,WAAa,IAE/DmC,SAAA,CAAAR,EACAjB,EAAM4B,UAAYC,EAAAA,IAAC,OAAK,CAAAL,UAAU,mBAAmBC,SAAC,gBAGxD,MAAI,CAAAD,UAAsB,eAAXlC,EAA0B,WAAa,GACpDmC,SAAA,CAAS,aAATtB,EACCuB,EAAAG,IAAC,WAAA,CACCC,GAAI7B,EACJA,OACAuB,UAAW,iBAAgB9B,EAAOO,GAAQ,aAAe,IACzDiB,cACAE,OACAlB,MAAOX,EAASU,IAAS,GACzB8B,SAAWhC,GAAMD,EAAaC,GAC9Bc,MAAO,CAAEmB,UAAW,QAASC,OAAQ,UAE5B,WAAT9B,EACFuB,EAAAH,KAAC,SAAA,CACCO,GAAI7B,EACJA,OACAuB,UAAW,gBAAe9B,EAAOO,GAAQ,aAAe,IACxDC,MAAOX,EAASU,IAAS,GACzB8B,SAAWhC,GAAMD,EAAaC,GAE9B0B,SAAA,GAACF,KAAA,SAAA,CAAOrB,MAAM,GAAGuB,SAAA,CAAA,UAAQR,KACxBE,EAAQe,KAAKC,GACXN,EAAAA,IAAA,SAAA,CAA0B3B,MAAOiC,EAAOjC,MACtCuB,SAAAU,EAAOlB,OADGkB,EAAOjC,YAKb,SAATC,IACFoB,KAAC,MACC,CAAAE,SAAA,GAACF,KAAA,MAAA,CAAIC,UAAU,cACbC,SAAA,CAAAC,EAAAG,IAAC,QAAA,CACCC,GAAI7B,EACJA,OACAE,KAAK,OACLqB,UAAW,iBAAgB9B,EAAOO,GAAQ,aAAe,IACzDoB,SACAU,SAAWhC,GAAMD,EAAaC,KAEhC8B,EAAAA,IAAC,SAAML,UAAU,mBAAmBG,QAAS1B,EAC3CwB,WAAAI,IAACO,GAAS,QAGbxC,GACC8B,EAAAH,KAAC,MAAI,CAAAC,UAAU,wCACbC,SAAA,CAAAC,EAAAG,IAAC,MAAA,CACCQ,IAAKzC,EACL0C,IAAI,UACJd,UAAU,gBACVX,MAAO,CAAE0B,UAAW,WAEtBb,EAAAG,IAAC,SAAA,CACC1B,KAAK,SACLqB,UAAU,0DACVgB,QAAS,KACP3C,EAAgB,MAChBL,EAAY,IAAKD,EAAUU,CAACA,GAAO,MAAM,EAG3CwB,eAACgB,EAAQ,CAAA,WAKN,aAATtC,EACDoB,EAAAA,KAAA,MAAA,CAAIC,UAAU,aACbC,SAAA,CAAAC,EAAAG,IAAC,QAAA,CACCC,GAAI7B,EACJA,OACAE,KAAK,WACLqB,UAAW,qBACT9B,EAAOO,GAAQ,aAAe,IAEhCyC,QAASnD,EAASU,KAAS,EAC3B8B,SAAWhC,GACTD,EACE,CAAEO,OAAQ,CAAEJ,OAAMC,MAAOH,EAAEM,OAAOqC,mBAKvC,QAAM,CAAAlB,UAAU,mBAAmBG,QAAS1B,EAC1CwB,SACHP,OAGFQ,EAAAG,IAAC,QAAA,CACCC,GAAI7B,EACJA,OACAE,OACAqB,UAAW,iBAAgB9B,EAAOO,GAAQ,aAAe,IACzDiB,cACAhB,MAAOX,EAASU,IAAS,GACzB8B,SAAWhC,GAAMD,EAAaC,KAIjCL,EAAOO,IACN4B,EAAAA,IAAC,OAAIL,UAAU,mBAAoBC,SAAO/B,EAAAO,KAG3CqB,IAAa5B,EAAOO,IAClB4B,EAAAA,IAAA,MAAA,CAAIL,UAAU,YAAaC,SAASH,SAG3C,EAKF,OAAAI,EAAAH,KAACoB,EAAOC,KAAP,CACC3D,SA5IkBc,IACpBA,EAAE8C,iBAtBiB,MACnB,MAAMC,EAAY,CAAC,EAiBnB,OAfO/D,EAAAgE,SAAS/C,IACVA,EAAM4B,WAAarC,EAASS,EAAMC,QACpC6C,EAAU9C,EAAMC,MAAQ,GAAGD,EAAMiB,qBAG/BjB,EAAMgD,SAAWzD,EAASS,EAAMC,QACpB,IAAIgD,OAAOjD,EAAMgD,SACpBE,KAAK3D,EAASS,EAAMC,SAC7B6C,EAAU9C,EAAMC,MACdD,EAAMmD,gBAAkB,GAAGnD,EAAMiB,sBACrC,IAIJtB,EAAUmD,GAC+B,IAAlCM,OAAOC,KAAKP,GAAWQ,MAAW,EAMrCC,IACFtE,EAASM,EAAQ,EAyIjBiE,QAAS,CAAEC,QAAS,GACpBC,QAAS,CAAED,QAAS,GACpBE,WAAY,CAAEC,SAAU,IAEvBnC,SAAA,CAAO1C,EAAAmD,KAAKlC,GACX0B,EAAAG,IAACc,EAAOkB,IAAP,CAECL,QAAS,CAAEC,QAAS,EAAGK,EAAG,IAC1BJ,QAAS,CAAED,QAAS,EAAGK,EAAG,GAC1BH,WAAY,CAAEC,SAAU,GAAKG,MAAO,IAEnCtC,WAAYzB,IALRA,EAAMC,UASfsB,KAAC,MAAI,CAAAC,UAAU,wCACZC,SAAA,CACCpC,GAAAqC,EAAAG,IAACc,EAAOqB,OAAP,CACC7D,KAAK,SACLqB,UAAU,yBACVgB,QAASnD,EACT4E,WAAY,CAAEC,MAAO,MACrBC,SAAU,CAAED,MAAO,KAElBzC,SAAArC,IAILsC,EAAAG,IAACc,EAAOqB,OAAP,CACC7D,KAAK,SACLqB,UAAW,cAAcrC,IACzB8E,WAAY,CAAEC,MAAO,MACrBC,SAAU,CAAED,MAAO,KAElBzC,SAAAvC,SAGP"}