import{aq as e,l as s,at as a,j as t,F as r,r as i,m as l,as as n,b as d,c,D as o,$ as m,a as j,B as x,au as h,R as u,C as p,h as g,x as f}from"./index-DgKTJYPj.js";import{c as y}from"./vendor-DTs43g_X.js";import{G as b,R as v}from"./FallOutlined-CsjnTI5z.js";import{S as I,E as k}from"./Pagination-DupnkXEC.js";import{A as S}from"./index-BPQDC5Zx.js";import{R as F}from"./ReadOutlined-B52ypUpm.js";import{R as T}from"./TeamOutlined-C3TaMKt2.js";import{R as z}from"./CalendarOutlined-CdrZzQvp.js";import{C as w}from"./Collapse-CuIh0JhV.js";import{M as A}from"./index-CX7GIQLb.js";import{L as C}from"./index-B91tKEhO.js";import{S as D}from"./index-Z0keh-rU.js";import{R as L}from"./BookOutlined-WSaFMy8q.js";const{Title:O,Text:P,Paragraph:B}=i,{useBreakpoint:R}=b,G=({detail:e})=>{const s=e?.[0]?.attendance||[],a=e?.[1]?.attitude||[],r=e?.[2]||{summative:[],formative:[]};return t.jsxs(u,{gutter:[16,16],children:[t.jsx(p,{xs:24,md:12,lg:6,children:t.jsx(j,{size:"small",title:"Attendance",children:t.jsx(C,{dataSource:s,renderItem:e=>{const s=Object.keys(e)[0],a=e[s];return t.jsxs(C.Item,{children:[t.jsx(P,{style:{textTransform:"capitalize"},children:s}),t.jsx(P,{strong:!0,children:"presentase"===s?`${a}%`:a})]})}})})}),t.jsx(p,{xs:24,md:12,lg:6,children:t.jsx(j,{size:"small",title:"Attitude",children:t.jsx(C,{dataSource:a,renderItem:e=>{const s=Object.keys(e)[0],a=e[s];return t.jsxs(C.Item,{children:[t.jsx(P,{style:{textTransform:"capitalize"},children:s}),t.jsx(D,{value:a,precision:2,valueStyle:{fontSize:"1rem"}})]})}})})}),t.jsx(p,{xs:24,md:12,lg:8,children:t.jsx(j,{size:"small",title:"Summative",children:t.jsx(C,{dataSource:r.summative,renderItem:e=>{const s=Object.keys(e)[0],a=e[s];return t.jsxs(C.Item,{children:[t.jsx(P,{style:{textTransform:"capitalize"},children:s}),t.jsx(D,{value:a,precision:2,valueStyle:{fontSize:"1rem"}})]})}})})}),t.jsx(p,{xs:24,md:12,lg:4,children:t.jsx(j,{size:"small",title:"Formative",children:t.jsx(C,{dataSource:r.formative,renderItem:e=>t.jsx(C.Item,{children:e}),locale:{emptyText:"-"}})})})]})},K=()=>{const i=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],u=i.map(e=>({label:e,value:e})),[p,g]=y.useState(null),[f,b]=y.useState(!1),[K,$]=y.useState(null),{user:M}=e(e=>e.auth),[N]=s.useForm(),J=R(),E=J.xs,H=M?.student_id,V=M?.periode;y.useEffect(()=>{const e=(new Date).getMonth(),s=i[0===e?11:e-1];g(s),N.setFieldsValue({month:s})},[N]);const{data:W,error:_,isFetching:q}=a({studentId:H,month:p,periode:V},{skip:!H||!p||!V}),Q=W?.[0],U=()=>{b(!1),$(null)},X=e=>t.jsx(C,{itemLayout:"vertical",dataSource:e,renderItem:e=>t.jsx(C.Item,{children:t.jsxs(j,{children:[t.jsxs(r,{justify:"space-between",align:"center",wrap:"wrap",gap:"small",children:[t.jsxs("div",{children:[t.jsx(O,{level:5,style:{marginBottom:0},children:e.name}),t.jsxs(P,{type:"secondary",children:[t.jsx(d,{})," Guru: ",e.teacher]})]}),t.jsx(D,{title:"Nilai Akhir",value:e.score,precision:2,valueStyle:{color:e.score>=75?"#3f8600":"#cf1322"},prefix:e.score>=75?t.jsx(h,{}):t.jsx(v,{})})]}),e.chapters&&e.chapters.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs(o,{orientation:"left",plain:!0,children:[t.jsx(L,{})," Chapter Bulan Ini"]}),t.jsx(C,{size:"small",dataSource:e.chapters,renderItem:e=>t.jsx(C.Item,{children:e.name})})]}),E?t.jsx(x,{type:"primary",ghost:!0,style:{marginTop:"1rem"},onClick:()=>(e=>{$(e),b(!0)})(e),children:"Lihat Detail Penilaian"}):t.jsxs(t.Fragment,{children:[t.jsx(o,{orientation:"left",plain:!0,children:"Detail Penilaian"}),t.jsx(G,{detail:e.detail}),e.note&&t.jsxs(t.Fragment,{children:[t.jsx(o,{orientation:"left",plain:!0,children:"Catatan Guru"}),t.jsxs(B,{italic:!0,children:['"',e.note,'"']})]})]})]})},`${e.name}-${e.teacher}`)});return t.jsxs(r,{vertical:!0,gap:"middle",children:[t.jsx(s,{form:N,layout:"vertical",children:t.jsx(s.Item,{name:"month",label:t.jsx(O,{level:4,style:{margin:0},children:"Pilih Bulan Laporan"}),children:t.jsx(I,{placeholder:"Pilih Bulan",onChange:e=>g(e),options:u,style:{width:300}})})}),q&&t.jsx("div",{style:{textAlign:"center",marginTop:50},children:t.jsx(l,{size:"large"})}),_&&t.jsx(S,{message:"Terjadi Kesalahan",description:_?.data?.message||"Gagal memuat data.",type:"error",showIcon:!0}),!q&&Q&&t.jsxs(t.Fragment,{children:[t.jsxs(n,{bordered:!0,column:J.md?2:1,size:"small",children:[t.jsx(n.Item,{label:t.jsxs(t.Fragment,{children:[t.jsx(d,{})," Nama Siswa"]}),span:J.md?2:1,children:t.jsxs(P,{strong:!0,children:[Q.name," (",Q.nis,")"]})}),t.jsx(n.Item,{label:t.jsxs(t.Fragment,{children:[t.jsx(c,{})," Homebase"]}),children:Q.homebase}),t.jsxs(n.Item,{label:t.jsxs(t.Fragment,{children:[t.jsx(F,{})," Kelas"]}),children:[Q.grade," - ",Q.class]}),t.jsx(n.Item,{label:t.jsxs(t.Fragment,{children:[t.jsx(T,{})," Wali Kelas"]}),children:Q.teacher_homeroom}),t.jsx(n.Item,{label:t.jsxs(t.Fragment,{children:[t.jsx(z,{})," Periode Laporan"]}),children:t.jsxs(P,{strong:!0,children:[Q.periode," - ",Q.month]})})]}),t.jsx(o,{}),t.jsx(w,{accordion:!0,defaultActiveKey:["0"],ghost:!0,items:Q.category.map((e,s)=>({key:s,label:t.jsx(O,{level:5,children:e.name}),children:"Diniyah"===e.name&&e.branch?t.jsx(w,{items:e.branch.map((e,s)=>({key:s,label:t.jsxs(r,{justify:"space-between",style:{width:"100%"},children:[t.jsx(P,{strong:!0,children:e.name}),t.jsxs(m,{color:"blue",children:["Rata-rata Nilai: ",e.score]})]}),children:X(e.subjects)}))}):X(e.subjects)}))})]}),!q&&!Q&&p&&!_&&t.jsx(j,{children:t.jsx(k,{description:"Data laporan untuk bulan yang dipilih tidak tersedia."})}),t.jsx(A,{title:t.jsxs(O,{level:4,children:["Detail Laporan: ",K?.name||""]}),open:f,onCancel:U,footer:[t.jsx(x,{onClick:U,children:"Tutup"},"back")],width:1e3,children:K&&t.jsxs(r,{vertical:!0,gap:"middle",children:[t.jsx(o,{orientation:"left",plain:!0,children:"Detail Penilaian"}),t.jsx(G,{detail:K.detail}),K.note&&t.jsxs(t.Fragment,{children:[t.jsx(o,{orientation:"left",plain:!0,children:"Catatan Guru"}),t.jsxs(B,{italic:!0,children:['"',K.note,'"']})]})]})})]})},$=()=>t.jsx(S,{type:"info",showIcon:!0,message:"Laporan Semester",description:"Halaman ini masih dalam tahap pengembangan"}),M=()=>{const{user:s}=e(e=>e.auth),a=[{label:"Bulanan",key:"1",children:t.jsx(K,{})},{label:"Semester",key:"2",children:t.jsx($,{})}];return t.jsxs(g,{title:"Laporan Akademik",levels:["parent"],children:[t.jsx(i.Title,{level:5,children:`Laporan Akademik ${s?.student}`}),t.jsx(f,{centered:!0,defaultActiveKey:"1",items:a})]})};export{M as default};
//# sourceMappingURL=ParentAcademic-BfQh9cz8.js.map
