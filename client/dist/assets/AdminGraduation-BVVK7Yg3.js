import{ag as e,ah as a,j as s,e as t,ai as i}from"./index-CWxNWZvk.js";import{b as d}from"./vendor-DfXzdC0j.js";import{L as l}from"./Layout-CrHSAK76.js";import{S as n}from"./react-select.esm-DUeLA41h.js";import{T as r}from"./Table-CP5BEHya.js";import"./index-CGMX7dKw.js";import"./index-hpZ4eOv6.js";import"./index-DyuEXp_a.js";const o=({detail:i,setDetail:l})=>{const[r,o]=d.useState({id:"",agency:"",userid:"",description:""}),{data:c=[]}=e(),m=null==c?void 0:c.map((e=>({value:e.id,label:e.name}))),[u,{isLoading:x,isSuccess:b,isError:p,reset:g}]=a();return d.useEffect((()=>{i&&o({id:i.id??"",agency:i.agency??"",userid:i.userid??"",description:i.description??""})}),[i]),d.useEffect((()=>{if(b||p){if(b){l({}),o({id:"",agency:"",userid:"",description:""});document.querySelector('[data-bs-dismiss="modal"]').click()}g()}}),[b,p]),s.jsx("div",{className:"modal fade",id:"addgraduation",tabIndex:"-1","aria-labelledby":"addgraduationLabel","aria-hidden":"true","data-bs-backdrop":"static","data-bs-keyboard":"false",children:s.jsx("div",{className:"modal-dialog",children:s.jsx("div",{className:"modal-content",children:s.jsxs("form",{onSubmit:e=>{e.preventDefault(),t.promise(u(r).unwrap().then((e=>e.message)),{loading:"Memuat data...",success:e=>e,error:e=>e.data.message})},className:"border-0 p-3 rounded flex-column gap-3",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h5",{className:"modal-title",id:"addgraduationLabel",children:"Data Lulusan"}),s.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",disabled:x})]}),s.jsxs("div",{className:"modal-body d-flex flex-column gap-3",children:[s.jsx(n,{isClearable:!0,isSearchable:!0,placeholder:"Cari Murid",value:(null==m?void 0:m.find((e=>e.value===r.userid)))||null,options:m,onChange:e=>{o((a=>({...a,userid:(null==e?void 0:e.value)||null})))}}),s.jsx("input",{type:"text",name:"agency",id:"agency",placeholder:"Nama Instansi",className:"form-control",required:!0,value:r.agency,onChange:e=>o({...r,agency:e.target.value})}),s.jsx("textarea",{name:"description",id:"description",placeholder:"Keterangan",className:"form-control",value:r.description,onChange:e=>o({...r,description:e.target.value})})]}),s.jsxs("div",{className:"modal-footer",children:[s.jsx("button",{type:"button",className:"btn btn-warning","data-bs-dismiss":"modal",onClick:()=>{l({}),o({id:"",agency:"",userid:"",description:""})},disabled:x,children:"Batal"}),s.jsx("button",{type:"submit",className:"btn btn-success",disabled:x,children:"Simpan"})]})]})})})})},c=({setDetail:e})=>{const[a,t]=d.useState(1),[l,n]=d.useState(10),[o,c]=d.useState(""),{data:m,isLoading:u}=i({page:a,limit:l,search:o}),{result:x,totalData:b,totalPages:p}=m||{};return s.jsx(r,{isLoading:u,totalData:b,totalPages:p,page:a,limit:l,setPage:t,setLimit:n,setSearch:c,children:s.jsx("div",{className:"row g-3",children:(null==x?void 0:x.length)>0?x.map(((a,t)=>{const i=a.student_name?a.student_name.split(" ").map((e=>e[0])).join("").toUpperCase().slice(0,2):"?";return s.jsx("div",{className:"col-12 col-md-4",children:s.jsxs("div",{className:"rounded d-flex flex-column justify-content-between h-100 p-4 shadow-sm hover-shadow",style:{border:"1px solid #f3f3f3",minHeight:180,boxShadow:"0 4px 18px rgba(0,0,0,0.07)"},children:[s.jsxs("div",{className:"d-flex align-items-center gap-3 mb-2",children:[s.jsx("div",{className:"avatar flex-shrink-0 d-flex align-items-center justify-content-center bg-gradient-primary text-primary fw-bold rounded-circle shadow-sm",style:{width:56,height:56,fontSize:22,background:"linear-gradient(135deg, #e3f0ff 0%, #f8fbff 100%)",border:"2px solid #d0e3ff"},children:i}),s.jsxs("div",{className:"flex-grow-1",children:[s.jsx("div",{className:"fw-bold fs-5 text-dark mb-1",style:{letterSpacing:.5},children:a.student_name}),s.jsxs("div",{className:"small text-muted mb-1",children:["NIS:"," ",s.jsx("span",{className:"badge bg-light text-primary border border-primary bg-opacity-10",children:a.nis})]}),s.jsxs("div",{className:"d-flex align-items-center gap-2",children:[s.jsxs("div",{className:"small text-secondary",children:[s.jsx("i",{className:"bi bi-building me-1"}),a.agency]}),s.jsx("div",{className:"vr"}),s.jsxs("div",{className:"small text-secondary",children:[s.jsx("i",{className:"bi bi-building me-1"}),a.description]})]})]})]}),s.jsxs("div",{className:"d-flex justify-content-end gap-3 mt-auto pt-2",children:[s.jsxs("button",{className:"btn btn-sm btn-outline-primary d-flex align-items-center gap-1 shadow-sm px-3",title:"Edit",style:{borderRadius:"8px",fontWeight:500},onClick:()=>e(a),"data-bs-toggle":"modal","data-bs-target":"#addgraduation",children:[s.jsx("i",{className:"bi bi-pencil-square"}),s.jsx("span",{children:"Edit"})]}),s.jsxs("button",{className:"btn btn-sm btn-outline-danger d-flex align-items-center gap-1 shadow-sm px-3",title:"Hapus",style:{borderRadius:"8px",fontWeight:500},children:[s.jsx("i",{className:"bi bi-trash"}),s.jsx("span",{children:"Hapus"})]})]})]})},a.id)})):s.jsx("div",{className:"text-center text-muted",children:s.jsx("p",{className:"bg-danger bg-opacity-10 p-3 rounded text-danger m-0",children:"Tidak ada data lulusan."})})})})},m=()=>{const[e,a]=d.useState({});return s.jsxs(l,{title:"Lulusan",levels:["admin"],children:[s.jsx(o,{detail:e,setDetail:a}),s.jsx(c,{setDetail:a})]})};export{m as default};
//# sourceMappingURL=AdminGraduation-BVVK7Yg3.js.map
