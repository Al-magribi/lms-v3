import{i as e,k as a,l as s,s as i,j as t,m as l,I as n,B as r,n as d,o,p as m,q as c,h as u,F as p,r as h}from"./index-DgKTJYPj.js";import{c as j}from"./vendor-DTs43g_X.js";import{A as x}from"./Add-CDW3IAik.js";import{C as b,S as g}from"./Cancel-CdtvPrMP.js";import{M as v}from"./index-CX7GIQLb.js";import{S as f}from"./Pagination-DupnkXEC.js";import{T as k}from"./TableLayout-Lfzqz4U2.js";import{D as y}from"./Table-ClF3X7K8.js";import{P as S}from"./index-C3c2grI_.js";import{R as C}from"./DeleteOutlined-BDamtBNP.js";import"./SaveOutlined-CpLetC6j.js";import"./index-B1LVMQTc.js";const w=({title:r,open:d,setOpen:o,admin:m,setAdmin:c})=>{const{data:u,isLoading:p}=e({page:"",limit:"",search:""}),[h,{isLoading:x,data:k,error:y,isSuccess:S}]=a(),[C]=s.useForm(),w=s.useWatch("level",C),A=()=>{o(!1),c(),C.resetFields()},L=u?.map(e=>({value:e.id,label:e.name}));return j.useEffect(()=>{m?C.setFieldsValue({level:m.level,home:m.homebase,name:m.username,email:m.email,phone:m.phone}):C.resetFields()},[m]),j.useEffect(()=>{S&&(A(),i.success(k.message)),y&&i.error(y.data.message)},[S,k,y]),t.jsx(v,{title:r,open:d,onCancel:A,destroyOnHidden:!0,footer:[t.jsx(b,{disabled:x,onClick:A},"reset"),t.jsx(g,{disabled:x,onClick:()=>C.submit()},"add")],style:{top:20},children:t.jsx(l,{tip:"Memporses data..",spinning:x,children:t.jsxs(s,{form:C,layout:"vertical",onFinish:e=>{if(m){const a={...e,id:m.id};h(a)}else h(e)},validateMessages:{required:"${label} wajib diisi!",types:{email:"${label} tidak valid!",number:"${label} tidak valid!"}},children:[t.jsx(s.Item,{name:"level",label:"Level",rules:[{required:!0}],children:t.jsx(f,{placeholder:"Pilih Level",onChange:e=>{switch(e){case"pusat":C.setFieldsValue({level:"center"});break;case"admin":C.setFieldsValue({level:"admin"});break;case"tahfiz":C.setFieldsValue({level:"tahfiz"});break;case"cms":C.setFieldsValue({level:"cms"})}},options:[{value:"center",label:"Pusat"},{value:"admin",label:"Admin Satuan"},{value:"tahfiz",label:"Tahfiz"},{value:"cms",label:"Konten"}],showSearch:!0,filterOption:(e,a)=>a.label.toLowerCase().includes(e.toLowerCase()),getPopupContainer:e=>e.parentNode,virtual:!1})}),"admin"===w&&t.jsx(s.Item,{name:"home",label:"Satuan",rules:[{required:!0}],children:t.jsx(f,{placeholder:"Pilih Satuan",options:L,loading:p,showSearch:!0,filterOption:(e,a)=>a.label.toLowerCase().includes(e.toLowerCase()),getPopupContainer:e=>e.parentNode,virtual:!1})}),t.jsx(s.Item,{name:"name",label:"Username",rules:[{required:!0}],children:t.jsx(n,{placeholder:"Username"})}),t.jsx(s.Item,{name:"email",label:"Email",rules:[{required:!0,type:"email"}],children:t.jsx(n,{placeholder:"Email yang aktif"})}),t.jsx(s.Item,{name:"phone",label:"Whatsapp",rules:[{required:!0,message:"Whatsapp wajib diisi!"},{pattern:/^(62|0)[0-9]{9,15}$/,message:"Nomor Whatsapp tidak valid!"}],children:t.jsx(n,{placeholder:"62*******",type:"tel"})}),t.jsx(s.Item,{name:"password",label:"Password",rules:[{required:!0,type:"password"}],children:t.jsx(n.Password,{placeholder:"Password"})})]})})})},A=({onClick:e})=>t.jsx(r,{icon:t.jsx(d,{}),type:"default",onClick:e,children:"Sunting"}),{Search:L}=n,{Text:E}=c,I=({onEdit:e})=>{const[a,s]=j.useState(1),[l,n]=j.useState(10),[d,c]=j.useState(""),{data:u,isLoading:p}=o({page:a,limit:l,search:d}),[h,{isLoading:x,isSuccess:b,data:g,error:v}]=m();j.useEffect(()=>{b&&i.success(g.message),v&&i.error(v.data.message)},[b,g,v]);const f=[{title:"No",key:"nomor",render:(e,s,i)=>(a-1)*l+i+1},{title:"Username",dataIndex:"username",key:"username",render:(e,a)=>t.jsx(E,{strong:!0,type:a.isactive?"success":"danger",children:e})},{title:"Email",dataIndex:"email",key:"email"},{title:"Level",dataIndex:"level",key:"level"},{title:"Homebase",dataIndex:"homebase",key:"homebase"},{title:"Aksi",key:"action",render:a=>t.jsx(y.Button,{menu:{items:[{key:"edit",label:t.jsx(A,{onClick:()=>(a=>{e(a)})(a),children:"Edit"})},{key:"delete",label:t.jsx(S,{title:"Apakah Anda yakin ingin menghapus data ini?",okText:"Ya",cancelText:"Batal",onConfirm:()=>{return e=a.id,void h(e);var e},children:t.jsx(r,{danger:!0,icon:t.jsx(C,{}),children:"Hapus"})})}]},children:"Pilihan Aksi"})}];return t.jsx(k,{onSearch:e=>{c(e),s(1)},isLoading:p||x,columns:f,source:u?.admin,rowKey:"id",page:a,limit:l,totalData:u?.totalData,onChange:e=>{s(e.current),n(e.pageSize)}})},{Title:P}=h,F=()=>{const[e,a]=j.useState(!1),[s,i]=j.useState({}),[l,n]=j.useState(!1);return t.jsxs(u,{title:"Managemen Administrasi",levels:["center"],children:[t.jsxs(p,{vertical:!0,gap:"middle",children:[t.jsxs(p,{justify:"space-between",children:[t.jsx(P,{level:5,style:{margin:0},children:"Mangemen Administrasi"}),t.jsx(x,{onClick:()=>a(!0)})]}),t.jsx(I,{onEdit:e=>{i(e),n(!0),a(!0)}})]}),t.jsx(w,{title:l?"Edit data Admin":"Tambah Admin",open:e,setOpen:()=>a(!1),admin:s,setAdmin:()=>i({})})]})};export{F as default};
//# sourceMappingURL=CenterAdmin-espH1abs.js.map
