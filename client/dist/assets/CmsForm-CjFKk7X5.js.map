{"version":3,"file":"CmsForm-CjFKk7X5.js","sources":["../../src/page/cms/components/CmsForm.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { FaUpload, FaTimes } from \"react-icons/fa\";\r\n\r\nconst CmsForm = ({\r\n  fields,\r\n  initialValues = {},\r\n  onSubmit,\r\n  submitButtonText = \"Simpan\",\r\n  submitButtonClass = \"btn-primary\",\r\n  cancelButtonText = \"Batal\",\r\n  onCancel,\r\n  layout = \"vertical\",\r\n  children,\r\n}) => {\r\n  const [formData, setFormData] = useState(initialValues);\r\n  const [errors, setErrors] = useState({});\r\n  const [imagePreview, setImagePreview] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (typeof initialValues.image === \"string\" && initialValues.image) {\r\n      setImagePreview(initialValues.image);\r\n    }\r\n  }, [initialValues.image]);\r\n\r\n  const handleChange = (e, field) => {\r\n    const { name, value, type, files } = e.target;\r\n\r\n    if (type === \"file\" && files && files[0]) {\r\n      const file = files[0];\r\n      setFormData({ ...formData, [name]: file });\r\n\r\n      // Create preview for images\r\n      if (file.type.startsWith(\"image/\")) {\r\n        const reader = new FileReader();\r\n        reader.onloadend = () => {\r\n          setImagePreview(reader.result);\r\n        };\r\n        reader.readAsDataURL(file);\r\n      }\r\n    } else {\r\n      setFormData({ ...formData, [name]: value });\r\n\r\n      // Auto-resize textarea\r\n      if (type === \"textarea\") {\r\n        e.target.style.height = \"auto\";\r\n        e.target.style.height = e.target.scrollHeight + \"px\";\r\n      }\r\n    }\r\n\r\n    // Clear error when field is edited\r\n    if (errors[name]) {\r\n      setErrors({ ...errors, [name]: null });\r\n    }\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n\r\n    fields.forEach((field) => {\r\n      if (field.required && !formData[field.name]) {\r\n        newErrors[field.name] = `${field.label} harus diisi`;\r\n      }\r\n\r\n      if (field.pattern && formData[field.name]) {\r\n        const regex = new RegExp(field.pattern);\r\n        if (!regex.test(formData[field.name])) {\r\n          newErrors[field.name] =\r\n            field.patternMessage || `${field.label} tidak sesuai`;\r\n        }\r\n      }\r\n    });\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (validateForm()) {\r\n      onSubmit(formData);\r\n    }\r\n  };\r\n\r\n  const renderField = (field) => {\r\n    const {\r\n      name,\r\n      label,\r\n      type = \"text\",\r\n      placeholder,\r\n      options,\r\n      rows = 3,\r\n      accept,\r\n      helpText,\r\n    } = field;\r\n\r\n    return (\r\n      <div className={`mb-3 ${layout === \"horizontal\" ? \"row\" : \"\"}`}>\r\n        <label\r\n          htmlFor={name}\r\n          className={`form-label ${layout === \"horizontal\" ? \"col-sm-3\" : \"\"}`}\r\n        >\r\n          {label}\r\n          {field.required && <span className=\"text-danger ms-1\">*</span>}\r\n        </label>\r\n\r\n        <div className={layout === \"horizontal\" ? \"col-sm-9\" : \"\"}>\r\n          {type === \"textarea\" ? (\r\n            <textarea\r\n              id={name}\r\n              name={name}\r\n              className={`form-control ${errors[name] ? \"is-invalid\" : \"\"}`}\r\n              placeholder={placeholder}\r\n              rows={rows}\r\n              value={formData[name] || \"\"}\r\n              onChange={(e) => handleChange(e, field)}\r\n              style={{ minHeight: \"200px\", resize: \"auto\" }}\r\n            />\r\n          ) : type === \"select\" ? (\r\n            <select\r\n              id={name}\r\n              name={name}\r\n              className={`form-select ${errors[name] ? \"is-invalid\" : \"\"}`}\r\n              value={formData[name] || \"\"}\r\n              onChange={(e) => handleChange(e, field)}\r\n            >\r\n              <option value=\"\">Select {label}</option>\r\n              {options.map((option) => (\r\n                <option key={option.value} value={option.value}>\r\n                  {option.label}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          ) : type === \"file\" ? (\r\n            <div>\r\n              <div className=\"input-group\">\r\n                <input\r\n                  id={name}\r\n                  name={name}\r\n                  type=\"file\"\r\n                  className={`form-control ${errors[name] ? \"is-invalid\" : \"\"}`}\r\n                  accept={accept}\r\n                  onChange={(e) => handleChange(e, field)}\r\n                />\r\n                <label className=\"input-group-text\" htmlFor={name}>\r\n                  <FaUpload />\r\n                </label>\r\n              </div>\r\n              {imagePreview && (\r\n                <div className=\"mt-2 position-relative d-inline-block\">\r\n                  <img\r\n                    src={imagePreview}\r\n                    alt=\"Preview\"\r\n                    className=\"img-thumbnail\"\r\n                    style={{ maxHeight: \"150px\" }}\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-sm btn-danger position-absolute top-0 end-0 m-1\"\r\n                    onClick={() => {\r\n                      setImagePreview(null);\r\n                      setFormData({ ...formData, [name]: null });\r\n                    }}\r\n                  >\r\n                    <FaTimes />\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : type === \"checkbox\" ? (\r\n            <div className=\"form-check\">\r\n              <input\r\n                id={name}\r\n                name={name}\r\n                type=\"checkbox\"\r\n                className={`form-check-input ${\r\n                  errors[name] ? \"is-invalid\" : \"\"\r\n                }`}\r\n                checked={formData[name] || false}\r\n                onChange={(e) =>\r\n                  handleChange(\r\n                    { target: { name, value: e.target.checked } },\r\n                    field\r\n                  )\r\n                }\r\n              />\r\n              <label className=\"form-check-label\" htmlFor={name}>\r\n                {placeholder}\r\n              </label>\r\n            </div>\r\n          ) : (\r\n            <input\r\n              id={name}\r\n              name={name}\r\n              type={type}\r\n              className={`form-control ${errors[name] ? \"is-invalid\" : \"\"}`}\r\n              placeholder={placeholder}\r\n              value={formData[name] || \"\"}\r\n              onChange={(e) => handleChange(e, field)}\r\n            />\r\n          )}\r\n\r\n          {errors[name] && (\r\n            <div className=\"invalid-feedback\">{errors[name]}</div>\r\n          )}\r\n\r\n          {helpText && !errors[name] && (\r\n            <div className=\"form-text\">{helpText}</div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <motion.form\r\n      onSubmit={handleSubmit}\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      transition={{ duration: 0.3 }}\r\n    >\r\n      {fields.map((field) => (\r\n        <motion.div\r\n          key={field.name}\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.3, delay: 0.1 }}\r\n        >\r\n          {renderField(field)}\r\n        </motion.div>\r\n      ))}\r\n\r\n      {/* Render custom children (e.g., Editor) here */}\r\n      {children}\r\n\r\n      <div className=\"d-flex justify-content-end gap-2 mt-4\">\r\n        {onCancel && (\r\n          <motion.button\r\n            type=\"button\"\r\n            className=\"btn btn-sm btn-warning\"\r\n            onClick={onCancel}\r\n            whileHover={{ scale: 1.05 }}\r\n            whileTap={{ scale: 0.95 }}\r\n          >\r\n            {cancelButtonText}\r\n          </motion.button>\r\n        )}\r\n\r\n        <motion.button\r\n          type=\"submit\"\r\n          className={`btn btn-sm ${submitButtonClass}`}\r\n          whileHover={{ scale: 1.05 }}\r\n          whileTap={{ scale: 0.95 }}\r\n        >\r\n          {submitButtonText}\r\n        </motion.button>\r\n      </div>\r\n    </motion.form>\r\n  );\r\n};\r\n\r\nexport default CmsForm;\r\n"],"names":["CmsForm","fields","initialValues","onSubmit","submitButtonText","submitButtonClass","cancelButtonText","onCancel","layout","children","formData","setFormData","useState","errors","setErrors","imagePreview","setImagePreview","useEffect","image","handleChange","e","field","name","value","type","files","target","file","startsWith","reader","FileReader","onloadend","result","readAsDataURL","style","height","scrollHeight","renderField","label","placeholder","options","rows","accept","helpText","jsxs","className","jsxRuntimeExports","htmlFor","required","jsx","id","onChange","minHeight","resize","map","option","FaUpload","src","alt","maxHeight","onClick","FaTimes","checked","motion","form","preventDefault","newErrors","forEach","pattern","RegExp","test","patternMessage","Object","keys","length","validateForm","initial","opacity","animate","transition","duration","div","y","delay","button","whileHover","scale","whileTap"],"mappings":"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"}