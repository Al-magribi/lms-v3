import{k as w,m as y,r as o,j as e,V as S,n as k,o as C,e as v}from"./index-B88h2kYZ.js";import{L as A}from"./Layout-BzzV81EK.js";import{T as D}from"./Table-BvY52Fag.js";const P=a=>a!=null&&a.startsWith("0")?`62${a.slice(1)}`:a,L=()=>{const a="",g="",h="",{data:m}=w({page:a,limit:g,search:h}),[b,{isSuccess:x,isLoading:N,error:d,reset:u}]=y(),[t,p]=o.useState({id:"",home:"",name:"",email:"",password:"",level:"",phone:""}),r=n=>{const{name:c,value:l}=n.target;p(f=>({...f,[c]:c==="phone"?P(l):l}))},j=n=>{n.preventDefault();const c={...t,home:parseInt(t.home,10)};S.promise(b(c).unwrap().then(l=>l.message),{loading:"Menyimpan Data...",success:l=>l,error:l=>l.data.message})};return o.useEffect(()=>{x&&(p({id:"",home:"",name:"",email:"",password:"",level:"",phone:""}),u()),d&&u()},[x,d]),e.jsxs("form",{onSubmit:j,className:"d-flex flex-column gap-2 rounded p-2 shadow bg-white border ",children:[e.jsx("p",{className:"m-0 h6",children:"Administrator"}),e.jsxs("select",{name:"level",id:"level",className:"form-select",value:t.level,onChange:r,children:[e.jsx("option",{value:"",hidden:!0,children:"Pilih Level"}),e.jsx("option",{value:"center",children:"Pusat"}),e.jsx("option",{value:"admin",children:"Satuan"}),e.jsx("option",{value:"tahfiz",children:"Tahfiz"})]}),t.level!=="center"&&e.jsxs("select",{name:"home",id:"home",className:"form-select",value:t.home,onChange:r,children:[e.jsx("option",{value:"",hidden:!0,children:"Pilih Satuan"}),m==null?void 0:m.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]}),e.jsx("input",{type:"text",name:"name",id:"name",placeholder:"Username",className:"form-control",value:t.name||"",onChange:r,required:!0}),e.jsx("input",{type:"email",name:"email",id:"email",className:"form-control",placeholder:"Email",value:t.email||"",onChange:r,required:!0}),e.jsx("input",{type:"text",name:"phone",id:"phone",className:"form-control",placeholder:"Whatsapp",value:t.phone||"",onChange:r}),e.jsx("input",{type:"password",name:"password",id:"password",className:"form-control",placeholder:"Password",value:t.password||"",onChange:r,required:!0}),e.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-warning",onClick:()=>setDetail(""),children:"Batal"}),e.jsx("button",{type:"submit",className:"btn btn-success",disabled:N,children:"Simpan"})]})]})},E=()=>{const[a,g]=o.useState(1),[h,m]=o.useState(10),[b,x]=o.useState(""),{data:N={}}=k({page:a,limit:h,search:b}),{admin:d=[],totalData:u,totalPages:t}=N,[p,{isLoading:r,isSuccess:j,error:n,reset:c}]=C(),l=s=>{v.promise(p(s).unwrap().then(i=>i.message),{loading:"Memproses...",success:i=>i,error:i=>i.data.message})},f=s=>{const i=`${window.location.origin}/aktivasi-akun/${s}`;navigator.clipboard.writeText(i).then(()=>v.success("Berhasil di copy"))};return o.useEffect(()=>{j&&c(),n&&c()},[j,n]),e.jsx(D,{page:a,setPage:g,setLimit:m,setSearch:x,totalData:u,totalPages:t,children:e.jsxs("table",{className:"table table-bordered table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:"No"}),e.jsx("td",{className:"text-center",children:"Satuan"}),e.jsx("td",{className:"text-center",children:"Nama"}),e.jsx("td",{className:"text-center",children:"Email"}),e.jsx("td",{className:"text-center",children:"Whatsapp"}),e.jsx("td",{className:"text-center",children:"Status"}),e.jsx("td",{className:"text-center",children:"Aksi"})]})}),e.jsx("tbody",{children:d==null?void 0:d.map((s,i)=>e.jsxs("tr",{children:[e.jsx("td",{className:"align-middle text-center",children:(a-1)*h+i+1}),e.jsx("td",{className:"align-middle text-center",children:s.homebase?s.homebase:"Pusat"}),e.jsx("td",{className:"align-middle",children:s.username}),e.jsx("td",{className:"align-middle text-center",children:s.email}),e.jsx("td",{className:"align-middle text-center",children:s.phone}),e.jsx("td",{className:"align-middle text-center",children:s.isactive?e.jsx("span",{className:"badge text-bg-success",children:"aktif"}):e.jsx("span",{className:"badge text-bg-danger",children:"non-aktif"})}),e.jsx("td",{className:"align-middle text-center",children:e.jsx("div",{className:"d-flex justify-content-center gap-2",children:e.jsxs("div",{className:"d-flex gap-2 justify-content-center",children:[e.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>f(s.activation),children:e.jsx("i",{class:"bi bi-link-45deg"})}),e.jsx("button",{className:"btn btn-sm btn-danger",disabled:r,onClick:()=>l(s.id),children:e.jsx("i",{className:"bi bi-folder-minus"})})]})})})]},i))})]})})},H=()=>e.jsx(A,{title:"Administrator",children:e.jsxs("div",{className:"row g-2",children:[e.jsx("div",{className:"col-lg-3 col-12",children:e.jsx(L,{})}),e.jsx("div",{className:"col-lg-9 col-12",children:e.jsx(E,{})})]})});export{H as default};
