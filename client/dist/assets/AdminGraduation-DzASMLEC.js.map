{"version":3,"file":"AdminGraduation-DzASMLEC.js","sources":["../../src/page/admin/graduation/Form.jsx","../../src/page/admin/graduation/TableData.jsx","../../src/page/admin/graduation/AdminGraduation.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  useAddGraduationMutation,\r\n  useGetStudentsQuery,\r\n} from \"../../../controller/api/admin/ApiGraduation\";\r\nimport { toast } from \"react-hot-toast\";\r\nimport Select from \"react-select\";\r\n\r\nconst Form = ({ detail, setDetail }) => {\r\n  const [formData, setFormData] = useState({\r\n    id: \"\",\r\n    agency: \"\",\r\n    userid: \"\",\r\n    description: \"\",\r\n  });\r\n\r\n  const { data: students = [] } = useGetStudentsQuery();\r\n\r\n  const studentOptions = students?.map((student) => ({\r\n    value: student.id,\r\n    label: student.name,\r\n  }));\r\n\r\n  const [addGraduation, { isLoading, isSuccess, isError, reset }] =\r\n    useAddGraduationMutation();\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    toast.promise(\r\n      addGraduation(formData)\r\n        .unwrap()\r\n        .then((res) => res.message),\r\n      {\r\n        loading: \"Memuat data...\",\r\n        success: (message) => message,\r\n        error: (error) => error.data.message,\r\n      }\r\n    );\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setDetail({});\r\n    setFormData({\r\n      id: \"\",\r\n      agency: \"\",\r\n      userid: \"\",\r\n      description: \"\",\r\n    });\r\n  };\r\n\r\n  const handleStudentChange = (selectedOption) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      userid: selectedOption?.value || null,\r\n    }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (detail) {\r\n      setFormData({\r\n        id: detail.id,\r\n        agency: detail.agency,\r\n        userid: detail.userid,\r\n        description: detail.description,\r\n      });\r\n    }\r\n  }, [detail]);\r\n\r\n  useEffect(() => {\r\n    if (isSuccess || isError) {\r\n      if (isSuccess) {\r\n        setDetail({});\r\n        setFormData({\r\n          id: \"\",\r\n          agency: \"\",\r\n          userid: \"\",\r\n          description: \"\",\r\n        });\r\n      }\r\n\r\n      reset();\r\n    }\r\n  }, [isSuccess, isError]);\r\n\r\n  return (\r\n    <form\r\n      onSubmit={handleSubmit}\r\n      className='d-flex border p-2 rounded flex-column gap-3'>\r\n      <h6 className='m-0'>Data Lulusan</h6>\r\n\r\n      <Select\r\n        isClearable\r\n        isSearchable\r\n        placeholder='Cari Murid'\r\n        value={\r\n          studentOptions?.find((opt) => opt.value === formData.userid) || null\r\n        }\r\n        options={studentOptions}\r\n        onChange={handleStudentChange}\r\n      />\r\n\r\n      <input\r\n        type='text'\r\n        name='agency'\r\n        id='agency'\r\n        placeholder='Nama Instansi'\r\n        className='form-control'\r\n        required\r\n        value={formData.agency}\r\n        onChange={(e) => setFormData({ ...formData, agency: e.target.value })}\r\n      />\r\n\r\n      <textarea\r\n        name='description'\r\n        id='description'\r\n        placeholder='Keterangan'\r\n        className='form-control'\r\n        value={formData.description}\r\n        onChange={(e) =>\r\n          setFormData({ ...formData, description: e.target.value })\r\n        }\r\n      />\r\n\r\n      <div className='text-end'>\r\n        <button\r\n          type='button'\r\n          className='me-2 btn btn-sm btn-warning'\r\n          onClick={handleCancel}>\r\n          Batal\r\n        </button>\r\n\r\n        <button\r\n          type='submit'\r\n          className='me-2 btn btn-sm btn-success'\r\n          disabled={isLoading}>\r\n          Simpan\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n","import React, { useState } from \"react\";\r\nimport Table from \"../../../components/table/Table\";\r\nimport { useGetGraduationQuery } from \"../../../controller/api/admin/ApiGraduation\";\r\n\r\nconst TableData = ({ setDetail }) => {\r\n  const [page, setPage] = useState(1);\r\n  const [limit, setLimit] = useState(10);\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  const { data, isLoading } = useGetGraduationQuery({ page, limit, search });\r\n  const { result, totalData, totalPages } = data || {};\r\n\r\n  return (\r\n    <Table\r\n      isLoading={isLoading}\r\n      totalData={totalData}\r\n      totalPages={totalPages}\r\n      page={page}\r\n      limit={limit}\r\n      setPage={setPage}\r\n      setLimit={setLimit}\r\n      setSearch={setSearch}>\r\n      <table className='mb-0 table table-hover table-striped table-bordered'>\r\n        <thead>\r\n          <tr>\r\n            <th className='text-center'>No</th>\r\n            <th className='text-center'>Nis</th>\r\n            <th className='text-center'>Nama</th>\r\n            <th className='text-center'>Instansi</th>\r\n            <th className='text-center'>Deskripsi</th>\r\n            <th className='text-center'>Aksi</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {result?.map((item, index) => (\r\n            <tr key={item.id}>\r\n              <td className='align-middle text-center'>\r\n                {(page - 1) * limit + index + 1}\r\n              </td>\r\n              <td className='align-middle text-center'>{item.nis}</td>\r\n              <td className='align-middle '>{item.student_name}</td>\r\n              <td className='align-middle '>{item.agency}</td>\r\n              <td className='align-middle '>{item.description}</td>\r\n              <td className='align-middle text-center'>\r\n                <div className='d-flex justify-content-center gap-2'>\r\n                  <button\r\n                    className='btn btn-sm btn-warning'\r\n                    onClick={() => setDetail(item)}>\r\n                    <i className='bi bi-pencil-square'></i>\r\n                  </button>\r\n                  <button className='btn btn-sm btn-danger'>\r\n                    <i className='bi bi-trash'></i>\r\n                  </button>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </Table>\r\n  );\r\n};\r\n\r\nexport default TableData;\r\n","import React, { useState } from \"react\";\r\nimport Layout from \"../../../components/layout/Layout\";\r\nimport Form from \"./Form\";\r\nimport TableData from \"./TableData\";\r\n\r\nconst AdminGraduation = () => {\r\n  const [detail, setDetail] = useState({});\r\n  return (\r\n    <Layout title='Lulusan' levels={[\"admin\"]}>\r\n      <div className='row'>\r\n        <div className='col-lg-3 col-12'>\r\n          <Form detail={detail} setDetail={setDetail} />\r\n        </div>\r\n        <div className='col-lg-9 col-12'>\r\n          <TableData setDetail={setDetail} />\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default AdminGraduation;\r\n"],"names":["Form","detail","setDetail","formData","setFormData","useState","id","agency","userid","description","data","students","useGetStudentsQuery","studentOptions","map","student","value","label","name","addGraduation","isLoading","isSuccess","isError","reset","useAddGraduationMutation","useEffect","jsxRuntimeExports","jsxs","onSubmit","e","preventDefault","c","promise","unwrap","then","res","message","loading","success","error","className","children","jsx","Select","isClearable","isSearchable","placeholder","find","opt","options","onChange","selectedOption","prev","type","required","target","onClick","disabled","TableData","page","setPage","limit","setLimit","search","setSearch","useGetGraduationQuery","result","totalData","totalPages","Table","item","index","nis","student_name","AdminGraduation","Layout","title","levels"],"mappings":"4SAQA,MAAMA,EAAO,EAAGC,SAAQC,gBACtB,MAAOC,EAAUC,GAAeC,WAAS,CACvCC,GAAI,GACJC,OAAQ,GACRC,OAAQ,GACRC,YAAa,MAGPC,KAAMC,EAAW,IAAOC,IAE1BC,EAAiB,MAAAF,OAAA,EAAAA,EAAUG,KAAKC,IAAa,CACjDC,MAAOD,EAAQT,GACfW,MAAOF,EAAQG,UAGVC,GAAeC,UAAEA,EAAAC,UAAWA,UAAWC,EAASC,MAAAA,IACrDC,IA8DA,OA5BFC,EAAAA,WAAU,KACJxB,GACUG,EAAA,CACVE,GAAIL,EAAOK,GACXC,OAAQN,EAAOM,OACfC,OAAQP,EAAOO,OACfC,YAAaR,EAAOQ,aACrB,GAEF,CAACR,IAEJwB,EAAAA,WAAU,MACJJ,GAAaC,KACXD,IACFnB,EAAU,CAAA,GACEE,EAAA,CACVE,GAAI,GACJC,OAAQ,GACRC,OAAQ,GACRC,YAAa,MAIXc,IAAA,GAEP,CAACF,EAAWC,IAGbI,EAAAC,KAAC,OAAA,CACCC,SA7DkBC,IACpBA,EAAEC,iBAEIC,EAAAC,QACJb,EAAchB,GACX8B,SACAC,MAAMC,GAAQA,EAAIC,UACrB,CACEC,QAAS,iBACTC,QAAUF,GAAYA,EACtBG,MAAQA,GAAUA,EAAM7B,KAAK0B,SAEjC,EAkDEI,UAAU,8CACVC,SAAA,CAACC,EAAAA,IAAA,KAAA,CAAGF,UAAU,MAAMC,SAAY,iBAEhCf,EAAAgB,IAACC,EAAA,CACCC,aAAW,EACXC,cAAY,EACZC,YAAY,aACZ9B,aACEH,WAAgBkC,MAAMC,GAAQA,EAAIhC,QAAUb,EAASK,WAAW,KAElEyC,QAASpC,EACTqC,SAhDuBC,IAC3B/C,GAAagD,IAAU,IAClBA,EACH5C,cAAQ2C,WAAgBnC,QAAS,QACjC,IA+CAU,EAAAgB,IAAC,QAAA,CACCW,KAAK,OACLnC,KAAK,SACLZ,GAAG,SACHwC,YAAY,gBACZN,UAAU,eACVc,UAAQ,EACRtC,MAAOb,EAASI,OAChB2C,SAAWrB,GAAMzB,EAAY,IAAKD,EAAUI,OAAQsB,EAAE0B,OAAOvC,UAG/DU,EAAAgB,IAAC,WAAA,CACCxB,KAAK,cACLZ,GAAG,cACHwC,YAAY,aACZN,UAAU,eACVxB,MAAOb,EAASM,YAChByC,SAAWrB,GACTzB,EAAY,IAAKD,EAAUM,YAAaoB,EAAE0B,OAAOvC,YAIrDW,KAAC,MAAI,CAAAa,UAAU,WACbC,SAAA,CAAAf,EAAAgB,IAAC,SAAA,CACCW,KAAK,SACLb,UAAU,8BACVgB,QAvFa,KACnBtD,EAAU,CAAA,GACEE,EAAA,CACVE,GAAI,GACJC,OAAQ,GACRC,OAAQ,GACRC,YAAa,IACd,EAgF4BgC,SAAA,UAIzBf,EAAAgB,IAAC,SAAA,CACCW,KAAK,SACLb,UAAU,8BACViB,SAAUrC,EAAWqB,SAAA,gBAI3B,ECvIEiB,EAAY,EAAGxD,gBACnB,MAAOyD,EAAMC,GAAWvD,EAAAA,SAAS,IAC1BwD,EAAOC,GAAYzD,EAAAA,SAAS,KAC5B0D,EAAQC,GAAa3D,EAAAA,SAAS,KAE/BK,KAAEA,YAAMU,GAAc6C,EAAsB,CAAEN,OAAME,QAAOE,YAC3DG,OAAEA,EAAQC,UAAAA,EAAAC,WAAWA,GAAe1D,GAAQ,CAAC,EAGjD,OAAAgB,EAAAgB,IAAC2B,EAAA,CACCjD,YACA+C,YACAC,aACAT,OACAE,QACAD,UACAE,WACAE,YACAvB,SAAAf,EAAAC,KAAC,QAAM,CAAAa,UAAU,sDACfC,SAAA,CAACC,EAAAA,IAAA,QAAA,CACCD,gBAAC,KACC,CAAAA,SAAA,CAACC,EAAAA,IAAA,KAAA,CAAGF,UAAU,cAAcC,SAAE,OAC7BC,EAAAA,IAAA,KAAA,CAAGF,UAAU,cAAcC,SAAG,QAC9BC,EAAAA,IAAA,KAAA,CAAGF,UAAU,cAAcC,SAAI,SAC/BC,EAAAA,IAAA,KAAA,CAAGF,UAAU,cAAcC,SAAQ,aACnCC,EAAAA,IAAA,KAAA,CAAGF,UAAU,cAAcC,SAAS,cACpCC,EAAAA,IAAA,KAAA,CAAGF,UAAU,cAAcC,SAAI,cAGpCC,EAAAA,IAAC,SACED,SAAQ,MAAAyB,OAAA,EAAAA,EAAApD,KAAI,CAACwD,EAAMC,WACjB,KACC,CAAA9B,SAAA,CAAAC,EAAAA,IAAC,MAAGF,UAAU,2BACVC,YAAO,GAAKoB,EAAQU,EAAQ,IAE/B7B,EAAAA,IAAA,KAAA,CAAGF,UAAU,2BAA4BC,WAAK+B,MAC9C9B,EAAAA,IAAA,KAAA,CAAGF,UAAU,gBAAiBC,WAAKgC,eACnC/B,EAAAA,IAAA,KAAA,CAAGF,UAAU,gBAAiBC,WAAKlC,SACnCmC,EAAAA,IAAA,KAAA,CAAGF,UAAU,gBAAiBC,WAAKhC,oBACnC,KAAG,CAAA+B,UAAU,2BACZC,SAACd,EAAAA,KAAA,MAAA,CAAIa,UAAU,sCACbC,SAAA,CAAAf,EAAAgB,IAAC,SAAA,CACCF,UAAU,yBACVgB,QAAS,IAAMtD,EAAUoE,GACzB7B,SAAAC,EAAAA,IAAC,IAAE,CAAAF,UAAU,0BAEfE,EAAAA,IAAC,UAAOF,UAAU,wBAChBC,eAAC,IAAE,CAAAD,UAAU,yBAhBZ8B,EAAKhE,YAwBtB,ECtDEoE,EAAkB,KACtB,MAAOzE,EAAQC,GAAaG,EAAAA,SAAS,CAAA,GAEnC,SAAAqC,IAACiC,EAAO,CAAAC,MAAM,UAAUC,OAAQ,CAAC,SAC/BpC,SAAAf,EAAAC,KAAC,MAAI,CAAAa,UAAU,MACbC,SAAA,CAAAC,EAAAA,IAAC,OAAIF,UAAU,kBACbC,eAACzC,EAAK,CAAAC,SAAgBC,sBAEvB,MAAI,CAAAsC,UAAU,kBACbC,SAACC,EAAAA,IAAAgB,EAAA,CAAUxD,oBAGjB"}