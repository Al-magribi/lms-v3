import{r as i,a$ as E,j as e,e as N,b0 as v,b1 as D}from"./index-Bkq01jzn.js";import{L as S}from"./Layout-uGiKgFPI.js";import{T as y}from"./Table-BJdfPgdp.js";const w=({detail:s,setDetail:a})=>{const[r,l]=i.useState({id:s?s.id:"",name:""}),[h,{isLoading:j,isSuccess:o,isError:u,reset:g}]=E(),c=d=>{d.preventDefault(),N.promise(h(r).unwrap().then(n=>n.message),{loading:"Memuat...",success:n=>n,error:n=>{var b;return(b=n.data)==null?void 0:b.message}})},x=()=>{a({}),l({id:"",name:""})};return i.useEffect(()=>{(o||u)&&(x(),g())},[o,u]),i.useEffect(()=>{s&&l({id:s.id,name:s.name})},[s]),e.jsxs("form",{onSubmit:c,className:"rounded border bg-white p-2 d-flex flex-column gap-2",children:[e.jsx("p",{className:"m-0 h6",children:"Penguji"}),e.jsx("input",{type:"text",name:"name",id:"name",required:!0,className:"form-control",placeholder:"Nama Penguji",value:r.name||"",onChange:d=>l({...r,name:d.target.value})}),e.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-warning",onClick:x,children:"Batal"}),e.jsx("button",{type:"submit",className:"btn btn-sm btn-success",disabled:j,children:"Simpan"})]})]})},L=({setDetail:s})=>{const[a,r]=i.useState(1),[l,h]=i.useState(10),[j,o]=i.useState(""),{data:u={},isLoading:g}=v({page:a,limit:l,search:j}),{examiners:c=[],totalData:x,totalPages:d}=u,[n,{isLoading:b}]=D(),f=m=>{N.promise(n(m).unwrap().then(t=>t.message),{loading:"Memuat...",success:t=>t,error:t=>{var p;return(p=t.data)==null?void 0:p.message}})};return e.jsx(y,{isLoading:g,page:a,setPage:r,setLimit:h,setSearch:o,totalData:x,totalPages:d,children:e.jsxs("table",{className:"mb-0 table table-bordered table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"text-center align-middle",children:"No"}),e.jsx("td",{className:"text-center align-middle",children:"Nama Penguji"}),e.jsx("td",{className:"text-center align-middle",children:"Aksi"})]})}),e.jsx("tbody",{children:c==null?void 0:c.map((m,t)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center align-middle",children:(a-1)*l+t+1}),e.jsx("td",{className:"align-middle",children:m.name}),e.jsx("td",{className:"text-center align-middle",children:e.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[e.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>s(m),children:e.jsx("i",{className:"bi bi-pencil-square"})}),e.jsx("button",{className:"btn btn-sm btn-danger",disabled:b,onClick:()=>f(m.id),children:e.jsx("i",{className:"bi bi-trash"})})]})})]},t))})]})})},M=()=>{const[s,a]=i.useState({});return e.jsx(S,{title:"Penguji",levels:["tahfiz"],children:e.jsxs("div",{className:"row g-2",children:[e.jsx("div",{className:"col-lg-3 col-12",children:e.jsx(w,{detail:s,setDetail:a})}),e.jsx("div",{className:"col-lg-9 col-12",children:e.jsx(L,{setDetail:a})})]})})};export{M as default};
