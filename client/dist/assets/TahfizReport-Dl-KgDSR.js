import{j as e,b3 as s,b4 as a,d as l,aD as d,aU as t}from"./index-DXLQkGkU.js";import{b as i}from"./vendor-CAuU4qY4.js";import{L as n}from"./Layout-Ci3X6teG.js";import{T as c}from"./Table-BYte1Kap.js";import{C as r,b as m,L as h,B as o,c as x,p as j,a as b,d as N}from"./index-CfkcB9dx.js";const g=({detail:s,setDetail:a,id:l})=>{var d,t;const n=i.useRef(null),c=()=>{a("")};return e.jsx("div",{ref:n,className:"modal fade",id:`modal-${l}`,"data-bs-backdrop":"static","data-bs-keyboard":"false",tabIndex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog modal-lg modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-primary text-white",children:[e.jsx("h1",{className:"modal-title fs-5",id:"staticBackdropLabel",children:null==s?void 0:s.name}),e.jsx("button",{type:"button",className:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close",onClick:c})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row g-2 mb-3",children:[e.jsx("div",{className:"col-lg-3 col-6",children:e.jsx("div",{className:"card bg-light",children:e.jsxs("div",{className:"card-body p-2",children:[e.jsx("small",{className:"text-muted",children:"Jenis Penilaian"}),e.jsx("p",{className:"mb-0",children:null==s?void 0:s.type})]})})}),e.jsx("div",{className:"col-lg-3 col-6",children:e.jsx("div",{className:"card bg-light",children:e.jsxs("div",{className:"card-body p-2",children:[e.jsx("small",{className:"text-muted",children:"Penguji"}),e.jsx("p",{className:"mb-0",children:null==s?void 0:s.examiner})]})})}),e.jsx("div",{className:"col-lg-3 col-6",children:e.jsx("div",{className:"card bg-light",children:e.jsxs("div",{className:"card-body p-2",children:[e.jsx("small",{className:"text-muted",children:"Nilai"}),e.jsx("p",{className:"mb-0",children:null==s?void 0:s.totalPoints})]})})}),e.jsx("div",{className:"col-lg-3 col-6",children:e.jsx("div",{className:"card bg-light",children:e.jsxs("div",{className:"card-body p-2",children:[e.jsx("small",{className:"text-muted",children:"Tanggal"}),e.jsx("p",{className:"mb-0",children:new Date(null==s?void 0:s.date).toLocaleDateString()})]})})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"m-0 h6",children:"Detail Penilaian"}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-hover table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center",children:"Kategori"}),e.jsx("th",{className:"text-center",children:"Nilai"}),e.jsx("th",{className:"text-center",children:"Indikator"})]})}),e.jsx("tbody",{children:null==(d=null==s?void 0:s.scores)?void 0:d.map(((s,a)=>{var l;return e.jsxs("tr",{children:[e.jsx("td",{className:"align-middle",children:s.category}),e.jsx("td",{className:"text-center align-middle",children:s.poin}),e.jsx("td",{children:(null==(l=s.indicators)?void 0:l.length)>0?e.jsx("table",{className:"table table-sm mb-0",children:e.jsx("tbody",{children:s.indicators.map(((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:s.indicator}),e.jsx("td",{className:"text-center",children:s.poin||"-"})]},a)))})}):e.jsx("div",{className:"text-center",children:"-"})})]},a)}))})]})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"m-0 h6",children:"Daftar Surah"}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-hover table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Surah"}),e.jsx("th",{children:"Ayat"}),e.jsx("th",{children:"Baris"})]})}),e.jsx("tbody",{children:null==(t=null==s?void 0:s.surahs)?void 0:t.map(((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:s.name}),e.jsx("td",{children:`${s.from_ayat} - ${s.to_ayat}`}),e.jsx("td",{children:`${s.from_line} - ${s.to_line}`})]},a)))})]})})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:c,children:"Tutup"})})]})})})},u=({type:d})=>{const[t,n]=i.useState(1),[r,m]=i.useState(10),[h,o]=i.useState(""),[x,j]=i.useState(""),[b,N]=i.useState(""),{data:u={},isLoading:p}=s({page:t,limit:r,search:h,type:d}),{report:v=[],totalData:y,totalPages:f}=u,[w,{isLoading:k}]=a();return e.jsxs(c,{isLoading:p,totalData:y,totalPages:f,page:t,setPage:n,limit:r,setLimit:m,setSearch:o,children:[e.jsxs("table",{className:"table table-striped table-hover table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"align-middle text-center",children:"No"}),e.jsx("th",{className:"align-middle text-center",children:"Tanggal"}),e.jsx("th",{className:"align-middle text-center",children:"NIS"}),e.jsx("th",{className:"align-middle text-center",children:"Nama Siswa"}),e.jsx("th",{className:"align-middle text-center",children:"Tingkat"}),e.jsx("th",{className:"align-middle text-center",children:"Kelas"}),e.jsx("th",{className:"align-middle text-center",children:"Jenis Penilaian"}),e.jsx("th",{className:"align-middle text-center",children:"Nilai"}),e.jsx("th",{className:"align-middle text-center",children:"Penguji"}),e.jsx("th",{className:"align-middle text-center",children:"Aksi"})]})}),0===(null==v?void 0:v.length)?e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:11,children:"Belum ada data"})})}):p?e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{children:"Loading.."})})}):e.jsx("tbody",{children:null==v?void 0:v.map(((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center align-middle",children:a+1}),e.jsx("td",{className:"text-center align-middle",children:new Date(s.date).toLocaleDateString()}),e.jsx("td",{className:"text-center align-middle",children:s.nis}),e.jsx("td",{className:"text-start align-middle",children:s.name}),e.jsx("td",{className:"text-center align-middle",children:s.grade}),e.jsx("td",{className:"text-center align-middle",children:s.class}),e.jsx("td",{className:"text-center align-middle",children:s.type}),e.jsx("td",{className:"text-center align-middle",children:s.totalPoints}),e.jsx("td",{className:"text-center align-middle",children:s.examiner}),e.jsx("td",{className:"align-middle",children:e.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[e.jsx("button",{className:"btn btn-sm btn-primary","data-bs-toggle":"modal","data-bs-target":`#modal-${s.id}`,onClick:()=>((e,s)=>{j(e),N(s)})(s,s.id),title:"Lihat Detail",children:e.jsx("i",{className:"bi bi-eye-fill"})}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>{return e=s.userid,a=s.type_id,d=new Date(s.date).toLocaleDateString(),void l.promise(w({userid:e,typeId:a,createdat:d}).unwrap().then((e=>e.message)),{loading:"Menghapus data...",success:e=>e,error:e=>e.data.message});var e,a,d},children:e.jsx("i",{className:"bi bi-trash"})})]})})]},a)))})]}),null==v?void 0:v.map(((s,a)=>e.jsx(g,{detail:s.id===b?x:null,setDetail:j,id:s.id},a)))]})};r.register(m,h,o,x,j,b);const p=({show:s,onClose:a,students:l,gradeName:d})=>s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",children:e.jsx("div",{className:"modal-dialog modal-lg modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h5",{className:"modal-title",children:["Tingkat - ",d]}),e.jsx("button",{type:"button",className:"btn-close",onClick:a})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-bordered table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"NIS"}),e.jsx("th",{children:"Nama"}),e.jsx("th",{children:"Kelas"}),e.jsx("th",{style:{width:"30%"},children:"Progress"})]})}),e.jsx("tbody",{children:l.map(((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{children:s.nis}),e.jsx("td",{children:s.name}),e.jsx("td",{children:s.class}),e.jsx("td",{children:s.progress.map(((s,a)=>e.jsxs("div",{className:"mb-1",children:[e.jsxs("small",{className:"d-flex justify-content-between",children:[e.jsx("span",{children:s.juz}),e.jsxs("span",{children:[s.persentase,"%"]})]}),e.jsx("div",{className:"progress",style:{height:"5px"},children:e.jsx("div",{className:"progress-bar "+(s.persentase>=100?"bg-success":s.persentase>=75?"bg-info":s.persentase>=50?"bg-warning":"bg-danger"),role:"progressbar",style:{width:`${s.persentase}%`},"aria-valuenow":s.persentase,"aria-valuemin":"0","aria-valuemax":"100"})})]},a)))})]},a)))})]})})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:a,children:"Tutup"})})]})})}),e.jsx("div",{className:"modal-backdrop fade show"})]}):null,v=()=>{const{data:s,isLoading:a}=d(),[l,t]=i.useState({show:!1,students:[],gradeName:""});if(console.log(s),a||!s)return e.jsx("div",{children:"Loading..."});const n={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Capaian Hafalan Per Tingkat"}},scales:{y:{beginAtZero:!0,max:100}}};return e.jsxs("div",{className:"container-fluid p-0",children:[s.map(((s,a)=>e.jsxs("div",{className:"card mb-4",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h4",{children:s.periode}),e.jsx("small",{className:"text-muted",children:s.homebase})]}),e.jsxs("div",{className:"card-body",children:[s.grade.map(((s,a)=>e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{children:s.name}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4",children:e.jsx("div",{className:"card mb-3",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{children:"Target Hafalan"}),s.target.map(((s,a)=>e.jsx("div",{className:"mb-2",children:e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{className:"badge bg-success",children:s.juz}),e.jsxs("small",{className:"badge bg-danger",children:[s.verses," Ayat | ",s.lines," Baris"]})]})},a)))]})})}),e.jsx("div",{className:"col-md-8",children:e.jsx("div",{className:"card mb-3",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{children:"Pencapaian Tingkat"}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"d-flex justify-content-between mb-1",children:[e.jsx("span",{children:"Progress Ketuntasan"}),e.jsxs("span",{children:[s.achievement,"%"]})]}),e.jsx("div",{className:"progress",children:e.jsxs("div",{className:"progress-bar "+(s.achievement>=75?"bg-success":s.achievement>=50?"bg-warning":"bg-danger"),role:"progressbar",style:{width:`${s.achievement}%`},"aria-valuenow":s.achievement,"aria-valuemin":"0","aria-valuemax":"100",children:[s.achievement,"%"]})})]}),e.jsxs("div",{className:"row text-center",children:[e.jsxs("div",{className:"col",children:[e.jsx("div",{className:"h5 mb-0",children:s.completed}),e.jsx("small",{className:"text-success",children:"Tuntas"})]}),e.jsxs("div",{className:"col",children:[e.jsx("div",{className:"h5 mb-0",children:s.uncompleted}),e.jsx("small",{className:"text-danger",children:"Belum Tuntas"})]})]}),e.jsx("div",{className:"text-center mt-3",children:e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>t({show:!0,students:s.students,gradeName:s.name}),children:"Lihat Detail Siswa"})})]})})})]})]},a))),e.jsx("div",{className:"mt-4",children:e.jsx(N,{options:n,data:{labels:s.grade.map((e=>e.name)),datasets:[{label:"Pencapaian (%)",data:s.grade.map((e=>e.achievement)),backgroundColor:"rgba(53, 162, 235, 0.5)"},{label:"Siswa Tuntas",data:s.grade.map((e=>e.completed)),backgroundColor:"rgba(75, 192, 192, 0.5)"},{label:"Siswa Belum Tuntas",data:s.grade.map((e=>e.uncompleted)),backgroundColor:"rgba(255, 99, 132, 0.5)"}]}})})]})]},a))),e.jsx(p,{show:l.show,students:l.students,gradeName:l.gradeName,onClose:()=>t({show:!1,students:[],gradeName:""})})]})},y=()=>{const[s,a]=i.useState(""),[l,d]=i.useState(!1),{data:c}=t({page:"",limit:"",search:""});return e.jsxs(n,{title:"Laporan Hafalan Siswa",levels:["tahfiz"],children:[e.jsx("div",{className:"container-fluid card p-2 mb-2",children:e.jsx("div",{className:"card-body p-0 text-end",children:e.jsxs("div",{className:"btn-group",children:[null==c?void 0:c.map((l=>e.jsx("button",{className:"btn btn-sm "+(s===l.id?"btn-secondary":"btn-outline-secondary"),onClick:()=>a(l.id),children:l.name},l.id))),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>a(""),children:e.jsx("i",{className:"bi bi-recycle"})}),e.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>d(!l),children:l?"Laporan":"Capaian"})]})})}),l?e.jsx(v,{}):e.jsx(u,{type:s})]})};export{y as default};
//# sourceMappingURL=TahfizReport-Dl-KgDSR.js.map
