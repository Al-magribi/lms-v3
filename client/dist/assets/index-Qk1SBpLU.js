import{c as e}from"./vendor-BcjG7WjF.js";import{b4 as t,b5 as n,b6 as a,c3 as r,b1 as o,bP as s,ah as l,ck as c,cl as i,c2 as p}from"./index-Cerl0hAv.js";const m=t=>{const{value:n,formatter:a,precision:r,decimalSeparator:o,groupSeparator:s="",prefixCls:l}=t;let c;if("function"==typeof a)c=a(n);else{const t=String(n),a=t.match(/^(-?)(\d*)(\.(\d+))?$/);if(a&&"-"!==t){const t=a[1];let n=a[2]||"0",i=a[4]||"";n=n.replace(/\B(?=(\d{3})+(?!\d))/g,s),"number"==typeof r&&(i=i.padEnd(r,"0").slice(0,r>0?r:0)),i&&(i=`${o}${i}`),c=[e.createElement("span",{key:"int",className:`${l}-content-value-int`},t,n),i&&e.createElement("span",{key:"decimal",className:`${l}-content-value-decimal`},i)]}else c=t}return e.createElement("span",{className:`${l}-content-value`},c)},u=t("Statistic",e=>(e=>{const{componentCls:t,marginXXS:n,padding:r,colorTextDescription:o,titleFontSize:s,colorTextHeading:l,contentFontSize:c,fontFamily:i}=e;return{[t]:Object.assign(Object.assign({},a(e)),{[`${t}-title`]:{marginBottom:n,color:o,fontSize:s},[`${t}-skeleton`]:{paddingTop:r},[`${t}-content`]:{color:l,fontSize:c,fontFamily:i,[`${t}-content-value`]:{display:"inline-block",direction:"ltr"},[`${t}-content-prefix, ${t}-content-suffix`]:{display:"inline-block"},[`${t}-content-prefix`]:{marginInlineEnd:n},[`${t}-content-suffix`]:{marginInlineStart:n}}})}})(n(e,{})),e=>{const{fontSizeHeading3:t,fontSize:n}=e;return{titleFontSize:n,contentFontSize:t}});const f=e.forwardRef((t,n)=>{const{prefixCls:a,className:c,rootClassName:i,style:p,valueStyle:f,value:d=0,title:g,valueRender:y,prefix:v,suffix:b,loading:S=!1,formatter:O,precision:x,decimalSeparator:E=".",groupSeparator:$=",",onMouseEnter:j,onMouseLeave:h}=t,w=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(t,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:N,direction:C,className:M,style:z}=r("statistic"),F=N("statistic",a),[P,k,D]=u(F),H=e.createElement(m,{decimalSeparator:E,groupSeparator:$,prefixCls:F,formatter:O,precision:x,value:d}),R=o(F,{[`${F}-rtl`]:"rtl"===C},M,c,i,k,D),T=e.useRef(null);e.useImperativeHandle(n,()=>({nativeElement:T.current}));const I=s(w,{aria:!0,data:!0});return P(e.createElement("div",Object.assign({},I,{ref:T,className:R,style:Object.assign(Object.assign({},z),p),onMouseEnter:j,onMouseLeave:h}),g&&e.createElement("div",{className:`${F}-title`},g),e.createElement(l,{paragraph:!1,loading:S,className:`${F}-skeleton`},e.createElement("div",{style:f,className:`${F}-content`},v&&e.createElement("span",{className:`${F}-content-prefix`},v),y?y(H):H,b&&e.createElement("span",{className:`${F}-content-suffix`},b)))))}),d=[["Y",31536e6],["M",2592e6],["D",864e5],["H",36e5],["m",6e4],["s",1e3],["S",1]];function g(e,t,n){const{format:a=""}=t,r=new Date(e).getTime(),o=Date.now();return function(e,t){let n=e;const a=/\[[^\]]*]/g,r=(t.match(a)||[]).map(e=>e.slice(1,-1)),o=t.replace(a,"[]"),s=d.reduce((e,[t,a])=>{if(e.includes(t)){const r=Math.floor(n/a);return n-=r*a,e.replace(new RegExp(`${t}+`,"g"),e=>{const t=e.length;return r.toString().padStart(t,"0")})}return e},o);let l=0;return s.replace(a,()=>{const e=r[l];return l+=1,e})}(n?Math.max(r-o,0):Math.max(o-r,0),a)}const y=t=>{const{value:n,format:a="HH:mm:ss",onChange:r,onFinish:o,type:s}=t,l=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(t,["value","format","onChange","onFinish","type"]),m="countdown"===s,[u,d]=e.useState(null),y=c(()=>{const e=Date.now(),t=function(e){return new Date(e).getTime()}(n);d({});return null==r||r(m?t-e:e-t),!(m&&t<e)||(null==o||o(),!1)});e.useEffect(()=>{let e;const t=()=>{e=i(()=>{y()&&t()})};return t(),()=>i.cancel(e)},[n,m]),e.useEffect(()=>{d({})},[]);return e.createElement(f,Object.assign({},l,{value:n,valueRender:e=>p(e,{title:void 0}),formatter:(e,t)=>u?g(e,Object.assign(Object.assign({},t),{format:a}),m):"-"}))},v=t=>e.createElement(y,Object.assign({},t,{type:"countdown"})),b=e.memo(v);f.Timer=y,f.Countdown=b;export{f as S};
