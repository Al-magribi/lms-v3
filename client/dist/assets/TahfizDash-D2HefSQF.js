import{cS as e,j as s,R as a,C as t,a as l,h as i,n,A as r,F as d,t as c}from"./index-CFTqxRqE.js";import{c as o}from"./vendor-DnNJsrFE.js";import{S as x}from"./index-DCNDXXqy.js";import{F as m}from"./Table-CONAFmJc.js";import{S as p}from"./Pagination-C6avRC8Z.js";import{P as j}from"./progress-CC8Gz0cc.js";import"./index-D91FXIqm.js";const{Option:h}=p,{Text:u}=c,g=()=>{const{data:c,isLoading:g}=e(),[y,f]=o.useState(0),v=c&&c[y],S=v?.grade.map(e=>{const i=[{title:"NIS",dataIndex:"nis",key:"nis",width:100,fixed:"left",responsive:["sm"]},{title:"Nama",dataIndex:"name",key:"name",width:200,fixed:"left"},{title:"Progress Keseluruhan",key:"progress_overall",width:250,render:(e,a)=>s.jsxs("div",{children:[s.jsx(u,{strong:!0,children:"Target:"}),a.progress.map((e,a)=>s.jsxs("div",{children:[s.jsx(u,{type:"secondary",style:{fontSize:"12px"},children:e.juz}),s.jsx(j,{percent:e.persentase,size:"small"})]},a)),a.exceed.length>0&&s.jsxs(s.Fragment,{children:[s.jsx(u,{strong:!0,style:{marginTop:"8px",display:"block"},children:"Melampaui:"}),a.exceed.map((e,a)=>s.jsxs("div",{children:[s.jsx(u,{type:"secondary",style:{fontSize:"12px"},children:e.juz}),s.jsx(j,{percent:e.persentase,size:"small",status:"success"})]},a))]})]})}];return{key:e.id,label:`Kelas ${e.name}`,children:s.jsxs(a,{gutter:[16,16],children:[s.jsx(t,{span:24,children:s.jsxs(a,{gutter:[16,16],children:[s.jsx(t,{xs:24,sm:12,lg:6,children:s.jsx(l,{children:s.jsx(x,{title:"Pencapaian Rata-rata",value:e.achievement,precision:2,suffix:"%"})})}),s.jsx(t,{xs:24,sm:12,lg:6,children:s.jsx(l,{children:s.jsx(x,{title:"Selesai",value:e.completed,valueStyle:{color:"#3f8600"}})})}),s.jsx(t,{xs:24,sm:12,lg:6,children:s.jsx(l,{children:s.jsx(x,{title:"Belum Selesai",value:e.uncompleted,valueStyle:{color:"#cf1322"}})})}),s.jsx(t,{xs:24,sm:12,lg:6,children:s.jsx(l,{children:s.jsx(x,{title:"Melampaui Target",value:e.exceed_completed})})})]})}),s.jsx(t,{span:24,children:s.jsx(m,{columns:[{title:"Kelas",dataIndex:"class_name",key:"class_name",fixed:"left",width:100},{title:"Selesai",dataIndex:"completed",key:"completed",align:"center"},{title:"Belum Selesai",dataIndex:"uncompleted",key:"uncompleted",align:"center"},{title:"Melampaui Target (Selesai)",dataIndex:"exceed_completed",key:"exceed_completed",align:"center",responsive:["md"]},{title:"Melampaui Target (Belum Selesai)",dataIndex:"exceed_uncompleted",key:"exceed_uncompleted",align:"center",responsive:["md"]}],dataSource:e.classes,rowKey:"class_id",scroll:{x:"max-content"},expandable:{expandedRowRender:e=>s.jsx(m,{columns:i,dataSource:e.students,rowKey:"userid",pagination:!1,scroll:{x:"max-content"}})}})})]})}})||[];return s.jsx(i,{title:"Dashboard",levels:["tahfiz"],children:s.jsx(n,{spinning:g,tip:"Memproses data ...",size:"large",children:s.jsx(l,{title:s.jsxs(d,{wrap:"wrap",gap:"middle",justify:"space-between",align:"center",children:[s.jsxs(u,{strong:!0,style:{fontSize:"14px"},children:["Dashboard Tahfiz - Periode ",v?.periode]}),s.jsx(p,{defaultValue:0,style:{minWidth:200},onChange:e=>{f(e)},value:y,children:c?.map((e,a)=>s.jsx(h,{value:a,children:e.homebase},e.homebase_id))})]}),style:{marginBottom:"24px"},children:s.jsx(r,{defaultActiveKey:"1",items:S})})})})};export{g as default};
