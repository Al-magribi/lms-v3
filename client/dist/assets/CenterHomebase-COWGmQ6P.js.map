{"version":3,"file":"CenterHomebase-COWGmQ6P.js","sources":["../../src/module/center/homebase/TableData.jsx","../../src/module/center/homebase/FormHomebase.jsx","../../src/module/center/homebase/CenterHomebase.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  useDeleteHomebaseMutation,\r\n  useGetHomebaseQuery,\r\n} from \"../../../service/api/center/ApiHomebase\";\r\nimport { Dropdown, Popconfirm, message } from \"antd\";\r\nimport TableLayout from \"../../../components/table/TableLayout\";\r\n\r\nconst TableData = ({ onEdit }) => {\r\n  const [page, setPage] = useState(1);\r\n  const [limit, setLimit] = useState(10);\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  const { data, isLoading } = useGetHomebaseQuery({ page, limit, search });\r\n  const [\r\n    deleteHomebase,\r\n    { isLoading: delLoading, isSuccess, data: delMessage, error },\r\n  ] = useDeleteHomebaseMutation();\r\n\r\n  const handleSearch = (value) => {\r\n    setSearch(value);\r\n    setPage(1);\r\n  };\r\n\r\n  const handleTableChange = (pagination) => {\r\n    setPage(pagination.current);\r\n    setLimit(pagination.pageSize);\r\n  };\r\n\r\n  const handleEdit = (record) => {\r\n    onEdit(record);\r\n  };\r\n\r\n  const handleDelete = (id) => {\r\n    deleteHomebase(id);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isSuccess) {\r\n      message.success(delMessage.message);\r\n    }\r\n\r\n    if (error) {\r\n      message.error(error.data.message);\r\n    }\r\n  }, [isSuccess, delMessage, error]);\r\n\r\n  const columns = [\r\n    {\r\n      title: \"No\", // Mengganti judul kolom menjadi \"No\"\r\n      key: \"nomor\",\r\n      render: (text, record, index) => (page - 1) * limit + index + 1, // Menghitung nomor urut\r\n    },\r\n    {\r\n      title: \"Satuan\",\r\n      dataIndex: \"name\",\r\n      key: \"name\",\r\n    },\r\n    {\r\n      title: \"Aksi\",\r\n      key: \"action\",\r\n      render: (record, text) => (\r\n        <Dropdown.Button\r\n          menu={{\r\n            items: [\r\n              {\r\n                key: \"edit\",\r\n                label: <span onClick={() => handleEdit(record)}>Edit</span>,\r\n              },\r\n              {\r\n                key: \"delete\",\r\n                label: (\r\n                  <Popconfirm\r\n                    title={`Apakah Anda yakin ingin menghapus ${text.name}?`}\r\n                    okText=\"Ya\"\r\n                    cancelText=\"Batal\"\r\n                    onConfirm={() => handleDelete(record.id)}\r\n                  >\r\n                    <span style={{ color: \"red\" }}>Hapus</span>\r\n                  </Popconfirm>\r\n                ),\r\n              },\r\n            ],\r\n          }}\r\n        >\r\n          Pilihan Aksi\r\n        </Dropdown.Button>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <TableLayout\r\n      onSearch={handleSearch}\r\n      isLoading={isLoading || delLoading}\r\n      columns={columns}\r\n      source={data?.homebase}\r\n      rowKey=\"id\"\r\n      page={page}\r\n      limit={limit}\r\n      totalData={data?.totalData}\r\n      onChange={handleTableChange}\r\n    />\r\n  );\r\n};\r\n\r\nexport default TableData;\r\n","import { Form, Input, Modal, Spin, message } from \"antd\";\r\nimport React, { useEffect } from \"react\";\r\nimport { useAddHomebaseMutation } from \"../../../service/api/center/ApiHomebase\";\r\nimport Cancel from \"../../../components/buttons/Cancel\";\r\nimport Save from \"../../../components/buttons/Save\";\r\n\r\nconst FormHomebase = ({ title, open, setOpen, homebase, setHomebase }) => {\r\n  const [form] = Form.useForm();\r\n\r\n  const [addHomebase, { isLoading, isSuccess, error, data }] =\r\n    useAddHomebaseMutation();\r\n\r\n  const handleSubmit = (values) => {\r\n    if (homebase) {\r\n      const data = { ...values, id: homebase.id };\r\n      addHomebase(data);\r\n    } else {\r\n      addHomebase(values);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    setHomebase();\r\n    form.resetFields();\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Reset the form and set new values only when the modal opens\r\n    if (open) {\r\n      form.resetFields();\r\n\r\n      if (homebase) {\r\n        form.setFieldsValue({ name: homebase.name });\r\n      } else {\r\n        form.resetFields();\r\n      }\r\n    }\r\n  }, [open, homebase]);\r\n\r\n  useEffect(() => {\r\n    if (isSuccess) {\r\n      handleClose();\r\n      message.success(data.message);\r\n    }\r\n\r\n    if (error) {\r\n      message.error(error.data.message);\r\n    }\r\n  }, [isSuccess, data, error]);\r\n\r\n  return (\r\n    <Modal\r\n      title={title}\r\n      open={open}\r\n      onCancel={handleClose}\r\n      destroyOnHidden\r\n      footer={[\r\n        <Cancel disabled={isLoading} key=\"reset\" onClick={handleClose} />,\r\n        <Save disabled={isLoading} key=\"add\" onClick={() => form.submit()} />,\r\n      ]}\r\n      style={{ top: 20 }}\r\n    >\r\n      <Spin tip=\"Memproses data...\" spinning={isLoading}>\r\n        <Form form={form} layout=\"vertical\" onFinish={handleSubmit}>\r\n          <Form.Item\r\n            name=\"name\"\r\n            label=\"Nama Satuan\"\r\n            rules={[{ required: true, message: \"Nama satuan wajib diisi!\" }]}\r\n          >\r\n            <Input placeholder=\"Nama Satuan Pendidikan\" />\r\n          </Form.Item>\r\n        </Form>\r\n      </Spin>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default FormHomebase;\r\n","import { Flex, Typography } from \"antd\";\r\nimport MainLayout from \"../../../components/layout/MainLayout\";\r\nimport Add from \"../../../components/buttons/Add\";\r\nimport { useState } from \"react\";\r\nimport TableData from \"./TableData\";\r\nimport FormHomebase from \"./FormHomebase\";\r\n\r\nconst { Title } = Typography;\r\n\r\nconst CenterHomebase = () => {\r\n  const [open, setOpen] = useState(false);\r\n  const [isEdit, setIsEdit] = useState(false);\r\n  const [homebase, setHomebase] = useState({});\r\n\r\n  const handleEdit = (record) => {\r\n    setHomebase(record);\r\n    setIsEdit(true);\r\n    setOpen(true);\r\n  };\r\n\r\n  return (\r\n    <MainLayout title={\"Management Satuan\"} levels={[\"center\"]}>\r\n      <Flex vertical gap=\"middle\">\r\n        <Flex justify=\"space-between\">\r\n          <Title level={5}>Management Satuan</Title>\r\n\r\n          <Add onClick={() => setOpen(true)} />\r\n        </Flex>\r\n\r\n        <TableData onEdit={handleEdit} />\r\n      </Flex>\r\n\r\n      <FormHomebase\r\n        open={open}\r\n        setOpen={() => setOpen(false)}\r\n        title={isEdit ? \"Edit Satuan\" : \"Tambah Satuan\"}\r\n        homebase={homebase}\r\n        setHomebase={() => setHomebase({})}\r\n      />\r\n    </MainLayout>\r\n  );\r\n};\r\n\r\nexport default CenterHomebase;\r\n"],"names":["TableData","onEdit","page","setPage","useState","limit","setLimit","search","setSearch","data","isLoading","useGetHomebaseQuery","deleteHomebase","delLoading","isSuccess","delMessage","error","useDeleteHomebaseMutation","useEffect","message","success","columns","title","key","render","text","record","index","dataIndex","jsx","Dropdown","Button","menu","items","label","onClick","handleEdit","children","Popconfirm","name","okText","cancelText","onConfirm","handleDelete","id","style","color","TableLayout","onSearch","value","source","homebase","rowKey","totalData","onChange","pagination","current","pageSize","FormHomebase","open","setOpen","setHomebase","form","Form","useForm","addHomebase","useAddHomebaseMutation","handleClose","resetFields","setFieldsValue","Modal","onCancel","destroyOnHidden","footer","Cancel","disabled","Save","submit","top","Spin","tip","spinning","layout","onFinish","values","Item","rules","required","Input","placeholder","Title","Typography","CenterHomebase","isEdit","setIsEdit","MainLayout","levels","jsxs","Flex","vertical","gap","justify","level","Add"],"mappings":"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"}