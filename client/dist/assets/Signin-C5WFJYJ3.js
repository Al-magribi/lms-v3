import{a as e,b as s,c as a,d as i,j as t,M as n,e as l,s as r}from"./index-BTQf-HYW.js";import{u as c,b as d}from"./vendor-DfXzdC0j.js";/* empty css              */const o=()=>{const o=e(),x=c(),{user:h,isSignin:m}=s((e=>e.auth)),{data:p}=a(),u={center:"/center-dashboard",admin:"/admin-dashboard",student:"/siswa-dashboard",teacher:"/guru-dashboard",parent:"/wali-dashboard",tahfiz:"/tahfiz-dashboard",cms:"/cms-dashboard"};d.useEffect((()=>{m&&(null==h?void 0:h.level)&&x(u[h.level])}),[m,h,x]);const[b,j]=d.useState("none"),[g,f]=d.useState(!1),[N,v]=d.useState(""),[w,y]=d.useState(""),[k,S]=d.useState(!1),[C,{isLoading:z,data:L}]=i(),[M,E]=d.useState({}),F=e=>{j(e),v(""),E({})};return m&&(null==h?void 0:h.level)?t.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{height:"100vh"},children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"spinner-border text-primary",role:"status",children:t.jsx("span",{className:"visually-hidden",children:"Loading..."})}),t.jsx("p",{className:"mt-2",children:"Mengalihkan ke dashboard..."})]})}):t.jsxs("div",{children:[t.jsx(n,{title:"Login",desc:"Login to your account"}),t.jsx("div",{className:"area",children:t.jsxs("ul",{className:"circles",children:[t.jsx("li",{}),t.jsx("li",{}),t.jsx("li",{}),t.jsx("li",{}),t.jsx("li",{}),t.jsx("li",{}),t.jsx("li",{}),t.jsx("li",{}),t.jsx("li",{}),t.jsx("li",{})]})}),t.jsxs("div",{className:"d-flex align-items-center justify-content-center flex-column gap-3",style:{height:"100vh"},children:[t.jsx("img",{src:(null==p?void 0:p.logo)?null==p?void 0:p.logo:"/logo.png",alt:"logo",style:{height:120,width:120,marginBottom:"1rem"},className:"pointer",onClick:()=>window.location.href="/"}),"none"===b&&t.jsxs("div",{className:"d-flex flex-wrap justify-content-center gap-3",children:[t.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>F("admin"),children:t.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[t.jsx("i",{className:"bi bi-person-badge-fill transition-icon",style:{fontSize:"2rem"}}),t.jsx("h5",{className:"card-title mb-0",children:"Admin"})]})}),t.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>F("teacher"),children:t.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[t.jsx("i",{className:"bi bi-person-workspace transition-icon",style:{fontSize:"2rem"}}),t.jsx("h5",{className:"card-title mb-0",children:"Guru"})]})}),t.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>F("student"),children:t.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[t.jsx("i",{className:"bi bi-mortarboard-fill transition-icon",style:{fontSize:"2rem"}}),t.jsx("h5",{className:"card-title mb-0",children:"Siswa"})]})}),t.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>F("parent"),children:t.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[t.jsx("i",{className:"bi bi-people-fill transition-icon",style:{fontSize:"2rem"}}),t.jsx("h5",{className:"card-title mb-0",children:"Wali Murid"})]})}),t.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>{E({}),x("/signup")},children:t.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[t.jsx("i",{className:"bi bi-person-plus-fill transition-icon",style:{fontSize:"2rem"}}),t.jsx("h5",{className:"card-title mb-0",children:"Pendaftaran"})]})})]}),"none"!==b&&!g&&t.jsxs("form",{style:{width:300},className:"d-flex flex-column gap-3",onSubmit:async e=>{var s;if(e.preventDefault(),!(()=>{const e={};return N.trim()||(e.account="Field ini wajib diisi"),w||(e.password="Password wajib diisi"),E(e),0===Object.keys(e).length})())return;const a=l.loading("Memproses login..."),i={password:w,..."student"===b?{nis:N}:"teacher"===b?{username:N}:{email:N}};try{const e=await C(i).unwrap();o(r(e.user)),l.success("Login berhasil",{id:a}),x(u[e.user.level]||"/")}catch(t){const e=(null==(s=t.data)?void 0:s.message)||"Gagal masuk. Silakan coba lagi.";l.error(e,{id:a}),y("")}},children:[t.jsxs("div",{className:"input-group",children:[t.jsx("span",{className:"input-group-text",children:t.jsx("i",{className:"bi "+("student"===b?"bi-person-badge":"teacher"===b?"bi-person-workspace":"bi-envelope")})}),t.jsx("input",{type:"admin"===b||"parent"===b?"email":"text",placeholder:"student"===b?"NIS":"teacher"===b?"USERNAME":"EMAIL",value:N,onChange:e=>{v(e.target.value),E({...M,account:""})},required:!0,className:"form-control "+(M.account?"is-invalid":"")}),M.account&&t.jsx("div",{className:"invalid-feedback",children:M.account})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("span",{className:"input-group-text",children:t.jsx("i",{className:"bi bi-lock-fill"})}),t.jsx("input",{type:k?"text":"password",placeholder:"Password",className:"form-control "+(M.password?"is-invalid":""),value:w,onChange:e=>{y(e.target.value),E({...M,password:""})},required:!0}),M.password&&t.jsx("div",{className:"invalid-feedback",children:M.password})]}),t.jsxs("div",{className:"form-check",children:[t.jsx("input",{className:"form-check-input",type:"checkbox",id:"flexCheckDefault",checked:k,onChange:()=>{S((e=>!e))}}),t.jsx("label",{className:"form-check-label text-white",htmlFor:"flexCheckDefault",children:"Tampilkan Password"})]}),t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsxs("button",{type:"button",className:"btn btn-danger d-flex align-items-center gap-2",onClick:()=>j("none"),children:[t.jsx("i",{className:"bi bi-arrow-left"}),"Kembali"]}),t.jsx("button",{type:"submit",className:"btn btn-success d-flex align-items-center gap-2",disabled:z,children:z?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"spinner-border spinner-border-sm","aria-hidden":"true"}),t.jsx("span",{role:"status",children:"Loading..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"bi bi-box-arrow-in-right"}),"Masuk"]})})]})]}),g&&t.jsx(SignUp,{setRole:()=>{j("none"),f(!1),v(""),E({})}})]})]})};export{o as default};
//# sourceMappingURL=Signin-C5WFJYJ3.js.map
