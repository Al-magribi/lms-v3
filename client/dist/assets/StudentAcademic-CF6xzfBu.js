import{l as e,au as s,ax as a,j as t,h as r,t as i,F as l,n,aw as c,b as o,c as d,D as m,a3 as j,a as x,ay as h,R as u,C as p}from"./index-C_fjL4gy.js";import{c as g}from"./vendor-DnNJsrFE.js";import{G as f}from"./index-iFahamqY.js";import{S as y,E as b}from"./Pagination-CMQXbkBX.js";import{A as v}from"./index-5Ayn0F0y.js";import{R as S}from"./ReadOutlined-D5o3SLLB.js";import{R as I}from"./TeamOutlined-BhzbUIee.js";import{R as F}from"./CalendarOutlined-B0dANwE1.js";import{C as k}from"./Collapse-D_9Dm1Cm.js";import{L as w}from"./index-CfY2emQW.js";import{S as z}from"./index-Dku8M4yY.js";import{R as C}from"./FallOutlined-BwBnDVMp.js";import{R as O}from"./BookOutlined-C8XUUov6.js";const{Title:T,Text:A,Paragraph:P}=i,{useBreakpoint:R}=f,$=({detail:e})=>{const s=e?.[0]?.attendance||[],a=e?.[1]?.attitude||[],r=e?.[2]||{summative:[],formative:[]};return t.jsxs(u,{gutter:[16,16],children:[t.jsx(p,{xs:24,md:12,lg:6,children:t.jsx(x,{size:"small",title:"Attendance",children:t.jsx(w,{dataSource:s,renderItem:e=>{const s=Object.keys(e)[0],a=e[s];return t.jsxs(w.Item,{children:[t.jsx(A,{style:{textTransform:"capitalize"},children:s}),t.jsx(A,{strong:!0,children:"presentase"===s?`${a}%`:a})]})}})})}),t.jsx(p,{xs:24,md:12,lg:6,children:t.jsx(x,{size:"small",title:"Attitude",children:t.jsx(w,{dataSource:a,renderItem:e=>{const s=Object.keys(e)[0],a=e[s];return t.jsxs(w.Item,{children:[t.jsx(A,{style:{textTransform:"capitalize"},children:s}),t.jsx(z,{value:a,precision:2,valueStyle:{fontSize:"1rem"}})]})}})})}),t.jsx(p,{xs:24,md:12,lg:8,children:t.jsx(x,{size:"small",title:"Summative",children:t.jsx(w,{dataSource:r.summative,renderItem:e=>{const s=Object.keys(e)[0],a=e[s];return t.jsxs(w.Item,{children:[t.jsx(A,{style:{textTransform:"capitalize"},children:s}),t.jsx(z,{value:a,precision:2,valueStyle:{fontSize:"1rem"}})]})}})})}),t.jsx(p,{xs:24,md:12,lg:4,children:t.jsx(x,{size:"small",title:"Formative",children:t.jsx(w,{dataSource:r.formative,renderItem:e=>t.jsx(w.Item,{children:e}),locale:{emptyText:"-"}})})})]})},B=({subject:e})=>t.jsx(w.Item,{children:t.jsxs(x,{children:[t.jsxs(l,{justify:"space-between",align:"center",wrap:"wrap",gap:"small",children:[t.jsxs("div",{children:[t.jsx(T,{level:5,style:{marginBottom:0},children:e.name}),t.jsxs(A,{type:"secondary",children:[t.jsx(o,{})," Guru: ",e.teacher]})]}),t.jsx(z,{title:"Rata-rata Nilai",value:e.score,precision:2,valueStyle:{color:e.score>=75?"#3f8600":"#cf1322"},prefix:e.score>=75?t.jsx(h,{}):t.jsx(C,{})})]}),e.chapters&&e.chapters.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs(m,{orientation:"left",plain:!0,children:[t.jsx(O,{})," Detail Penilaian per Chapter"]}),t.jsx(k,{accordion:!0,children:e.chapters.map(e=>t.jsxs(k.Panel,{header:t.jsxs(l,{justify:"space-between",align:"center",style:{width:"100%"},children:[t.jsx(A,{strong:!0,children:e.name}),t.jsx(z,{title:"Nilai",value:e.score,precision:2,valueStyle:{fontSize:"1rem",color:e.score>=75?"#3f8600":"#cf1322"}})]}),children:[t.jsx($,{detail:e.detail}),e.note&&t.jsxs(t.Fragment,{children:[t.jsx(m,{orientation:"left",plain:!0,style:{marginTop:"24px"},children:"Catatan Guru Chapter Ini"}),t.jsxs(P,{italic:!0,children:['"',e.note,'"']})]})]},e.id))})]}),e.note&&t.jsxs(t.Fragment,{children:[t.jsx(m,{orientation:"left",plain:!0,children:"Catatan Umum Guru"}),t.jsxs(P,{italic:!0,children:['"',e.note,'"']})]})]})},`${e.name}-${e.teacher}`),L=()=>{const i=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],h=i.map(e=>({label:e,value:e})),[u,p]=g.useState(null),[f]=e.useForm(),{user:z}=s(e=>e.auth),C=z?.id,O=z?.periode;g.useEffect(()=>{const e=(new Date).getMonth(),s=i[0===e?11:e-1];p(s),f.setFieldsValue({month:s})},[z,f]);const{data:P,error:$,isFetching:L}=a({studentId:C,month:u,periode:O},{skip:!C||!u||!O}),D=R(),G=P,N=e=>t.jsx(w,{itemLayout:"vertical",dataSource:e,renderItem:(e,s)=>t.jsx(B,{subject:e},e.id||`${e.name}-${s}`)});return $?t.jsxs(r,{title:`Laporan Akademik ${z?.name}`,levels:["student"],children:[t.jsx(e,{form:f,layout:"vertical",children:t.jsx(e.Item,{name:"month",label:t.jsx(T,{level:5,style:{margin:0},children:"Pilih Bulan Laporan"}),children:t.jsx(y,{placeholder:"Pilih Bulan",onChange:e=>p(e),options:h,style:{width:300}})})}),t.jsx(v,{message:"Terjadi Kesalahan",description:$?.data?.message||"Gagal memuat data.",type:"error",showIcon:!0})]}):t.jsx(r,{title:`Laporan Akademik ${z?.name}`,levels:["student"],children:t.jsxs(l,{vertical:!0,gap:"large",children:[t.jsx(e,{form:f,layout:"vertical",children:t.jsx(e.Item,{name:"month",label:t.jsx(T,{level:5,style:{margin:0},children:"Pilih Bulan Laporan"}),children:t.jsx(y,{placeholder:"Pilih Bulan",onChange:e=>p(e),options:h,style:{width:300}})})}),L&&t.jsx("div",{style:{textAlign:"center",marginTop:50},children:t.jsx(n,{size:"large"})}),!L&&G&&t.jsxs(t.Fragment,{children:[t.jsxs(c,{bordered:!0,column:D.md?2:1,size:"small",children:[t.jsx(c.Item,{label:t.jsxs(t.Fragment,{children:[t.jsx(o,{})," Nama Siswa"]}),span:D.md?2:1,children:t.jsxs(A,{strong:!0,children:[G.name," (",G.nis,")"]})}),t.jsx(c.Item,{label:t.jsxs(t.Fragment,{children:[t.jsx(d,{})," Homebase"]}),children:G.homebase}),t.jsxs(c.Item,{label:t.jsxs(t.Fragment,{children:[t.jsx(S,{})," Kelas"]}),children:[G.grade," - ",G.class]}),t.jsx(c.Item,{label:t.jsxs(t.Fragment,{children:[t.jsx(I,{})," Wali Kelas"]}),children:G.teacher_homeroom}),t.jsx(c.Item,{label:t.jsxs(t.Fragment,{children:[t.jsx(F,{})," Periode Laporan"]}),children:t.jsxs(A,{strong:!0,children:[G.periode," - ",G.month]})})]}),t.jsx(m,{}),t.jsx(k,{accordion:!0,defaultActiveKey:["0"],ghost:!0,items:G.category.map((e,s)=>({key:String(s),label:t.jsx(T,{level:5,children:e.name}),children:"Diniyah"===e.name&&e.branch?t.jsx(k,{items:e.branch.map((e,s)=>({key:String(s),label:t.jsxs(l,{justify:"space-between",style:{width:"100%"},children:[t.jsx(A,{strong:!0,children:e.name}),t.jsxs(j,{color:"blue",children:["Rata-rata Nilai: ",e.score]})]}),children:N(e.subjects)}))}):N(e.subjects)}))})]}),!L&&!G&&u&&!$&&t.jsx(x,{children:t.jsx(b,{description:"Data laporan untuk bulan yang dipilih tidak tersedia."})})]})})};export{L as default};
