import{D as e,j as s,d as t,E as a,F as i,G as r,H as n,I as l,V as c}from"./index-Bs7ApkDm.js";import{b as d}from"./vendor-CpHG0K6b.js";import{L as o}from"./Layout-gPN5LO_m.js";import{T as m}from"./Table-pjjdWQzU.js";import"./index-Dhpz4WQz.js";const h=({detail:a,setDetail:i})=>{const[r,n]=d.useState(""),[l,c]=d.useState(""),[o,{isSuccess:m,isLoading:h,isError:x,reset:u}]=e();return d.useEffect((()=>{m&&(u(),i({}),n(""),c("")),x&&u()}),[m,x]),d.useEffect((()=>{a&&(n(a.id),c(a.name))}),[a]),s.jsxs("form",{onSubmit:e=>{e.preventDefault();const s={id:r,name:l};t.promise(o(s).unwrap().then((e=>e.message)),{loading:"Menyimpan data...",success:e=>e,error:e=>e.data.message})},className:"rounded bg-white p-2 border d-flex flex-column gap-2",children:[s.jsx("p",{className:"m-0 h6",children:"Periode"}),s.jsx("input",{type:"text",name:"periode",id:"periode",className:"form-control",placeholder:"Periode",required:!0,value:l||"",onChange:e=>c(e.target.value)}),s.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[s.jsx("button",{type:"button",className:"btn btn-sm btn-warning",onClick:()=>{i({}),n(""),c("")},children:"Batal"}),s.jsx("button",{type:"submit",className:"btn btn-sm btn-success",disabled:h,children:"Simpan"})]})]})},x=({setDetail:e})=>{const[t,o]=d.useState(1),[h,x]=d.useState(10),[u,j]=d.useState(""),{data:p={},isLoading:b}=a({page:t,limit:h,search:u}),{periodes:g=[],totalData:f,totalPages:N}=p,[v,{isSuccess:S,isLoading:k,isError:y,reset:w}]=i(),[D]=r(),{refetch:P}=n({page:t,limit:h,search:u}),{refetch:C}=l({page:t,limit:h,search:u});return d.useEffect((()=>{S&&w(),y&&w()}),[S,y]),s.jsx(m,{page:t,setPage:o,setLimit:x,setSearch:j,totalData:f,totalPages:N,isLoading:b,children:s.jsxs("table",{className:"table table-bordered table-striped table-hover",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-center",children:"No"}),s.jsx("th",{className:"text-center",children:"_id"}),s.jsx("th",{className:"text-center",children:"Periode"}),s.jsx("th",{className:"text-center",children:"Status"}),s.jsx("th",{className:"text-center",children:"Aksi"})]})}),s.jsx("tbody",{children:null==g?void 0:g.map(((a,i)=>s.jsxs("tr",{children:[s.jsx("td",{className:"text-center align-middle",children:(t-1)*h+i+1}),s.jsx("td",{className:"text-center align-middle",children:a.id}),s.jsx("td",{className:"text-center align-middle",children:a.name}),s.jsx("td",{className:"text-center align-middle",children:s.jsx("div",{className:"form-check form-switch d-flex justify-content-center",onClick:()=>{return e=a.id,void c.promise(D(e).unwrap().then((e=>(P(),C(),e.message))),{loading:"Memproses...",success:e=>e,error:e=>e.data.message});var e},children:s.jsx("input",{className:"form-check-input pointer",type:"checkbox",role:"switch",id:"flexSwitchCheckChecked",checked:a.isactive,readOnly:!0})})}),s.jsx("td",{className:"text-cente align-middle",children:s.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[s.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>e(a),children:s.jsx("i",{className:"bi bi-pencil-square"})}),s.jsx("button",{className:"btn btn-sm btn-danger",disabled:k,onClick:()=>{return e=a.id,void c.promise(v(e).unwrap().then((e=>e.message)),{loading:"Memproses...",success:e=>e,error:e=>e.data.message});var e},children:s.jsx("i",{className:"bi bi-folder-minus"})})]})})]},i)))})]})})},u=()=>{const[e,t]=d.useState("");return s.jsx(o,{title:"Periode Pembelajaran",levels:["admin"],children:s.jsxs("div",{className:"row g-2",children:[s.jsx("div",{className:"col-lg-3 col-12",children:s.jsx(h,{detail:e,setDetail:t})}),s.jsx("div",{className:"col-lg-9 col-12",children:s.jsx(x,{setDetail:t})})]})})};export{u as default};
//# sourceMappingURL=AdminPeriode-DTDqwPHp.js.map
