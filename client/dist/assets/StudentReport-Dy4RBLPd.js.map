{"version":3,"file":"StudentReport-Dy4RBLPd.js","sources":["../../src/page/tahfiz/report/StudentReport.jsx"],"sourcesContent":["import React from \"react\";\r\nimport Layout from \"../../../components/layout/Layout\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useGetStudentReportQuery } from \"../../../controller/api/tahfiz/ApiReport\";\r\n\r\nconst StudentReport = () => {\r\n  const { userid, name } = useParams();\r\n\r\n  const { data, isLoading } = useGetStudentReportQuery(userid, {\r\n    skip: !userid,\r\n  });\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Layout\r\n        title={`Laporan Hafalan ${name.replace(/-/g, \" \")}`}\r\n        levels={[\"tahfiz\", \"student\", \"parent\"]}\r\n      >\r\n        <div className=\"d-flex justify-content-center\">\r\n          <div className=\"spinner-border text-primary\" role=\"status\">\r\n            <span className=\"visually-hidden\">Loading...</span>\r\n          </div>\r\n        </div>\r\n      </Layout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Layout title={`Laporan Hafalan`} levels={[\"tahfiz\", \"student\", \"parent\"]}>\r\n      <div className=\"print-section container\">\r\n        <div className=\"my-4\">\r\n          <h6 className=\"mb-3\">\r\n            <i className=\"bi bi-person-circle me-2\"></i>\r\n            Informasi Siswa\r\n          </h6>\r\n          <div className=\"ps-4\">\r\n            <p className=\"mb-1\">Nama: {data?.student_name}</p>\r\n            <p className=\"mb-1\">NIS: {data?.student_nis}</p>\r\n            <p className=\"mb-1\">\r\n              Kelas: {data?.grade} - {data?.class}\r\n            </p>\r\n            <p className=\"mb-1\">Sekolah: {data?.homebase}</p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"my-2\">\r\n          <p className=\"m-0 h5\">Target Hafalan</p>\r\n        </div>\r\n\r\n        {/* Visualisasi jumlah juz yang sudah 100% */}\r\n        {data?.memorization && data?.exceed && (\r\n          <div className=\"mb-3 d-flex gap-2 align-items-center\">\r\n            <span className=\"badge bg-success fs-6\">\r\n              Juz Selesai 100% (Target):{\" \"}\r\n              {data.memorization.filter((juz) => juz.progress === 100).length}\r\n            </span>\r\n            <span className=\"badge bg-info fs-6\">\r\n              Juz Selesai 100% (Melebihi Target):{\" \"}\r\n              {data.exceed.filter((juz) => juz.progress === 100).length}\r\n            </span>\r\n            <span className=\"badge bg-primary fs-6\">\r\n              Total Juz Selesai 100%:{\" \"}\r\n              {data.memorization.filter((juz) => juz.progress === 100).length +\r\n                data.exceed.filter((juz) => juz.progress === 100).length}\r\n            </span>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"row g-4\">\r\n          {data?.memorization.map((juz, index) => (\r\n            <div className=\"col-6\" key={index}>\r\n              <div className=\"card border-primary h-100\">\r\n                <div className=\"card-header bg-primary text-white py-2\">\r\n                  <h6 className=\"mb-0\">{juz.juz}</h6>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                  <div className=\"mb-3\">\r\n                    <div className=\"progress\" style={{ height: \"20px\" }}>\r\n                      <div\r\n                        className=\"progress-bar bg-success\"\r\n                        style={{ width: `${juz.progress}%` }}\r\n                      >\r\n                        {juz.progress}%\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"row mb-3\">\r\n                    <div className=\"col-6\">\r\n                      <div className=\"d-flex align-items-center\">\r\n                        <i className=\"bi bi-layout-text-window me-2\"></i>\r\n                        <div>\r\n                          <div>Baris</div>\r\n                          <strong>\r\n                            {juz.completed_lines ?? juz.completed}/{juz.lines}\r\n                          </strong>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-6\">\r\n                      <div className=\"d-flex align-items-center\">\r\n                        <i className=\"bi bi-bookmark me-2\"></i>\r\n                        <div>\r\n                          <div>Ayat</div>\r\n                          <strong>\r\n                            {juz.completed}/{juz.verses}\r\n                          </strong>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <h6 className=\"mb-2\">Detail Surah:</h6>\r\n                    <div className=\"d-flex flex-wrap gap-2\">\r\n                      {juz.surah && juz.surah.length > 0 ? (\r\n                        juz.surah.map((surah, idx) => (\r\n                          <p key={idx} className=\"m-0\">\r\n                            {surah.surah_name}\r\n                            <span className=\"badge bg-info ms-2\">\r\n                              {surah.verse} ayat | {surah.line} baris\r\n                            </span>\r\n                          </p>\r\n                        ))\r\n                      ) : (\r\n                        <p className=\"text-muted\">\r\n                          Belum ada surah yang dihafal\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {data?.exceed && data.exceed.length > 0 && (\r\n          <>\r\n            <div className=\"my-2\">\r\n              <p className=\"m-0 h5\">Melebihi Target Hafalan</p>\r\n            </div>\r\n            <div className=\"row g-4\">\r\n              {data.exceed.map((juz, index) => (\r\n                <div className=\"col-6\" key={index}>\r\n                  <div className=\"card border-primary h-100\">\r\n                    <div className=\"card-header bg-primary text-white py-2\">\r\n                      <h6 className=\"mb-0\">{juz.juz}</h6>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                      <div className=\"mb-3\">\r\n                        <div className=\"progress\" style={{ height: \"20px\" }}>\r\n                          <div\r\n                            className=\"progress-bar bg-success\"\r\n                            style={{ width: `${juz.progress}%` }}\r\n                          >\r\n                            {juz.progress}%\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"row mb-3\">\r\n                        <div className=\"col-6\">\r\n                          <div className=\"d-flex align-items-center\">\r\n                            <i className=\"bi bi-layout-text-window me-2\"></i>\r\n                            <div>\r\n                              <div>Baris</div>\r\n                              <strong>\r\n                                {juz.completed_lines ?? juz.completed}/\r\n                                {juz.lines}\r\n                              </strong>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"col-6\">\r\n                          <div className=\"d-flex align-items-center\">\r\n                            <i className=\"bi bi-bookmark me-2\"></i>\r\n                            <div>\r\n                              <div>Ayat</div>\r\n                              <strong>\r\n                                {juz.completed}/{juz.verses}\r\n                              </strong>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div>\r\n                        <h6 className=\"mb-2\">Detail Surah:</h6>\r\n                        <div className=\"d-flex flex-wrap gap-2\">\r\n                          {juz?.surah && juz.surah.length > 0 ? (\r\n                            juz.surah.map((surah, idx) => (\r\n                              <p key={idx} className=\"m-0\">\r\n                                {surah.surah_name}\r\n                                <span className=\"badge bg-info ms-2\">\r\n                                  {surah.verse} ayat | {surah.line} baris\r\n                                </span>\r\n                              </p>\r\n                            ))\r\n                          ) : (\r\n                            <p className=\"text-muted\">\r\n                              Belum ada surah yang dihafal\r\n                            </p>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nconst printStyles = `\r\n  @media print {\r\n    body * {\r\n      visibility: hidden;\r\n    }\r\n    .print-section,\r\n    .print-section * {\r\n      visibility: visible;\r\n    }\r\n    .print-section {\r\n      position: absolute;\r\n      left: 0;\r\n      top: 0;\r\n      width: 100%;\r\n      padding: 20px;\r\n    }\r\n    \r\n    .card {\r\n      border: 1px solid #0d6efd !important;\r\n      break-inside: avoid;\r\n    }\r\n    .progress {\r\n      border: 1px solid #dee2e6;\r\n    }\r\n    .progress-bar {\r\n      print-color-adjust: exact;\r\n      -webkit-print-color-adjust: exact;\r\n    }\r\n    .bg-primary, .bg-info, .bg-success {\r\n      print-color-adjust: exact;\r\n      -webkit-print-color-adjust: exact;\r\n    }\r\n    .badge {\r\n      border: 1px solid #0dcaf0;\r\n    }\r\n    hr {\r\n      border-top: 1px solid #000;\r\n    }\r\n    .row {\r\n      display: flex;\r\n      flex-wrap: wrap;\r\n    }\r\n    .col-6 {\r\n      width: 50%;\r\n      padding: 0 15px;\r\n    }\r\n  }\r\n`;\r\n\r\nconst style = document.createElement(\"style\");\r\nstyle.innerHTML = printStyles;\r\ndocument.head.appendChild(style);\r\n\r\nexport default StudentReport;\r\n"],"names":["StudentReport","userid","name","useParams","data","isLoading","useGetStudentReportQuery","skip","jsxRuntimeExports","jsx","Layout","title","replace","levels","children","className","role","jsxs","student_name","student_nis","grade","class","homebase","memorization","exceed","filter","juz","progress","length","map","index","style","height","width","completed_lines","completed","lines","verses","surah","idx","surah_name","verse","line","Fragment","document","createElement","innerHTML","head","appendChild"],"mappings":"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"}