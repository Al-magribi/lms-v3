{"version":3,"file":"TahfizTarget-Csszs-93.js","sources":["../../src/page/tahfiz/target/FormJuz.jsx","../../src/page/tahfiz/target/TableData.jsx","../../src/page/tahfiz/target/TahfizTarget.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useAddTargetMutation } from \"../../../controller/api/tahfiz/ApiScoring\";\r\nimport { toast } from \"react-hot-toast\";\r\nimport Select from \"react-select\";\r\n\r\nconst FormJuz = ({ grades, juz }) => {\r\n  const [addTarget, { isLoading, isSuccess, isError, reset }] =\r\n    useAddTargetMutation();\r\n\r\n  const [formData, setFormData] = useState({\r\n    grade_id: \"\",\r\n    juz_ids: [],\r\n  });\r\n\r\n  const addHandler = (e) => {\r\n    e.preventDefault();\r\n\r\n    // Convert juz_ids array to individual target entries\r\n    const targets = formData.juz_ids.map((juz) => ({\r\n      id: formData.id,\r\n      gradeId: formData.grade_id,\r\n      juzId: juz.value,\r\n    }));\r\n\r\n    // Submit each target individually\r\n    const promises = targets.map((target) =>\r\n      addTarget(target)\r\n        .unwrap()\r\n        .then((res) => res.message)\r\n    );\r\n\r\n    toast.promise(Promise.all(promises), {\r\n      loading: \"Memuat data...\",\r\n      success: (messages) => messages[0],\r\n      error: (err) => err.data.message,\r\n    });\r\n  };\r\n\r\n  const cancel = () => {\r\n    setFormData({\r\n      id: \"\",\r\n      grade_id: \"\",\r\n      juz_ids: [],\r\n    });\r\n  };\r\n\r\n  const handleJuzChange = (selectedOptions) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      juz_ids: selectedOptions || [],\r\n    }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isError || isSuccess) {\r\n      reset();\r\n      setFormData({\r\n        id: \"\",\r\n        grade_id: \"\",\r\n        juz_ids: [],\r\n      });\r\n    }\r\n  }, [isSuccess, isError]);\r\n\r\n  const juzOptions =\r\n    juz?.map((item) => ({\r\n      value: item.id,\r\n      label: item.name,\r\n    })) || [];\r\n\r\n  return (\r\n    <form\r\n      onSubmit={addHandler}\r\n      className=\"rounded border bg-white p-2 d-flex flex-column gap-2\"\r\n    >\r\n      <p className=\"m-0 h6\">Target Hafalan Bedasarkan Juz</p>\r\n\r\n      <select\r\n        className=\"form-select\"\r\n        value={formData.grade_id}\r\n        onChange={(e) => setFormData({ ...formData, grade_id: e.target.value })}\r\n      >\r\n        <option value=\"\" hidden>\r\n          Pilih Tingkat\r\n        </option>\r\n        {grades?.map((grade) => (\r\n          <option key={grade.id} value={grade.id}>\r\n            {grade.name}\r\n          </option>\r\n        ))}\r\n      </select>\r\n\r\n      <Select\r\n        isMulti\r\n        options={juzOptions}\r\n        value={formData.juz_ids}\r\n        onChange={handleJuzChange}\r\n        className=\"mb-2\"\r\n        placeholder=\"Pilih Juz\"\r\n      />\r\n\r\n      <div className=\"d-flex justify-content-end gap-2\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-sm  btn-warning\"\r\n          onClick={cancel}\r\n        >\r\n          Batal\r\n        </button>\r\n        <button\r\n          type=\"submit\"\r\n          className=\"btn btn-sm btn-success\"\r\n          disabled={isLoading}\r\n        >\r\n          Simpan\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default FormJuz;\r\n","import React, { Fragment } from \"react\";\r\nimport {\r\n  useGetTargetsQuery,\r\n  useDeleteTargetMutation,\r\n} from \"../../../controller/api/tahfiz/ApiScoring\";\r\nimport toast from \"react-hot-toast\";\r\n\r\nconst TableData = () => {\r\n  const { data: targets } = useGetTargetsQuery();\r\n  const [deleteTarget, { isLoading, isError, isSuccess }] =\r\n    useDeleteTargetMutation();\r\n\r\n  const handleDelete = (id) => {\r\n    toast.promise(\r\n      deleteTarget(id)\r\n        .unwrap()\r\n        .then((res) => res.message),\r\n      {\r\n        loading: \"Menghapus target...\",\r\n        success: (message) => message,\r\n        error: (error) => error.data.message,\r\n      }\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"table-responsive\">\r\n      <table className=\"mb-0 table table-bordered table-hover\">\r\n        <thead>\r\n          <tr>\r\n            <th className=\"text-center\">Tingkat</th>\r\n            <th className=\"text-center\">Juz</th>\r\n            <th className=\"text-center\">Ayat</th>\r\n            <th className=\"text-center\">Baris</th>\r\n            <th className=\"text-center\">Aksi</th>\r\n            <th className=\"text-center\">Total Ayat</th>\r\n            <th className=\"text-center\">Total Baris</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {targets?.length > 0 ? (\r\n            targets?.map((item, index) => (\r\n              <Fragment key={index}>\r\n                {item.target.map((targetItem, targetIndex) => (\r\n                  <tr key={targetIndex}>\r\n                    {targetIndex === 0 && (\r\n                      <th\r\n                        rowSpan={item.target.length}\r\n                        className=\"text-center align-middle\"\r\n                      >\r\n                        {item.grade}\r\n                      </th>\r\n                    )}\r\n                    <td className=\"text-center\">{targetItem.juz}</td>\r\n                    <td className=\"text-center\">{targetItem.total_ayat}</td>\r\n                    <td className=\"text-center\">{targetItem.total_line}</td>\r\n                    <td className=\"text-center\">\r\n                      <div className=\"d-flex justify-content-center gap-2\">\r\n                        <button\r\n                          className=\"btn btn-sm btn-danger\"\r\n                          onClick={() => handleDelete(targetItem.target_id)}\r\n                        >\r\n                          <i className=\"bi bi-trash\"></i>\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                    {targetIndex === 0 && (\r\n                      <td\r\n                        rowSpan={item.target.length}\r\n                        className=\"text-center align-middle\"\r\n                      >\r\n                        {item.total_ayat}\r\n                      </td>\r\n                    )}\r\n                    {targetIndex === 0 && (\r\n                      <td\r\n                        rowSpan={item.target.length}\r\n                        className=\"text-center align-middle\"\r\n                      >\r\n                        {item.total_line}\r\n                      </td>\r\n                    )}\r\n                  </tr>\r\n                ))}\r\n              </Fragment>\r\n            ))\r\n          ) : (\r\n            <tr>\r\n              <td colSpan=\"5\" className=\"text-center\">\r\n                Tidak ada data tersedia\r\n              </td>\r\n            </tr>\r\n          )}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TableData;\r\n","import React, { useState } from \"react\";\r\nimport Layout from \"../../../components/layout/Layout\";\r\nimport FormJuz from \"./FormJuz\";\r\nimport FormSurah from \"./FormSurah\";\r\nimport TableData from \"./TableData\";\r\nimport {\r\n  useGetGradesQuery,\r\n  useAddTargetMutation,\r\n} from \"../../../controller/api/tahfiz/ApiScoring\";\r\nimport { useGetJuzQuery } from \"../../../controller/api/tahfiz/ApiQuran\";\r\n\r\nconst TahfizTarget = () => {\r\n  const { data: grades } = useGetGradesQuery();\r\n  const { data: juz } = useGetJuzQuery({ page: \"\", limit: \"\", search: \"\" });\r\n\r\n  return (\r\n    <Layout title={\"Target Hafalan\"} levels={[\"tahfiz\"]}>\r\n      <div className=\"row g-2\">\r\n        <div className=\"col-lg-3 col-12\">\r\n          <FormJuz grades={grades} juz={juz} />\r\n        </div>\r\n        <div className=\"col-lg-9 col-12\">\r\n          <TableData />\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default TahfizTarget;\r\n"],"names":["FormJuz","grades","juz","addTarget","isLoading","isSuccess","isError","reset","useAddTargetMutation","formData","setFormData","useState","grade_id","juz_ids","useEffect","id","juzOptions","map","item","value","label","name","jsxRuntimeExports","jsxs","onSubmit","e","preventDefault","promises","gradeId","juzId","target","unwrap","then","res","message","toast","promise","Promise","all","loading","success","messages","error","err","data","className","children","jsx","onChange","hidden","grade","Select","isMulti","options","selectedOptions","prev","placeholder","type","onClick","disabled","TableData","targets","useGetTargetsQuery","deleteTarget","useDeleteTargetMutation","length","index","Fragment","targetItem","targetIndex","rowSpan","total_ayat","total_line","handleDelete","target_id","Vt","colSpan","TahfizTarget","useGetGradesQuery","useGetJuzQuery","page","limit","search","Layout","title","levels"],"mappings":"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"}