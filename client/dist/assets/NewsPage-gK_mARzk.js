import{j as e}from"./index-CNbAajcm.js";import{b as t}from"./vendor-BYWiIb5-.js";import{L as i}from"./Layout-IeQs0p8A.js";import{g as a,h as s,i as l}from"./index-C-OX0RB-.js";import{m as n}from"./proxy-B0Xu6tIC.js";import{C as r}from"./CmsDataTable-CWf4SQGL.js";import{C as o}from"./CmsModal-mC8bpiPz.js";import{C as c}from"./CmsForm-C080LkQ1.js";const d=({title:t,children:i,onAdd:r,onSearch:o,searchPlaceholder:c="Search...",showSearch:d=!0,showFilter:m=!1,onFilter:h,filterOptions:p,activeFilter:u,setActiveFilter:x})=>{const g={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}};return e.jsx(n.div,{className:"container-fluid py-4",initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},children:e.jsx(n.div,{className:"card shadow-sm mb-4",variants:g,children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsx("h2",{className:"card-title mb-0",children:t}),r&&e.jsxs(n.button,{className:"btn btn-primary",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:r,children:[e.jsx(a,{className:"me-2"}),"Add New"]})]}),(d||m)&&e.jsxs("div",{className:"row mb-4",children:[d&&e.jsx("div",{className:"col-md-6 mb-3 mb-md-0",children:e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text bg-light",children:e.jsx(s,{})}),e.jsx("input",{type:"text",className:"form-control",placeholder:c,onChange:e=>o&&o(e.target.value)})]})}),m&&p&&e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"d-flex",children:[e.jsx("span",{className:"input-group-text bg-light",children:e.jsx(l,{})}),e.jsx("select",{className:"form-select",value:u,onChange:e=>x&&x(e.target.value),children:p.map((t=>e.jsx("option",{value:t.value,children:t.label},t.value)))})]})})]}),e.jsx(n.div,{variants:g,children:i})]})})})},m=()=>{const[a,s]=t.useState([]),[l,m]=t.useState([]),[h,p]=t.useState(!1),[u,x]=t.useState(null),[g,v]=t.useState(!1),[b,j]=t.useState(null),[y,f]=t.useState([]),[w,C]=t.useState("all");t.useEffect((()=>{s([{id:1,title:"School Achieves Excellence Award",category_id:1,description:"Our school has received an excellence award...",image:"https://via.placeholder.com/150",createdat:"2023-05-15"},{id:2,title:"New Library Opening Ceremony",category_id:2,description:"The new library will be opening next month...",image:"https://via.placeholder.com/150",createdat:"2023-05-10"},{id:3,title:"Student Science Fair Winners",category_id:1,description:"Congratulations to our science fair winners...",image:"https://via.placeholder.com/150",createdat:"2023-05-05"}]),f([{id:1,name:"Achievements"},{id:2,name:"Events"},{id:3,name:"Announcements"}])}),[]),t.useEffect((()=>{m(a)}),[a]);const N=[{key:"id",label:"ID"},{key:"image",label:"Image",render:t=>e.jsx("img",{src:t,alt:"News",className:"img-thumbnail",style:{width:"50px",height:"50px",objectFit:"cover"}})},{key:"title",label:"Title"},{key:"category_id",label:"Category",render:e=>{const t=y.find((t=>t.id===e));return t?t.name:"Unknown"}},{key:"description",label:"Description",render:t=>e.jsx("div",{style:{maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t})},{key:"createdat",label:"Created At"}],S=[{name:"title",label:"Title",type:"text",required:!0},{name:"category_id",label:"Category",type:"select",required:!0,options:y.map((e=>({value:e.id,label:e.name})))},{name:"description",label:"Description",type:"textarea",required:!0},{name:"image",label:"Image",type:"file",accept:"image/*",helpText:"Upload an image for the news article"}],A=[{value:"all",label:"All Categories"},...y.map((e=>({value:e.id,label:e.name})))];return e.jsxs(i,{title:"Berita",levels:["cms"],children:[e.jsx(d,{title:"Berita",onAdd:()=>{x(null),p(!0)},onSearch:e=>{if(!e)return void m(a);const t=a.filter((t=>t.title.toLowerCase().includes(e.toLowerCase())||t.description.toLowerCase().includes(e.toLowerCase())));m(t)},searchPlaceholder:"Search news...",showFilter:!0,filterOptions:A,activeFilter:w,setActiveFilter:e=>{if(C(e),"all"===e)m(a);else{const t=a.filter((t=>t.category_id===parseInt(e)));m(t)}},children:e.jsx(r,{columns:N,data:l,onEdit:e=>{x(e),p(!0)},onDelete:e=>{j(e),v(!0)},onView:e=>{console.log("Viewing news item:",e)}})}),e.jsx(o,{isOpen:h,onClose:()=>p(!1),title:u?"Edit News":"Add News",size:"lg",children:e.jsx(c,{fields:S,initialValues:u||{},onSubmit:e=>{if(u){const t=a.map((t=>t.id===u.id?{...t,...e}:t));s(t)}else{const t={id:a.length+1,...e,createdat:(new Date).toISOString().split("T")[0]};s([...a,t])}p(!1)},onCancel:()=>p(!1)})}),e.jsxs(o,{isOpen:g,onClose:()=>v(!1),title:"Confirm Delete",size:"sm",footer:e.jsxs(e.Fragment,{children:[e.jsx(n.button,{className:"btn btn-secondary",onClick:()=>v(!1),whileHover:{scale:1.05},whileTap:{scale:.95},children:"Cancel"}),e.jsx(n.button,{className:"btn btn-danger",onClick:()=>{if(b){const e=a.filter((e=>e.id!==b.id));s(e),v(!1),j(null)}},whileHover:{scale:1.05},whileTap:{scale:.95},children:"Delete"})]}),children:[e.jsxs("p",{children:['Are you sure you want to delete "',null==b?void 0:b.title,'"?']}),e.jsx("p",{className:"text-danger",children:"This action cannot be undone."})]})]})};export{m as default};
//# sourceMappingURL=NewsPage-gK_mARzk.js.map
