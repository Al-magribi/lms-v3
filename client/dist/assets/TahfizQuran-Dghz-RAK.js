import{l as e,cI as a,s,j as t,I as i,cJ as n,cK as r,F as l,B as o,cL as d,cM as u,cN as c,cO as m,a as h,r as x,$ as j,an as p,n as y,h as g,x as f}from"./index-uqXiPZaM.js";import{c as k}from"./vendor-DTs43g_X.js";import{A as S}from"./Add-ClBUWLqP.js";import{M as b}from"./index-DzGsxoGF.js";import{F as A,D as T}from"./Table-Cvq4F04g.js";import{S as C}from"./index-DimbDAWW.js";import{P as I}from"./index-yWlD8c-I.js";import{T as w}from"./index-BAm9WSKq.js";import{S as z}from"./Pagination-CcDshGE9.js";import{s as v}from"./index-5meTtKiP.js";import{A as J}from"./index-7mhCT5El.js";import{R as F}from"./BookOutlined-CNrhxhO_.js";import{R as E}from"./ClusterOutlined-22OqDz-F.js";import{R as L}from"./ContainerOutlined-CyeNz6X2.js";import{R as B}from"./DeleteOutlined-C5VyeaFb.js";const N=({title:n,open:r,onClose:l,surah:o})=>{const[d]=e.useForm(),[u,{data:c,error:m,isLoading:h,isSuccess:x}]=a();return k.useEffect(()=>{x&&(s.success(c.message),l(),d.resetFields()),m&&s.error(m.data.message)},[x,m,c]),k.useEffect(()=>{r&&(d.resetFields(),o&&d.setFieldsValue({name:o.name,ayat:o.ayat,lines:o.lines}))},[r,o]),t.jsx(b,{title:n,open:r,onCancel:l,okText:"Simpan",cancelText:"Tutup",onOk:()=>d.submit(),confirmLoading:h,loading:h,children:t.jsxs(e,{layout:"vertical",form:d,onFinish:e=>{if(o){const a={id:o.id,name:e.name,ayat:Number(e.ayat),lines:Number(e.lines)};u(a)}else{const a={name:e.name,ayat:Number(e.ayat),lines:Number(e.lines)};u(a)}},children:[t.jsx(e.Item,{name:"name",label:"Nama Surah",rules:[{required:!0,message:"Nama Surah harus diisi"}],children:t.jsx(i,{placeholder:"Nama Surah"})}),t.jsx(e.Item,{name:"ayat",label:"Jumlah Ayat",rules:[{required:!0,message:"Jumlah Ayat harus diisi"}],children:t.jsx(i,{placeholder:"Jumlah Ayat"})}),t.jsx(e.Item,{name:"lines",label:"Jumlah Baris",rules:[{required:!0,message:"Jumlah Baris harus diisi"}],children:t.jsx(i,{placeholder:"Jumlah Baris"})})]})})},O=()=>{const[e,a]=k.useState(1),[d,u]=k.useState(10),[c,m]=k.useState(""),[h,x]=k.useState(""),[j,p]=k.useState(!1),[y,g]=k.useState(null),{data:f,isLoading:b}=n({page:e,limit:d,search:h}),[T,{data:w,error:z,isLoading:v,isSuccess:J}]=r();k.useEffect(()=>{const e=setTimeout(()=>{x(c),a(1)},500);return()=>{clearTimeout(e)}},[c]),k.useEffect(()=>{J&&s.success(w.message),z&&s.error(z.data.message)},[J,z,w]);const F=[{title:"No",key:"no",render:(a,s,t)=>(e-1)*d+t+1},{title:"Nama Surah",dataIndex:"name",key:"name"},{title:"Jumlah Ayat",dataIndex:"ayat",key:"ayat"},{title:"Jumlah Baris",dataIndex:"lines",key:"lines"},{title:"Aksi",key:"action",render:(e,a)=>t.jsxs(C,{size:"middle",children:[t.jsx(o,{type:"primary",onClick:()=>(g(a),void p(!0)),children:"Edit"}),t.jsx(I,{title:"Apakah Anda yakin ingin menghapus surah ini?",onConfirm:()=>{return e=a.id,void T(e);var e},okText:"Ya",cancelText:"Tidak",children:t.jsx(o,{type:"primary",danger:!0,children:"Delete"})})]})}];return t.jsxs(l,{vertical:!0,gap:"middle",children:[t.jsxs(l,{justify:"space-between",align:"center",children:[t.jsx(i.Search,{placeholder:"Cari Surah ...",allowClear:!0,value:c,onChange:e=>m(e.target.value),style:{width:300}}),t.jsx(S,{onClick:()=>{g(null),p(!0)}})]}),t.jsx(A,{columns:F,dataSource:f?.result,loading:b||v,rowKey:"id",pagination:{current:e,pageSize:d,total:f?.totalData,onChange:(e,s)=>{a(e),u(s)}}}),t.jsx(N,{title:y?"Edit Surah":"Simpan Surah",open:j,onClose:()=>p(!1),surah:y})]})},_=({title:a,open:n,onClose:r,juz:l})=>{const[o]=e.useForm(),[u,{data:c,error:m,isLoading:h,isSuccess:x}]=d();return k.useEffect(()=>{n&&(o.resetFields(),l&&o.setFieldsValue({name:l.name}))},[n,l]),k.useEffect(()=>{x&&(s.success(c.message),r(),o.resetFields()),m&&s.error(m.data.message)},[c,m,x]),t.jsx(b,{title:a,open:n,onCancel:r,okText:"Simpan",cancelText:"Tutup",confirmLoading:h,loading:h,onOk:()=>o.submit(),destroyOnHidden:!0,children:t.jsx(e,{layout:"vertical",form:o,onFinish:e=>{if(l){const a={id:l.id,...e};u(a)}else u(e)},children:t.jsx(e.Item,{name:"name",label:"Nama Juz",rules:[{required:!0,message:"Nama Juz wajiib diisi"}],children:t.jsx(i,{placeholder:"Nama Juz"})})})})},q=({title:a,open:i,onClose:r,juz:l,detail:o})=>{const[d]=e.useForm(),[c,m]=k.useState(null),{data:h}=n({page:"",limit:"",search:""}),[x,{isLoading:j}]=u(),p=h?.map(e=>({label:e.name,value:e.id})),y=e=>{if(!e||!h)return[];const a=h.find(a=>a.id===parseInt(e));return a?Array.from({length:a.ayat},(e,a)=>({label:`Ayat ${a+1}`,value:a+1})):[]};k.useEffect(()=>{i&&(o&&l?(d.setFieldsValue({id:o.id,juzId:l.id,surahId:o.surah_id,fromAyat:o.from_ayat,toAyat:o.to_ayat,lines:o.lines}),m(o.surah_id)):l&&(d.resetFields(),d.setFieldsValue({juzId:l.id}),m(null)))},[i,o,l,d]);return t.jsx(b,{title:a,open:i,onCancel:r,okText:"Simpan",cancelText:"Tutup",destroyOnHidden:!0,confirmLoading:j,onOk:()=>d.submit(),children:t.jsxs(e,{form:d,onFinish:async e=>{try{const a=await x(e).unwrap();s.success(a.message),r()}catch(a){v.error({message:"Gagal Menyimpan",description:a.data?.message||"Terjadi kesalahan"})}},layout:"vertical",children:[t.jsx(e.Item,{name:"id",hidden:!0,children:t.jsx(w,{})}),t.jsx(e.Item,{name:"juzId",hidden:!0,children:t.jsx(w,{})}),t.jsx(e.Item,{name:"surahId",label:"Surah",rules:[{required:!0,message:"Silakan pilih surah!"}],children:t.jsx(z,{showSearch:!0,options:p,placeholder:"Pilih Surah",onChange:e=>m(e),filterOption:(e,a)=>(a?.label??"").toLowerCase().includes(e.toLowerCase()),virtual:!1})}),t.jsx(e.Item,{name:"fromAyat",label:"Dari Ayat",rules:[{required:!0,message:"Silakan pilih ayat awal!"}],children:t.jsx(z,{showSearch:!0,options:y(c),placeholder:"Pilih Ayat Awal",disabled:!c,virtual:!c})}),t.jsx(e.Item,{name:"toAyat",label:"Sampai Ayat",rules:[{required:!0,message:"Silakan pilih ayat akhir!"}],children:t.jsx(z,{showSearch:!0,options:y(c),placeholder:"Pilih Ayat Akhir",disabled:!c,virtual:!c})}),t.jsx(e.Item,{name:"lines",label:"Jumlah Baris",children:t.jsx(w,{placeholder:"Masukkan jumlah baris",style:{width:"100%"},disabled:!c})})]})})},{Text:D}=x,{Search:P}=i,{confirm:M}=b,$=()=>{const[e,a]=k.useState(!1),[i,n]=k.useState(null),[r,d]=k.useState(!1),[u,x]=k.useState(null),[g,{data:f,error:S,isLoading:b,isSuccess:I}]=c(),[w,z]=k.useState(1),[v,N]=k.useState(10),[O,$]=k.useState(""),[R,H]=k.useState(""),{data:K,error:V,isLoading:Q,refetch:G}=m({page:w,limit:v,search:R});k.useEffect(()=>{const e=setTimeout(()=>{H(O),z(1)},500);return()=>clearTimeout(e)},[O]);const Y=(e,{key:s})=>{switch(s){case"add":n(e),x(null),d(!0);break;case"edit":n(e),a(!0);break;case"delete":M({title:`Anda yakin ingin menghapus ${e.name}?`,content:"Tindakan ini tidak dapat dibatalkan.",okText:"Ya, Hapus",okType:"danger",cancelText:"Batal",onOk:()=>g(e.id)})}};k.useEffect(()=>{I&&(s.success(f.message),G(),z(1)),S&&s.error(S.data.message)},[f,S,I]);const U=[{title:"Juz",dataIndex:"name",key:"name",width:150,render:e=>t.jsx(D,{strong:!0,children:e})},{title:"Surah yang Terkandung",dataIndex:"surah",key:"surah",render:(e,a)=>t.jsx(C,{wrap:!0,children:e.map(e=>t.jsxs(j,{style:{display:"flex",alignItems:"center",padding:"4px 8px",margin:"2px"},children:[e.surah," (",e.from_ayat,"-",e.to_ayat,")",t.jsx(p,{title:"Edit Surah",children:t.jsx(y,{style:{marginLeft:8,cursor:"pointer",color:"#1890ff"},onClick:()=>{return s=e,n(a),x(s),void d(!0);var s}})})]},e.id))})},{title:"Total Ayat",dataIndex:"total_ayat",key:"total_ayat",align:"center",width:100},{title:"Total Baris",dataIndex:"total_line",key:"total_line",align:"center",width:100},{title:"Aksi",key:"action",width:120,align:"center",render:(e,a)=>t.jsx(T.Button,{menu:{items:[{key:"add",label:"Tambah Surah",icon:t.jsx(L,{})},{key:"edit",label:"Edit Juz",icon:t.jsx(y,{})},{key:"delete",label:"Hapus Juz",icon:t.jsx(B,{}),danger:!0}],onClick:({key:e})=>Y(a,{key:e})},children:"Pilihan Aksi"})}];return V?t.jsx(J,{message:"Error",description:"Gagal memuat data juz.",type:"error",showIcon:!0}):t.jsxs(t.Fragment,{children:[t.jsxs(h,{title:t.jsxs(l,{align:"center",justify:"space-between",children:[t.jsxs(C,{children:[t.jsx(F,{}),t.jsx(D,{children:"Daftar Juz Al-Qur'an"})]}),t.jsx(o,{color:"primary",variant:"outlined",icon:t.jsx(E,{}),onClick:()=>{n(null),a(!0)},children:"Tambah Juz"})]}),children:[t.jsx(P,{placeholder:"Cari berdasarkan nama juz...",value:O,onChange:e=>$(e.target.value),style:{marginBottom:16},allowClear:!0,enterButton:!0}),t.jsx(A,{columns:U,dataSource:K?.juz,rowKey:"id",loading:Q||b,pagination:{current:w,pageSize:v,total:K?.totalData,onChange:(e,a)=>{z(e),N(a)},showSizeChanger:!0,position:["bottomRight"]},bordered:!0})]}),t.jsx(_,{title:i?"Edit Juz":"Simpan Juz",open:e,onClose:()=>{n(null),a(!1)},juz:i}),t.jsx(q,{title:u?`Edit Surah di ${i?.name}`:`Tambahkan surah di ${i?.name}`,open:r,onClose:()=>{n(null),x(null),d(!1)},juz:i,detail:u})]})},R=()=>{const e=[{label:"Surah",key:"1",children:t.jsx(O,{})},{label:"Juz",key:"2",children:t.jsx($,{})}];return t.jsx(g,{title:"Management Al Qur'an",levels:["tahfiz"],children:t.jsxs(l,{vertical:!0,gap:"middle",children:[t.jsx(x.Title,{style:{margin:0},level:5,children:"Managemen Alqur'an"}),t.jsx(f,{defaultActiveKey:"1",centered:!0,items:e})]})})};export{R as default};
//# sourceMappingURL=TahfizQuran-Dghz-RAK.js.map
