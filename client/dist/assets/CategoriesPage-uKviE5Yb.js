import{k as e,z as a,A as s,e as t,j as i,m as l}from"./index-DFhdulld.js";import{b as n}from"./vendor-CnnDPxwB.js";import{L as r}from"./Layout-BdxnsoD5.js";import{u as d}from"./index-B8CuzAwO.js";import{C as c}from"./CmsModal-B4WHKLRt.js";import{C as o}from"./CmsForm-CjFKk7X5.js";import{T as m}from"./Table-CpyGbvYh.js";const u=()=>{const[u,x]=n.useState(!1),[g,h]=n.useState("add"),[j,b]=n.useState(null),[p,y]=n.useState(1),[N,v]=n.useState(10),[f,C]=n.useState(""),[w,S]=n.useState(0),{data:L,isLoading:k,refetch:A}=e({page:p,limit:N,search:f}),{result:T=[],totalData:F,totalPage:K}=L||{},[P,{isLoading:q,isSuccess:B,error:D,data:E,reset:z}]=a(),[M,{isLoading:O}]=s();n.useEffect((()=>{var e;B&&(t.success((null==E?void 0:E.message)||"Category saved successfully"),x(!1),A(),b(null),S((e=>e+1)),z()),D&&(t.error(null==(e=D.data)?void 0:e.message),z())}),[B,D,E,z,A]);return i.jsxs(r,{title:"Kategori",levels:["cms"],children:[i.jsx("div",{className:"container-fluid py-3 py-md-4",children:i.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{className:"d-flex align-items-center",children:[i.jsx("div",{className:"bg-primary bg-opacity-10 p-3 rounded me-3",children:i.jsx(d,{className:"text-primary fs-4"})}),i.jsx("h4",{className:"mb-0",children:"Kategori"})]}),i.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>{h("add"),b(null),x(!0)},children:[i.jsx("span",{className:"bi bi-plus-circle"}),i.jsx("span",{className:"ms-2",children:"Tambah Kategori"})]})]}),i.jsx("div",{className:"card border-0 shadow-sm",children:i.jsx("div",{className:"card-body",children:i.jsx(m,{isLoading:k,page:p,setPage:y,totalPages:K,limit:N,setLimit:v,setSearch:C,totalData:F,children:i.jsxs("table",{className:"mb-0 table table-bordered table-striped table-hover",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-center align-middle",children:"No"}),i.jsx("th",{className:"text-center align-middle",children:"Name"}),i.jsx("th",{className:"text-center align-middle",children:"Actions"})]})}),i.jsx("tbody",{children:null==T?void 0:T.map(((e,a)=>i.jsxs("tr",{children:[i.jsx("td",{className:"text-center align-middle",children:(p-1)*N+a+1}),i.jsx("td",{className:"align-middle",children:e.name}),i.jsx("td",{className:"text-center align-middle",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-center gap-2",children:[i.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>(e=>{h("edit"),b(e),x(!0)})(e),children:i.jsx("i",{className:"bi bi-pencil-square"})}),i.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>(async e=>{var a,s,i;if(window.confirm("Apakah anda yakin ingin menghapus kategori ini?"))try{const i=await M(e).unwrap();console.log(i),200===i.status?(t.success(i.message),A()):t.error(null==(s=null==(a=i.error)?void 0:a.data)?void 0:s.message)}catch(l){t.error((null==(i=l.data)?void 0:i.message)||"Failed to delete category")}})(e.id),disabled:O,children:i.jsx("i",{className:"bi bi-trash"})})]})})]},e.id)))})]})})})})]})}),i.jsx(c,{isOpen:u,onClose:()=>{x(!1),b(null),S((e=>e+1))},title:"add"===g?"Add New Category":"Edit Category",children:i.jsx(o,{fields:[{name:"name",label:"Name",type:"text",required:!0}],initialValues:j||{name:"",description:"",slug:""},onSubmit:async e=>{var a;try{await P(e).unwrap()}catch(s){t.error((null==(a=s.data)?void 0:a.message)||"Failed to save category")}},onCancel:()=>{b(null),x(!1),S((e=>e+1))},submitButtonText:"add"===g?"Add Category":"Update Category",cancelButtonText:"Cancel",isLoading:q},w)})]})};export{u as default};
//# sourceMappingURL=CategoriesPage-uKviE5Yb.js.map
