import{a_ as e,a$ as a,j as i,e as s}from"./index-mQl5svQ-.js";import{u as o,e as c,b as n}from"./vendor-DfXzdC0j.js";import{L as l}from"./Layout-CMxW7Kh2.js";import{E as t}from"./Editor-BHh-lIlF.js";import"./index-CGMX7dKw.js";import"./index-hpZ4eOv6.js";import"./index-DyuEXp_a.js";import"./index-BI1U7Wg_.js";import"./index-Bx5UHif0.js";import"./quill.snow-CUFa9Np2.js";const r=()=>{const r=o(),d=c(),{subject:h,name:u,bankid:m,questionid:p}=d,[j,v]=n.useState(1),[x,g]=n.useState(""),[b,f]=n.useState(""),[k,y]=n.useState(""),[w,C]=n.useState({choiceA:"",choiceB:"",choiceC:"",choiceD:"",choiceE:""}),{data:E}=e(p,{skip:!p}),[N,{isSuccess:q,isLoading:S,isError:A,reset:B}]=a(),D=e=>a=>{C((i=>({...i,[e]:a})))};return n.useEffect((()=>{q&&(v(1),g(""),f(""),y(""),C({choiceA:"",choiceB:"",choiceC:"",choiceD:"",choiceE:""}),B(),(()=>{const e=u.replace(/[\s/]/g,"-"),a=h.replace(/[\s/]/g,"-");r(`/admin-cbt-bank/${a}/${e}/${m}`)})()),A&&B()}),[q,A]),n.useEffect((()=>{E&&(v(null==E?void 0:E.qtype),g(null==E?void 0:E.qkey),f(null==E?void 0:E.poin),y(null==E?void 0:E.question),C({choiceA:null==E?void 0:E.a,choiceB:null==E?void 0:E.b,choiceC:null==E?void 0:E.c,choiceD:null==E?void 0:E.d,choiceE:null==E?void 0:E.e}))}),[E]),i.jsx(l,{title:"Tambah Soal",levels:["admin","teacher"],children:i.jsxs("div",{className:"row g-2",children:[i.jsx("div",{className:"col-lg-3 col-12",children:i.jsxs("select",{name:"type",id:"type",className:"form-select shadow",required:!0,value:j,onChange:e=>v(e.target.value),children:[i.jsx("option",{value:1,children:"PG"}),i.jsx("option",{value:2,children:"Essay"})]})}),i.jsx("div",{className:"col-lg-3 col-12",children:i.jsxs("select",{name:"key",id:"key",className:"form-select shadow",required:!0,value:x,onChange:e=>g(e.target.value),children:[i.jsx("option",{value:"",hidden:!0,children:"Kunci Jawaban"}),i.jsx("option",{value:"A",children:"A"}),i.jsx("option",{value:"B",children:"B"}),i.jsx("option",{value:"C",children:"C"}),i.jsx("option",{value:"D",children:"D"}),i.jsx("option",{value:"E",children:"E"})]})}),i.jsx("div",{className:"col-lg-3 col-12",children:i.jsx("input",{type:"number",name:"poin",id:"poin",className:"form-control shadow",placeholder:"Nilai",value:b||"",onChange:e=>f(e.target.value)})}),i.jsx("div",{className:"col-lg-3 col-12 d-flex align-items-center justify-content-start",children:i.jsx("button",{className:"btn btn-sm btn-success shadow",disabled:S,onClick:()=>{if(!k)return void s.error("Pertanyaan tidak boleh kosong");if(1==j&&!x)return void s.error("Kunci jawaban tidak boleh kosong");const e={id:p||"",bank:m,qtype:parseInt(j),qkey:x,poin:parseInt(b),question:k,a:w.choiceA,b:w.choiceB,c:w.choiceC,d:w.choiceD,e:w.choiceE};s.promise(N(e).unwrap().then((e=>e.message)),{loading:"Memuat data ...",success:e=>e,error:e=>e.data.message})},children:"Simpan"})}),i.jsx("div",{className:"col-12",children:i.jsx(t,{placeholder:"Ketikan pertanyaan di sini ...",value:k,onChange:e=>y(e),classname:"shadow",height:300})}),1==j&&Object.keys(w).map(((e,a)=>i.jsx("div",{className:"col-12",children:i.jsx(t,{placeholder:`Jawaban ${e.charAt(e.length-1)}`,value:w[e],onChange:D(e),classname:"shadow",height:300})},a)))]})})};export{r as default};
//# sourceMappingURL=CbtAddQues-5lm-r_fe.js.map
