{"version":3,"file":"TahfizDash-CdG70Adz.js","sources":["../../src/module/tahfiz/dashboard/TahfizDash.jsx"],"sourcesContent":["import {\r\n  Card,\r\n  Col,\r\n  Progress,\r\n  Row,\r\n  Spin,\r\n  Statistic,\r\n  Table,\r\n  Tabs,\r\n  Select,\r\n  Typography, // Import Typography\r\n  Flex, // Import Flex\r\n} from \"antd\";\r\nimport { useState } from \"react\";\r\nimport MainLayout from \"../../../components/layout/MainLayout\";\r\nimport { useGetAchievementQuery } from \"../../../service/api/tahfiz/ApiReport\";\r\n\r\nconst { Option } = Select;\r\nconst { Text } = Typography;\r\n\r\nconst TahfizDash = () => {\r\n  const { data, isLoading } = useGetAchievementQuery();\r\n  const [selectedDataIndex, setSelectedDataIndex] = useState(0);\r\n\r\n  const selectedData = data && data[selectedDataIndex];\r\n\r\n  const handleDataChange = (value) => {\r\n    setSelectedDataIndex(value);\r\n  };\r\n\r\n  const gradeTabs =\r\n    selectedData?.grade.map((grade) => {\r\n      // PERUBAHAN: Tabel kelas dibuat responsif\r\n      const classColumns = [\r\n        {\r\n          title: \"Kelas\",\r\n          dataIndex: \"class_name\",\r\n          key: \"class_name\",\r\n          fixed: \"left\", // Membuat kolom ini tetap saat scroll horizontal\r\n          width: 100,\r\n        },\r\n        {\r\n          title: \"Selesai\",\r\n          dataIndex: \"completed\",\r\n          key: \"completed\",\r\n          align: \"center\",\r\n        },\r\n        {\r\n          title: \"Belum Selesai\",\r\n          dataIndex: \"uncompleted\",\r\n          key: \"uncompleted\",\r\n          align: \"center\",\r\n        },\r\n        {\r\n          title: \"Melampaui Target (Selesai)\",\r\n          dataIndex: \"exceed_completed\",\r\n          key: \"exceed_completed\",\r\n          align: \"center\",\r\n          // PERUBAHAN: Kolom ini akan disembunyikan di layar lebih kecil dari medium (tablet)\r\n          responsive: [\"md\"],\r\n        },\r\n        {\r\n          title: \"Melampaui Target (Belum Selesai)\",\r\n          dataIndex: \"exceed_uncompleted\",\r\n          key: \"exceed_uncompleted\",\r\n          align: \"center\",\r\n          // PERUBAHAN: Kolom ini akan disembunyikan di layar lebih kecil dari medium (tablet)\r\n          responsive: [\"md\"],\r\n        },\r\n      ];\r\n\r\n      // PERUBAHAN: Tabel siswa dibuat responsif\r\n      const studentColumns = [\r\n        {\r\n          title: \"NIS\",\r\n          dataIndex: \"nis\",\r\n          key: \"nis\",\r\n          width: 100,\r\n          fixed: \"left\",\r\n          responsive: [\"sm\"], // Sembunyikan NIS di layar ponsel (xs)\r\n        },\r\n        {\r\n          title: \"Nama\",\r\n          dataIndex: \"name\",\r\n          key: \"name\",\r\n          width: 200,\r\n          fixed: \"left\",\r\n        },\r\n        // PERUBAHAN: Menggabungkan dua kolom progress menjadi satu\r\n        {\r\n          title: \"Progress Keseluruhan\",\r\n          key: \"progress_overall\",\r\n          width: 250,\r\n          render: (text, record) => (\r\n            <div>\r\n              <Text strong>Target:</Text>\r\n              {record.progress.map((prog, index) => (\r\n                <div key={index}>\r\n                  <Text type=\"secondary\" style={{ fontSize: \"12px\" }}>\r\n                    {prog.juz}\r\n                  </Text>\r\n                  <Progress percent={prog.persentase} size=\"small\" />\r\n                </div>\r\n              ))}\r\n              {record.exceed.length > 0 && (\r\n                <>\r\n                  <Text strong style={{ marginTop: \"8px\", display: \"block\" }}>\r\n                    Melampaui:\r\n                  </Text>\r\n                  {record.exceed.map((exc, index) => (\r\n                    <div key={index}>\r\n                      <Text type=\"secondary\" style={{ fontSize: \"12px\" }}>\r\n                        {exc.juz}\r\n                      </Text>\r\n                      <Progress\r\n                        percent={exc.persentase}\r\n                        size=\"small\"\r\n                        status=\"success\"\r\n                      />\r\n                    </div>\r\n                  ))}\r\n                </>\r\n              )}\r\n            </div>\r\n          ),\r\n        },\r\n      ];\r\n\r\n      return {\r\n        key: grade.id,\r\n        label: `Kelas ${grade.name}`,\r\n        children: (\r\n          <Row gutter={[16, 16]}>\r\n            <Col span={24}>\r\n              {/* PERUBAHAN: Grid untuk kartu statistik dibuat responsif */}\r\n              <Row gutter={[16, 16]}>\r\n                <Col xs={24} sm={12} lg={6}>\r\n                  <Card>\r\n                    <Statistic\r\n                      title=\"Pencapaian Rata-rata\"\r\n                      value={grade.achievement}\r\n                      precision={2}\r\n                      suffix=\"%\"\r\n                    />\r\n                  </Card>\r\n                </Col>\r\n                <Col xs={24} sm={12} lg={6}>\r\n                  <Card>\r\n                    <Statistic\r\n                      title=\"Selesai\"\r\n                      value={grade.completed}\r\n                      valueStyle={{ color: \"#3f8600\" }}\r\n                    />\r\n                  </Card>\r\n                </Col>\r\n                <Col xs={24} sm={12} lg={6}>\r\n                  <Card>\r\n                    <Statistic\r\n                      title=\"Belum Selesai\"\r\n                      value={grade.uncompleted}\r\n                      valueStyle={{ color: \"#cf1322\" }}\r\n                    />\r\n                  </Card>\r\n                </Col>\r\n                <Col xs={24} sm={12} lg={6}>\r\n                  <Card>\r\n                    <Statistic\r\n                      title=\"Melampaui Target\"\r\n                      value={grade.exceed_completed}\r\n                    />\r\n                  </Card>\r\n                </Col>\r\n              </Row>\r\n            </Col>\r\n            <Col span={24}>\r\n              <Table\r\n                columns={classColumns}\r\n                dataSource={grade.classes}\r\n                rowKey=\"class_id\"\r\n                // PERUBAHAN: Aktifkan scroll horizontal jika tabel terlalu lebar\r\n                scroll={{ x: \"max-content\" }}\r\n                expandable={{\r\n                  expandedRowRender: (record) => (\r\n                    <Table\r\n                      columns={studentColumns}\r\n                      dataSource={record.students}\r\n                      rowKey=\"userid\"\r\n                      pagination={false}\r\n                      scroll={{ x: \"max-content\" }}\r\n                    />\r\n                  ),\r\n                }}\r\n              />\r\n            </Col>\r\n          </Row>\r\n        ),\r\n      };\r\n    }) || [];\r\n\r\n  return (\r\n    <MainLayout title={\"Dashboard\"} levels={[\"tahfiz\"]}>\r\n      <Spin spinning={isLoading} tip=\"Memproses data ...\" size=\"large\">\r\n        <Card\r\n          title={\r\n            // PERUBAHAN: Menggunakan Flex untuk header yang lebih responsif\r\n            <Flex\r\n              wrap=\"wrap\"\r\n              gap=\"middle\"\r\n              justify=\"space-between\"\r\n              align=\"center\"\r\n            >\r\n              <Text strong style={{ fontSize: \"14px\" }}>\r\n                Dashboard Tahfiz - Periode {selectedData?.periode}\r\n              </Text>\r\n              <Select\r\n                defaultValue={0}\r\n                style={{ minWidth: 200 }} // Gunakan minWidth agar tidak terlalu kecil\r\n                onChange={handleDataChange}\r\n                value={selectedDataIndex}\r\n              >\r\n                {data?.map((item, index) => (\r\n                  <Option key={item.homebase_id} value={index}>\r\n                    {item.homebase}\r\n                  </Option>\r\n                ))}\r\n              </Select>\r\n            </Flex>\r\n          }\r\n          style={{ marginBottom: \"24px\" }}\r\n        >\r\n          <Tabs defaultActiveKey=\"1\" items={gradeTabs} />\r\n        </Card>\r\n      </Spin>\r\n    </MainLayout>\r\n  );\r\n};\r\n\r\nexport default TahfizDash;\r\n"],"names":["Option","Select","Text","Typography","TahfizDash","data","isLoading","useGetAchievementQuery","selectedDataIndex","setSelectedDataIndex","useState","selectedData","gradeTabs","grade","map","studentColumns","title","dataIndex","key","width","fixed","responsive","render","text","record","children","jsx","strong","progress","prog","index","type","style","fontSize","juz","Progress","percent","persentase","size","exceed","length","jsxs","Fragment","marginTop","display","exc","status","id","label","name","Row","gutter","Col","span","xs","sm","lg","Card","Statistic","value","achievement","precision","suffix","completed","valueStyle","color","uncompleted","exceed_completed","Table","columns","align","dataSource","classes","rowKey","scroll","x","expandable","expandedRowRender","students","pagination","MainLayout","levels","Spin","spinning","tip","Flex","wrap","gap","justify","periode","defaultValue","minWidth","onChange","item","homebase","homebase_id","marginBottom","Tabs","defaultActiveKey","items"],"mappings":"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"}