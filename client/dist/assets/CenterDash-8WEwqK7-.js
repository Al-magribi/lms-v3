import{j as e,h as C,d as F}from"./index-_V-Hszfs.js";import{L as t}from"./Layout-BOPYSC9s.js";import{C as N,A as v,p as _,a as m,b as w,L as I,B as p,c as u,P,d as b}from"./index-Dfp6dNhn.js";import{G as L}from"./GeographicalDistribution-B2nhJJI0.js";N.register(v,_,m,w,I,p,u);const E=({studentDemographics:s})=>{var d,h,c;const a={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}},i={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Distribusi Usia Siswa"}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Jumlah Siswa"}},x:{title:{display:!0,text:"Usia (Tahun)"}}}};return e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-md-",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"card-title mb-0",children:"Data Demografis Siswa"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Informasi"}),e.jsx("th",{children:"Jumlah"}),e.jsx("th",{children:"Persentase"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Total Siswa"}),e.jsx("td",{children:parseInt(s==null?void 0:s.total_students)||0}),e.jsx("td",{children:"100%"})]},"total"),e.jsxs("tr",{children:[e.jsx("td",{children:"Laki-laki"}),e.jsx("td",{children:parseInt(s==null?void 0:s.male_count)||0}),e.jsxs("td",{children:[((parseInt(s==null?void 0:s.male_count)||0)/(parseInt(s==null?void 0:s.total_students)||1)*100).toFixed(1),"%"]})]},"male"),e.jsxs("tr",{children:[e.jsx("td",{children:"Perempuan"}),e.jsx("td",{children:parseInt(s==null?void 0:s.female_count)||0}),e.jsxs("td",{children:[((parseInt(s==null?void 0:s.female_count)||0)/(parseInt(s==null?void 0:s.total_students)||1)*100).toFixed(1),"%"]})]},"female"),e.jsxs("tr",{children:[e.jsx("td",{children:"Rentang Usia"}),e.jsxs("td",{colSpan:"2",children:[(s==null?void 0:s.min_age)||0," -"," ",(s==null?void 0:s.max_age)||0," Tahun"]})]},"age_range")]})]})})}),e.jsx("div",{className:"col-md-6 d-flex align-items-center justify-content-center",children:e.jsx("div",{className:"d-flex align-items-center justify-content-center h-100",children:e.jsx(P,{data:{labels:["Laki-laki","Perempuan"],datasets:[{data:[parseInt(s==null?void 0:s.male_count)||0,parseInt(s==null?void 0:s.female_count)||0],backgroundColor:["rgba(54, 162, 235, 0.8)","rgba(255, 99, 132, 0.8)"],borderColor:["rgba(54, 162, 235, 1)","rgba(255, 99, 132, 1)"],borderWidth:1}]},options:a})})})]}),e.jsxs("div",{className:"row mt-4",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("h6",{className:"mb-3",children:"Distribusi Usia"}),e.jsx("div",{style:{height:"300px",position:"relative"},children:e.jsx(b,{data:{labels:((d=s==null?void 0:s.age_distribution)==null?void 0:d.map(l=>l.age_group))||[],datasets:[{label:"Jumlah Siswa",data:((h=s==null?void 0:s.age_distribution)==null?void 0:h.map(l=>l.count))||[],backgroundColor:"rgba(54, 162, 235, 0.8)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1}]},options:i})})]}),e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"table-responsive mt-4",children:e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Rentang Usia (Tahun)"}),e.jsx("th",{children:"Jumlah Siswa"}),e.jsx("th",{children:"Persentase"})]})}),e.jsx("tbody",{children:(c=s==null?void 0:s.age_distribution)==null?void 0:c.map((l,n)=>e.jsxs("tr",{children:[e.jsx("td",{children:l.age_group}),e.jsx("td",{children:l.count}),e.jsxs("td",{children:[((l.count||0)/(parseInt(s==null?void 0:s.total_students)||1)*100).toFixed(1),"%"]})]},n))})]})})})]})]})]})})})},J=({entryStats:s,studentDemographics:a,entryChartOptions:i})=>e.jsx("div",{className:"col-md-6 mt-4",children:e.jsxs("div",{className:"card h-100",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"card-title mb-0",children:"Distribusi Siswa per Tahun Masuk"})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"d-flex align-items-center justify-content-center h-50",children:e.jsx(b,{data:{labels:(s==null?void 0:s.map(d=>d.entry_name))||[],datasets:[{label:"Jumlah Siswa",data:(s==null?void 0:s.map(d=>parseInt(d.student_count)||0))||[],backgroundColor:"rgba(54, 162, 235, 0.8)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1}]},options:i})}),e.jsx("div",{className:"table-responsive mt-4",children:e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Tahun Masuk"}),e.jsx("th",{children:"Jumlah Siswa"}),e.jsx("th",{children:"Persentase"})]})}),e.jsx("tbody",{children:(s||[]).map((d,h)=>e.jsxs("tr",{children:[e.jsx("td",{children:d.entry_name}),e.jsx("td",{children:parseInt(d.student_count)||0}),e.jsxs("td",{children:[((parseInt(d.student_count)||0)/(parseInt(a==null?void 0:a.total_students)||1)*100).toFixed(1),"%"]})]},h))})]})})]})]})}),R={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}},scales:{y:{beginAtZero:!0}}},G=({familyStats:s,studentDemographics:a})=>{const i={labels:["Data Ayah","Data Ibu","Pekerjaan Ayah","Pekerjaan Ibu","Kontak Ayah","Kontak Ibu"],datasets:[{label:"Jumlah Siswa",data:[parseInt(s==null?void 0:s.with_father_info)||0,parseInt(s==null?void 0:s.with_mother_info)||0,parseInt(s==null?void 0:s.with_father_job)||0,parseInt(s==null?void 0:s.with_mother_job)||0,parseInt(s==null?void 0:s.with_father_phone)||0,parseInt(s==null?void 0:s.with_mother_phone)||0],backgroundColor:["rgba(54, 162, 235, 0.5)","rgba(255, 99, 132, 0.5)","rgba(75, 192, 192, 0.5)","rgba(255, 206, 86, 0.5)","rgba(153, 102, 255, 0.5)","rgba(255, 159, 64, 0.5)"],borderColor:["rgba(54, 162, 235, 1)","rgba(255, 99, 132, 1)","rgba(75, 192, 192, 1)","rgba(255, 206, 86, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},d=parseInt(a==null?void 0:a.total_students)||0;return e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"card-title mb-0",children:"Informasi Keluarga Siswa"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsx("div",{style:{height:"300px",position:"relative"},children:e.jsx(b,{data:i,options:R})})}),e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Informasi"}),e.jsx("th",{children:"Jumlah"}),e.jsx("th",{children:"Persentase"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Data Ayah"}),e.jsx("td",{children:parseInt(s==null?void 0:s.with_father_info)||0}),e.jsxs("td",{children:[((parseInt(s==null?void 0:s.with_father_info)||0)/d*100).toFixed(1),"%"]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Data Ibu"}),e.jsx("td",{children:parseInt(s==null?void 0:s.with_mother_info)||0}),e.jsxs("td",{children:[((parseInt(s==null?void 0:s.with_mother_info)||0)/d*100).toFixed(1),"%"]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Pekerjaan Ayah"}),e.jsx("td",{children:parseInt(s==null?void 0:s.with_father_job)||0}),e.jsxs("td",{children:[((parseInt(s==null?void 0:s.with_father_job)||0)/d*100).toFixed(1),"%"]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Pekerjaan Ibu"}),e.jsx("td",{children:parseInt(s==null?void 0:s.with_mother_job)||0}),e.jsxs("td",{children:[((parseInt(s==null?void 0:s.with_mother_job)||0)/d*100).toFixed(1),"%"]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Kontak Ayah"}),e.jsx("td",{children:parseInt(s==null?void 0:s.with_father_phone)||0}),e.jsxs("td",{children:[((parseInt(s==null?void 0:s.with_father_phone)||0)/d*100).toFixed(1),"%"]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Kontak Ibu"}),e.jsx("td",{children:parseInt(s==null?void 0:s.with_mother_phone)||0}),e.jsxs("td",{children:[((parseInt(s==null?void 0:s.with_mother_phone)||0)/d*100).toFixed(1),"%"]})]})]})]})})})]})})]})})})};N.register(v,_,m,w,I,p,u);const B=()=>{const{data:s,isLoading:a,error:i}=C();if(F(r=>r.auth),a)return e.jsx(t,{title:"Admin Dashboard",children:e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"50vh"},children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})})});if(i)return e.jsx(t,{title:"Admin Dashboard",children:e.jsxs("div",{className:"alert alert-danger",role:"alert",children:[e.jsx("h4",{className:"alert-heading",children:"Error!"}),e.jsx("p",{children:"Failed to load dashboard data. Please try again later."}),e.jsx("hr",{}),e.jsxs("p",{className:"mb-0",children:["Error details: ",i.message]})]})});const{basicStats:d,studentsPerGrade:h,teacherComposition:c,examStats:l,learningStats:n,recentActivities:x,homebaseStats:j,activityLogs:K,studentDemographics:o,geographicalDistribution:T,familyStats:k,entryStats:A}=s||{};return e.jsx(t,{title:"Admin Dashboard",levels:["center"],children:e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-3",children:e.jsx("div",{className:"card bg-primary text-white",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"Total Students"}),e.jsx("h2",{className:"card-text",children:(d==null?void 0:d.total_students)||0})]})})}),e.jsx("div",{className:"col-md-3",children:e.jsx("div",{className:"card bg-success text-white",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"Total Teachers"}),e.jsx("h2",{className:"card-text",children:(d==null?void 0:d.total_teachers)||0})]})})}),e.jsx("div",{className:"col-md-3",children:e.jsx("div",{className:"card bg-info text-white",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"Total Classes"}),e.jsx("h2",{className:"card-text",children:(d==null?void 0:d.total_classes)||0})]})})}),e.jsx("div",{className:"col-md-3",children:e.jsx("div",{className:"card bg-warning text-white",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title",children:"Total Homebase"}),e.jsx("h2",{className:"card-text",children:(d==null?void 0:d.total_homebase)||0})]})})})]}),e.jsx(E,{studentDemographics:o}),e.jsxs("div",{className:"row mb-3",children:[e.jsx(L,{data:T}),e.jsx(J,{entryStats:A,studentDemographics:o})]}),e.jsx(G,{familyStats:k,studentDemographics:o}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"card-title mb-0",children:"Statistik Homebase"})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Homebase"}),e.jsx("th",{children:"Students"}),e.jsx("th",{children:"Teachers"}),e.jsx("th",{children:"Classes"}),e.jsx("th",{children:"Subjects"})]})}),e.jsx("tbody",{children:j==null?void 0:j.map(r=>e.jsxs("tr",{children:[e.jsx("td",{children:r.homebase_name}),e.jsx("td",{children:r.total_students}),e.jsx("td",{children:r.total_teachers}),e.jsx("td",{children:r.total_classes}),e.jsx("td",{children:r.total_subjects})]},r.homebase_name))})]})})})]})})}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"card-title mb-0",children:"Students by Grade"})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Grade"}),e.jsx("th",{children:"Total Students"}),e.jsx("th",{children:"Male"}),e.jsx("th",{children:"Female"})]})}),e.jsx("tbody",{children:h==null?void 0:h.map(r=>e.jsxs("tr",{children:[e.jsx("td",{children:r.grade_name}),e.jsx("td",{children:r.total_students}),e.jsx("td",{children:r.male_count}),e.jsx("td",{children:r.female_count})]},r.grade_name))})]})})})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"card-title mb-0",children:"Teacher Composition"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("h6",{children:"Gender Distribution"}),e.jsxs("p",{children:["Male: ",(c==null?void 0:c.male_count)||0]}),e.jsxs("p",{children:["Female: ",(c==null?void 0:c.female_count)||0]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("h6",{children:"Homeroom Teachers"}),e.jsxs("p",{children:["Total: ",(c==null?void 0:c.homeroom_count)||0]})]})]})})]})})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"card-title mb-0",children:"Learning Materials"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("h6",{children:"Chapters"}),e.jsx("p",{children:(n==null?void 0:n.total_chapters)||0})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("h6",{children:"Contents"}),e.jsx("p",{children:(n==null?void 0:n.total_contents)||0})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("h6",{children:"Files"}),e.jsx("p",{children:(n==null?void 0:n.total_files)||0})]})]})})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"card-title mb-0",children:"Exam Statistics"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("h6",{children:"Total Exams"}),e.jsx("p",{children:(l==null?void 0:l.total_exams)||0})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("h6",{children:"Active Exams"}),e.jsx("p",{children:(l==null?void 0:l.active_exams)||0})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("h6",{children:"Teachers"}),e.jsx("p",{children:(l==null?void 0:l.teacher_count)||0})]})]})})]})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"card-title mb-0",children:"Recent Activities"})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Title"}),e.jsx("th",{children:"Teacher"}),e.jsx("th",{children:"Date"})]})}),e.jsx("tbody",{children:x==null?void 0:x.map(r=>e.jsxs("tr",{children:[e.jsx("td",{children:r.type}),e.jsx("td",{children:r.title}),e.jsx("td",{children:r.teacher_name}),e.jsx("td",{children:new Date(r.createdat).toLocaleDateString()})]},r.id))})]})})})]})})})]})})};export{B as default};
