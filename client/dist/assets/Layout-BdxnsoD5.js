import{a as e,b as s,G as n,I as i,j as a,J as t,m as l,e as d}from"./index-DFhdulld.js";import{u as o,f as c,b as r,L as m}from"./vendor-CnnDPxwB.js";import{A as h,B as p,v as x,z as j,C as f,l as g,b as u,c as w,u as b,a as v}from"./index-B8CuzAwO.js";const N=({children:N,title:y,desc:k,levels:L})=>{const C=e();o();const S=c(),[E,T]=r.useState(!0),[z,A]=r.useState(window.innerWidth<768),{user:B,isSignin:M}=s((e=>e.auth)),[H,{isSuccess:D,isLoading:I,error:P,reset:W}]=n();r.useEffect((()=>{const e=()=>{const e=window.innerWidth<768;A(e),e&&E&&T(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[E]);r.useEffect((()=>{D&&(W(),C(i()),window.location.href="/signin"),P&&W()}),[D,P]),r.useEffect((()=>{const e=setTimeout((()=>{B&&M&&L.includes(null==B?void 0:B.level)||(null===B||B&&Object.keys(B).length,window.location.href="/signin")}),500);return()=>clearTimeout(e)}),[B,M,L]);const F=[{id:"Dashboard",name:"Dashboard",icon:a.jsx(f,{}),path:"/cms-dashboard"},{id:"reason",name:"Alasan",icon:a.jsx(g,{}),path:"/cms-reason"},{id:"facility",name:"Fasilitas",icon:a.jsx(u,{}),path:"/cms-facility"},{id:"testimoni",name:"Testimoni",icon:a.jsx(w,{}),path:"/cms-testimoni"},{id:"category",name:"Kategori",icon:a.jsx(b,{}),path:"/cms-category"},{id:"news",name:"Berita",icon:a.jsx(v,{}),path:"/cms-news"},{id:"settings",name:"Pengaturan",icon:a.jsx(x,{}),path:"/cms-settings"}],G={open:{marginLeft:z?"0":"250px",transition:{type:"spring",stiffness:300,damping:30}},closed:{marginLeft:"0",transition:{type:"spring",stiffness:300,damping:30}}};return a.jsxs("div",{className:"d-flex",children:[a.jsx(t,{title:y,desc:k}),a.jsxs(l.div,{className:"sidebar bg-dark text-white",initial:E?"open":"closed",animate:E?"open":"closed",variants:{open:{x:0,transition:{type:"spring",stiffness:300,damping:30}},closed:{x:"-100%",transition:{type:"spring",stiffness:300,damping:30}}},style:{position:"fixed",top:0,left:0,height:"100vh",width:"250px",zIndex:1050,overflowY:"auto"},children:[a.jsxs("div",{className:"p-3 d-flex justify-content-between align-items-center border-bottom",children:[a.jsx("h5",{className:"mb-0",children:"CMS Admin"}),a.jsx(l.button,{className:"btn btn-sm btn-outline-light",onClick:()=>T(!1),whileHover:{scale:1.1},whileTap:{scale:.9},children:a.jsx("i",{className:"bi bi-x-lg"})})]}),a.jsx("div",{className:"p-3",children:a.jsx("ul",{className:"nav flex-column",children:F.map((e=>a.jsx("li",{className:"nav-item mb-2",children:a.jsxs(m,{to:e.path,className:"nav-link d-flex align-items-center "+(S.pathname===e.path?"active bg-primary text-white":"text-white"),onClick:()=>z&&T(!1),children:[a.jsx("span",{className:"me-2",children:e.icon}),e.name]})},e.id)))})})]}),a.jsxs(l.div,{className:"main-content",initial:E?"open":"closed",animate:E?"open":"closed",variants:G,style:{width:"100%",minHeight:"100vh",backgroundColor:"#f8f9fa"},children:[a.jsx("nav",{className:"navbar navbar-expand-lg navbar-light bg-white shadow-sm",children:a.jsxs("div",{className:"container-fluid d-flex justify-content-between align-items-center px-2",children:[a.jsx(l.button,{className:"btn d-flex align-items-center justify-content-center p-2",onClick:()=>T(!E),whileHover:{scale:1.1},whileTap:{scale:.9},style:{width:"40px",height:"40px"},children:a.jsx(h,{className:"fs-5"})}),a.jsx("div",{className:"d-flex align-items-center",children:a.jsxs("div",{className:"dropdown",children:[a.jsxs("button",{className:"btn btn-sm btn-outline-primary",type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false",children:[a.jsx(p,{className:"me-1 fs-5"}),a.jsx("span",{className:"d-none d-lg-inline",children:"Admin"})]}),a.jsxs("ul",{className:"dropdown-menu dropdown-menu-end shadow-sm","aria-labelledby":"dropdownMenuButton",children:[a.jsx("li",{children:a.jsxs("a",{className:"dropdown-item py-2",href:"#",children:[a.jsx(p,{className:"me-2"})," Profile"]})}),a.jsx("li",{children:a.jsxs("a",{className:"dropdown-item py-2",href:"#",children:[a.jsx(x,{className:"me-2"})," Settings"]})}),a.jsx("li",{children:a.jsx("hr",{className:"dropdown-divider"})}),a.jsx("li",{children:a.jsxs("a",{className:"dropdown-item py-2 text-danger",onClick:()=>{d.promise(H().unwrap().then((e=>e.message)),{loading:"Memproses...",success:e=>e,error:e=>e.data.message})},children:[a.jsx(j,{className:"me-2"})," Logout"]})})]})]})})]})}),a.jsx("div",{className:"p-3 p-md-4",children:N})]})]})};export{N as L};
//# sourceMappingURL=Layout-BdxnsoD5.js.map
