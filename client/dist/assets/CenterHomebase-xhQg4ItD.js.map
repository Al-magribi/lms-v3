{"version":3,"file":"CenterHomebase-xhQg4ItD.js","sources":["../../src/page/center/homebase/Form.jsx","../../src/page/center/homebase/TableData.jsx","../../src/page/center/homebase/CenterHomebase.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useAddHomebaseMutation } from \"../../../controller/api/center/ApiHomebase\";\r\nimport { toast } from \"react-hot-toast\";\r\n\r\nconst Form = ({ detail, setDetail }) => {\r\n  const [name, setName] = useState(\"\");\r\n  const [id, setId] = useState(\"\");\r\n\r\n  const [addHomebase, { data, isLoading, isSuccess, error, reset }] =\r\n    useAddHomebaseMutation();\r\n\r\n  const addHandler = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!name) {\r\n      toast.error(\"Lenkapi data\");\r\n    }\r\n\r\n    const body = { id, name };\r\n\r\n    toast.promise(\r\n      addHomebase(body)\r\n        .unwrap()\r\n        .then((res) => res.message),\r\n      {\r\n        loading: \"Menyimpan data...\",\r\n        success: (message) => message,\r\n        error: (err) => err.data?.message,\r\n      }\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (detail) {\r\n      setName(detail.name);\r\n      setId(detail.id);\r\n    }\r\n  }, [detail]);\r\n\r\n  useEffect(() => {\r\n    if (isSuccess) {\r\n      reset();\r\n      setName(\"\");\r\n      setId(\"\");\r\n    }\r\n\r\n    if (error) {\r\n      reset();\r\n    }\r\n  }, [isSuccess]);\r\n  return (\r\n    <form\r\n      onSubmit={addHandler}\r\n      className=\"rounded border p-2 d-flex flex-column gap-2 shadow bg-white\"\r\n    >\r\n      <p className=\"m-0 h6\">Satuan Pendidikan</p>\r\n\r\n      <input\r\n        type=\"text\"\r\n        name=\"homebase\"\r\n        className=\"form-control\"\r\n        placeholder=\"SD / SMP / SMA / SMK / Sekolah\"\r\n        value={name || \"\"}\r\n        onChange={(e) => setName(e.target.value)}\r\n      />\r\n\r\n      <div className=\"d-flex justify-content-end gap-2\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-warning\"\r\n          onClick={() => setDetail({})}\r\n        >\r\n          Batal\r\n        </button>\r\n        <button type=\"submit\" className=\"btn btn-success\" disabled={isLoading}>\r\n          Simpan\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Table from \"../../../components/table/Table\";\r\nimport {\r\n  useDeleteHomebaseMutation,\r\n  useGetHomebaseQuery,\r\n} from \"../../../controller/api/center/ApiHomebase\";\r\nimport toast from \"react-hot-toast\";\r\n\r\nconst TableData = ({ setDetail }) => {\r\n  const [page, setPage] = useState(1);\r\n  const [limit, setLimit] = useState(10);\r\n  const [search, setSearch] = useState(\"\");\r\n  const { data: rawData = {} } = useGetHomebaseQuery({ page, limit, search });\r\n  const { homebase = [], totalPages, totalData } = rawData;\r\n  const [deleteHomebase, { isLoading, isSuccess, error, reset }] =\r\n    useDeleteHomebaseMutation();\r\n\r\n  const deleteHandler = (id) => {\r\n    toast.promise(\r\n      deleteHomebase(id)\r\n        .unwrap()\r\n        .then((res) => res.message),\r\n      {\r\n        loading: \"Memproses...\",\r\n        success: (message) => message,\r\n        error: (err) => err.data.message,\r\n      }\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isSuccess) {\r\n      reset();\r\n    }\r\n\r\n    if (error) {\r\n      reset();\r\n    }\r\n  }, [isSuccess, error]);\r\n\r\n  return (\r\n    <Table\r\n      totalData={totalData}\r\n      totalPages={totalPages}\r\n      page={page}\r\n      setPage={setPage}\r\n      setLimit={setLimit}\r\n      setSearch={setSearch}\r\n    >\r\n      <table className=\"table table-bordered table-striped table-hover\">\r\n        <thead>\r\n          <tr>\r\n            <th className=\"text-center\">No</th>\r\n            <th className=\"text-center\">_id</th>\r\n            <th className=\"text-center\">Satuan Pendidikan</th>\r\n            <th className=\"text-center\">Aksi</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {homebase?.map((item, i) => (\r\n            <tr key={item.id}>\r\n              <td className=\"text-center align-middle\">\r\n                {(page - 1) * limit + i + 1}\r\n              </td>\r\n              <td className=\"text-center align-middle\">{item.id}</td>\r\n              <td className=\"text-center align-middle\">{item.name}</td>\r\n              <td>\r\n                <div className=\"d-flex gap-2 justify-content-center\">\r\n                  <button\r\n                    className=\"btn btn-warning\"\r\n                    onClick={() => setDetail(item)}\r\n                  >\r\n                    <i className=\"bi bi-pencil-square\"></i>\r\n                  </button>\r\n                  <button\r\n                    className=\"btn btn-danger\"\r\n                    disabled={isLoading}\r\n                    onClick={() => deleteHandler(item.id)}\r\n                  >\r\n                    <i className=\"bi bi-folder-minus\"></i>\r\n                  </button>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </Table>\r\n  );\r\n};\r\n\r\nexport default TableData;\r\n","import React, { useState } from \"react\";\r\nimport Layout from \"../../../components/layout/Layout\";\r\nimport Form from \"./Form\";\r\nimport TableData from \"./TableData\";\r\n\r\nconst CenterHomebase = () => {\r\n  const [detail, setDetail] = useState(\"\");\r\n  return (\r\n    <Layout title={\"Satuan Pendidikan\"} levels={[\"center\"]}>\r\n      <div className=\"h-100 row g-2\">\r\n        <div className=\"col-lg-3 col-12\">\r\n          <Form detail={detail} setDetail={setDetail} />\r\n        </div>\r\n        <div className=\"col-lg-9 col-12\">\r\n          <TableData setDetail={setDetail} />\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default CenterHomebase;\r\n"],"names":["Form","detail","setDetail","name","setName","useState","id","setId","addHomebase","data","isLoading","isSuccess","error","reset","useAddHomebaseMutation","useEffect","jsxRuntimeExports","jsxs","onSubmit","e","preventDefault","toast","body","c","promise","unwrap","then","res","message","loading","success","err","_a","className","children","jsx","type","placeholder","value","onChange","target","onClick","disabled","TableData","page","setPage","limit","setLimit","search","setSearch","rawData","useGetHomebaseQuery","homebase","totalPages","totalData","deleteHomebase","useDeleteHomebaseMutation","Table","map","item","i","deleteHandler","Vt","CenterHomebase","Layout","title","levels"],"mappings":"6PAIA,MAAMA,EAAO,EAAGC,SAAQC,gBACtB,MAAOC,EAAMC,GAAWC,EAAAA,SAAS,KAC1BC,EAAIC,GAASF,EAAAA,SAAS,KAEtBG,GAAaC,KAAEA,EAAMC,UAAAA,EAAAC,UAAWA,QAAWC,EAAOC,MAAAA,IACvDC,IA0CA,OAnBFC,EAAAA,WAAU,KACJd,IACFG,EAAQH,EAAOE,MACfI,EAAMN,EAAOK,IAAE,GAEhB,CAACL,IAEJc,EAAAA,WAAU,KACJJ,IACIE,IACNT,EAAQ,IACRG,EAAM,KAGJK,GACIC,GAAA,GAEP,CAACF,IAEFK,EAAAC,KAAC,OAAA,CACCC,SAzCgBC,IAClBA,EAAEC,iBAEGjB,GACHkB,EAAMT,MAAM,gBAGR,MAAAU,EAAO,CAAEhB,KAAIH,QAEboB,EAAAC,QACJhB,EAAYc,GACTG,SACAC,MAAMC,GAAQA,EAAIC,UACrB,CACEC,QAAS,oBACTC,QAAUF,GAAYA,EACtBhB,MAAQmB,UAAQ,OAAA,OAAAC,EAAAD,EAAItB,WAAM,EAAAuB,EAAAJ,OAAA,GAE9B,EAwBEK,UAAU,8DAEVC,SAAA,CAACC,EAAAA,IAAA,IAAA,CAAEF,UAAU,SAASC,SAAiB,sBAEvClB,EAAAmB,IAAC,QAAA,CACCC,KAAK,OACLjC,KAAK,WACL8B,UAAU,eACVI,YAAY,iCACZC,MAAOnC,GAAQ,GACfoC,SAAWpB,GAAMf,EAAQe,EAAEqB,OAAOF,WAGpCrB,KAAC,MAAI,CAAAgB,UAAU,mCACbC,SAAA,CAAAlB,EAAAmB,IAAC,SAAA,CACCC,KAAK,SACLH,UAAU,kBACVQ,QAAS,IAAMvC,EAAU,IAC1BgC,SAAA,UAGDC,EAAAA,IAAC,UAAOC,KAAK,SAASH,UAAU,kBAAkBS,SAAUhC,EAAWwB,SAEvE,gBAEJ,ECtEES,EAAY,EAAGzC,gBACnB,MAAO0C,EAAMC,GAAWxC,EAAAA,SAAS,IAC1ByC,EAAOC,GAAY1C,EAAAA,SAAS,KAC5B2C,EAAQC,GAAa5C,EAAAA,SAAS,KAC7BI,KAAMyC,EAAU,IAAOC,EAAoB,CAAEP,OAAME,QAAOE,YAC5DI,SAAEA,EAAW,GAAIC,WAAAA,EAAAC,UAAYA,GAAcJ,GAC1CK,GAAgB7C,UAAEA,EAAAC,UAAWA,QAAWC,EAAOC,MAAAA,IACpD2C,IA0BA,OAXFzC,EAAAA,WAAU,KACJJ,GACIE,IAGJD,GACIC,GAAA,GAEP,CAACF,EAAWC,IAGbI,EAAAmB,IAACsB,EAAA,CACCH,YACAD,aACAT,OACAC,UACAE,WACAE,YAEAf,SAAAlB,EAAAC,KAAC,QAAM,CAAAgB,UAAU,iDACfC,SAAA,CAACC,EAAAA,IAAA,QAAA,CACCD,gBAAC,KACC,CAAAA,SAAA,CAACC,EAAAA,IAAA,KAAA,CAAGF,UAAU,cAAcC,SAAE,OAC7BC,EAAAA,IAAA,KAAA,CAAGF,UAAU,cAAcC,SAAG,QAC9BC,EAAAA,IAAA,KAAA,CAAGF,UAAU,cAAcC,SAAiB,sBAC5CC,EAAAA,IAAA,KAAA,CAAGF,UAAU,cAAcC,SAAI,cAGpCC,EAAAA,IAAC,SACED,SAAU,MAAAkB,OAAA,EAAAA,EAAAM,KAAI,CAACC,EAAMC,WACnB,KACC,CAAA1B,SAAA,CAAAC,EAAAA,IAAC,MAAGF,UAAU,2BACVC,YAAO,GAAKY,EAAQc,EAAI,IAE3BzB,EAAAA,IAAA,KAAA,CAAGF,UAAU,2BAA4BC,WAAK5B,KAC9C6B,EAAAA,IAAA,KAAA,CAAGF,UAAU,2BAA4BC,WAAK/B,OAC9CgC,MAAA,KAAA,CACCD,SAACjB,EAAAA,KAAA,MAAA,CAAIgB,UAAU,sCACbC,SAAA,CAAAlB,EAAAmB,IAAC,SAAA,CACCF,UAAU,kBACVQ,QAAS,IAAMvC,EAAUyD,GAEzBzB,SAAAC,EAAAA,IAAC,IAAE,CAAAF,UAAU,0BAEfjB,EAAAmB,IAAC,SAAA,CACCF,UAAU,iBACVS,SAAUhC,EACV+B,QAAS,KAAMoB,OA5DVvD,EA4DwBqD,EAAKrD,QA3D5CwD,EAAAtC,QACJ+B,EAAejD,GACZmB,SACAC,MAAMC,GAAQA,EAAIC,UACrB,CACEC,QAAS,eACTC,QAAUF,GAAYA,EACtBhB,MAAQmB,GAAQA,EAAItB,KAAKmB,UART,IAACtB,CA4D+B,EAEpC4B,SAAAC,EAAAA,IAAC,IAAE,CAAAF,UAAU,gCAnBZ0B,EAAKrD,YA2BtB,EClFEyD,EAAiB,KACrB,MAAO9D,EAAQC,GAAaG,EAAAA,SAAS,IAEnC,SAAA8B,IAAC6B,EAAO,CAAAC,MAAO,oBAAqBC,OAAQ,CAAC,UAC3ChC,SAAAlB,EAAAC,KAAC,MAAI,CAAAgB,UAAU,gBACbC,SAAA,CAAAC,EAAAA,IAAC,OAAIF,UAAU,kBACbC,eAAClC,EAAK,CAAAC,SAAgBC,sBAEvB,MAAI,CAAA+B,UAAU,kBACbC,SAACC,EAAAA,IAAAQ,EAAA,CAAUzC,oBAGjB"}