import{r as t,A as v,j as e,e as S,B as y,C as L}from"./index-_V-Hszfs.js";import{L as w}from"./Layout-BOPYSC9s.js";import{T as D}from"./Table-pFA1e1UJ.js";const G=({detail:a,setDetail:s})=>{const[h,c]=t.useState(""),[m,i]=t.useState(""),[b,{isSuccess:u,isLoading:g,error:d,reset:x}]=v(),j=l=>{l.preventDefault();const f={id:h,name:m};S.promise(b(f).unwrap().then(n=>n.message),{loading:"Menyimpan data...",success:n=>n,error:n=>n.data.message})},p=()=>{c(""),i(""),s("")};return t.useEffect(()=>{a&&(c(a.id),i(a.name))},[a]),t.useEffect(()=>{u&&(x(),c(""),i(""),s("")),d&&x()},[u,d]),e.jsxs("form",{onSubmit:j,className:"bg-white rounded border p-2 d-flex flex-column gap-2",children:[e.jsx("p",{className:"m-0 h6",children:"Tingkat Satuan Pendidikan"}),e.jsx("input",{type:"text",name:"grade",id:"grade",className:"form-control",placeholder:"Tingkat",required:!0,value:m||"",onChange:l=>i(l.target.value)}),e.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-warning",onClick:p,children:"Batal"}),e.jsx("button",{type:"submit",className:"btn btn-sm btn-success",disabled:g,children:"Simpan"})]})]})},T=({setDetail:a})=>{const[s,h]=t.useState(1),[c,m]=t.useState(10),[i,b]=t.useState(""),{data:u={},isLoading:g}=y({page:s,limit:c,search:i}),{grades:d=[],totalData:x,totalPages:j}=u,[p,{isSuccess:l,isLoading:f,error:n,reset:N}]=L(),k=o=>{S.promise(p(o).unwrap().then(r=>r.message),{loading:"Memproses...",success:r=>r,error:r=>r.data.message})};return t.useEffect(()=>{l&&N(),n&&N()},[l,n]),e.jsx(D,{page:s,setPage:h,setLimit:m,setSearch:b,totalData:x,totalPages:j,isLoading:g,children:e.jsxs("table",{className:"table table-bordered table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center",children:"No"}),e.jsx("th",{className:"text-center",children:"Satuan"}),e.jsx("th",{className:"text-center",children:"Tingkat"}),e.jsx("th",{className:"text-center",children:"Aksi"})]})}),e.jsx("tbody",{children:d==null?void 0:d.map((o,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center align-middle",children:(s-1)*c+r+1}),e.jsx("td",{className:"align-middle",children:o.homebase}),e.jsx("td",{className:"text-center align-middle",children:o.name}),e.jsx("td",{className:"text-center align-middle",children:e.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[e.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>a(o),children:e.jsx("i",{className:"bi bi-pencil-square"})}),e.jsx("button",{className:"btn btn-sm btn-danger",disabled:f,onClick:()=>k(o.id),children:e.jsx("i",{className:"bi bi-folder-minus"})})]})})]},r))})]})})},M=()=>{const[a,s]=t.useState("");return e.jsx(w,{title:"Tingkat Pendidikan",levels:["admin"],children:e.jsxs("div",{className:"row g-2",children:[e.jsx("div",{className:"col-lg-3 col-12",children:e.jsx(G,{detail:a,setDetail:s})}),e.jsx("div",{className:"col-lg-9 col-12",children:e.jsx(T,{setDetail:s})})]})})};export{M as default};
