import{i as e,v as a,s,j as t,l as i,w as n,m as r,n as o,I as l,h as d,F as m,t as c}from"./index-BNhpMj6K.js";import{A as u}from"./Add-V6havsjn.js";import{c as j}from"./vendor-BcjG7WjF.js";import{T as p}from"./TableLayout-BSURvb_k.js";import{D as x}from"./Table-R-tYCrOm.js";import{P as h}from"./index-C4Fd3u3x.js";import{C as g,S as f}from"./Cancel-BY5xOsrj.js";import"./Pagination-ZXHhTthY.js";import"./index-B6dBhLgq.js";import"./SaveOutlined-CUMYyqDB.js";const S=({onEdit:i})=>{const[n,r]=j.useState(1),[o,l]=j.useState(10),[d,m]=j.useState(""),{data:c,isLoading:u}=e({page:n,limit:o,search:d}),[g,{isLoading:f,isSuccess:S,data:b,error:k}]=a();j.useEffect(()=>{S&&s.success(b.message),k&&s.error(k.data.message)},[S,b,k]);const y=[{title:"No",key:"nomor",render:(e,a,s)=>(n-1)*o+s+1},{title:"Satuan",dataIndex:"name",key:"name"},{title:"Aksi",key:"action",render:(e,a)=>t.jsx(x.Button,{menu:{items:[{key:"edit",label:t.jsx("span",{onClick:()=>(e=>{i(e)})(e),children:"Edit"})},{key:"delete",label:t.jsx(h,{title:`Apakah Anda yakin ingin menghapus ${a.name}?`,okText:"Ya",cancelText:"Batal",onConfirm:()=>{return a=e.id,void g(a);var a},children:t.jsx("span",{style:{color:"red"},children:"Hapus"})})}]},children:"Pilihan Aksi"})}];return t.jsx(p,{onSearch:e=>{m(e),r(1)},isLoading:u||f,columns:y,source:c?.homebase,rowKey:"id",page:n,limit:o,totalData:c?.totalData,onChange:e=>{r(e.current),l(e.pageSize)}})},b=({title:e,open:a,setOpen:d,homebase:m,setHomebase:c})=>{const[u]=i.useForm(),[p,{isLoading:x,isSuccess:h,error:S,data:b}]=n(),k=()=>{d(!1),c(),u.resetFields()};return j.useEffect(()=>{a&&(u.resetFields(),m?u.setFieldsValue({name:m.name}):u.resetFields())},[a,m]),j.useEffect(()=>{h&&(k(),s.success(b.message)),S&&s.error(S.data.message)},[h,b,S]),t.jsx(r,{title:e,open:a,onCancel:k,destroyOnHidden:!0,footer:[t.jsx(g,{disabled:x,onClick:k},"reset"),t.jsx(f,{disabled:x,onClick:()=>u.submit()},"add")],style:{top:20},children:t.jsx(o,{tip:"Memproses data...",spinning:x,children:t.jsx(i,{form:u,layout:"vertical",onFinish:e=>{if(m){const a={...e,id:m.id};p(a)}else p(e)},children:t.jsx(i.Item,{name:"name",label:"Nama Satuan",rules:[{required:!0,message:"Nama satuan wajib diisi!"}],children:t.jsx(l,{placeholder:"Nama Satuan Pendidikan"})})})})})},{Title:k}=c,y=()=>{const[e,a]=j.useState(!1),[s,i]=j.useState(!1),[n,r]=j.useState({});return t.jsxs(d,{title:"Management Satuan",levels:["center"],children:[t.jsxs(m,{vertical:!0,gap:"middle",children:[t.jsxs(m,{justify:"space-between",children:[t.jsx(k,{level:5,children:"Management Satuan"}),t.jsx(u,{onClick:()=>a(!0)})]}),t.jsx(S,{onEdit:e=>{r(e),i(!0),a(!0)}})]}),t.jsx(b,{open:e,setOpen:()=>a(!1),title:s?"Edit Satuan":"Tambah Satuan",homebase:n,setHomebase:()=>r({})})]})};export{y as default};
