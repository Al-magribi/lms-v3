{"version":3,"file":"History-vy31l8Tp.js","sources":["../../src/module/tahfiz/Memorization/history/History.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useGetStudentReportQuery } from \"../../../../service/api/tahfiz/ApiReport\";\r\nimport {\r\n  Button,\r\n  Flex,\r\n  Space,\r\n  Typography,\r\n  Spin,\r\n  Alert,\r\n  Card,\r\n  Descriptions,\r\n  Row,\r\n  Col,\r\n  Statistic,\r\n  Progress,\r\n  Collapse,\r\n  List,\r\n  Empty,\r\n  Tooltip, // Menambahkan Tooltip untuk Progress Bar\r\n} from \"antd\";\r\nimport {\r\n  ArrowLeftOutlined,\r\n  BookOutlined,\r\n  UserOutlined,\r\n} from \"@ant-design/icons\";\r\n\r\nconst { Title, Text } = Typography;\r\n// const { Panel } = Collapse; // Panel tidak lagi digunakan secara langsung\r\n\r\nconst History = ({ name, userid, onBack }) => {\r\n  const { data, isLoading, error } = useGetStudentReportQuery(userid, {\r\n    skip: !userid,\r\n  });\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Flex justify=\"center\" align=\"center\" style={{ minHeight: \"200px\" }}>\r\n        <Spin size=\"large\" />\r\n      </Flex>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Alert\r\n        message=\"Gagal Memuat Data\"\r\n        description=\"Terjadi kesalahan saat mengambil data laporan siswa. Silakan coba lagi.\"\r\n        type=\"error\"\r\n        showIcon\r\n      />\r\n    );\r\n  }\r\n\r\n  const studentInfo = data?.student;\r\n  const memorizationData = data?.memorization;\r\n\r\n  return (\r\n    <Flex vertical gap=\"large\">\r\n      <Space>\r\n        <Button shape=\"circle\" icon={<ArrowLeftOutlined />} onClick={onBack} />\r\n        <Title style={{ margin: 0 }} level={4}>{`Laporan Hafalan ${name.replace(\r\n          /-/g,\r\n          \" \"\r\n        )}`}</Title>\r\n      </Space>\r\n\r\n      {studentInfo && (\r\n        <Card\r\n          title={\r\n            <Space>\r\n              <UserOutlined /> Informasi Siswa\r\n            </Space>\r\n          }\r\n          hoverable\r\n        >\r\n          <Descriptions bordered column={{ xs: 1, sm: 2 }}>\r\n            <Descriptions.Item label=\"Nama Lengkap\">\r\n              {studentInfo.student_name}\r\n            </Descriptions.Item>\r\n            <Descriptions.Item label=\"NIS\">\r\n              {studentInfo.student_nis}\r\n            </Descriptions.Item>\r\n          </Descriptions>\r\n        </Card>\r\n      )}\r\n\r\n      <Title level={5}>Laporan Hafalan per Juz</Title>\r\n\r\n      {memorizationData && memorizationData.length > 0 ? (\r\n        memorizationData.map((item) => {\r\n          // PERBAIKAN: Definisikan item untuk Collapse di sini\r\n          const collapseItems = [\r\n            {\r\n              key: \"1\",\r\n              label: \"Lihat Rincian Surah\",\r\n              children: (\r\n                <List\r\n                  dataSource={item.surah}\r\n                  renderItem={(surah) => (\r\n                    <List.Item>\r\n                      <List.Item.Meta\r\n                        title={surah.surah_name}\r\n                        description={`Ayat dihafal: ${surah.verse} | Baris dihafal: ${surah.line}`}\r\n                      />\r\n                    </List.Item>\r\n                  )}\r\n                />\r\n              ),\r\n            },\r\n          ];\r\n\r\n          return (\r\n            <Card\r\n              key={item.juz}\r\n              title={\r\n                <Space>\r\n                  <BookOutlined /> {item.juz}\r\n                </Space>\r\n              }\r\n              hoverable\r\n              style={{ width: \"100%\" }}\r\n            >\r\n              <Flex vertical gap=\"middle\">\r\n                <Tooltip title={`Progress: ${item.progress}%`}>\r\n                  <Progress percent={item.progress} />\r\n                </Tooltip>\r\n\r\n                <Row gutter={[16, 16]}>\r\n                  <Col xs={8}>\r\n                    <Statistic title=\"Total Ayat\" value={item.verses} />\r\n                  </Col>\r\n                  <Col xs={8}>\r\n                    <Statistic\r\n                      title=\"Selesai\"\r\n                      value={item.completed}\r\n                      valueStyle={{ color: \"#3f8600\" }}\r\n                    />\r\n                  </Col>\r\n                  <Col xs={8}>\r\n                    <Statistic\r\n                      title=\"Sisa\"\r\n                      value={item.uncompleted}\r\n                      valueStyle={{ color: \"#cf1322\" }}\r\n                    />\r\n                  </Col>\r\n                </Row>\r\n\r\n                {/* PERBAIKAN: Gunakan properti 'items' untuk Collapse */}\r\n                <Collapse ghost items={collapseItems} />\r\n              </Flex>\r\n            </Card>\r\n          );\r\n        })\r\n      ) : (\r\n        <Card>\r\n          <Empty description=\"Belum ada data hafalan yang tercatat untuk siswa ini.\" />\r\n        </Card>\r\n      )}\r\n    </Flex>\r\n  );\r\n};\r\n\r\nexport default History;\r\n"],"names":["Title","Text","Typography","History","name","userid","onBack","data","isLoading","error","useGetStudentReportQuery","skip","jsx","Flex","justify","align","style","minHeight","children","Spin","size","Alert","message","description","type","showIcon","studentInfo","student","memorizationData","memorization","jsxs","vertical","gap","Space","Button","shape","icon","ArrowLeftOutlined","onClick","margin","level","replace","Card","title","UserOutlined","hoverable","Descriptions","bordered","column","xs","sm","Item","label","student_name","student_nis","length","map","item","collapseItems","key","List","dataSource","surah","renderItem","Meta","surah_name","verse","line","BookOutlined","juz","width","Tooltip","progress","Progress","percent","Row","gutter","Col","Statistic","value","verses","completed","valueStyle","color","uncompleted","Collapse","ghost","items","Empty"],"mappings":"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"}