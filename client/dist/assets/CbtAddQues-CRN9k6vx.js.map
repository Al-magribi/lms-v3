{"version":3,"file":"CbtAddQues-CRN9k6vx.js","sources":["../../src/page/cbt/bank/CbtAddQues.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\"\r\nimport Layout from \"../../../components/layout/Layout\"\r\nimport Editor from \"../../../components/editor/Editor\"\r\nimport { toast } from \"react-hot-toast\"\r\nimport { useNavigate, useParams } from \"react-router-dom\"\r\nimport {\r\n\tuseAddQuestionMutation,\r\n\tuseGetQuestionQuery,\r\n} from \"../../../controller/api/cbt/ApiBank\"\r\nconst CbtAddQues = () => {\r\n\tconst navigate = useNavigate()\r\n\tconst params = useParams()\r\n\tconst { subject, name, bankid, questionid } = params\r\n\tconst [type, setType] = useState(1)\r\n\tconst [key, setKey] = useState(\"\")\r\n\tconst [poin, setPoin] = useState(\"\")\r\n\tconst [question, setQuestion] = useState(\"\")\r\n\tconst [choices, setChoices] = useState({\r\n\t\tchoiceA: \"\",\r\n\t\tchoiceB: \"\",\r\n\t\tchoiceC: \"\",\r\n\t\tchoiceD: \"\",\r\n\t\tchoiceE: \"\",\r\n\t})\r\n\r\n\tconst { data: detail } = useGetQuestionQuery(questionid, {\r\n\t\tskip: !questionid,\r\n\t})\r\n\r\n\tconst [addQuestion, { isSuccess, isLoading, isError, reset }] =\r\n\t\tuseAddQuestionMutation()\r\n\r\n\tconst handleChoiceChange = (choice) => (content) => {\r\n\t\tsetChoices((prevChoices) => ({\r\n\t\t\t...prevChoices,\r\n\t\t\t[choice]: content,\r\n\t\t}))\r\n\t}\r\n\r\n\tconst addHandler = () => {\r\n\t\tif (!question) {\r\n\t\t\ttoast.error(\"Pertanyaan tidak boleh kosong\")\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (type == 1 && !key) {\r\n\t\t\ttoast.error(\"Kunci jawaban tidak boleh kosong\")\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst data = {\r\n\t\t\tid: questionid || \"\",\r\n\t\t\tbank: bankid,\r\n\t\t\tqtype: parseInt(type),\r\n\t\t\tqkey: key,\r\n\t\t\tpoin: parseInt(poin),\r\n\t\t\tquestion: question,\r\n\t\t\ta: choices.choiceA,\r\n\t\t\tb: choices.choiceB,\r\n\t\t\tc: choices.choiceC,\r\n\t\t\td: choices.choiceD,\r\n\t\t\te: choices.choiceE,\r\n\t\t}\r\n\r\n\t\ttoast.promise(\r\n\t\t\taddQuestion(data)\r\n\t\t\t\t.unwrap()\r\n\t\t\t\t.then((res) => res.message),\r\n\t\t\t{\r\n\t\t\t\tloading: \"Memuat data ...\",\r\n\t\t\t\tsuccess: (message) => message,\r\n\t\t\t\terror: (error) => error.data.message,\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\tconst goToLink = () => {\r\n\t\tconst nameFormat = name.replace(/[\\s/]/g, \"-\")\r\n\t\tconst subjectFormat = subject.replace(/[\\s/]/g, \"-\")\r\n\t\tnavigate(`/admin-cbt-bank/${subjectFormat}/${nameFormat}/${bankid}`)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isSuccess) {\r\n\t\t\tsetType(1)\r\n\t\t\tsetKey(\"\")\r\n\t\t\tsetPoin(\"\")\r\n\t\t\tsetQuestion(\"\")\r\n\t\t\tsetChoices({\r\n\t\t\t\tchoiceA: \"\",\r\n\t\t\t\tchoiceB: \"\",\r\n\t\t\t\tchoiceC: \"\",\r\n\t\t\t\tchoiceD: \"\",\r\n\t\t\t\tchoiceE: \"\",\r\n\t\t\t})\r\n\t\t\treset()\r\n\t\t\tgoToLink()\r\n\t\t}\r\n\r\n\t\tif (isError) {\r\n\t\t\treset()\r\n\t\t}\r\n\t}, [isSuccess, isError])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (detail) {\r\n\t\t\tsetType(detail?.qtype)\r\n\t\t\tsetKey(detail?.qkey)\r\n\t\t\tsetPoin(detail?.poin)\r\n\t\t\tsetQuestion(detail?.question)\r\n\t\t\tsetChoices({\r\n\t\t\t\tchoiceA: detail?.a,\r\n\t\t\t\tchoiceB: detail?.b,\r\n\t\t\t\tchoiceC: detail?.c,\r\n\t\t\t\tchoiceD: detail?.d,\r\n\t\t\t\tchoiceE: detail?.e,\r\n\t\t\t})\r\n\t\t}\r\n\t}, [detail])\r\n\r\n\treturn (\r\n\t\t<Layout title={\"Tambah Soal\"}>\r\n\t\t\t<div className='row g-2'>\r\n\t\t\t\t<div className='col-lg-3 col-12'>\r\n\t\t\t\t\t<select\r\n\t\t\t\t\t\tname='type'\r\n\t\t\t\t\t\tid='type'\r\n\t\t\t\t\t\tclassName='form-select shadow'\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tvalue={type}\r\n\t\t\t\t\t\tonChange={(e) => setType(e.target.value)}>\r\n\t\t\t\t\t\t<option value={1}>PG</option>\r\n\t\t\t\t\t\t<option value={2}>Essay</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='col-lg-3 col-12'>\r\n\t\t\t\t\t<select\r\n\t\t\t\t\t\tname='key'\r\n\t\t\t\t\t\tid='key'\r\n\t\t\t\t\t\tclassName='form-select shadow'\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tvalue={key}\r\n\t\t\t\t\t\tonChange={(e) => setKey(e.target.value)}>\r\n\t\t\t\t\t\t<option value='' hidden>\r\n\t\t\t\t\t\t\tKunci Jawaban\r\n\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t<option value='A'>A</option>\r\n\t\t\t\t\t\t<option value='B'>B</option>\r\n\t\t\t\t\t\t<option value='C'>C</option>\r\n\t\t\t\t\t\t<option value='D'>D</option>\r\n\t\t\t\t\t\t<option value='E'>E</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='col-lg-3 col-12'>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='number'\r\n\t\t\t\t\t\tname='poin'\r\n\t\t\t\t\t\tid='poin'\r\n\t\t\t\t\t\tclassName='form-control shadow'\r\n\t\t\t\t\t\tplaceholder='Nilai'\r\n\t\t\t\t\t\tvalue={poin || \"\"}\r\n\t\t\t\t\t\tonChange={(e) => setPoin(e.target.value)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='col-lg-3 col-12 d-flex align-items-center justify-content-start'>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName='btn btn-sm btn-success shadow'\r\n\t\t\t\t\t\tdisabled={isLoading}\r\n\t\t\t\t\t\tonClick={addHandler}>\r\n\t\t\t\t\t\tSimpan\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='col-12'>\r\n\t\t\t\t\t<Editor\r\n\t\t\t\t\t\tplaceholder='Ketikan pertanyaan di sini ...'\r\n\t\t\t\t\t\tvalue={question}\r\n\t\t\t\t\t\tonChange={(html) => setQuestion(html)}\r\n\t\t\t\t\t\tclassname='shadow'\r\n\t\t\t\t\t\theight={300}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t{type == 1 &&\r\n\t\t\t\t\tObject.keys(choices).map((choice, index) => (\r\n\t\t\t\t\t\t<div key={index} className='col-12'>\r\n\t\t\t\t\t\t\t<Editor\r\n\t\t\t\t\t\t\t\tplaceholder={`Jawaban ${choice.charAt(choice.length - 1)}`}\r\n\t\t\t\t\t\t\t\tvalue={choices[choice]}\r\n\t\t\t\t\t\t\t\tonChange={handleChoiceChange(choice)}\r\n\t\t\t\t\t\t\t\tclassname='shadow'\r\n\t\t\t\t\t\t\t\theight={300}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</Layout>\r\n\t)\r\n}\r\n\r\nexport default CbtAddQues\r\n"],"names":["CbtAddQues","navigate","useNavigate","params","useParams","subject","name","bankid","questionid","type","setType","useState","key","setKey","poin","setPoin","question","setQuestion","choices","setChoices","choiceA","choiceB","choiceC","choiceD","choiceE","data","detail","useGetQuestionQuery","skip","addQuestion","isSuccess","isLoading","isError","reset","useAddQuestionMutation","handleChoiceChange","choice","content","prevChoices","useEffect","nameFormat","replace","subjectFormat","goToLink","qtype","qkey","a","b","c","d","e","Layout","title","children","jsxs","className","jsx","jsxRuntimeExports","id","required","value","onChange","target","hidden","placeholder","disabled","onClick","toast","error","bank","parseInt","promise","unwrap","then","res","message","loading","success","Editor","html","classname","height","Object","keys","map","index","charAt","length"],"mappings":"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"}