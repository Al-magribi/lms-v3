{"version":3,"file":"AdminGraduation-C3d55YSB.js","sources":["../../src/page/admin/graduation/Form.jsx","../../src/page/admin/graduation/TableData.jsx","../../src/page/admin/graduation/AdminGraduation.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  useAddGraduationMutation,\r\n  useGetStudentsQuery,\r\n} from \"../../../controller/api/admin/ApiGraduation\";\r\nimport { toast } from \"react-hot-toast\";\r\nimport Select from \"react-select\";\r\n\r\nconst Form = ({ detail, setDetail }) => {\r\n  const [formData, setFormData] = useState({\r\n    id: \"\",\r\n    agency: \"\",\r\n    userid: \"\",\r\n    description: \"\",\r\n  });\r\n\r\n  const { data: students = [] } = useGetStudentsQuery();\r\n\r\n  const studentOptions = students?.map((student) => ({\r\n    value: student.id,\r\n    label: student.name,\r\n  }));\r\n\r\n  const [addGraduation, { isLoading, isSuccess, isError, reset }] =\r\n    useAddGraduationMutation();\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    toast.promise(\r\n      addGraduation(formData)\r\n        .unwrap()\r\n        .then((res) => res.message),\r\n      {\r\n        loading: \"Memuat data...\",\r\n        success: (message) => message,\r\n        error: (error) => error.data.message,\r\n      }\r\n    );\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setDetail({});\r\n    setFormData({\r\n      id: \"\",\r\n      agency: \"\",\r\n      userid: \"\",\r\n      description: \"\",\r\n    });\r\n  };\r\n\r\n  const handleStudentChange = (selectedOption) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      userid: selectedOption?.value || null,\r\n    }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (detail) {\r\n      setFormData({\r\n        id: detail.id ?? \"\",\r\n        agency: detail.agency ?? \"\",\r\n        userid: detail.userid ?? \"\",\r\n        description: detail.description ?? \"\",\r\n      });\r\n    }\r\n  }, [detail]);\r\n\r\n  useEffect(() => {\r\n    if (isSuccess || isError) {\r\n      if (isSuccess) {\r\n        setDetail({});\r\n        setFormData({\r\n          id: \"\",\r\n          agency: \"\",\r\n          userid: \"\",\r\n          description: \"\",\r\n        });\r\n        const closeModal = document.querySelector('[data-bs-dismiss=\"modal\"]');\r\n        closeModal.click();\r\n      }\r\n\r\n      reset();\r\n    }\r\n  }, [isSuccess, isError]);\r\n\r\n  return (\r\n    <div\r\n      className=\"modal fade\"\r\n      id=\"addgraduation\"\r\n      tabIndex=\"-1\"\r\n      aria-labelledby=\"addgraduationLabel\"\r\n      aria-hidden=\"true\"\r\n      data-bs-backdrop=\"static\"\r\n      data-bs-keyboard=\"false\"\r\n    >\r\n      <div className=\"modal-dialog\">\r\n        <div className=\"modal-content\">\r\n          <form\r\n            onSubmit={handleSubmit}\r\n            className=\"border-0 p-3 rounded flex-column gap-3\"\r\n          >\r\n            <div className=\"modal-header\">\r\n              <h5 className=\"modal-title\" id=\"addgraduationLabel\">\r\n                Data Lulusan\r\n              </h5>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn-close\"\r\n                data-bs-dismiss=\"modal\"\r\n                aria-label=\"Close\"\r\n                disabled={isLoading}\r\n              ></button>\r\n            </div>\r\n            <div className=\"modal-body d-flex flex-column gap-3\">\r\n              <Select\r\n                isClearable\r\n                isSearchable\r\n                placeholder=\"Cari Murid\"\r\n                value={\r\n                  studentOptions?.find(\r\n                    (opt) => opt.value === formData.userid\r\n                  ) || null\r\n                }\r\n                options={studentOptions}\r\n                onChange={handleStudentChange}\r\n              />\r\n              <input\r\n                type=\"text\"\r\n                name=\"agency\"\r\n                id=\"agency\"\r\n                placeholder=\"Nama Instansi\"\r\n                className=\"form-control\"\r\n                required\r\n                value={formData.agency}\r\n                onChange={(e) =>\r\n                  setFormData({ ...formData, agency: e.target.value })\r\n                }\r\n              />\r\n              <textarea\r\n                name=\"description\"\r\n                id=\"description\"\r\n                placeholder=\"Keterangan\"\r\n                className=\"form-control\"\r\n                value={formData.description}\r\n                onChange={(e) =>\r\n                  setFormData({ ...formData, description: e.target.value })\r\n                }\r\n              />\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-warning\"\r\n                data-bs-dismiss=\"modal\"\r\n                onClick={handleCancel}\r\n                disabled={isLoading}\r\n              >\r\n                Batal\r\n              </button>\r\n              <button\r\n                type=\"submit\"\r\n                className=\"btn btn-success\"\r\n                disabled={isLoading}\r\n              >\r\n                Simpan\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n","import React, { useState } from \"react\";\r\nimport Table from \"../../../components/table/Table\";\r\nimport { useGetGraduationQuery } from \"../../../controller/api/admin/ApiGraduation\";\r\n\r\nconst TableData = ({ setDetail }) => {\r\n  const [page, setPage] = useState(1);\r\n  const [limit, setLimit] = useState(10);\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  const { data, isLoading } = useGetGraduationQuery({ page, limit, search });\r\n  const { result, totalData, totalPages } = data || {};\r\n\r\n  return (\r\n    <Table\r\n      isLoading={isLoading}\r\n      totalData={totalData}\r\n      totalPages={totalPages}\r\n      page={page}\r\n      limit={limit}\r\n      setPage={setPage}\r\n      setLimit={setLimit}\r\n      setSearch={setSearch}\r\n    >\r\n      <div className=\"row g-3\">\r\n        {result?.length > 0 ? (\r\n          result.map((item, index) => {\r\n            // Ambil inisial nama\r\n            const initials = item.student_name\r\n              ? item.student_name\r\n                  .split(\" \")\r\n                  .map((w) => w[0])\r\n                  .join(\"\")\r\n                  .toUpperCase()\r\n                  .slice(0, 2)\r\n              : \"?\";\r\n            return (\r\n              <div className=\"col-12 col-md-4\" key={item.id}>\r\n                <div\r\n                  className=\"rounded d-flex flex-column justify-content-between h-100 p-4 shadow-sm hover-shadow\"\r\n                  style={{\r\n                    border: \"1px solid #f3f3f3\",\r\n                    minHeight: 180,\r\n                    boxShadow: \"0 4px 18px rgba(0,0,0,0.07)\",\r\n                  }}\r\n                >\r\n                  <div className=\"d-flex align-items-center gap-3 mb-2\">\r\n                    <div\r\n                      className=\"avatar flex-shrink-0 d-flex align-items-center justify-content-center bg-gradient-primary text-primary fw-bold rounded-circle shadow-sm\"\r\n                      style={{\r\n                        width: 56,\r\n                        height: 56,\r\n                        fontSize: 22,\r\n                        background:\r\n                          \"linear-gradient(135deg, #e3f0ff 0%, #f8fbff 100%)\",\r\n                        border: \"2px solid #d0e3ff\",\r\n                      }}\r\n                    >\r\n                      {initials}\r\n                    </div>\r\n                    <div className=\"flex-grow-1\">\r\n                      <div\r\n                        className=\"fw-bold fs-5 text-dark mb-1\"\r\n                        style={{ letterSpacing: 0.5 }}\r\n                      >\r\n                        {item.student_name}\r\n                      </div>\r\n                      <div className=\"small text-muted mb-1\">\r\n                        NIS:{\" \"}\r\n                        <span className=\"badge bg-light text-primary border border-primary bg-opacity-10\">\r\n                          {item.nis}\r\n                        </span>\r\n                      </div>\r\n\r\n                      <div className=\"d-flex align-items-center gap-2\">\r\n                        <div className=\"small text-secondary\">\r\n                          <i className=\"bi bi-building me-1\"></i>\r\n                          {item.agency}\r\n                        </div>\r\n\r\n                        <div className=\"vr\"></div>\r\n\r\n                        <div className=\"small text-secondary\">\r\n                          <i className=\"bi bi-building me-1\"></i>\r\n                          {item.description}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"d-flex justify-content-end gap-3 mt-auto pt-2\">\r\n                    <button\r\n                      className=\"btn btn-sm btn-outline-primary d-flex align-items-center gap-1 shadow-sm px-3\"\r\n                      title=\"Edit\"\r\n                      style={{ borderRadius: \"8px\", fontWeight: 500 }}\r\n                      onClick={() => setDetail(item)}\r\n                      data-bs-toggle=\"modal\"\r\n                      data-bs-target=\"#addgraduation\"\r\n                    >\r\n                      <i className=\"bi bi-pencil-square\"></i>\r\n                      <span>Edit</span>\r\n                    </button>\r\n                    <button\r\n                      className=\"btn btn-sm btn-outline-danger d-flex align-items-center gap-1 shadow-sm px-3\"\r\n                      title=\"Hapus\"\r\n                      style={{ borderRadius: \"8px\", fontWeight: 500 }}\r\n                    >\r\n                      <i className=\"bi bi-trash\"></i>\r\n                      <span>Hapus</span>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })\r\n        ) : (\r\n          <div className=\"text-center text-muted\">\r\n            <p className=\"bg-danger bg-opacity-10 p-3 rounded text-danger m-0\">\r\n              Tidak ada data lulusan.\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </Table>\r\n  );\r\n};\r\n\r\nexport default TableData;\r\n","import React, { useState } from \"react\";\r\nimport Layout from \"../../../components/layout/Layout\";\r\nimport Form from \"./Form\";\r\nimport TableData from \"./TableData\";\r\n\r\nconst AdminGraduation = () => {\r\n  const [detail, setDetail] = useState({});\r\n  return (\r\n    <Layout title=\"Lulusan\" levels={[\"admin\"]}>\r\n      <Form detail={detail} setDetail={setDetail} />\r\n\r\n      <TableData setDetail={setDetail} />\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default AdminGraduation;\r\n"],"names":["Form","detail","setDetail","formData","setFormData","useState","id","agency","userid","description","data","students","useGetStudentsQuery","studentOptions","map","student","value","label","name","addGraduation","isLoading","isSuccess","isError","reset","useAddGraduationMutation","useEffect","document","querySelector","click","jsxRuntimeExports","jsx","className","tabIndex","children","jsxs","onSubmit","e","preventDefault","c","promise","unwrap","then","res","message","loading","success","error","type","disabled","Select","isClearable","isSearchable","placeholder","find","opt","options","onChange","selectedOption","prev","required","target","onClick","TableData","page","setPage","limit","setLimit","search","setSearch","useGetGraduationQuery","result","totalData","totalPages","Table","length","item","index","initials","student_name","split","w","join","toUpperCase","slice","style","border","minHeight","boxShadow","width","height","fontSize","background","letterSpacing","nis","title","borderRadius","fontWeight","AdminGraduation","Layout","levels"],"mappings":"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"}