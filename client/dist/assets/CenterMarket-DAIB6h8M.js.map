{"version":3,"file":"CenterMarket-DAIB6h8M.js","sources":["../../src/page/center/market/CenterMarket.jsx"],"sourcesContent":["import React, { useState, useMemo } from \"react\";\r\nimport Layout from \"../../../components/layout/Layout\";\r\nimport Table from \"../../../components/table/Table\";\r\nimport { useGetFamilyDataQuery } from \"../../../controller/api/center/ApiCenterData\";\r\n\r\nconst CenterMarket = () => {\r\n  const [page, setPage] = useState(1);\r\n  const [limit, setLimit] = useState(10);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [ageFilter, setAgeFilter] = useState(\"\");\r\n  const [genderFilter, setGenderFilter] = useState(\"\");\r\n\r\n  const { data, isLoading } = useGetFamilyDataQuery({\r\n    page,\r\n    limit,\r\n    search,\r\n    family_age: ageFilter || undefined,\r\n    family_gender: genderFilter || undefined,\r\n  });\r\n  const { results = [], totalData, totalPages } = data || {};\r\n\r\n  const uniqueAges = useMemo(() => {\r\n    const ages = results.map((result) => result.family_age);\r\n    return [...new Set(ages)].sort((a, b) => a - b);\r\n  }, [results]);\r\n\r\n  const handleAgeChange = (e) => {\r\n    setAgeFilter(e.target.value);\r\n    setPage(1);\r\n  };\r\n\r\n  const handleGenderChange = (e) => {\r\n    setGenderFilter(e.target.value);\r\n    setPage(1);\r\n  };\r\n\r\n  return (\r\n    <Layout title={\"Potensial Calon Siswa\"} levels={[\"center\"]}>\r\n      <div className='mb-3'>\r\n        <div className='row'>\r\n          <div className='col-md-3'>\r\n            <select\r\n              className='form-select'\r\n              id='ageFilter'\r\n              value={ageFilter}\r\n              onChange={handleAgeChange}>\r\n              <option value=''>Semua Umur</option>\r\n              {uniqueAges.map((age) => (\r\n                <option key={age} value={age}>\r\n                  {age} tahun\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div className='col-md-3'>\r\n            <select\r\n              className='form-select'\r\n              id='genderFilter'\r\n              value={genderFilter}\r\n              onChange={handleGenderChange}>\r\n              <option value=''>Semua Gender</option>\r\n              <option value='L'>Laki-laki</option>\r\n              <option value='P'>Perempuan</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <Table\r\n        isLoading={isLoading}\r\n        page={page}\r\n        setPage={setPage}\r\n        limit={limit}\r\n        setLimit={setLimit}\r\n        search={search}\r\n        setSearch={setSearch}\r\n        totalData={totalData}\r\n        totalPages={totalPages}>\r\n        <table className='mb-0 table table-hover table-bordered table-striped'>\r\n          <thead>\r\n            <tr>\r\n              <th className='text-center'>No</th>\r\n              <th className='text-center'>Nama Siswa</th>\r\n              <th className='text-center'>Nama Keluarga</th>\r\n              <th className='text-center'>L/P</th>\r\n              <th className='text-center'>Umur</th>\r\n              <th className='text-center'>Kontak</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {results.map((result, index) => (\r\n              <tr key={index}>\r\n                <td className='text-center'>\r\n                  {(page - 1) * limit + index + 1}\r\n                </td>\r\n                <td className='align-middle'>{result.student_name}</td>\r\n                <td className='align-middle'>{result.family_name}</td>\r\n                <td className='text-center align-middle'>\r\n                  {result.family_gender}\r\n                </td>\r\n                <td className='text-center align-middle'>\r\n                  {result.family_age} tahun\r\n                </td>\r\n                <td className='text-center align-middle'>\r\n                  <div className='d-flex justify-content-center gap-2'>\r\n                    <button\r\n                      className='btn btn-sm btn-success'\r\n                      title={result.father_name}\r\n                      onClick={() => {\r\n                        window.open(\r\n                          `https://wa.me/${result.father_phone}`,\r\n                          \"_blank\"\r\n                        );\r\n                      }}\r\n                      disabled={!result.father_phone}>\r\n                      <i className='bi bi-whatsapp'></i>{\" \"}\r\n                      <span className='ms-2'>Ayah</span>\r\n                    </button>\r\n\r\n                    <button\r\n                      className='btn btn-sm btn-success'\r\n                      title={result.mother_name}\r\n                      onClick={() => {\r\n                        window.open(\r\n                          `https://wa.me/${result.mother_phone}`,\r\n                          \"_blank\"\r\n                        );\r\n                      }}\r\n                      disabled={!result.mother_phone}>\r\n                      <i className='bi bi-whatsapp'></i>\r\n                      <span className='ms-2'>Ibu</span>\r\n                    </button>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </Table>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default CenterMarket;\r\n"],"names":["CenterMarket","page","setPage","useState","limit","setLimit","search","setSearch","ageFilter","setAgeFilter","genderFilter","setGenderFilter","data","isLoading","useGetFamilyDataQuery","family_age","family_gender","results","totalData","totalPages","uniqueAges","useMemo","ages","map","result","Set","sort","a","b","Layout","title","levels","children","jsx","className","jsxs","jsxRuntimeExports","id","value","onChange","e","target","age","Table","index","student_name","family_name","father_name","onClick","window","open","father_phone","disabled","mother_name","mother_phone"],"mappings":"iOAKA,MAAMA,EAAe,KACnB,MAAOC,EAAMC,GAAWC,EAAAA,SAAS,IAC1BC,EAAOC,GAAYF,EAAAA,SAAS,KAC5BG,EAAQC,GAAaJ,EAAAA,SAAS,KAC9BK,EAAWC,GAAgBN,EAAAA,SAAS,KACpCO,EAAcC,GAAmBR,EAAAA,SAAS,KAE3CS,KAAEA,EAAAC,UAAMA,GAAcC,EAAsB,CAChDb,OACAG,QACAE,SACAS,WAAYP,QAAa,EACzBQ,cAAeN,QAAgB,KAE3BO,QAAEA,EAAU,GAACC,UAAGA,aAAWC,GAAeP,GAAQ,CAAC,EAEnDQ,EAAaC,EAAAA,SAAQ,KACzB,MAAMC,EAAOL,EAAQM,KAAKC,GAAWA,EAAOT,aAC5C,MAAO,IAAI,IAAIU,IAAIH,IAAOI,MAAK,CAACC,EAAGC,IAAMD,EAAIC,GAAC,GAC7C,CAACX,kBAaDY,EAAO,CAAAC,MAAO,wBAAyBC,OAAQ,CAAC,UAC/CC,SAAA,CAAAC,EAAAA,IAAC,OAAIC,UAAU,OACbF,SAACG,EAAAA,KAAA,MAAA,CAAID,UAAU,MACbF,SAAA,GAACC,IAAA,MAAA,CAAIC,UAAU,WACbF,SAAAI,EAAAD,KAAC,SAAA,CACCD,UAAU,cACVG,GAAG,YACHC,MAAO9B,EACP+B,SAnBaC,IACV/B,EAAA+B,EAAEC,OAAOH,OACtBpC,EAAQ,EAAC,EAkBC8B,SAAA,CAACC,EAAAA,IAAA,SAAA,CAAOK,MAAM,GAAGN,SAAU,eAC1BZ,EAAWG,KAAKmB,GACdP,EAAAA,KAAA,SAAA,CAAiBG,MAAOI,EACtBV,SAAA,CAAAU,EAAI,WADMA,YAMnBT,IAAC,MAAI,CAAAC,UAAU,WACbF,SAAAI,EAAAD,KAAC,SAAA,CACCD,UAAU,cACVG,GAAG,eACHC,MAAO5B,EACP6B,SA5BgBC,IACV7B,EAAA6B,EAAEC,OAAOH,OACzBpC,EAAQ,EAAC,EA2BC8B,SAAA,CAACC,EAAAA,IAAA,SAAA,CAAOK,MAAM,GAAGN,SAAY,iBAC5BC,EAAAA,IAAA,SAAA,CAAOK,MAAM,IAAIN,SAAS,cAC1BC,EAAAA,IAAA,SAAA,CAAOK,MAAM,IAAIN,SAAS,wBAKnCI,EAAAH,IAACU,EAAA,CACC9B,YACAZ,OACAC,UACAE,QACAC,WACAC,SACAC,YACAW,YACAC,aACAa,SAAAI,EAAAD,KAAC,QAAM,CAAAD,UAAU,sDACfF,SAAA,CAACC,EAAAA,IAAA,QAAA,CACCD,gBAAC,KACC,CAAAA,SAAA,CAACC,EAAAA,IAAA,KAAA,CAAGC,UAAU,cAAcF,SAAE,OAC7BC,EAAAA,IAAA,KAAA,CAAGC,UAAU,cAAcF,SAAU,eACrCC,EAAAA,IAAA,KAAA,CAAGC,UAAU,cAAcF,SAAa,kBACxCC,EAAAA,IAAA,KAAA,CAAGC,UAAU,cAAcF,SAAG,QAC9BC,EAAAA,IAAA,KAAA,CAAGC,UAAU,cAAcF,SAAI,SAC/BC,EAAAA,IAAA,KAAA,CAAGC,UAAU,cAAcF,SAAM,gBAGtCC,EAAAA,IAAC,SACED,SAAQf,EAAAM,KAAI,CAACC,EAAQoB,WACnB,KACC,CAAAZ,SAAA,CAAAC,EAAAA,IAAC,MAAGC,UAAU,cACVF,YAAO,GAAK5B,EAAQwC,EAAQ,IAE/BX,EAAAA,IAAA,KAAA,CAAGC,UAAU,eAAgBF,WAAOa,eACpCZ,EAAAA,IAAA,KAAA,CAAGC,UAAU,eAAgBF,WAAOc,cACpCb,EAAAA,IAAA,KAAA,CAAGC,UAAU,2BACXF,WAAOhB,kBAEVmB,KAAC,KAAG,CAAAD,UAAU,2BACXF,SAAA,CAAOR,EAAAT,WAAW,kBAEpB,KAAG,CAAAmB,UAAU,2BACZF,SAACG,EAAAA,KAAA,MAAA,CAAID,UAAU,sCACbF,SAAA,CAAAI,EAAAD,KAAC,SAAA,CACCD,UAAU,yBACVJ,MAAON,EAAOuB,YACdC,QAAS,KACAC,OAAAC,KACL,iBAAiB1B,EAAO2B,eACxB,SACF,EAEFC,UAAW5B,EAAO2B,aAClBnB,SAAA,GAACC,IAAA,IAAA,CAAEC,UAAU,mBAAsB,IAClCD,EAAAA,IAAA,OAAA,CAAKC,UAAU,OAAOF,SAAI,YAG7BI,EAAAD,KAAC,SAAA,CACCD,UAAU,yBACVJ,MAAON,EAAO6B,YACdL,QAAS,KACAC,OAAAC,KACL,iBAAiB1B,EAAO8B,eACxB,SACF,EAEFF,UAAW5B,EAAO8B,aAClBtB,SAAA,GAACC,IAAA,IAAA,CAAEC,UAAU,mBACZD,EAAAA,IAAA,OAAA,CAAKC,UAAU,OAAOF,SAAG,kBAvCzBY,cAgDnB"}