import{i as e,t as s,s as a,j as t,l as i,v as n,m as r,I as o,h as l,F as d,r as m}from"./index-DgKTJYPj.js";import{A as c}from"./Add-CDW3IAik.js";import{c as u}from"./vendor-DTs43g_X.js";import{T as j}from"./TableLayout-Lfzqz4U2.js";import{D as p}from"./Table-ClF3X7K8.js";import{P as x}from"./index-C3c2grI_.js";import{C as h,S as f}from"./Cancel-CdtvPrMP.js";import{M as g}from"./index-CX7GIQLb.js";import"./Pagination-DupnkXEC.js";import"./index-B1LVMQTc.js";import"./SaveOutlined-CpLetC6j.js";const S=({onEdit:i})=>{const[n,r]=u.useState(1),[o,l]=u.useState(10),[d,m]=u.useState(""),{data:c,isLoading:h}=e({page:n,limit:o,search:d}),[f,{isLoading:g,isSuccess:S,data:b,error:k}]=s();u.useEffect(()=>{S&&a.success(b.message),k&&a.error(k.data.message)},[S,b,k]);const y=[{title:"No",key:"nomor",render:(e,s,a)=>(n-1)*o+a+1},{title:"Satuan",dataIndex:"name",key:"name"},{title:"Aksi",key:"action",render:(e,s)=>t.jsx(p.Button,{menu:{items:[{key:"edit",label:t.jsx("span",{onClick:()=>(e=>{i(e)})(e),children:"Edit"})},{key:"delete",label:t.jsx(x,{title:`Apakah Anda yakin ingin menghapus ${s.name}?`,okText:"Ya",cancelText:"Batal",onConfirm:()=>{return s=e.id,void f(s);var s},children:t.jsx("span",{style:{color:"red"},children:"Hapus"})})}]},children:"Pilihan Aksi"})}];return t.jsx(j,{onSearch:e=>{m(e),r(1)},isLoading:h||g,columns:y,source:c?.homebase,rowKey:"id",page:n,limit:o,totalData:c?.totalData,onChange:e=>{r(e.current),l(e.pageSize)}})},b=({title:e,open:s,setOpen:l,homebase:d,setHomebase:m})=>{const[c]=i.useForm(),[j,{isLoading:p,isSuccess:x,error:S,data:b}]=n(),k=()=>{l(!1),m(),c.resetFields()};return u.useEffect(()=>{s&&(c.resetFields(),d?c.setFieldsValue({name:d.name}):c.resetFields())},[s,d]),u.useEffect(()=>{x&&(k(),a.success(b.message)),S&&a.error(S.data.message)},[x,b,S]),t.jsx(g,{title:e,open:s,onCancel:k,destroyOnHidden:!0,footer:[t.jsx(h,{disabled:p,onClick:k},"reset"),t.jsx(f,{disabled:p,onClick:()=>c.submit()},"add")],style:{top:20},children:t.jsx(r,{tip:"Memproses data...",spinning:p,children:t.jsx(i,{form:c,layout:"vertical",onFinish:e=>{if(d){const s={...e,id:d.id};j(s)}else j(e)},children:t.jsx(i.Item,{name:"name",label:"Nama Satuan",rules:[{required:!0,message:"Nama satuan wajib diisi!"}],children:t.jsx(o,{placeholder:"Nama Satuan Pendidikan"})})})})})},{Title:k}=m,y=()=>{const[e,s]=u.useState(!1),[a,i]=u.useState(!1),[n,r]=u.useState({});return t.jsxs(l,{title:"Management Satuan",levels:["center"],children:[t.jsxs(d,{vertical:!0,gap:"middle",children:[t.jsxs(d,{justify:"space-between",children:[t.jsx(k,{level:5,children:"Management Satuan"}),t.jsx(c,{onClick:()=>s(!0)})]}),t.jsx(S,{onEdit:e=>{r(e),i(!0),s(!0)}})]}),t.jsx(b,{open:e,setOpen:()=>s(!1),title:a?"Edit Satuan":"Tambah Satuan",homebase:n,setHomebase:()=>r({})})]})};export{y as default};
//# sourceMappingURL=CenterHomebase-COWGmQ6P.js.map
