import{a as e,b as s,c as a,d as i,j as t,e as n,s as l}from"./index-DFhdulld.js";import{u as r,b as c}from"./vendor-CnnDPxwB.js";const d=()=>{const d=e(),o=r(),{user:x,isSignin:h}=s((e=>e.auth)),{data:m}=a(),p={center:"/center-dashboard",admin:"/admin-dashboard",student:"/siswa-dashboard",teacher:"/guru-dashboard",parent:"/wali-dashboard",tahfiz:"/tahfiz-dashboard",cms:"/cms-dashboard"};c.useEffect((()=>{h&&(null==x?void 0:x.level)&&o(p[x.level])}),[h,x,o]);const[u,b]=c.useState("none"),[j,g]=c.useState(!1),[f,N]=c.useState(""),[v,w]=c.useState(""),[y,k]=c.useState(!1),[S,{isLoading:C,data:z}]=i(),[M,L]=c.useState({}),E=e=>{b(e),N(""),L({})};return h&&(null==x?void 0:x.level)?t.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{height:"100vh"},children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"spinner-border text-primary",role:"status",children:t.jsx("span",{className:"visually-hidden",children:"Loading..."})}),t.jsx("p",{className:"mt-2",children:"Mengalihkan ke dashboard..."})]})}):t.jsxs("div",{children:[t.jsx("div",{className:"area",children:t.jsxs("ul",{className:"circles",children:[t.jsx("li",{}),t.jsx("li",{}),t.jsx("li",{}),t.jsx("li",{}),t.jsx("li",{}),t.jsx("li",{}),t.jsx("li",{}),t.jsx("li",{}),t.jsx("li",{}),t.jsx("li",{})]})}),t.jsxs("div",{className:"d-flex align-items-center justify-content-center flex-column gap-3",style:{height:"100vh"},children:[t.jsx("img",{src:(null==m?void 0:m.logo)?null==m?void 0:m.logo:"/logo.png",alt:"logo",style:{height:120,width:120,marginBottom:"1rem"},className:"pointer",onClick:()=>window.location.href="/"}),"none"===u&&t.jsxs("div",{className:"d-flex flex-wrap justify-content-center gap-3",children:[t.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>E("admin"),children:t.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[t.jsx("i",{className:"bi bi-person-badge-fill transition-icon",style:{fontSize:"2rem"}}),t.jsx("h5",{className:"card-title mb-0",children:"Admin"})]})}),t.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>E("teacher"),children:t.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[t.jsx("i",{className:"bi bi-person-workspace transition-icon",style:{fontSize:"2rem"}}),t.jsx("h5",{className:"card-title mb-0",children:"Guru"})]})}),t.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>E("student"),children:t.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[t.jsx("i",{className:"bi bi-mortarboard-fill transition-icon",style:{fontSize:"2rem"}}),t.jsx("h5",{className:"card-title mb-0",children:"Siswa"})]})}),t.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>E("parent"),children:t.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[t.jsx("i",{className:"bi bi-people-fill transition-icon",style:{fontSize:"2rem"}}),t.jsx("h5",{className:"card-title mb-0",children:"Wali Murid"})]})}),t.jsx("div",{className:"card bg-info text-white transition-card",style:{width:"150px",height:"150px",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},onClick:()=>{b(""),g(!0),N(""),L({})},children:t.jsxs("div",{className:"card-body d-flex flex-column align-items-center justify-content-center gap-2",children:[t.jsx("i",{className:"bi bi-person-plus-fill transition-icon",style:{fontSize:"2rem"}}),t.jsx("h5",{className:"card-title mb-0",children:"Pendaftaran"})]})})]}),"none"!==u&&!j&&t.jsxs("form",{style:{width:300},className:"d-flex flex-column gap-3",onSubmit:async e=>{var s;if(e.preventDefault(),!(()=>{const e={};return f.trim()||(e.account="Field ini wajib diisi"),v||(e.password="Password wajib diisi"),L(e),0===Object.keys(e).length})())return;const a=n.loading("Memproses login..."),i={password:v,..."student"===u?{nis:f}:"teacher"===u?{username:f}:"parent"===u?{name:f}:{email:f}};try{const e=await S(i).unwrap();d(l(e.user)),n.success("Login berhasil",{id:a}),o(p[e.user.level]||"/")}catch(t){const e=(null==(s=t.data)?void 0:s.message)||"Gagal masuk. Silakan coba lagi.";n.error(e,{id:a}),w("")}},children:[t.jsxs("div",{className:"input-group",children:[t.jsx("span",{className:"input-group-text",children:t.jsx("i",{className:"bi "+("student"===u?"bi-person-badge":"teacher"===u?"bi-person-workspace":"bi-envelope")})}),t.jsx("input",{type:"admin"===u||"parent"===u?"email":"text",placeholder:"student"===u?"NIS":"teacher"===u?"USERNAME":"EMAIL",value:f,onChange:e=>{N(e.target.value),L({...M,account:""})},required:!0,className:"form-control "+(M.account?"is-invalid":"")}),M.account&&t.jsx("div",{className:"invalid-feedback",children:M.account})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("span",{className:"input-group-text",children:t.jsx("i",{className:"bi bi-lock-fill"})}),t.jsx("input",{type:y?"text":"password",placeholder:"Password",className:"form-control "+(M.password?"is-invalid":""),value:v,onChange:e=>{w(e.target.value),L({...M,password:""})},required:!0}),M.password&&t.jsx("div",{className:"invalid-feedback",children:M.password})]}),t.jsxs("div",{className:"form-check",children:[t.jsx("input",{className:"form-check-input",type:"checkbox",id:"flexCheckDefault",checked:y,onChange:()=>{k((e=>!e))}}),t.jsx("label",{className:"form-check-label text-white",htmlFor:"flexCheckDefault",children:"Tampilkan Password"})]}),t.jsxs("div",{className:"d-flex justify-content-between",children:[t.jsxs("button",{type:"button",className:"btn btn-danger d-flex align-items-center gap-2",onClick:()=>b("none"),children:[t.jsx("i",{className:"bi bi-arrow-left"}),"Kembali"]}),t.jsx("button",{type:"submit",className:"btn btn-success d-flex align-items-center gap-2",disabled:C,children:C?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"spinner-border spinner-border-sm","aria-hidden":"true"}),t.jsx("span",{role:"status",children:"Loading..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("i",{className:"bi bi-box-arrow-in-right"}),"Masuk"]})})]})]}),j&&t.jsx(SignUp,{setRole:()=>{b("none"),g(!1),N(""),L({})}})]})]})};export{d as default};
//# sourceMappingURL=Signin-BP3lhdTe.js.map
