import{l as e,as as s,av as a,j as t,h as r,F as i,t as l,n,au as c,b as d,c as o,D as m,a0 as j,a as x,aw as h,B as u,ay as p,m as g,R as f,C as b}from"./index-DjHIOFC2.js";import{c as y}from"./vendor-BcjG7WjF.js";import{G as v}from"./index-BDwHC0LT.js";import{S as I,E as S}from"./Pagination-uAjYWOxt.js";import{A as k}from"./index-CbIH9i25.js";import{R as F}from"./ReadOutlined-CwJtbS1P.js";import{R as w}from"./TeamOutlined-16jVpmuH.js";import{R as z}from"./CalendarOutlined-C28RLWMz.js";import{C as O}from"./Collapse-BI6Gft9g.js";import{L as A}from"./index-DE-lXqlG.js";import{S as C}from"./index-B8xj0GIS.js";import{R as T}from"./FallOutlined-DsWVVaap.js";import{R as D}from"./BookOutlined-Rwl7D2RX.js";const{Title:P,Text:R,Paragraph:B}=l,{useBreakpoint:L}=v,$=({detail:e})=>{const s=e?.[0]?.attendance||[],a=e?.[1]?.attitude||[],r=e?.[2]||{summative:[],formative:[]};return t.jsxs(f,{gutter:[16,16],children:[t.jsx(b,{xs:24,md:12,lg:6,children:t.jsx(x,{size:"small",title:"Attendance",children:t.jsx(A,{dataSource:s,renderItem:e=>{const s=Object.keys(e)[0],a=e[s];return t.jsxs(A.Item,{children:[t.jsx(R,{style:{textTransform:"capitalize"},children:s}),t.jsx(R,{strong:!0,children:"presentase"===s?`${a}%`:a})]})}})})}),t.jsx(b,{xs:24,md:12,lg:6,children:t.jsx(x,{size:"small",title:"Attitude",children:t.jsx(A,{dataSource:a,renderItem:e=>{const s=Object.keys(e)[0],a=e[s];return t.jsxs(A.Item,{children:[t.jsx(R,{style:{textTransform:"capitalize"},children:s}),t.jsx(C,{value:a,precision:2,valueStyle:{fontSize:"1rem"}})]})}})})}),t.jsx(b,{xs:24,md:12,lg:8,children:t.jsx(x,{size:"small",title:"Summative",children:t.jsx(A,{dataSource:r.summative,renderItem:e=>{const s=Object.keys(e)[0],a=e[s];return t.jsxs(A.Item,{children:[t.jsx(R,{style:{textTransform:"capitalize"},children:s}),t.jsx(C,{value:a,precision:2,valueStyle:{fontSize:"1rem"}})]})}})})}),t.jsx(b,{xs:24,md:12,lg:4,children:t.jsx(x,{size:"small",title:"Formative",children:t.jsx(A,{dataSource:r.formative,renderItem:e=>t.jsx(A.Item,{children:e}),locale:{emptyText:"-"}})})})]})},G=({subject:e})=>{const[s,a]=y.useState(!1),r=L();return t.jsx(A.Item,{children:t.jsxs(x,{children:[t.jsxs(i,{justify:"space-between",align:"center",wrap:"wrap",gap:"small",children:[t.jsxs("div",{children:[t.jsx(P,{level:5,style:{marginBottom:0},children:e.name}),t.jsxs(R,{type:"secondary",children:[t.jsx(d,{})," Guru: ",e.teacher]})]}),t.jsx(C,{title:"Nilai Akhir",value:e.score,precision:2,valueStyle:{color:e.score>=75?"#3f8600":"#cf1322"},prefix:e.score>=75?t.jsx(h,{}):t.jsx(T,{})})]}),e.chapters&&e.chapters.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs(m,{orientation:"left",plain:!0,children:[t.jsx(D,{})," Chapter Bulan Ini"]}),t.jsx(A,{size:"small",dataSource:e.chapters,renderItem:e=>t.jsx(A.Item,{children:e.name})})]}),t.jsx(m,{orientation:"left",plain:!0,children:"Detail Penilaian"}),r.md?t.jsx($,{detail:e.detail}):t.jsxs(t.Fragment,{children:[t.jsx(u,{type:"primary",onClick:()=>a(!0),icon:t.jsx(p,{}),block:!0,children:"Lihat Detail Penilaian"}),t.jsx(g,{title:`Detail Penilaian: ${e.name}`,open:s,onCancel:()=>a(!1),footer:null,width:r.xs?"95vw":"80vw",style:{top:20},children:t.jsx($,{detail:e.detail})})]}),e.note&&t.jsxs(t.Fragment,{children:[t.jsx(m,{orientation:"left",plain:!0,children:"Catatan Guru"}),t.jsxs(B,{italic:!0,children:['"',e.note,'"']})]})]})},`${e.name}-${e.teacher}`)},K=()=>{const l=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],h=l.map(e=>({label:e,value:e})),[u,p]=y.useState(null),[g]=e.useForm(),{user:f}=s(e=>e.auth),b=f?.id,v=f?.periode;y.useEffect(()=>{const e=(new Date).getMonth(),s=l[0===e?11:e-1];p(s),g.setFieldsValue({month:s})},[f,g]);const{data:C,error:T,isFetching:D}=a({studentId:b,month:u,periode:v},{skip:!b||!u||!v}),B=L(),$=C?.[0],K=e=>t.jsx(A,{itemLayout:"vertical",dataSource:e,renderItem:(e,s)=>t.jsx(G,{subject:e},s)});return t.jsx(r,{title:`Laporan Akademik ${f?.name}`,levels:["student"],children:t.jsxs(i,{vertical:!0,gap:"large",children:[t.jsx(e,{form:g,layout:"vertical",children:t.jsx(e.Item,{name:"month",label:t.jsx(P,{level:5,style:{margin:0},children:"Pilih Bulan Laporan"}),children:t.jsx(I,{placeholder:"Pilih Bulan",onChange:e=>p(e),options:h,style:{width:300}})})}),D&&t.jsx("div",{style:{textAlign:"center",marginTop:50},children:t.jsx(n,{size:"large"})}),T&&t.jsx(k,{message:"Terjadi Kesalahan",description:T?.data?.message||"Gagal memuat data.",type:"error",showIcon:!0}),!D&&$&&t.jsxs(t.Fragment,{children:[t.jsxs(c,{bordered:!0,column:B.md?2:1,size:"small",children:[t.jsx(c.Item,{label:t.jsxs(t.Fragment,{children:[t.jsx(d,{})," Nama Siswa"]}),span:B.md?2:1,children:t.jsxs(R,{strong:!0,children:[$.name," (",$.nis,")"]})}),t.jsx(c.Item,{label:t.jsxs(t.Fragment,{children:[t.jsx(o,{})," Homebase"]}),children:$.homebase}),t.jsxs(c.Item,{label:t.jsxs(t.Fragment,{children:[t.jsx(F,{})," Kelas"]}),children:[$.grade," - ",$.class]}),t.jsx(c.Item,{label:t.jsxs(t.Fragment,{children:[t.jsx(w,{})," Wali Kelas"]}),children:$.teacher_homeroom}),t.jsx(c.Item,{label:t.jsxs(t.Fragment,{children:[t.jsx(z,{})," Periode Laporan"]}),children:t.jsxs(R,{strong:!0,children:[$.periode," - ",$.month]})})]}),t.jsx(m,{}),t.jsx(O,{accordion:!0,defaultActiveKey:["0"],ghost:!0,items:$.category.map((e,s)=>({key:s,label:t.jsx(P,{level:5,children:e.name}),children:"Diniyah"===e.name&&e.branch?t.jsx(O,{items:e.branch.map((e,s)=>({key:s,label:t.jsxs(i,{justify:"space-between",style:{width:"100%"},children:[t.jsx(R,{strong:!0,children:e.name}),t.jsxs(j,{color:"blue",children:["Rata-rata Nilai: ",e.score]})]}),children:K(e.subjects)}))}):K(e.subjects)}))})]}),!D&&!$&&u&&!T&&t.jsx(x,{children:t.jsx(S,{description:"Data laporan untuk bulan yang dipilih tidak tersedia."})})]})})};export{K as default};
