{"version":3,"file":"Layout-BdxnsoD5.js","sources":["../../src/page/cms/layout/Layout.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\r\nimport {\r\n  FaHome,\r\n  FaLightbulb,\r\n  FaBuilding,\r\n  FaComments,\r\n  FaTags,\r\n  FaNewspaper,\r\n  FaCog,\r\n  FaBars,\r\n  FaTimes,\r\n  FaUser,\r\n} from \"react-icons/fa\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useLogoutMutation } from \"../../../controller/api/auth/ApiAuth\";\r\nimport { setLogout } from \"../../../controller/slice/AuthSlice\";\r\nimport { toast } from \"react-hot-toast\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Meta from \"../../../components/meta/Meta\";\r\n\r\nconst Layout = ({ children, title, desc, levels }) => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const [isSidebarOpen, setIsSidebarOpen] = useState(true);\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 768);\r\n\r\n  const { user, isSignin } = useSelector((state) => state.auth);\r\n  const [logout, { isSuccess, isLoading, error, reset }] = useLogoutMutation();\r\n\r\n  // Handle window resize\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      const mobile = window.innerWidth < 768;\r\n      setIsMobile(mobile);\r\n\r\n      // Auto-close sidebar on mobile\r\n      if (mobile && isSidebarOpen) {\r\n        setIsSidebarOpen(false);\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"resize\", handleResize);\r\n    return () => window.removeEventListener(\"resize\", handleResize);\r\n  }, [isSidebarOpen]);\r\n\r\n  const logoutHandler = () => {\r\n    toast.promise(\r\n      logout()\r\n        .unwrap()\r\n        .then((res) => res.message),\r\n      {\r\n        loading: \"Memproses...\",\r\n        success: (message) => message,\r\n        error: (err) => err.data.message,\r\n      }\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isSuccess) {\r\n      reset();\r\n      dispatch(setLogout());\r\n      window.location.href = \"/signin\";\r\n    }\r\n\r\n    if (error) {\r\n      reset();\r\n    }\r\n  }, [isSuccess, error]);\r\n\r\n  useEffect(() => {\r\n    const timeout = setTimeout(() => {\r\n      if (!user || !isSignin || !levels.includes(user?.level)) {\r\n        if (user === null || (user && Object.keys(user).length === 0)) {\r\n          window.location.href = \"/signin\";\r\n        } else {\r\n          window.location.href = \"/signin\";\r\n        }\r\n      }\r\n    }, 500);\r\n\r\n    return () => clearTimeout(timeout);\r\n  }, [user, isSignin, levels]);\r\n\r\n  const menuItems = [\r\n    {\r\n      id: \"Dashboard\",\r\n      name: \"Dashboard\",\r\n      icon: <FaHome />,\r\n      path: \"/cms-dashboard\",\r\n    },\r\n    {\r\n      id: \"reason\",\r\n      name: \"Alasan\",\r\n      icon: <FaLightbulb />,\r\n      path: \"/cms-reason\",\r\n    },\r\n    {\r\n      id: \"facility\",\r\n      name: \"Fasilitas\",\r\n      icon: <FaBuilding />,\r\n      path: \"/cms-facility\",\r\n    },\r\n    {\r\n      id: \"testimoni\",\r\n      name: \"Testimoni\",\r\n      icon: <FaComments />,\r\n      path: \"/cms-testimoni\",\r\n    },\r\n    {\r\n      id: \"category\",\r\n      name: \"Kategori\",\r\n      icon: <FaTags />,\r\n      path: \"/cms-category\",\r\n    },\r\n    { id: \"news\", name: \"Berita\", icon: <FaNewspaper />, path: \"/cms-news\" },\r\n    {\r\n      id: \"settings\",\r\n      name: \"Pengaturan\",\r\n      icon: <FaCog />,\r\n      path: \"/cms-settings\",\r\n    },\r\n  ];\r\n\r\n  const sidebarVariants = {\r\n    open: {\r\n      x: 0,\r\n      transition: {\r\n        type: \"spring\",\r\n        stiffness: 300,\r\n        damping: 30,\r\n      },\r\n    },\r\n    closed: {\r\n      x: \"-100%\",\r\n      transition: {\r\n        type: \"spring\",\r\n        stiffness: 300,\r\n        damping: 30,\r\n      },\r\n    },\r\n  };\r\n\r\n  const contentVariants = {\r\n    open: {\r\n      marginLeft: isMobile ? \"0\" : \"250px\",\r\n      transition: {\r\n        type: \"spring\",\r\n        stiffness: 300,\r\n        damping: 30,\r\n      },\r\n    },\r\n    closed: {\r\n      marginLeft: \"0\",\r\n      transition: {\r\n        type: \"spring\",\r\n        stiffness: 300,\r\n        damping: 30,\r\n      },\r\n    },\r\n  };\r\n\r\n  return (\r\n    <div className='d-flex'>\r\n      <Meta title={title} desc={desc} />\r\n      {/* Sidebar */}\r\n      <motion.div\r\n        className='sidebar bg-dark text-white'\r\n        initial={isSidebarOpen ? \"open\" : \"closed\"}\r\n        animate={isSidebarOpen ? \"open\" : \"closed\"}\r\n        variants={sidebarVariants}\r\n        style={{\r\n          position: \"fixed\",\r\n          top: 0,\r\n          left: 0,\r\n          height: \"100vh\",\r\n          width: \"250px\",\r\n          zIndex: 1050,\r\n          overflowY: \"auto\",\r\n        }}>\r\n        <div className='p-3 d-flex justify-content-between align-items-center border-bottom'>\r\n          <h5 className='mb-0'>CMS Admin</h5>\r\n          <motion.button\r\n            className='btn btn-sm btn-outline-light'\r\n            onClick={() => setIsSidebarOpen(false)}\r\n            whileHover={{ scale: 1.1 }}\r\n            whileTap={{ scale: 0.9 }}>\r\n            <i className='bi bi-x-lg'></i>\r\n          </motion.button>\r\n        </div>\r\n\r\n        <div className='p-3'>\r\n          <ul className='nav flex-column'>\r\n            {menuItems.map((item) => (\r\n              <li className='nav-item mb-2' key={item.id}>\r\n                <Link\r\n                  to={item.path}\r\n                  className={`nav-link d-flex align-items-center ${\r\n                    location.pathname === item.path\r\n                      ? \"active bg-primary text-white\"\r\n                      : \"text-white\"\r\n                  }`}\r\n                  onClick={() => isMobile && setIsSidebarOpen(false)}>\r\n                  <span className='me-2'>{item.icon}</span>\r\n                  {item.name}\r\n                </Link>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      </motion.div>\r\n\r\n      {/* Main Content */}\r\n      <motion.div\r\n        className='main-content'\r\n        initial={isSidebarOpen ? \"open\" : \"closed\"}\r\n        animate={isSidebarOpen ? \"open\" : \"closed\"}\r\n        variants={contentVariants}\r\n        style={{\r\n          width: \"100%\",\r\n          minHeight: \"100vh\",\r\n          backgroundColor: \"#f8f9fa\",\r\n        }}>\r\n        {/* Top Navigation */}\r\n        <nav className='navbar navbar-expand-lg navbar-light bg-white shadow-sm'>\r\n          <div className='container-fluid d-flex justify-content-between align-items-center px-2'>\r\n            <motion.button\r\n              className='btn d-flex align-items-center justify-content-center p-2'\r\n              onClick={() => setIsSidebarOpen(!isSidebarOpen)}\r\n              whileHover={{ scale: 1.1 }}\r\n              whileTap={{ scale: 0.9 }}\r\n              style={{ width: \"40px\", height: \"40px\" }}>\r\n              <FaBars className='fs-5' />\r\n            </motion.button>\r\n\r\n            <div className='d-flex align-items-center'>\r\n              <div className='dropdown'>\r\n                <button\r\n                  className='btn btn-sm btn-outline-primary'\r\n                  type='button'\r\n                  id='dropdownMenuButton'\r\n                  data-bs-toggle='dropdown'\r\n                  aria-expanded='false'>\r\n                  <FaUser className='me-1 fs-5' />\r\n                  <span className='d-none d-lg-inline'>Admin</span>\r\n                </button>\r\n                <ul\r\n                  className='dropdown-menu dropdown-menu-end shadow-sm'\r\n                  aria-labelledby='dropdownMenuButton'>\r\n                  <li>\r\n                    <a className='dropdown-item py-2' href='#'>\r\n                      <FaUser className='me-2' /> Profile\r\n                    </a>\r\n                  </li>\r\n                  <li>\r\n                    <a className='dropdown-item py-2' href='#'>\r\n                      <FaCog className='me-2' /> Settings\r\n                    </a>\r\n                  </li>\r\n                  <li>\r\n                    <hr className='dropdown-divider' />\r\n                  </li>\r\n                  <li>\r\n                    <a\r\n                      className='dropdown-item py-2 text-danger'\r\n                      onClick={logoutHandler}>\r\n                      <FaTimes className='me-2' /> Logout\r\n                    </a>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </nav>\r\n\r\n        {/* Page Content */}\r\n        <div className='p-3 p-md-4'>{children}</div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Layout;\r\n"],"names":["Layout","children","title","desc","levels","dispatch","useDispatch","useNavigate","location","useLocation","isSidebarOpen","setIsSidebarOpen","useState","isMobile","setIsMobile","window","innerWidth","user","isSignin","useSelector","state","auth","logout","isSuccess","isLoading","error","reset","useLogoutMutation","useEffect","handleResize","mobile","addEventListener","removeEventListener","setLogout","href","timeout","setTimeout","includes","level","Object","keys","length","clearTimeout","menuItems","id","name","icon","FaHome","path","FaLightbulb","FaBuilding","FaComments","FaTags","jsxRuntimeExports","jsx","FaNewspaper","FaCog","contentVariants","open","marginLeft","transition","type","stiffness","damping","closed","jsxs","className","Meta","motion","div","initial","animate","variants","x","style","position","top","left","height","width","zIndex","overflowY","button","onClick","whileHover","scale","whileTap","map","item","Link","to","pathname","minHeight","backgroundColor","FaBars","FaUser","c","promise","unwrap","then","res","message","loading","success","err","data","FaTimes"],"mappings":"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"}