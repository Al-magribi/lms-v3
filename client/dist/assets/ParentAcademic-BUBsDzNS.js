import{as as e,l as s,av as a,j as t,F as r,t as i,n as l,a as n,au as d,b as c,c as o,m,D as j,B as x,aw as h,R as u,C as p,h as f,y}from"./index-DjHIOFC2.js";import{c as g}from"./vendor-BcjG7WjF.js";import{G as v}from"./index-BDwHC0LT.js";import{S as b,E as S}from"./Pagination-uAjYWOxt.js";import{R as I}from"./CalendarOutlined-C28RLWMz.js";import{A as k}from"./index-CbIH9i25.js";import{R as w}from"./ReadOutlined-CwJtbS1P.js";import{R as C}from"./TeamOutlined-16jVpmuH.js";import{C as z}from"./Collapse-BI6Gft9g.js";import{L as A}from"./index-DE-lXqlG.js";import{S as F}from"./index-B8xj0GIS.js";import{R as O}from"./FallOutlined-DsWVVaap.js";import{R as D}from"./BookOutlined-Rwl7D2RX.js";const{Title:T,Text:B,Paragraph:R}=i,{useBreakpoint:L}=v,N=({detail:e})=>{const s=e?.[0]?.attendance||[],a=e?.[1]?.attitude||[],r=e?.[2]||{summative:[],formative:[]};return t.jsxs(u,{gutter:[16,16],children:[t.jsx(p,{xs:24,md:12,lg:6,children:t.jsx(n,{size:"small",title:"Attendance",children:t.jsx(A,{dataSource:s,renderItem:e=>{const s=Object.keys(e)[0],a=e[s];return t.jsxs(A.Item,{children:[t.jsx(B,{style:{textTransform:"capitalize"},children:s}),t.jsx(B,{strong:!0,children:"presentase"===s?`${a}%`:a})]})}})})}),t.jsx(p,{xs:24,md:12,lg:6,children:t.jsx(n,{size:"small",title:"Attitude",children:t.jsx(A,{dataSource:a,renderItem:e=>{const s=Object.keys(e)[0],a=e[s];return t.jsxs(A.Item,{children:[t.jsx(B,{style:{textTransform:"capitalize"},children:s}),t.jsx(F,{value:a,precision:2,valueStyle:{fontSize:"1rem"}})]})}})})}),t.jsx(p,{xs:24,md:12,lg:8,children:t.jsx(n,{size:"small",title:"Summative",children:t.jsx(A,{dataSource:r.summative,renderItem:e=>{const s=Object.keys(e)[0],a=e[s];return t.jsxs(A.Item,{children:[t.jsx(B,{style:{textTransform:"capitalize"},children:s}),t.jsx(F,{value:a,precision:2,valueStyle:{fontSize:"1rem"}})]})}})})}),t.jsx(p,{xs:24,md:12,lg:4,children:t.jsx(n,{size:"small",title:"Formative",children:t.jsx(A,{dataSource:r.formative,renderItem:e=>t.jsx(A.Item,{children:e}),locale:{emptyText:"-"}})})})]})},P=()=>{const i=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],f=i.map(e=>({label:e,value:e})),[y,v]=g.useState(null),[P,$]=g.useState(!1),[G,K]=g.useState(null),{user:M}=e(e=>e.auth),[E]=s.useForm(),H=!L().md,J=M?.student_id,V=M?.periode;g.useEffect(()=>{const e=(new Date).getMonth(),s=i[0===e?11:e-1];v(s),E.setFieldsValue({month:s})},[E,i]);const{data:W,error:_,isFetching:q}=a({studentId:J,month:y,periode:V},{skip:!J||!y||!V}),U=W&&W,Q=()=>{$(!1),K(null)},X=e=>t.jsx(A,{itemLayout:"vertical",dataSource:e,renderItem:e=>t.jsx(A.Item,{children:t.jsxs(n,{children:[t.jsxs(r,{justify:"space-between",align:"center",wrap:"wrap",gap:"small",children:[t.jsxs("div",{children:[t.jsx(T,{level:5,style:{marginBottom:0},children:e.name}),t.jsxs(B,{type:"secondary",children:[t.jsx(c,{})," Guru: ",e.teacher]})]}),t.jsx(F,{title:"Nilai Akhir Mapel",value:e.score,precision:2,valueStyle:{color:e.score>=75?"#3f8600":"#cf1322"},prefix:e.score>=75?t.jsx(h,{}):t.jsx(O,{})})]}),e.chapters&&e.chapters.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs(j,{orientation:"left",plain:!0,children:[t.jsx(D,{})," Chapter Bulan Ini"]}),H?t.jsx(A,{dataSource:e.chapters,renderItem:e=>t.jsx(A.Item,{children:t.jsxs(u,{align:"middle",justify:"space-between",style:{width:"100%"},children:[t.jsxs(p,{xs:24,sm:18,children:[t.jsx(B,{strong:!0,children:e.name}),t.jsx("br",{}),t.jsxs(B,{type:"secondary",children:["Nilai: ",e.score]})]}),t.jsx(p,{xs:24,sm:6,children:t.jsx(r,{justify:"end",children:t.jsx(x,{onClick:()=>(e=>{K(e),$(!0)})(e),children:"Detail"})})})]})})}):t.jsx(z,{accordion:!0,items:e.chapters.map((e,s)=>({key:s,label:t.jsxs(r,{justify:"space-between",align:"center",style:{width:"100%"},children:[t.jsx(B,{strong:!0,children:e.name}),t.jsx(F,{title:"Nilai",value:e.score,precision:2,valueStyle:{fontSize:"1rem",color:e.score>=75?"#3f8600":"#cf1322"}})]}),children:t.jsxs(t.Fragment,{children:[t.jsxs(R,{italic:!0,children:[t.jsx("strong",{children:"Catatan Guru:"}),' "',e.note,'"']}),t.jsx(j,{plain:!0,children:"Detail Penilaian Chapter"}),t.jsx(N,{detail:e.detail})]})}))})]})]})},`${e.name}-${e.teacher}`)});return t.jsxs(r,{vertical:!0,gap:"middle",children:[t.jsx(s,{form:E,layout:"vertical",children:t.jsx(s.Item,{name:"month",label:t.jsxs(T,{level:4,style:{margin:0},children:[t.jsx(I,{})," Laporan Bulan"]}),rules:[{required:!0}],children:t.jsx(b,{options:f,onChange:e=>v(e),style:{maxWidth:"240px"}})})}),q&&t.jsx(l,{size:"large"}),_&&t.jsx(k,{message:"Error",description:"Gagal memuat data laporan bulanan.",type:"error",showIcon:!0}),U&&t.jsxs(t.Fragment,{children:[t.jsx(n,{children:t.jsxs(d,{title:"Data Siswa",bordered:!0,column:H?1:2,children:[t.jsxs(d.Item,{label:"Nama",children:[t.jsx(c,{})," ",U.name]}),t.jsx(d.Item,{label:"NIS",children:U.nis}),t.jsxs(d.Item,{label:"Kelas",children:[t.jsx(w,{})," ",U.class]}),t.jsxs(d.Item,{label:"Wali Kelas",children:[t.jsx(C,{})," ",U.teacher_homeroom]}),t.jsxs(d.Item,{label:"Homebase",children:[t.jsx(o,{})," ",U.homebase]}),t.jsxs(d.Item,{label:"Periode",children:[t.jsx(I,{})," ",U.periode]})]})}),t.jsx(z,{defaultActiveKey:["0"],items:U.category.map((e,s)=>({key:String(s),label:t.jsx(T,{level:5,style:{margin:0},children:e.name}),children:X(e.subjects)}))})]}),!q&&!U&&y&&!_&&t.jsx(n,{children:t.jsx(S,{description:"Data laporan untuk bulan yang dipilih tidak tersedia."})}),G&&t.jsx(m,{title:`Detail Penilaian: ${G.name}`,open:P,onCancel:Q,footer:[t.jsx(x,{onClick:Q,children:"Tutup"},"back")],width:H?"100vw":"80vw",style:{top:20},children:t.jsxs("div",{style:{height:"80vh",overflow:"auto"},children:[t.jsxs(R,{italic:!0,children:[t.jsx("strong",{children:"Catatan Guru:"}),' "',G.note,'"']}),t.jsx(j,{plain:!0,children:"Detail Penilaian Chapter"}),t.jsx(N,{detail:G.detail})]})})]})},$=()=>t.jsx(k,{type:"info",showIcon:!0,message:"Laporan Semester",description:"Halaman ini masih dalam tahap pengembangan"}),G=()=>{const{user:s}=e(e=>e.auth),a=[{label:"Bulanan",key:"1",children:t.jsx(P,{})},{label:"Semester",key:"2",children:t.jsx($,{})}];return t.jsxs(f,{title:"Laporan Akademik",levels:["parent"],children:[t.jsx(i.Title,{level:5,children:`Laporan Akademik ${s?.student}`}),t.jsx(y,{centered:!0,defaultActiveKey:"1",items:a})]})};export{G as default};
