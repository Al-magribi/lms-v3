import{au as e,aN as s,aO as t,j as a,e as i,b as l,ab as d}from"./index-C8fo62Vt.js";import{b as c}from"./vendor-CnnDPxwB.js";import{L as n}from"./Layout-CFf0ToI4.js";import{S as r}from"./react-select.esm-C351JJ6e.js";import{T as m}from"./Table-CiFvazZY.js";import"./index-B8CuzAwO.js";import"./index-g0LoU_Ie.js";import"./index-BpPDjKa5.js";const h=({classid:l,subjectid:d})=>{const[n,r]=c.useState(1),[h,x]=c.useState(10),[o,u]=c.useState(""),{data:j,isLoading:p}=e({page:n,limit:h,search:o,classid:l},{skip:!l}),{data:g}=s({classid:l,subjectid:d},{skip:!l||!d}),[N]=t(),{students:b,totalData:k,totalPages:v}=j||{},f=async({studentid:e,note:s})=>{const t={classid:l,subjectid:d,studentid:e,note:s};i.promise(N(t).unwrap().then((e=>e.message)),{loading:"Memproses...",success:e=>e,error:e=>{var s;return(null==(s=e.data)?void 0:s.message)||"Terjadi kesalahan"}})};return a.jsx(a.Fragment,{children:l&&d?b?a.jsx(m,{isLoading:p,page:n,setPage:r,limit:h,setLimit:x,setSearch:u,totalData:k,totalPages:v,children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-hover align-middle",children:[a.jsx("thead",{className:"bg-light",children:a.jsxs("tr",{children:[a.jsx("th",{className:"align-middle text-center",style:{width:"5%"},children:"No"}),a.jsx("th",{className:"align-middle text-center",style:{width:"10%"},children:"NIS"}),a.jsx("th",{className:"align-middle text-center",style:{width:"25%"},children:"Nama"}),a.jsx("th",{className:"align-middle text-center",style:{width:"10%"},children:"Tingkat"}),a.jsx("th",{className:"align-middle text-center",style:{width:"15%"},children:"Kelas"}),a.jsxs("th",{className:"align-middle text-center",style:{width:"10%"},children:[a.jsx("i",{className:"bi bi-check-circle text-success"}),a.jsx("div",{className:"small",children:"Hadir"})]}),a.jsxs("th",{className:"align-middle text-center",style:{width:"10%"},children:[a.jsx("i",{className:"bi bi-heart-pulse text-primary"}),a.jsx("div",{className:"small",children:"Sakit"})]}),a.jsxs("th",{className:"align-middle text-center",style:{width:"10%"},children:[a.jsx("i",{className:"bi bi-envelope-paper text-info"}),a.jsx("div",{className:"small",children:"Izin"})]}),a.jsxs("th",{className:"align-middle text-center",style:{width:"10%"},children:[a.jsx("i",{className:"bi bi-x-circle text-danger"}),a.jsx("div",{className:"small",children:"Alpa"})]})]})}),a.jsx("tbody",{children:b.map(((e,s)=>{var t,i,l,d;return a.jsxs("tr",{children:[a.jsx("td",{className:"text-center align-middle",children:(n-1)*h+s+1}),a.jsx("td",{className:"text-center align-middle",children:e.nis}),a.jsx("td",{className:"align-middle",children:e.student_name}),a.jsx("td",{className:"text-center align-middle",children:e.grade_name}),a.jsx("td",{className:"text-center align-middle",children:e.class_name}),a.jsx("td",{className:"text-center align-middle",children:a.jsx("div",{className:"form-check d-flex justify-content-center",children:a.jsx("input",{className:"form-check-input border-success",type:"checkbox",style:{width:"1.5em",height:"1.5em"},checked:"Hadir"===(null==(t=null==g?void 0:g.find((s=>s.studentid===e.student)))?void 0:t.note),onChange:s=>{f({studentid:e.student,note:"Hadir",checked:s.target.checked})}})})}),a.jsx("td",{className:"text-center align-middle",children:a.jsx("div",{className:"form-check d-flex justify-content-center",children:a.jsx("input",{className:"form-check-input border-primary",type:"checkbox",style:{width:"1.5em",height:"1.5em"},checked:"Sakit"===(null==(i=null==g?void 0:g.find((s=>s.studentid===e.student)))?void 0:i.note),onChange:s=>{f({studentid:e.student,note:"Sakit",checked:s.target.checked})}})})}),a.jsx("td",{className:"text-center align-middle",children:a.jsx("div",{className:"form-check d-flex justify-content-center",children:a.jsx("input",{className:"form-check-input border-info",type:"checkbox",style:{width:"1.5em",height:"1.5em"},checked:"Izin"===(null==(l=null==g?void 0:g.find((s=>s.studentid===e.student)))?void 0:l.note),onChange:s=>{f({studentid:e.student,note:"Izin",checked:s.target.checked})}})})}),a.jsx("td",{className:"text-center align-middle",children:a.jsx("div",{className:"form-check d-flex justify-content-center",children:a.jsx("input",{className:"form-check-input border-danger",type:"checkbox",style:{width:"1.5em",height:"1.5em"},checked:"Alpa"===(null==(d=null==g?void 0:g.find((s=>s.studentid===e.student)))?void 0:d.note),onChange:s=>{f({studentid:e.student,note:"Alpa",checked:s.target.checked})}})})})]},e.id)}))})]})})}):a.jsxs("div",{className:"text-center py-5",children:[a.jsx("div",{className:"mb-3",children:a.jsx("i",{className:"bi bi-people display-1 text-muted"})}),a.jsx("h5",{className:"fw-bold text-muted mb-2",children:"Data Siswa Tidak Tersedia"}),a.jsx("p",{className:"text-muted mb-0",children:"Tidak ada data siswa yang ditemukan untuk kelas ini"})]}):a.jsxs("div",{className:"text-center py-5",children:[a.jsx("div",{className:"mb-3",children:a.jsx("i",{className:"bi bi-clipboard2-check display-1 text-muted"})}),a.jsx("h5",{className:"fw-bold text-muted mb-2",children:"Pilih Data Presensi"}),a.jsx("p",{className:"text-muted mb-0",children:"Silakan pilih mata pelajaran dan kelas terlebih dahulu"})]})})},x=()=>{var e;const{user:s}=l((e=>e.auth)),{data:t}=d({page:"",limit:"",search:""}),[i,m]=c.useState(""),[x,o]=c.useState(""),u=null==(e=null==s?void 0:s.subjects)?void 0:e.map((e=>({value:e.id,label:e.name}))),j=null==t?void 0:t.map((e=>({value:e.id,label:e.name})));return a.jsxs(n,{title:"Presensi Siswa",levels:["teacher"],children:[a.jsxs("div",{className:"row g-2 mb-4",children:[a.jsx("div",{className:"col-12 col-lg-3",children:a.jsx(r,{options:u,isSearchable:!0,placeholder:"Pilih Mata Pelajaran",onChange:e=>o(e.value)})}),a.jsx("div",{className:"col-12 col-lg-3",children:a.jsx(r,{options:j,isSearchable:!0,placeholder:"Pilih Kelas",onChange:e=>m(e.value)})})]}),a.jsx(h,{classid:i,subjectid:x})]})};export{x as default};
//# sourceMappingURL=TeacherPresensi-CiBNf9Dq.js.map
