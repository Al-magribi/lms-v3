import{ad as e,j as t,e as a,ae as s,af as n}from"./index-mQl5svQ-.js";import{b as i}from"./vendor-DfXzdC0j.js";import{L as r}from"./Layout-CMxW7Kh2.js";import{T as l}from"./Table-D4ODITAU.js";import"./index-CGMX7dKw.js";import"./index-hpZ4eOv6.js";import"./index-DyuEXp_a.js";const d=({detail:s,setDetail:n})=>{const[r,l]=i.useState(""),[d,c]=i.useState(""),[m,{isSuccess:o,isLoading:x,error:u,reset:g}]=e();return i.useEffect((()=>{s&&(l(s.id),c(s.name))}),[s]),i.useEffect((()=>{o&&(g(),l(""),c(""),n("")),u&&g()}),[o,u]),t.jsxs("form",{onSubmit:e=>{e.preventDefault();const t={id:r,name:d};a.promise(m(t).unwrap().then((e=>e.message)),{loading:"Menyimpan data...",success:e=>e,error:e=>e.data.message})},className:"d-flex align-items-center justify-content-between gap-2",children:[t.jsx("input",{type:"text",name:"grade",id:"grade",className:"form-control",placeholder:"Tingkat",required:!0,value:d||"",onChange:e=>c(e.target.value)}),t.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[t.jsx("button",{type:"button",className:"btn btn-sm btn-warning",onClick:()=>{l(""),c(""),n("")},children:"Batal"}),t.jsx("button",{type:"submit",className:"btn btn-sm btn-success",disabled:x,children:"Simpan"})]})]})},c=({setDetail:e})=>{const[r,d]=i.useState(1),[c,m]=i.useState(10),[o,x]=i.useState(""),{data:u={},isLoading:g}=s({page:r,limit:c,search:o}),{grades:j=[],totalData:h,totalPages:b}=u,[p,{isSuccess:f,isLoading:N,error:k,reset:v}]=n();return i.useEffect((()=>{f&&v(),k&&v()}),[f,k]),t.jsx(l,{page:r,setPage:d,setLimit:m,setSearch:x,totalData:h,totalPages:b,isLoading:g,children:t.jsxs("table",{className:"table table-bordered table-striped table-hover",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-center",children:"No"}),t.jsx("th",{className:"text-center",children:"Satuan"}),t.jsx("th",{className:"text-center",children:"Tingkat"}),t.jsx("th",{className:"text-center",children:"Aksi"})]})}),t.jsx("tbody",{children:null==j?void 0:j.map(((s,n)=>t.jsxs("tr",{children:[t.jsx("td",{className:"text-center align-middle",children:(r-1)*c+n+1}),t.jsx("td",{className:"align-middle",children:s.homebase}),t.jsx("td",{className:"text-center align-middle",children:s.name}),t.jsx("td",{className:"text-center align-middle",children:t.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[t.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>e(s),children:t.jsx("i",{className:"bi bi-pencil-square"})}),t.jsx("button",{className:"btn btn-sm btn-danger",disabled:N,onClick:()=>{return e=s.id,void(window.confirm("Apakah anda yakin ingin menghapus data tingkat dan semua data yang terkait dengan tingkat ini?")&&a.promise(p(e).unwrap().then((e=>e.message)),{loading:"Memproses...",success:e=>e,error:e=>e.data.message}));var e},children:t.jsx("i",{className:"bi bi-folder-minus"})})]})})]},n)))})]})})},m=()=>{const[e,a]=i.useState("");return t.jsx(r,{title:"Management Tingkat Pendidikan",levels:["admin"],children:t.jsxs("div",{className:"container d-flex flex-column gap-4",children:[t.jsx(d,{detail:e,setDetail:a}),t.jsx(c,{setDetail:a})]})})};export{m as default};
//# sourceMappingURL=AdminGrade-ChssRIOL.js.map
