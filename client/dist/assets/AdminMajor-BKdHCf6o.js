import{z as e,j as s,d as a,A as t,B as l,V as n}from"./index-C0Vkf_Fr.js";import{b as i}from"./vendor-BYWiIb5-.js";import{L as r}from"./Layout-DvlfxgHJ.js";import{T as d}from"./Table-kZojilpO.js";const c=({detail:t,setDetail:l})=>{const[n,r]=i.useState(""),[d,c]=i.useState(""),[o,{isSuccess:m,isLoading:u,error:b,reset:j}]=e();return i.useEffect((()=>{m&&(j(),c(""),r("")),b&&j()}),[m,b]),i.useEffect((()=>{t&&(r(t.id),c(t.name))}),[t]),s.jsxs("form",{onSubmit:e=>{e.preventDefault();const s={id:n,name:d};a.promise(o(s).unwrap().then((e=>e.message)),{loading:"Meyimpan data...",success:e=>e,error:e=>e.data.message})},className:"bg-white rounded border d-flex flex-column gap-2 p-2",children:[s.jsx("p",{className:"m-0 h6",children:"Jurusan"}),s.jsx("input",{type:"text",name:"major",id:"major",className:"form-control",placeholder:"Jurusan",required:!0,value:d||"",onChange:e=>c(e.target.value)}),s.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[s.jsx("button",{type:"button",className:"btn btn-sm btn-warning",onClick:()=>{l({}),r(""),c("")},children:"Batal"}),s.jsx("button",{type:"submit",className:"btn btn-sm btn-success",disabled:u,children:"Simpan"})]})]})},o=[{label:"No"},{label:"Satuan"},{label:"Jurusan"},{label:"aksi"}],m=({setDetail:e})=>{const[a,r]=i.useState(1),[c,m]=i.useState(10),[u,b]=i.useState(""),{data:j={},isLoading:x}=t({page:a,limit:c,search:u}),{majors:h=[],totalData:g,totalPages:p}=j,[f,{isSuccess:N,isLoading:v,error:S,reset:y}]=l();return i.useEffect((()=>{N&&y(),S&&y()}),[N,S]),s.jsx(d,{page:a,setPage:r,setLimit:m,setSearch:b,totalData:g,totalPages:p,isLoading:x,children:s.jsxs("table",{className:"table table-bordered table-striped table-hover",children:[s.jsx("thead",{children:s.jsx("tr",{children:o.map((e=>s.jsx("th",{className:"text-center",children:e.label},e.label)))})}),s.jsx("tbody",{children:(null==h?void 0:h.length)>0?null==h?void 0:h.map(((t,l)=>s.jsxs("tr",{children:[s.jsx("td",{className:"text-center align-middle",children:(a-1)*c+l+1}),s.jsx("td",{className:"align-middle",children:t.homebase}),s.jsx("td",{className:"align-middle",children:t.name}),s.jsx("td",{className:"text-center align-middle",children:s.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[s.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>e(t),children:s.jsx("i",{className:"bi bi-pencil-square"})}),s.jsx("button",{className:"btn btn-sm btn-danger",disabled:v,onClick:()=>{return e=t.id,void n.promise(f(e).unwrap().then((e=>e.message)),{loading:"Memproses...",success:e=>e,error:e=>e.data.message});var e},children:s.jsx("i",{className:"bi bi-folder-minus"})})]})})]},l))):s.jsx("tr",{children:s.jsx("td",{colSpan:4,children:"Data tidak tersedia"})})})]})})},u=()=>{const[e,a]=i.useState("");return s.jsx(r,{title:"Jurusan",levels:["admin"],children:s.jsxs("div",{className:"row g-2",children:[s.jsx("div",{className:"col-lg-3 col-2",children:s.jsx(c,{detail:e,setDetail:a})}),s.jsx("div",{className:"col-lg-9 col-2",children:s.jsx(m,{setDetail:a})})]})})};export{u as default};
//# sourceMappingURL=AdminMajor-BKdHCf6o.js.map
