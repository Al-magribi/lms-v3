import{b8 as e,j as a,d as t,b9 as s,ba as n,bb as l,bc as i}from"./index-CNbAajcm.js";import{b as r}from"./vendor-BYWiIb5-.js";import{L as d}from"./Layout-_SAc74nU.js";import{T as c}from"./Table-BSwODE4h.js";import"./index-C-OX0RB-.js";import"./index-DLmIb9aI.js";const m=({detail:s,setDetail:n})=>{const[l,i]=r.useState(""),[d,c]=r.useState(""),[m,{isLoading:h,isSuccess:o,isError:u,reset:x}]=e();return r.useEffect((()=>{s&&(c(s.name),i(s.id))}),[s]),r.useEffect((()=>{(o||u)&&(x(),n({}),c(""),i(""))}),[o,u]),a.jsxs("form",{onSubmit:e=>{e.preventDefault();const a={id:l||"",name:d};t.promise(m(a).unwrap().then((e=>e.message)),{loading:"Menambahkan data...",success:e=>e,error:e=>e.data.message})},className:"rounded border p-2 d-flex flex-column gap-2 bg-white",children:[a.jsx("p",{className:"m-0 h6",children:"Tambah Juz"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Nama Juz",value:d||"",onChange:e=>c(e.target.value)}),a.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[a.jsx("button",{type:"button",className:"btn btn-sm btn-warning",onClick:()=>{n({}),c(""),i("")},children:"Batal"}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-success",disabled:h,children:"Simpan"})]})]})},h=({setDetail:e,juz:n,totalData:l,totalPages:i,page:d,setPage:m,limit:h,setLimit:o,setSearch:u,isLoading:x})=>{const[j,{isLoading:b}]=s(),g=(a,t)=>{const s={juz_id:t,surah_id:a.surah_id,id:a.id,surah:a.surah,from_ayat:a.from_ayat,to_ayat:a.to_ayat,lines:a.lines};e(s)};return a.jsx(c,{page:d,setPage:m,totalPages:i,totalData:l,limit:h,setLimit:o,setSearch:u,isLoading:x,children:a.jsxs("table",{className:"mb-0 table table-hover table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-center",children:"No"}),a.jsx("th",{className:"text-center",children:"Juz"}),a.jsx("th",{className:"text-center",children:"Surah"}),a.jsx("th",{className:"text-center",children:"Dari Ayat"}),a.jsx("th",{className:"text-center",children:"Sampai Ayat"}),a.jsx("th",{className:"text-center",children:"Baris"}),a.jsx("th",{className:"text-center",children:"Edit Surah"}),a.jsx("th",{className:"text-center",children:"Ayat"}),a.jsx("th",{className:"text-center",children:"Baris"}),a.jsx("th",{className:"text-center",children:"Aksi"})]})}),a.jsx("tbody",{children:null==n?void 0:n.map(((s,n)=>a.jsxs(r.Fragment,{children:[a.jsxs("tr",{children:[a.jsx("td",{rowSpan:s.surah.length||1,className:"text-center",children:(d-1)*h+n+1}),a.jsx("td",{rowSpan:s.surah.length||1,children:s.name}),s.surah.length>0?a.jsxs(a.Fragment,{children:[a.jsx("td",{className:"text-center align-middle",children:s.surah[0].surah}),a.jsx("td",{className:"text-center align-middle",children:s.surah[0].from_ayat}),a.jsx("td",{className:"text-center align-middle",children:s.surah[0].to_ayat}),a.jsx("td",{className:"text-center align-middle",children:s.surah[0].lines}),a.jsx("td",{className:"text-center align-middle",children:a.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>g(s.surah[0],s.id),children:a.jsx("i",{className:"bi bi-pencil-square"})})})]}):a.jsx("td",{colSpan:5,className:"text-center align-middle",children:"Data belum tersedia"}),a.jsx("td",{rowSpan:s.surah.length||1,className:"text-center",children:s.total_ayat}),a.jsx("td",{rowSpan:s.surah.length||1,className:"text-center",children:s.total_line}),a.jsx("td",{rowSpan:s.surah.length||1,className:"text-center",children:a.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[a.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>e(s),children:a.jsx("i",{className:"bi bi-pencil-square"})}),a.jsx("button",{className:"btn btn-sm btn-danger",disabled:b,onClick:()=>{return e=s.id,void t.promise(j(e).unwrap().then((e=>e.message)),{pending:"Menghapus data...",success:e=>e,error:e=>e.data.message});var e},children:a.jsx("i",{className:"bi bi-trash"})})]})})]}),s.surah.slice(1).map(((e,t)=>a.jsxs("tr",{children:[a.jsx("td",{className:"text-center align-middle",children:e.surah}),a.jsx("td",{className:"text-center align-middle",children:e.from_ayat}),a.jsx("td",{className:"text-center align-middle",children:e.to_ayat}),a.jsx("td",{className:"text-center align-middle",children:e.lines}),a.jsx("td",{className:"text-center align-middle",children:a.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>g(e,s.id),children:a.jsx("i",{className:"bi bi-pencil-square"})})})]},t)))]},n)))})]})})},o=({detail:e,setDetail:s})=>{const[d,c]=r.useState(""),[m,h]=r.useState(""),[o,u]=r.useState(""),[x,j]=r.useState(""),[b,g]=r.useState(""),[p,N]=r.useState(""),{data:f}=n({page:"",limit:"",search:""}),{data:v}=l({page:"",limit:"",search:""}),[S,{isLoading:y,isSuccess:_,isError:w,reset:D}]=i(),z=e=>{const a=null==v?void 0:v.find((a=>a.id===parseInt(e)));return a?Array.from({length:a.ayat},((e,a)=>a+1)):[]};return r.useEffect((()=>{e&&(c(e.id),h(e.juz_id),u(e.surah_id),j(e.from_ayat),g(e.to_ayat),N(e.lines||""))}),[e]),r.useEffect((()=>{(_||w)&&(D(),s({}),c(""),h(""),u(""),j(""),g(""),N(""))}),[_,w]),a.jsxs("form",{onSubmit:e=>{e.preventDefault();const a={id:d,juzId:m,surahId:o,fromAyat:x,toAyat:b,lines:p};t.promise(S(a).unwrap().then((e=>e.message)),{loading:"Menambahkan data...",success:e=>e,error:e=>e.data.message})},className:"mt-2 rounded border bg-white p-2 d-flex flex-column gap-2",children:[a.jsx("p",{className:"m-0 h6",children:"Tambah Surah"}),a.jsxs("select",{name:"juz",id:"juz",className:"form-select",required:!0,value:m,onChange:e=>h(e.target.value),children:[a.jsx("option",{value:"",hidden:!0,children:"Pilih Juz"}),null==f?void 0:f.map((e=>a.jsx("option",{value:e.id,children:e.name},e.id)))]}),a.jsxs("select",{name:"surah",id:"surah",className:"form-select",required:!0,value:o,onChange:e=>u(e.target.value),children:[a.jsx("option",{value:"",hidden:!0,children:"Pilih Surah"}),null==v?void 0:v.map((e=>a.jsx("option",{value:e.id,children:e.name},e.id)))]}),a.jsxs("select",{className:"form-select",value:x,onChange:e=>j(e.target.value),disabled:!o,children:[a.jsx("option",{value:"",hidden:!0,children:"Dari Ayat"}),z(o).map((e=>a.jsx("option",{value:e,children:e},e)))]}),a.jsxs("select",{className:"form-select",value:b,onChange:e=>g(e.target.value),disabled:!o,children:[a.jsx("option",{value:"",hidden:!0,children:"Sampai Ayat"}),z(o).map((e=>a.jsx("option",{value:e,children:e},e)))]}),a.jsx("input",{type:"number",name:"lines",id:"lines",placeholder:"Jumlah Baris",className:"form-control",value:p||"",onChange:e=>N(e.target.value),disabled:!o}),a.jsxs("div",{className:"text-end",children:[a.jsx("button",{type:"button",className:"btn btn-sm btn-warning me-2",onClick:s,children:"Batal"}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-success",disabled:y,children:"Simpan"})]})]})},u=()=>{const[e,t]=r.useState(1),[s,l]=r.useState(10),[i,c]=r.useState(""),[u,x]=r.useState({}),{data:j={},isLoading:b}=n({page:e,limit:s,search:i}),{juz:g=[],totalData:p,totalPages:N}=j;return a.jsx(d,{title:"Tahfiz - Daftar Juz",levels:["tahfiz"],children:a.jsxs("div",{className:"row g-2",children:[a.jsxs("div",{className:"col-lg-3 col-12",children:[a.jsx(m,{detail:u,setDetail:()=>x({})}),a.jsx(o,{detail:u,setDetail:()=>x({})})]}),a.jsx("div",{className:"col-lg-9 col-12",children:a.jsx(h,{setDetail:x,juz:g,totalData:p,totalPages:N,page:e,setPage:t,limit:s,setLimit:l,setSearch:c,isLoading:b})})]})})};export{u as default};
//# sourceMappingURL=TahfizJuz-a15EhSd_.js.map
